<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_Side_Nav___Swarm" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <!-- saved from url=(0016)http://localhost -->
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" /><title>Module overview</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/perforce.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.remove-highlight-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE.htc');
}

</style>
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script>/* <![CDATA[ */		/*The following script overrides topic title in browser tab*/
			document.title = "Helix Swarm Guide (2022.1)";
		/* ]]> */</script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 980px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="home-swarm.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div id="skin-heading-swarm"><span class="mc-variable Perforce.Manual_Title variable">Helix Swarm Guide</span> (<span class="mc-variable Perforce.VersionNumber variable">2022.1</span>)</div>
                                    <script src="../Resources/google-analytics/gtag.js">
                                    </script>
                                    <script type="text/javascript">/*<![CDATA[*/
			$(document).ready(function(){
			$("#skin-heading-swarm").appendTo("div.logo-wrapper"); 
			});
		/*]]>*/</script>
                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_Topic_Toolbar mc-component nocontent" style="mc-topic-toolbar-items: ExpandAll Print RemoveHighlight NextTopic PreviousTopic Forward Back;">
                                        <div class="button-group-container-left">
                                            <button class="button needs-pie print-button" title="Print this topic">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Print">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie previous-topic-button" title="Go to previous heading" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie next-topic-button" title="Go to next heading" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="nocontent">
                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                        </div>
                                    </div>
                                    <div class="sidenav-content">
                                        <div role="main" id="mc-main-content">
                                            <h1 data-mc-autonum=""><a name="Module_overview" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span>Module overview</h1>
                                            <div class="important admonition" data-mc-autonum="Important "><span class="autonumber"><span class="admonition">Important </span></span>
                                                <p>The operation and testing of custom modules is the responsibility of the module creator. &#160;<span class="mc-variable Perforce.Company_long variable">Perforce Software, Inc.</span> is not responsible for the operation of your custom modules, nor does <span class="mc-variable Perforce.Company_long variable">Perforce Software, Inc.</span> make any representations or warranties regarding the interoperability of your custom modules with <span class="mc-variable Perforce.Swarm_long variable">Helix Swarm</span>.</p>
                                            </div>
                                            <div class="tip admonition" data-mc-autonum="Tip "><span class="autonumber"><span class="admonition">Tip </span></span>
                                                <p>You must test your custom modules on a test system before transferring them to your production system.  This avoids any negative impact on the operation of your production system.  If you have more than one custom module, the modules should all be tested at the same time on the same test system as this ensures that the modules operate correctly with each other and with <span class="mc-variable Perforce.Swarm_long variable">Helix Swarm</span>. </p>
                                            </div>
                                            <div class="tip admonition" data-mc-autonum="Tip "><span class="autonumber"><span class="admonition">Tip </span></span>
                                                <p>If you add or edit a module, <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> will not use that change until the  config cache has been reloaded, this forces <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> to  use the module change. You must be an <i>admin</i> or <i>super</i> user to reload the <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> config cache. Navigate to the <b xmlns="http://docbook.org/ns/docbook">User id</b> dropdown menu, select <b xmlns="http://docbook.org/ns/docbook">System Information</b>, click the <b xmlns="http://docbook.org/ns/docbook">Cache Info</b> tab, and click the <a href="admin.system_information.html#admin_system_information_cache_info_reload_config" class="MCXref xref">Reload Configuration button</a>. </p>
                                            </div>
                                            <p>A <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> custom module is created in a folder in the <span class="code_clearBackground">modules</span> folder of your <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> installation. The folder name must match the custom module name and must contain at least a <span class="code_clearBackground">Module.php</span> file and a <span class="code_clearBackground">module.config.php</span> file. A custom module will not work in <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> until you enable it. Enable your custom modules in <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> by adding them to the <span class="code_clearBackground">custom.modules.config.php</span> file in the <span class="code_clearBackground">config</span> directory (a peer of the <span class="code_clearBackground">modules</span> directory). </p>
                                            <p>This chapter provides basic information about how custom modules integrate with <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> and assumes a basic knowledge of the Laminas framework. For more information about the Laminas framework, see <a href="https://docs.laminas.dev/laminas-mvc/quick-start/" target="_blank" title="Link to https://docs.laminas.dev/laminas-mvc/quick-start/ " alt="Link to https://docs.laminas.dev/laminas-mvc/quick-start/ ">Laminas Quick Start documentation</a>. </p>
                                            <p style="font-weight: bold;">This section includes: </p>
                                            <ul>
                                                <li><a href="#extending.modules.upgrade" class="MCXref xref">Migrate existing custom modules to the Laminas framework</a>
                                                </li>
                                                <li><a href="#extending.modules.influence" class="MCXref xref">Influence activity events, emails, etc.</a>
                                                </li>
                                                <li><a href="#Templates" class="MCXref xref">Templates</a>
                                                </li>
                                                <li><a href="#extending.modules.custom_module_file_locations" class="MCXref xref">Custom module file locations</a>
                                                </li>
                                                <li><a href="#extending.modules.indexcontrollers" class="MCXref xref">IndexControllers</a>
                                                </li>
                                                <li><a href="#extending.modules.view_helpers" class="MCXref xref">View helpers</a>
                                                </li>
                                                <li><a href="#extending.modules.event_listeners" class="MCXref xref">Event listeners</a>
                                                </li>
                                                <li><a href="#extending.modules.enabling_custom_modules" class="MCXref xref">Enabling your custom modules</a>
                                                </li>
                                                <li><a href="#extending.modules.further_reading" class="MCXref xref">Further reading</a> , includes links to example custom modules and the  official Laminas documentation</li>
                                            </ul>
                                            <h2 data-mc-autonum=""><a name="Migrate_existing_custom_modules_to_the_Laminas_framework" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.upgrade"></a>Migrate existing custom modules to the Laminas framework</h2>
                                            <p><span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2020.1 and later uses the Laminas framework, previous <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> versions used the Zend framework. The move to Laminas is part of our commitment to move away from using versions of platforms that have reached End-of-Life (EOL). </p>
                                            <p>If you have any custom <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> modules that were created for <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2019.3 or earlier, you must modify them so that they will work in <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2020.1 and later. The modifications required depend on the version of <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> you were using the custom modules with before your upgraded <span class="mc-variable Perforce.Swarm_short variable">Swarm</span>: </p>
                                            <ul>
                                                <li><a href="#extending.modules.custom_2019_migrate" class="MCXref xref">Custom modules on Swarm 2019.1, 2019.2, or  2019.3 </a>
                                                </li>
                                                <li><a href="#extending.modules.custom_2018_migrate" class="MCXref xref">Custom modules on Swarm 2018.3 and earlier</a>
                                                </li>
                                            </ul>
                                            <h3 data-mc-autonum=""><a name="Custom_modules_on_Swarm_2019.1,_2019.2,_or__2019.3" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.custom_2019_migrate"></a>Custom modules on <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2019.1, 2019.2, or  2019.3 </h3>
                                            <div class="note admonition" data-mc-autonum="Note "><span class="autonumber"><span class="admonition">Note </span></span>
                                                <p>Migrate your custom modules on a test system before transferring them to your production system.  This avoids any negative impact on the operation of your production system.  If you have more than one custom module, the modules should all be tested at the same time on the same test system as this ensures that the modules operate correctly with each other and with <span class="mc-variable Perforce.Swarm_long variable">Helix Swarm</span>. </p>
                                            </div>
                                            <p>Custom modules used with  <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2019.1, 2019.2, and 2019.3  use the Zend 3 framework, they must be migrated to the Laminas framework before they can be used with <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2020.1 and later: </p>
                                            <ol>
                                                <li value="1">Migrate your Zend 3 custom modules to the Laminas framework by pointing the Laminas migration tool at the folder you store your custom modules in. For the migration tool and full instructions on migrating your custom Zend 3 modules to Laminas, see <a href="https://docs.laminas.dev/migration/" target="_blank" title="Link to the Laminas migration tool documentation" alt="Link to the Laminas migration tool documentation">https://docs.laminas.dev/migration/</a>. </li>
                                                <li value="2"><span class="mc-variable Perforce.Swarm_short variable">Swarm</span> will not use the custom modules until the <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> config cache has been deleted. <MadCap:conditionalText data-mc-conditions="Perforce.Swarm">For instructions on deleting the config cache, see <a href="swarm-apidoc_endpoint_config_cache.html#swarm-apidoc-endpoint-config-cache_config-cache-delete" class="MCXref xref">Swarm config cache file delete</a>.</MadCap:conditionalText></li>
                                                <li value="3">Check that your custom modules work as expected before putting them on your production system. </li>
                                            </ol>
                                            <h3 data-mc-autonum=""><a name="Custom_modules_on_Swarm_2018.3_and_earlier" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.custom_2018_migrate"></a>Custom modules on <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2018.3 and earlier</h3>
                                            <div class="note admonition" data-mc-autonum="Note "><span class="autonumber"><span class="admonition">Note </span></span>
                                                <p>Update and migrate your custom modules on a test system before transferring them to your production system.  This avoids any negative impact on the operation of your production system.  If you have more than one custom module, the modules should all be tested at the same time on the same test system as this ensures that the modules operate correctly with each other and with <span class="mc-variable Perforce.Swarm_long variable">Helix Swarm</span>. </p>
                                            </div>
                                            <p>Custom modules used with <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2018.3 and earlier use the Zend 2 framework, they must be migrated to the Laminas framework before they can be used with <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> 2020.1 and later: </p>
                                            <ol>
                                                <li value="1">Convert your Zend 2 custom modules to the Zend 3 framework, see <a href="https://www.perforce.com/manuals/v19.3/swarm/Content/Swarm/extending-custom_module_upgrade.html" target="_blank" title="Link to Upgrade custom modules to work with Zend 3 in the Swarm User Guide (2019.3) " alt="Link to Upgrade custom modules to work with Zend 3 in the Swarm User Guide (2019.3) ">Upgrade custom modules to work with Zend 3</a>. </li>
                                                <p>
                                                    <div class="tip admonition" data-mc-autonum="Tip "><span class="autonumber"><span class="admonition">Tip </span></span>
                                                        <p>Laminas is based on the Zend 3 framework, this makes it is relatively simple to convert your Zend 3 custom modules to the Laminas framework: </p>
                                                        <ul>
                                                            <li>If you only have one or two custom modules, you can manually change all of the <span class="code_clearBackground">Zend</span> references in your modules to <span class="code_clearBackground">Laminas</span> while you are converting them from Zend 2. This means you can skip the Laminas  migration step. </li>
                                                            <li>If you have a larger number of custom modules, it is probably quicker to automatically change all of the references in your custom modules by running the Laminas migration tool as described in the next step. </li>
                                                        </ul>
                                                    </div>
                                                </p>
                                                <li value="2">Migrate your Zend 3 custom modules to the Laminas framework by pointing the Laminas migration tool at the folder you store your custom modules in. For the migration tool and full instructions on migrating your custom Zend 3 modules to Laminas, see <a href="https://docs.laminas.dev/migration/" target="_blank" title="Link to the Laminas migration tool documentation" alt="Link to the Laminas migration tool documentation">https://docs.laminas.dev/migration/</a>. </li>
                                                <li value="3"><span class="mc-variable Perforce.Swarm_short variable">Swarm</span> will not use the custom modules until the <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> config cache has been deleted. <MadCap:conditionalText data-mc-conditions="Perforce.Swarm">For instructions on deleting the config cache, see <a href="swarm-apidoc_endpoint_config_cache.html#swarm-apidoc-endpoint-config-cache_config-cache-delete" class="MCXref xref">Swarm config cache file delete</a>.</MadCap:conditionalText></li>
                                                <li value="4">Check that your custom modules work as expected before putting them on your production system. </li>
                                            </ol>
                                            <h2 data-mc-autonum=""><a name="Influence_activity_events,_emails,_etc." data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.influence"></a>Influence activity events, emails, etc.</h2>
                                            <p>When something happens in <span class="mc-variable Perforce.Helix_short variable">Helix server</span> (change submitted, files shelved, job added/edited), or state changes within <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> (comment added, review state changed, etc.), the event is pushed onto the <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> task queue. A background worker process pulls events off of the queue and publishes an event alerting modules about activity they may be interested in processing. This architecture allows the <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> user interface to be fairly quick while accommodating tasks that might require notable processing time, or need to wait for related information to become available.</p>
                                            <p>Subscribers to the worker event flesh the item out (fetch the change/job details, for example) and indicate if it should result in an activity entry, email notification, etc. By subscribing to various event topics, your custom module can pay attention to specific types of events. While your custom module is processing an event, it can modify the text of activity events, change the contents of emails, drop things entirely from activity, etc.</p>
                                            <p>When your custom module subscribes to an event, set the priority to influence how early or late in the process it runs. You will likely want your module to run after most other modules have done their work to flesh out the event, but before <span class="mc-variable Perforce.Swarm_short variable">Swarm</span>'s events module processes it. The events module is a good example of subscribing to these events:</p>
                                            <p><span class="code"><i>swarm_install</i>/module/Events/config/module.config.php</span>
                                            </p>
                                            <div class="tip admonition" data-mc-autonum="Tip "><span class="autonumber"><span class="admonition">Tip </span></span>
                                                <p>Note that its priority is set to <span class="code_clearBackground">-100</span>. Select a value before that for your own module (for example, <span class="code_clearBackground">0</span> would be neutral and <span class="code_clearBackground">-90</span> would indicate that you are interested in being last).</p>
                                                <p>Event priority is from the highest positive number to the lowest negative number with <span class="code_clearBackground">0</span> in the middle. For a full list of tasks and their event priorities, see <a href="extending.modules.task.detail.html" class="MCXref xref">Task details</a>. </p>
                                            </div>
                                            <h3 data-mc-autonum=""><a name="Task_types" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.task_types"></a>Task types</h3>
                                            <p>For details of each of the following tasks, see <a href="extending.modules.task.detail.html" class="MCXref xref">Task details</a>.</p>
                                            <ul>
                                                <li><span class="code_clearBackground">task.commit</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.shelve</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.review</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.change</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.mail</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.cleanup.attachment</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.cleanup.archive</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.shelvedel</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.changesave</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.changesaved</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.comment</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.comment.batch</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.commentSendDelay</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.group</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.groupdel</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.job</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.user</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.userdel</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.workflow.created</span>
                                                </li>
                                                <li><span class="code_clearBackground">task.workflow.updated</span>
                                                </li>
                                            </ul>
                                            <h2 data-mc-autonum=""><a name="Templates" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="Templates"></a>Templates</h2>
                                            <p>Override existing view templates using your custom module. Have a look at this <a href="extending.example_email.html">example module</a> that demonstrates how to customize the email templates <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> uses for comment notifications.</p>
                                            <p>For more information about views, see the <a href="https://docs.laminas.dev/laminas-view/" target="_blank" title="Link to https://docs.laminas.dev/laminas-view/" alt="Link to https://docs.laminas.dev/laminas-view/">Laminas-View Quick Start</a>.</p>
                                            <div class="note admonition" data-mc-autonum="Note "><span class="autonumber"><span class="admonition">Note </span></span>
                                                <p><span class="mc-variable Perforce.Swarm_short variable">Swarm</span> supports the Laminas component versions in the <span class="code_clearBackground">LICENSE.txt</span> file, features and functions in the Laminas documentation that were introduced in later versions of Laminas will not work with <span class="mc-variable Perforce.Swarm_short variable">Swarm</span>. The <span class="code_clearBackground">LICENSE.txt</span> file is in the <span class="code_clearBackground">readme</span> folder of your <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> installation.</p>
                                            </div>
                                            <h2 data-mc-autonum=""><a name="Custom_module_file_locations" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.custom_module_file_locations"></a>Custom module file locations</h2>
                                            <p style="font-weight: normal;">The custom module files must be stored using the PSR-4 standard locations shown below: </p><pre class="programlisting">
config/
      custom.modules.config.php (required)
module/
      ModuleName/ (required)
                config/ (required)
                      module.config.php (required)
                src/ (php files here, required)
                   Controller/
                             MyIndexController.php
                Listener/ (optional)
                        MyListener.php (optional)
                   ...
                   other directories (non-php files here, optional)
                   ...  
                Module.php (required)
</pre>
                                            <h2 data-mc-autonum=""><a name="IndexControllers" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.indexcontrollers"></a>IndexControllers</h2>
                                            <p>Create your <span class="code_clearBackground">IndexControllers</span> using factories. The <span class="code_clearBackground">IndexControllers</span> should extend <span class="code_clearBackground">Application\Controller\AbstractIndexController</span> and use the <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> <span class="code_clearBackground">IndexControllerFactory</span>, this means that the <span class="code_clearBackground">IndexControllerFactory</span> can automatically inject the services .</p>
                                            <div class="tip admonition" data-mc-autonum="Tip "><span class="autonumber"><span class="admonition">Tip </span></span>
                                                <p>We recommend you follow the <span class="code">::class </span>description to avoid errors in string representation. </p>
                                            </div><pre class="programlisting" lang="php" xml:space="preserve">
'controllers' =&gt; array(
    'factories' =&gt; [
        MyModuleName\Controller\IndexController::class =&gt; Application\Controller\IndexControllerFactory::class,
    ],
),
</pre>
                                            <h2 data-mc-autonum=""><a name="View_helpers" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.view_helpers"></a>View helpers</h2>
                                            <p>Create your view helpers using factories. The factories that create the view helpers must inject any services that are required. </p>
                                            <div class="tip admonition" data-mc-autonum="Tip "><span class="autonumber"><span class="admonition">Tip </span></span>
                                                <p>We recommend using <span class="code_clearBackground">::class</span> rather than arbitrary strings as this can limit the possibility of errors. The use of classes also makes your factory simpler because reflection can be used to construct the helpers if they all extend a common parent class.</p>
                                            </div><pre class="programlisting" lang="php" xml:space="preserve">
'view_helpers' =&gt; array(
        'factories' =&gt; array_fill_keys(
            [
                MyModuleName\View\Helper\Helper1::class,
                MyModuleName\View\Helper\Helper2::class,
            ],
            &lt;YourHelperFactory&gt;::class
        )
    )
</pre>
                                            <h3 data-mc-autonum=""><a name="Set_options_on_existing_helpers" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.view_helpers.options"></a>Set options on existing helpers</h3>
                                            <p>It is possible to influence the behavior of existing view helpers by setting options on them; for an example see: <code class="code_clearBackground"><a href="admin.swarm_root.html"><i>swarm_install</i></a>/module/Application/Module.php</code>.</p>
                                            <h3 data-mc-autonum=""><a name="Register_new_helpers" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.view_helpers.register"></a>Register new helpers</h3>
                                            <p>It is also possible to register new view helpers by placing them within your module's hierarchy, for example, <code class="code_clearBackground">MyModule/src/View/Helper/Foo.php</code>. Use the following <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> view helper for inspiration: <code class="code_clearBackground"><i>swarm_install</i>/module/Activity/src/View/Helper/Activity.php</code>.</p>
                                            <p>Then register your view helper with the view manager via your <span class="code_clearBackground">ModuleConfig</span>: <code class="code_clearBackground"><i>swarm_root</i>/module/Activity/config/module.config.php</code>.</p>
                                            <h2 data-mc-autonum=""><a name="Event_listeners" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.event_listeners"></a>Event listeners</h2>
                                            <p>Your event listeners should extend <span class="code_clearBackground">Events\Listener\AbstractEventListener</span>. This means that the <span class="code_clearBackground">ListenerFactory</span> can create them without you having to write your own factory. </p>
                                            <p>The <span class="code_clearBackground">Listener.php</span> file contains the implementation of your event listener and the <span class="code_clearBackground">module.config.php</span> file configures your event listeners. </p>
                                            <div class="tip admonition" data-mc-autonum="Tip "><span class="autonumber"><span class="admonition">Tip </span></span>
                                                <ul>
                                                    <li>Look at the code in the <span class="code_clearBackground">AbstractEventListener.php</span> file in <span class="code_clearBackground">module/events/src/Listener</span> to see the functions that are available to you. </li>
                                                    <li>We strongly recommend that you create your event listeners to use the declarative model because it has a number of advantages over the non-declarative model: <ul><li><span class="code_clearBackground">AbstractEventListener</span> provides common code for listeners to use
</li><li>The declarative model offers better debug options (logging)
</li><li>The declarative model is neater, easier to read, easier to support, and easier to maintain</li></ul></li>
                                                </ul>
                                            </div>
                                            <p style="font-weight: bold;">Example  module.config.php file that uses the declarative model for event listeners: </p>
                                            <div class="tip admonition" data-mc-autonum="Tip "><span class="autonumber"><span class="admonition">Tip </span></span>
                                                <p><span class="code_clearBackground">Listener::class</span> example details: </p>
                                                <ul>
                                                    <li><span class="code_clearBackground">Events\Listener\ListenerFactory::ALL =&gt; [</span>
                                                    </li>
                                                    <p>We are listening to <span class="code_clearBackground">ALL</span> here for convenience because we are listening for mail events but this means it will trigger on every event. Usually is better to just listen for the events you are interested in. For example, if you are interested in commits and shelves you would listen on <span class="code_clearBackground">COMMIT</span> and <span class="code_clearBackground">SHELVE</span> events. </p>
                                                    <li><span class="code_clearBackground">Events\Listener\ListenerFactory::PRIORITY =&gt; -199,</span>
                                                    </li>
                                                    <p>Declares an event priority of <span class="code_clearBackground">-199</span> for the event listener because email delivery events are processed with a priority of <span class="code_clearBackground">-200</span> and the example event needs to run just before the email delivery event. </p>
                                                    <li><span class="code_clearBackground">Events\Listener\ListenerFactory::CALLBACK =&gt; 'handleEmail',</span>
                                                    </li>
                                                    <p>Declares the function name within the listener class that is called.</p>
                                                    <li><span class="code_clearBackground">Events\Listener\ListenerFactory::MANAGER_CONTEXT =&gt; 'queue'</span>
                                                    </li>
                                                    <p>Triggers your custom listener  when <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> processes the <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> event queue.</p>
                                                </ul>
                                            </div><pre class="programlisting" lang="php" xml:space="preserve">&lt;?php
/**
 * Perforce Swarm
 *
 * @copyright   2019 Perforce Software. All rights reserved.
 * @license     Please see LICENSE.txt in top-level folder of this distribution.
 * @version     &lt;release&gt;/&lt;patch&gt;
*/

$listeners = [EmailExample\Listener\Listener::class];
return [
    'listeners' =&gt; $listeners,
    'service_manager' =&gt;[
        'factories' =&gt; array_fill_keys(
            $listeners,
            Events\Listener\ListenerFactory::class
        )
    ],
    Events\Listener\ListenerFactory::EVENT_LISTENER_CONFIG =&gt; [ 
        Events\Listener\ListenerFactory::ALL =&gt; [
            EmailExample\Listener\Listener::class =&gt; [
                [
                    Events\Listener\ListenerFactory::PRIORITY =&gt; -199,
                    Events\Listener\ListenerFactory::CALLBACK =&gt; 'handleEmail',
                    Events\Listener\ListenerFactory::MANAGER_CONTEXT =&gt; 'queue'
                ]
            ]
        ]
    ]
];		</pre>
                                            <p style="font-weight: bold;">Example of an email Listener.php file: </p><pre class="programlisting" lang="php" xml:space="preserve">
namespace MyModuleName\Listener;

use Events\Listener\AbstractEventListener;
use Laminas\EventManager\Event;

class Listener extends AbstractEventListener
{
    public function handleEmail(Event $event)
    {
        $mail = $event-&gt;getParam('mail');
        if (!$mail || !isset($mail['htmlTemplate'], $mail['textTemplate'])) {
            return;			
        }
    }
}</pre>
                                            <h2 data-mc-autonum=""><a name="Enabling_your_custom_modules" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.enabling_custom_modules"></a>Enabling your custom modules</h2>
                                            <p><span class="mc-variable Perforce.Swarm_short variable">Swarm</span> uses the <span class="code_clearBackground">custom.modules.config.php</span> file to check which custom modules it should load. This gives you control over which modules <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> loads and prevents modules from being loaded by mistake.</p>
                                            <p>Create the <span class="code_clearBackground">custom.modules.config.php</span> file in the <code class="code_clearBackground">config</code> directory (a peer of the <span class="code_clearBackground">modules</span> directory) if it does not already exist. Edit the file so that it contains the following details for  each of your modules:</p>
                                            <ul>
                                                <li><span class="code_clearBackground">namespaces</span> array: enter your custom module names and paths</li>
                                                <li><span class="code_clearBackground">return</span> array : enter your custom module names </li>
                                            </ul>
                                            <p>For example, if you have three modules called <span class="code_clearBackground">MyModuleName</span>, <span class="code_clearBackground">AnotherModuleName</span>, and <span class="code_clearBackground">NewModuleName</span> the file content would look similar to:</p><pre class="programlisting" lang="php" xml:space="preserve">&lt;?php
\Laminas\Loader\AutoloaderFactory::factory(
    array(
        'Laminas\Loader\StandardAutoloader' =&gt; array(
            'namespaces' =&gt; array(
                'MyModuleName'       =&gt; BASE_PATH . '/module/MyModuleName/src',
                'AnotherModuleName'  =&gt; BASE_PATH . '/module/AnotherModuleName/src',
                'NewModuleName'      =&gt; BASE_PATH . '/module/NewModuleName/src',
            )
        )
    )
);
return [
    'MyModuleName',
    'AnotherModuleName',
    'NewModuleName',
];
</pre>
                                            <h2 data-mc-autonum=""><a name="Further_reading" data-mc-generated-bookmark="TOC"></a><span class="autonumber"><span></span></span><a name="extending.modules.further_reading"></a>Further reading</h2>
                                            <p>For detailed information about the Laminas framework and examples see the following:</p>
                                            <ul>
                                                <li>The <a href="https://docs.laminas.dev/laminas-mvc/quick-start/" target="_blank" title="Link to https://docs.laminas.dev/laminas-mvc/quick-start/ " alt="Link to https://docs.laminas.dev/laminas-mvc/quick-start/ ">Laminas Quick Start documentation</a> and <a href="https://docs.laminas.dev/mvc/" target="_blank" title="Link to https://docs.laminas.dev/mvc/ " alt="Link to https://docs.laminas.dev/mvc/ ">Laminas framework documentation portal</a>, it is useful to have a basic knowledge of the Laminas framework before you create your own modules. . </li>
                                                <div class="note admonition" data-mc-autonum="Note "><span class="autonumber"><span class="admonition">Note </span></span>
                                                    <p><span class="mc-variable Perforce.Swarm_short variable">Swarm</span> supports the Laminas component versions in the <span class="code_clearBackground">LICENSE.txt</span> file, features and functions in the Laminas documentation that were introduced in later versions of Laminas will not work with <span class="mc-variable Perforce.Swarm_short variable">Swarm</span>. The <span class="code_clearBackground">LICENSE.txt</span> file is in the <span class="code_clearBackground">readme</span> folder of your <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> installation.</p>
                                                </div>
                                                <li><a href="extending.example_linkify.html" class="MCXref xref">Example linkify module</a>, a simple custom module that replaces a specific piece of text with a link for changelists, jobs, code review descriptions, comments, and activity entries.</li>
                                                <li><a href="extending.example_email.html" class="MCXref xref">Example email module</a>, a simple custom module that makes <span class="mc-variable Perforce.Swarm_short variable">Swarm</span> use a custom email template when it sends out when a comment notification is sent out. </li>
                                                <li><span class="mc-variable Perforce.Swarm_short variable">Swarm</span> JIRA module,  a simple module implementation within <span class="mc-variable Perforce.Swarm_short variable">Swarm</span>: <span class="code"><i>swarm_install</i>/module/Jira</span></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <p class="invisible"><a href="../Shared/SearchTips-swarm.html" class="MCXref xref">Your search for  returned  result(s).</a>
                                    </p>
                                    <p class="invisible"><span class="invisible"><link href="../Resources/Fonts/OpenSans-Regular.ttf" /><link href="../Resources/Fonts/OpenSans-Bold.ttf" /><link href="../Resources/Fonts/OpenSans-BoldItalic.ttf" /><link href="../Resources/Fonts/OpenSans-Italic.ttf" /><link href="../Resources/Fonts/cour.ttf" /><link href="../Resources/Fonts/courbd.ttf" /><link href="../Resources/Fonts/courbi.ttf" /><link href="../Resources/Fonts/couri.ttf" /></span>
                                    </p>
                                    <div class="home-footer">
                                        <div><a href="https://www.perforce.com/support/documentation" target="_blank"><img src="../Resources/FooterImages/Docs_28x28.png" title="View additional product documentation" alt="Additional product documentation" class="FooterIcon" style="width: 28;height: 28;" /></a>
                                        </div>
                                        <div><a href="https://www.perforce.com/support/training" target="_blank"><img src="../Resources/FooterImages/training_28x28.png" title="Visit the Perforce Training portal" alt="Perforce training portal" class="FooterIcon" style="width: 28;height: 28;" /></a>
                                        </div>
                                        <div><a href="https://www.perforce.com/support/video-tutorials" target="_blank"><img src="../Resources/FooterImages/video-tutorials_28x28.png" title="Visit the Perforce video library" alt="Perforce video library" class="FooterIcon" style="width: 28;height: 28;" /></a>
                                        </div>
                                        <div><a href="https://community.perforce.com/s/" target="_blank"><img src="../Resources/FooterImages/KB_28x28.png" title="Visit the Perforce knowledge base" alt=" Perforce knowledge base" class="FooterIcon" style="width: 28;height: 28;" /></a>
                                        </div>
                                        <div><a href="https://www.perforce.com/support" target="_blank"><img src="../Resources/FooterImages/Support_28x28.png" title="Go to Perforce customer support" alt="Perforce customer support" class="FooterIcon" style="width: 28;height: 28;" /></a>
                                        </div>
                                        <div><a href="mailto:manual@perforce.com?subject=Documentation feedback" target="_blank"><img src="../Resources/FooterImages/feedback_28x28.png" title="How can we improve this topic?" alt="Email us at: manual@perforce.com" class="FooterIcon" style="width: 28;height: 28;" /></a>
                                        </div>
                                        <div><a href="http://www.perforce.com/" target="_blank"><img src="../Resources/FooterImages/Perforce-LOGO-WHITE_150x17.png" style="width: 150;height: 17;" alt="" /></a>
                                        </div>
                                    </div>
                                    <script type="text/javascript" src="../Resources/google-code-prettify/prettify.js">
                                    </script>
                                    <script type="text/javascript">/* <![CDATA[ */
    // hookup prettify
    $("pre.programlisting").each(function () {
      var $this = $(this),
          lang = $this.attr("lang");
      if (lang) {
        $this.addClass("lang-" + lang);
       // if (lang !== "bash") 
		// {
        $this.addClass("prettyprint");
        //}
      }
    });
    window.prettyPrint();
    /* ]]> */</script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>