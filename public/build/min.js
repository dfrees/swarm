/*! jQuery v3.2.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){b=b||d;var c=b.createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.2.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(r.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a))&&(!(b=e(a))||(c=l.call(b,"constructor")&&b.constructor,"function"==typeof c&&m.call(c)===n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},each:function(a,b){var c,d=0;if(w(a)){for(c=a.length;d<c;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;f<g;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)e=b(a[f],f,c),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,c),null!=e&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),e=function(){return a.apply(b||this,d.concat(f.call(arguments)))},e.guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a)}var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return a.disabled===!0&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),o=g(a),h=o.length;while(h--)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if(c=f.getAttributeNode("id"),c&&c.value===a)return[f];e=b.getElementsByName(a),d=0;while(f=e[d++])if(c=f.getAttributeNode("id"),c&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){if("undefined"!=typeof b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(O," ")+" ").indexOf(c)>-1:"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=I(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){while(b=b[d])if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){while(b=b[d])if((1===b.nodeType||g)&&a(b,c,i))return!0}else while(b=b[d])if(1===b.nodeType||g)if(l=b[u]||(b[u]={}),k=l[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if(k[f]=m,m[2]=a(b,c,i))return!0}return!1}}function ua(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function va(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||va(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=wa(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?I(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return I(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;e<f;e++)if(d.relative[a[e].type])break;return xa(i>1&&ua(m),i>1&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=ya(b[c]),f[u]?d.push(f):e.push(f);f=A(a,za(e,d)),f.selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(i=n[0]=n[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0],!b)return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}f=V.needsContext.test(a)?0:i.length;while(f--){if(j=i[f],d.relative[k=j.type])break;if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),a=e.length&&sa(i),!a)return G.apply(c,e),c;break}}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext;function B(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}var C=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,D=/^.[^:#\[\.,]*$/;function E(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return i.call(b,a)>-1!==c}):D.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return i.call(b,a)>-1!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return d>1?r.uniqueSort(c):c},filter:function(a){return this.pushStack(E(this,a||[],!1))},not:function(a){return this.pushStack(E(this,a||[],!0))},is:function(a){return!!E(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var F,G=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,H=r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||F,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:G.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),C.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this)};H.prototype=r.fn,F=r(d);var I=/^(?:parents|prev(?:Until|All))/,J={children:!0,contents:!0,next:!0,prev:!0};r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function K(a,b){while((a=a[b])&&1!==a.nodeType);return a}r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return K(a,"nextSibling")},prev:function(a){return K(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return B(a,"iframe")?a.contentDocument:(B(a,"template")&&(a=a.content||a),r.merge([],a.childNodes))}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),this.length>1&&(J[a]||r.uniqueSort(e),I.test(a)&&e.reverse()),this.pushStack(e)}});var L=/[^\x20\t\r\n\f]+/g;function M(a){var b={};return r.each(a.match(L)||[],function(a,c){b[c]=!0}),b}r.Callbacks=function(a){a="string"==typeof a?M(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=e||a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){var c;while((c=r.inArray(b,f,c))>-1)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?r.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j};function N(a){return a}function O(a){throw a}function P(a,b,c,d){var e;try{a&&r.isFunction(e=a.promise)?e.call(a).done(b).fail(c):a&&r.isFunction(e=a.then)?e.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(a){c.apply(void 0,[a])}}r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if(a=d.apply(h,i),a===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,N,e),g(f,c,O,e)):(f++,j.call(a,g(f,c,N,e),g(f,c,O,e),g(f,c,N,c.notifyWith))):(d!==N&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),b+1>=f&&(d!==O&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:N,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:N)),c[2][3].add(g(0,a,r.isFunction(d)?d:O))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=arguments.length>1?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(P(a,g.done(h(c)).resolve,g.reject,!b),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();while(c--)P(e[c],h(c),g.reject);return g.promise()}});var Q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&Q.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var R=r.Deferred();r.fn.ready=function(a){return R.then(a)["catch"](function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,ready:function(a){(a===!0?--r.readyWait:r.isReady)||(r.isReady=!0,a!==!0&&--r.readyWait>0||R.resolveWith(d,[r]))}}),r.ready.then=R.then;function S(){d.removeEventListener("DOMContentLoaded",S),
a.removeEventListener("load",S),r.ready()}"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",S),a.addEventListener("load",S));var T=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c)){e=!0;for(h in c)T(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},U=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function V(){this.expando=r.expando+V.uid++}V.uid=1,V.prototype={cache:function(a){var b=a[this.expando];return b||(b={},U(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){Array.isArray(b)?b=b.map(r.camelCase):(b=r.camelCase(b),b=b in d?[b]:b.match(L)||[]),c=b.length;while(c--)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var W=new V,X=new V,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function $(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:Y.test(a)?JSON.parse(a):a)}function _(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Z,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c=$(c)}catch(e){}X.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return X.hasData(a)||W.hasData(a)},data:function(a,b,c){return X.access(a,b,c)},removeData:function(a,b){X.remove(a,b)},_data:function(a,b,c){return W.access(a,b,c)},_removeData:function(a,b){W.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=X.get(f),1===f.nodeType&&!W.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=r.camelCase(d.slice(5)),_(f,d,e[d])));W.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){X.set(this,a)}):T(this,function(b){var c;if(f&&void 0===b){if(c=X.get(f,a),void 0!==c)return c;if(c=_(f,a),void 0!==c)return c}else this.each(function(){X.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){X.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=W.get(a,b),c&&(!d||Array.isArray(c)?d=W.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b),g=function(){r.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return W.get(a,c)||W.access(a,c,{empty:r.Callbacks("once memory").add(function(){W.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=W.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ba=new RegExp("^(?:([+-])=|)("+aa+")([a-z%]*)$","i"),ca=["Top","Right","Bottom","Left"],da=function(a,b){return a=b||a,"none"===a.style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},ea=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};function fa(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&ba.exec(r.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,r.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var ga={};function ha(a){var b,c=a.ownerDocument,d=a.nodeName,e=ga[d];return e?e:(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),ga[d]=e,e)}function ia(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)d=a[f],d.style&&(c=d.style.display,b?("none"===c&&(e[f]=W.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&da(d)&&(e[f]=ha(d))):"none"!==c&&(e[f]="none",W.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ia(this,!0)},hide:function(){return ia(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){da(this)?r(this).show():r(this).hide()})}});var ja=/^(?:checkbox|radio)$/i,ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,la=/^$|\/(?:java|ecma)script/i,ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.optgroup=ma.option,ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead,ma.th=ma.td;function na(a,b){var c;return c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&B(a,b)?r.merge([a],c):c}function oa(a,b){for(var c=0,d=a.length;c<d;c++)W.set(a[c],"globalEval",!b||W.get(b[c],"globalEval"))}var pa=/<|&#?\w+;/;function qa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if(f=a[n],f||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(pa.test(f)){g=g||l.appendChild(b.createElement("div")),h=(ka.exec(f)||["",""])[1].toLowerCase(),i=ma[h]||ma._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;r.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",n=0;while(f=m[n++])if(d&&r.inArray(f,d)>-1)e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=na(l.appendChild(f),"script"),j&&oa(g),c){k=0;while(f=g[k++])la.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ra=d.documentElement,sa=/^key/,ta=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ua=/^([^.]*)(?:\.(.+)|)/;function va(){return!0}function wa(){return!1}function xa(){try{return d.activeElement}catch(a){}}function ya(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ya(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=wa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return r().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.get(a);if(q){c.handler&&(f=c,c=f.handler,e=f.selector),e&&r.find.matchesSelector(ra,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return"undefined"!=typeof r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(L)||[""],j=b.length;while(j--)h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=W.hasData(a)&&W.get(a);if(q&&(i=q.events)){b=(b||"").match(L)||[""],j=b.length;while(j--)if(h=ua.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){l=r.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&W.remove(a,"handle events")}},dispatch:function(a){var b=r.event.fix(a),c,d,e,f,g,h,i=new Array(arguments.length),j=(W.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,b)!==!1){h=r.event.handlers.call(this,b,j),c=0;while((f=h[c++])&&!b.isPropagationStopped()){b.currentTarget=f.elem,d=0;while((g=f.handlers[d++])&&!b.isImmediatePropagationStopped())b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&a.button>=1))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||j.disabled!==!0)){for(f=[],g={},c=0;c<i;c++)d=b[c],e=d.selector+" ",void 0===g[e]&&(g[e]=d.needsContext?r(e,this).index(j)>-1:r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==xa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===xa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&B(this,"input"))return this.click(),!1},_default:function(a){return B(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?va:wa,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:wa,isPropagationStopped:wa,isImmediatePropagationStopped:wa,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=va,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=va,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=va,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&sa.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&ta.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||r.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return ya(this,a,b,c,d)},one:function(a,b,c,d){return ya(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=wa),this.each(function(){r.event.remove(this,a,c,b)})}});var za=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Aa=/<script|<style|<link/i,Ba=/checked\s*(?:[^=]|=\s*.checked.)/i,Ca=/^true\/(.*)/,Da=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ea(a,b){return B(a,"table")&&B(11!==b.nodeType?b:b.firstChild,"tr")?r(">tbody",a)[0]||a:a}function Fa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Ga(a){var b=Ca.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ha(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(W.hasData(a)&&(f=W.access(a),g=W.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c])}X.hasData(a)&&(h=X.access(a),i=r.extend({},h),X.set(b,i))}}function Ia(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ja.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ja(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||m>1&&"string"==typeof q&&!o.checkClone&&Ba.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ja(f,b,c,d)});if(m&&(e=qa(b,a[0].ownerDocument,!1,a,d),f=e.firstChild,1===e.childNodes.length&&(e=f),f||d)){for(h=r.map(na(e,"script"),Fa),i=h.length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,na(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Ga),l=0;l<i;l++)j=h[l],la.test(j.type||"")&&!W.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Da,""),k))}return a}function Ka(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(na(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&oa(na(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(za,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=na(h),f=na(a),d=0,e=f.length;d<e;d++)Ia(f[d],g[d]);if(b)if(c)for(f=f||na(a),g=g||na(h),d=0,e=f.length;d<e;d++)Ha(f[d],g[d]);else Ha(a,h);return g=na(h,"script"),g.length>0&&oa(g,!i&&na(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(U(c)){if(b=c[W.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[W.expando]=void 0}c[X.expando]&&(c[X.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ka(this,a,!0)},remove:function(a){return Ka(this,a)},text:function(a){return T(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.appendChild(a)}})},prepend:function(){return Ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ea(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(na(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return T(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Aa.test(a)&&!ma[(ka.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(r.cleanData(na(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ja(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(na(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var La=/^margin/,Ma=new RegExp("^("+aa+")(?!px)[a-z%]+$","i"),Na=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",ra.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,ra.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();function Oa(a,b,c){var d,e,f,g,h=a.style;return c=c||Na(a),c&&(g=c.getPropertyValue(b)||c[b],""!==g||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&Ma.test(g)&&La.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Pa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Qa=/^(none|table(?!-c[ea]).+)/,Ra=/^--/,Sa={position:"absolute",visibility:"hidden",display:"block"},Ta={letterSpacing:"0",fontWeight:"400"},Ua=["Webkit","Moz","ms"],Va=d.createElement("div").style;function Wa(a){if(a in Va)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ua.length;while(c--)if(a=Ua[c]+b,a in Va)return a}function Xa(a){var b=r.cssProps[a];return b||(b=r.cssProps[a]=Wa(a)||a),b}function Ya(a,b,c){var d=ba.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Za(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ca[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ca[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ca[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ca[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ca[f]+"Width",!0,e)));return g}function $a(a,b,c){var d,e=Na(a),f=Oa(a,b,e),g="border-box"===r.css(a,"boxSizing",!1,e);return Ma.test(f)?f:(d=g&&(o.boxSizingReliable()||f===a.style[b]),"auto"===f&&(f=a["offset"+b[0].toUpperCase()+b.slice(1)]),f=parseFloat(f)||0,f+Za(a,b,c||(g?"border":"content"),d,e)+"px")}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Oa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=Ra.test(b),j=a.style;return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:j[b]:(f=typeof c,"string"===f&&(e=ba.exec(c))&&e[1]&&(c=fa(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(j[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i?j.setProperty(b,c):j[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b),i=Ra.test(b);return i||(b=Xa(h)),g=r.cssHooks[b]||r.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Oa(a,b,d)),"normal"===e&&b in Ta&&(e=Ta[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Qa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?$a(a,b,d):ea(a,Sa,function(){return $a(a,b,d)})},set:function(a,c,d){var e,f=d&&Na(a),g=d&&Za(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=ba.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Ya(a,c,g)}}}),r.cssHooks.marginLeft=Pa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Oa(a,"marginLeft"))||a.getBoundingClientRect().left-ea(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ca[d]+b]=f[d]||f[d-2]||f[0];return e}},La.test(a)||(r.cssHooks[a+b].set=Ya)}),r.fn.extend({css:function(a,b){return T(this,function(a,b,c){var d,e,f={},g=0;if(Array.isArray(b)){for(d=Na(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,arguments.length>1)}});function _a(a,b,c,d,e){return new _a.prototype.init(a,b,c,d,e)}r.Tween=_a,_a.prototype={constructor:_a,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=_a.propHooks[this.prop];return a&&a.get?a.get(this):_a.propHooks._default.get(this)},run:function(a){var b,c=_a.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):_a.propHooks._default.set(this),this}},_a.prototype.init.prototype=_a.prototype,_a.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}},_a.propHooks.scrollTop=_a.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=_a.prototype.init,r.fx.step={};var ab,bb,cb=/^(?:toggle|show|hide)$/,db=/queueHooks$/;function eb(){bb&&(d.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(eb):a.setTimeout(eb,r.fx.interval),r.fx.tick())}function fb(){return a.setTimeout(function(){ab=void 0}),ab=r.now()}function gb(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)c=ca[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function hb(a,b,c){for(var d,e=(kb.tweeners[b]||[]).concat(kb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function ib(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&da(a),q=W.get(a,"fxshow");c.queue||(g=r._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})}));for(d in b)if(e=b[d],cb.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if(i=!r.isEmptyObject(b),i||!r.isEmptyObject(n)){l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=q&&q.display,null==j&&(j=W.get(a,"display")),k=r.css(a,"display"),"none"===k&&(j?k=j:(ia([a],!0),j=a.style.display||j,k=r.css(a,"display"),ia([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1;for(d in n)i||(q?"hidden"in q&&(p=q.hidden):q=W.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ia([a],!0),m.done(function(){p||ia([a]),W.remove(a,"fxshow");for(d in n)r.style(a,d,n[d])})),i=hb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}}function jb(a,b){var c,d,e,f,g;for(c in a)if(d=r.camelCase(c),e=b[d],f=a[c],Array.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=r.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kb(a,b,c){var d,e,f=0,g=kb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=ab||fb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(i||h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:ab||fb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jb(k,j.opts.specialEasing);f<g;f++)if(d=kb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,hb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j}r.Animation=r.extend(kb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return fa(c.elem,a,ba.exec(b),c),c}]},tweener:function(a,b){r.isFunction(a)?(b=a,a=["*"]):a=a.match(L);for(var c,d=0,e=a.length;d<e;d++)c=a[d],kb.tweeners[c]=kb.tweeners[c]||[],kb.tweeners[c].unshift(b)},prefilters:[ib],prefilter:function(a,b){b?kb.prefilters.unshift(a):kb.prefilters.push(a)}}),r.speed=function(a,b,c){var d=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off?d.duration=0:"number"!=typeof d.duration&&(d.duration in r.fx.speeds?d.duration=r.fx.speeds[d.duration]:d.duration=r.fx.speeds._default),null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){r.isFunction(d.old)&&d.old.call(this),d.queue&&r.dequeue(this,d.queue)},d},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(da).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=kb(this,r.extend({},a),f);(e||W.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=W.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&db.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=W.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gb(b,!0),a,d,e)}}),r.each({slideDown:gb("show"),slideUp:gb("hide"),slideToggle:gb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(ab=r.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),ab=void 0},r.fx.timer=function(a){r.timers.push(a),r.fx.start()},r.fx.interval=13,r.fx.start=function(){bb||(bb=!0,eb())},r.fx.stop=function(){bb=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx?r.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,a=d.createElement("input"),a.value="t",a.type="radio",o.radioValue="t"===a.value}();var lb,mb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return T(this,r.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?lb:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=r.find.attr(a,b),
null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&B(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(L);if(e&&1===a.nodeType)while(c=e[d++])a.removeAttribute(c)}}),lb={set:function(a,b,c){return b===!1?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=mb[b]||r.find.attr;mb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=mb[g],mb[g]=e,e=null!=c(a,b,d)?g:null,mb[g]=f),e}});var nb=/^(?:input|select|textarea|button)$/i,ob=/^(?:a|area)$/i;r.fn.extend({prop:function(a,b){return T(this,r.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):nb.test(a.nodeName)||ob.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this});function pb(a){var b=a.match(L)||[];return b.join(" ")}function qb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,qb(this)))});if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,qb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(L)||[];while(c=this[i++])if(e=qb(c),d=1===c.nodeType&&" "+pb(e)+" "){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=pb(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,qb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=r(this),f=a.match(L)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=qb(this),b&&W.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":W.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+pb(qb(c))+" ").indexOf(b)>-1)return!0;return!1}});var rb=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,r(this).val()):a,null==e?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:pb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(c=e[d],(c.selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!B(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){var c,d,e=a.options,f=r.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=r.inArray(r.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=r.inArray(r(a).val(),b)>-1}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var sb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!sb.test(p+r.event.triggered)&&(p.indexOf(".")>-1&&(q=p.split("."),p=q.shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||n.trigger.apply(e,c)!==!1)){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,sb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}g=0;while((h=o[g++])&&!b.isPropagationStopped())b.type=g>1?j:n.bindType||p,m=(W.get(h,"events")||{})[b.type]&&W.get(h,"handle"),m&&m.apply(h,c),m=k&&h[k],m&&m.apply&&U(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&n._default.apply(o.pop(),c)!==!1||!U(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&(i=e[k],i&&(e[k]=null),r.event.triggered=p,e[p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=W.access(d,b);e||d.addEventListener(a,c,!0),W.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=W.access(d,b)-1;e?W.access(d,b,e):(d.removeEventListener(a,c,!0),W.remove(d,b))}}});var tb=a.location,ub=r.now(),vb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(Array.isArray(b))r.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(Array.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!ja.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:Array.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}});var Bb=/%20/g,Cb=/#.*$/,Db=/([?&])_=[^&]*/,Eb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Gb=/^(?:GET|HEAD)$/,Hb=/^\/\//,Ib={},Jb={},Kb="*/".concat("*"),Lb=d.createElement("a");Lb.href=tb.href;function Mb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(L)||[];if(r.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Nb(a,b,c,d){var e={},f=a===Jb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Ob(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}function Pb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}function Qb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tb.href,type:"GET",isLocal:Fb.test(tb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Ob(Ob(a,r.ajaxSettings),b):Ob(r.ajaxSettings,a)},ajaxPrefilter:Mb(Ib),ajaxTransport:Mb(Jb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h){h={};while(b=Eb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||tb.href)+"").replace(Hb,tb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(L)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Lb.protocol+"//"+Lb.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Nb(Ib,o,c,y),k)return y;l=r.event&&o.global,l&&0===r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Gb.test(o.type),f=o.url.replace(Cb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(Bb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(vb.test(f)?"&":"?")+o.data,delete o.data),o.cache===!1&&(f=f.replace(Db,"$1"),n=(vb.test(f)?"&":"?")+"_="+ub++ +n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&o.contentType!==!1||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Kb+"; q=0.01":""):o.accepts["*"]);for(m in o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(o.beforeSend.call(p,y,o)===!1||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Nb(Jb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&o.timeout>0&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=b>0?4:0,j=b>=200&&b<300||304===b,d&&(v=Pb(o,y,d)),v=Qb(o,v,y,j),j?(o.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(r.lastModified[f]=w),w=y.getResponseHeader("etag"),w&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,n=v.error,j=!n)):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Rb={0:200,1223:204},Sb=r.ajaxSettings.xhr();o.cors=!!Sb&&"withCredentials"in Sb,o.ajax=Sb=!!Sb,r.ajaxTransport(function(b){var c,d;if(o.cors||Sb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Rb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Tb=[],Ub=/(=)\?(?=&|$)|\?\?/;r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Tb.pop()||r.expando+"_"+ub++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Ub.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ub.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Ub,"$1"+e):b.jsonp!==!1&&(b.url+=(vb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Tb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){if("string"!=typeof a)return[];"boolean"==typeof b&&(c=b,b=!1);var e,f,g;return b||(o.createHTMLDocument?(b=d.implementation.createHTMLDocument(""),e=b.createElement("base"),e.href=d.location.href,b.head.appendChild(e)):b=d),f=C.exec(a),g=!c&&[],f?[b.createElement(f[1])]:(f=qa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes))},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=pb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length},r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];if(f)return f.getClientRects().length?(d=f.getBoundingClientRect(),b=f.ownerDocument,c=b.documentElement,e=b.defaultView,{top:d.top+e.pageYOffset-c.clientTop,left:d.left+e.pageXOffset-c.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),B(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===r.css(a,"position"))a=a.offsetParent;return a||ra})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return T(this,function(a,d,e){var f;return r.isWindow(a)?f=a:9===a.nodeType&&(f=a.defaultView),void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Pa(o.pixelPosition,function(a,c){if(c)return c=Oa(a,b),Ma.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(e===!0||f===!0?"margin":"border");return T(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.holdReady=function(a){a?r.readyWait++:r.ready(!0)},r.isArray=Array.isArray,r.parseJSON=JSON.parse,r.nodeName=B,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Vb=a.jQuery,Wb=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Wb),b&&a.jQuery===r&&(a.jQuery=Vb),r},b||(a.jQuery=a.$=r),r});
/*!
 * jQuery Migrate - v3.0.0 - 2016-06-09
 * Copyright jQuery Foundation and other contributors
 */
(function( jQuery, window ) {
"use strict";


jQuery.migrateVersion = "3.0.0";


( function() {

	// Support: IE9 only
	// IE9 only creates console object when dev tools are first opened
	// Also, avoid Function#bind here to simplify PhantomJS usage
	var log = window.console && window.console.log &&
			function() { window.console.log.apply( window.console, arguments ); },
		rbadVersions = /^[12]\./;

	if ( !log ) {
		return;
	}

	// Need jQuery 3.0.0+ and no older Migrate loaded
	if ( !jQuery || rbadVersions.test( jQuery.fn.jquery ) ) {
		log( "JQMIGRATE: jQuery 3.0.0+ REQUIRED" );
	}
	if ( jQuery.migrateWarnings ) {
		log( "JQMIGRATE: Migrate plugin loaded multiple times" );
	}

	// Show a message on the console so devs know we're active
	log( "JQMIGRATE: Migrate is installed" +
		( jQuery.migrateMute ? "" : " with logging active" ) +
		", version " + jQuery.migrateVersion );

} )();

var warnedAbout = {};

// List of warnings already given; public read only
jQuery.migrateWarnings = [];

// Set to false to disable traces that appear with warnings
if ( jQuery.migrateTrace === undefined ) {
	jQuery.migrateTrace = true;
}

// Forget any warnings we've already given; public
jQuery.migrateReset = function() {
	warnedAbout = {};
	jQuery.migrateWarnings.length = 0;
};

function migrateWarn( msg ) {
	var console = window.console;
	if ( !warnedAbout[ msg ] ) {
		warnedAbout[ msg ] = true;
		jQuery.migrateWarnings.push( msg );
		if ( console && console.warn && !jQuery.migrateMute ) {
			console.warn( "JQMIGRATE: " + msg );
			if ( jQuery.migrateTrace && console.trace ) {
				console.trace();
			}
		}
	}
}

function migrateWarnProp( obj, prop, value, msg ) {
	Object.defineProperty( obj, prop, {
		configurable: true,
		enumerable: true,
		get: function() {
			migrateWarn( msg );
			return value;
		}
	} );
}

if ( document.compatMode === "BackCompat" ) {

	// JQuery has never supported or tested Quirks Mode
	migrateWarn( "jQuery is not compatible with Quirks Mode" );
}


var oldInit = jQuery.fn.init,
	oldIsNumeric = jQuery.isNumeric,
	oldFind = jQuery.find,
	rattrHashTest = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,
	rattrHashGlob = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;

jQuery.fn.init = function( arg1 ) {
	var args = Array.prototype.slice.call( arguments );

	if ( typeof arg1 === "string" && arg1 === "#" ) {

		// JQuery( "#" ) is a bogus ID selector, but it returned an empty set before jQuery 3.0
		migrateWarn( "jQuery( '#' ) is not a valid selector" );
		args[ 0 ] = [];
	}

	return oldInit.apply( this, args );
};
jQuery.fn.init.prototype = jQuery.fn;

jQuery.find = function( selector ) {
	var args = Array.prototype.slice.call( arguments );

	// Support: PhantomJS 1.x
	// String#match fails to match when used with a //g RegExp, only on some strings
	if ( typeof selector === "string" && rattrHashTest.test( selector ) ) {

		// The nonstandard and undocumented unquoted-hash was removed in jQuery 1.12.0
		// First see if qS thinks it's a valid selector, if so avoid a false positive
		try {
			document.querySelector( selector );
		} catch ( err1 ) {

			// Didn't *look* valid to qSA, warn and try quoting what we think is the value
			selector = selector.replace( rattrHashGlob, function( _, attr, op, value ) {
				return "[" + attr + op + "\"" + value + "\"]";
			} );

			// If the regexp *may* have created an invalid selector, don't update it
			// Note that there may be false alarms if selector uses jQuery extensions
			try {
				document.querySelector( selector );
				migrateWarn( "Attribute selector with '#' must be quoted: " + args[ 0 ] );
				args[ 0 ] = selector;
			} catch ( err2 ) {
				migrateWarn( "Attribute selector with '#' was not fixed: " + args[ 0 ] );
			}
		}
	}

	return oldFind.apply( this, args );
};

// Copy properties attached to original jQuery.find method (e.g. .attr, .isXML)
var findProp;
for ( findProp in oldFind ) {
	if ( Object.prototype.hasOwnProperty.call( oldFind, findProp ) ) {
		jQuery.find[ findProp ] = oldFind[ findProp ];
	}
}

// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	migrateWarn( "jQuery.fn.size() is deprecated; use the .length property" );
	return this.length;
};

jQuery.parseJSON = function() {
	migrateWarn( "jQuery.parseJSON is deprecated; use JSON.parse" );
	return JSON.parse.apply( null, arguments );
};

jQuery.isNumeric = function( val ) {

	// The jQuery 2.2.3 implementation of isNumeric
	function isNumeric2( obj ) {
		var realStringObj = obj && obj.toString();
		return !jQuery.isArray( obj ) && ( realStringObj - parseFloat( realStringObj ) + 1 ) >= 0;
	}

	var newValue = oldIsNumeric( val ),
		oldValue = isNumeric2( val );

	if ( newValue !== oldValue ) {
		migrateWarn( "jQuery.isNumeric() should not be called on constructed objects" );
	}

	return oldValue;
};

migrateWarnProp( jQuery, "unique", jQuery.uniqueSort,
	"jQuery.unique is deprecated, use jQuery.uniqueSort" );

// Now jQuery.expr.pseudos is the standard incantation
migrateWarnProp( jQuery.expr, "filters", jQuery.expr.pseudos,
	"jQuery.expr.filters is now jQuery.expr.pseudos" );
migrateWarnProp( jQuery.expr, ":", jQuery.expr.pseudos,
	"jQuery.expr[\":\"] is now jQuery.expr.pseudos" );


var oldAjax = jQuery.ajax;

jQuery.ajax = function( ) {
	var jQXHR = oldAjax.apply( this, arguments );

	// Be sure we got a jQXHR (e.g., not sync)
	if ( jQXHR.promise ) {
		migrateWarnProp( jQXHR, "success", jQXHR.done,
			"jQXHR.success is deprecated and removed" );
		migrateWarnProp( jQXHR, "error", jQXHR.fail,
			"jQXHR.error is deprecated and removed" );
		migrateWarnProp( jQXHR, "complete", jQXHR.always,
			"jQXHR.complete is deprecated and removed" );
	}

	return jQXHR;
};


var oldRemoveAttr = jQuery.fn.removeAttr,
	oldToggleClass = jQuery.fn.toggleClass,
	rmatchNonSpace = /\S+/g;

jQuery.fn.removeAttr = function( name ) {
	var self = this;

	jQuery.each( name.match( rmatchNonSpace ), function( i, attr ) {
		if ( jQuery.expr.match.bool.test( attr ) ) {
			migrateWarn( "jQuery.fn.removeAttr no longer sets boolean properties: " + attr );
			self.prop( attr, false );
		}
	} );

	return oldRemoveAttr.apply( this, arguments );
};

jQuery.fn.toggleClass = function( state ) {

	// Only deprecating no-args or single boolean arg
	if ( state !== undefined && typeof state !== "boolean" ) {
		return oldToggleClass.apply( this, arguments );
	}

	migrateWarn( "jQuery.fn.toggleClass( boolean ) is deprecated" );

	// Toggle entire class name of each element
	return this.each( function() {
		var className = this.getAttribute && this.getAttribute( "class" ) || "";

		if ( className ) {
			jQuery.data( this, "__className__", className );
		}

		// If the element has a class name or if we're passed `false`,
		// then remove the whole classname (if there was one, the above saved it).
		// Otherwise bring back whatever was previously saved (if anything),
		// falling back to the empty string if nothing was stored.
		if ( this.setAttribute ) {
			this.setAttribute( "class",
				className || state === false ?
				"" :
				jQuery.data( this, "__className__" ) || ""
			);
		}
	} );
};


var internalSwapCall = false;

// If this version of jQuery has .swap(), don't false-alarm on internal uses
if ( jQuery.swap ) {
	jQuery.each( [ "height", "width", "reliableMarginRight" ], function( _, name ) {
		var oldHook = jQuery.cssHooks[ name ] && jQuery.cssHooks[ name ].get;

		if ( oldHook ) {
			jQuery.cssHooks[ name ].get = function() {
				var ret;

				internalSwapCall = true;
				ret = oldHook.apply( this, arguments );
				internalSwapCall = false;
				return ret;
			};
		}
	} );
}

jQuery.swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	if ( !internalSwapCall ) {
		migrateWarn( "jQuery.swap() is undocumented and deprecated" );
	}

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};

var oldData = jQuery.data;

jQuery.data = function( elem, name, value ) {
	var curData;

	// If the name is transformed, look for the un-transformed name in the data object
	if ( name && name !== jQuery.camelCase( name ) ) {
		curData = jQuery.hasData( elem ) && oldData.call( this, elem );
		if ( curData && name in curData ) {
			migrateWarn( "jQuery.data() always sets/gets camelCased names: " + name );
			if ( arguments.length > 2 ) {
				curData[ name ] = value;
			}
			return curData[ name ];
		}
	}

	return oldData.apply( this, arguments );
};

var oldTweenRun = jQuery.Tween.prototype.run;

jQuery.Tween.prototype.run = function( percent ) {
	if ( jQuery.easing[ this.easing ].length > 1 ) {
		migrateWarn(
			"easing function " +
			"\"jQuery.easing." + this.easing.toString() +
			"\" should use only first argument"
		);

		jQuery.easing[ this.easing ] = jQuery.easing[ this.easing ].bind(
			jQuery.easing,
			percent, this.options.duration * percent, 0, 1, this.options.duration
		);
	}

	oldTweenRun.apply( this, arguments );
};

var oldLoad = jQuery.fn.load,
	originalFix = jQuery.event.fix;

jQuery.event.props = [];
jQuery.event.fixHooks = {};

jQuery.event.fix = function( originalEvent ) {
	var event,
		type = originalEvent.type,
		fixHook = this.fixHooks[ type ],
		props = jQuery.event.props;

	if ( props.length ) {
		migrateWarn( "jQuery.event.props are deprecated and removed: " + props.join() );
		while ( props.length ) {
			jQuery.event.addProp( props.pop() );
		}
	}

	if ( fixHook && !fixHook._migrated_ ) {
		fixHook._migrated_ = true;
		migrateWarn( "jQuery.event.fixHooks are deprecated and removed: " + type );
		if ( ( props = fixHook.props ) && props.length ) {
			while ( props.length ) {
			   jQuery.event.addProp( props.pop() );
			}
		}
	}

	event = originalFix.call( this, originalEvent );

	return fixHook && fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
};

jQuery.each( [ "load", "unload", "error" ], function( _, name ) {

	jQuery.fn[ name ] = function() {
		var args = Array.prototype.slice.call( arguments, 0 );

		// If this is an ajax load() the first arg should be the string URL;
		// technically this could also be the "Anything" arg of the event .load()
		// which just goes to show why this dumb signature has been deprecated!
		// jQuery custom builds that exclude the Ajax module justifiably die here.
		if ( name === "load" && typeof args[ 0 ] === "string" ) {
			return oldLoad.apply( this, args );
		}

		migrateWarn( "jQuery.fn." + name + "() is deprecated" );

		args.splice( 0, 0, name );
		if ( arguments.length ) {
			return this.on.apply( this, args );
		}

		// Use .triggerHandler here because:
		// - load and unload events don't need to bubble, only applied to window or image
		// - error event should not bubble to window, although it does pre-1.7
		// See http://bugs.jquery.com/ticket/11820
		this.triggerHandler.apply( this, args );
		return this;
	};

} );

// Trigger "ready" event only once, on document ready
jQuery( function() {
	jQuery( document ).triggerHandler( "ready" );
} );

jQuery.event.special.ready = {
	setup: function() {
		if ( this === document ) {
			migrateWarn( "'ready' event is deprecated" );
		}
	}
};

jQuery.fn.extend( {

	bind: function( types, data, fn ) {
		migrateWarn( "jQuery.fn.bind() is deprecated" );
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		migrateWarn( "jQuery.fn.unbind() is deprecated" );
		return this.off( types, null, fn );
	},
	delegate: function( selector, types, data, fn ) {
		migrateWarn( "jQuery.fn.delegate() is deprecated" );
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		migrateWarn( "jQuery.fn.undelegate() is deprecated" );
		return arguments.length === 1 ?
			this.off( selector, "**" ) :
			this.off( types, selector || "**", fn );
	}
} );


var oldOffset = jQuery.fn.offset;

jQuery.fn.offset = function() {
	var docElem,
		elem = this[ 0 ],
		origin = { top: 0, left: 0 };

	if ( !elem || !elem.nodeType ) {
		migrateWarn( "jQuery.fn.offset() requires a valid DOM element" );
		return origin;
	}

	docElem = ( elem.ownerDocument || document ).documentElement;
	if ( !jQuery.contains( docElem, elem ) ) {
		migrateWarn( "jQuery.fn.offset() requires an element connected to a document" );
		return origin;
	}

	return oldOffset.apply( this, arguments );
};


var oldParam = jQuery.param;

jQuery.param = function( data, traditional ) {
	var ajaxTraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;

	if ( traditional === undefined && ajaxTraditional ) {

		migrateWarn( "jQuery.param() no longer uses jQuery.ajaxSettings.traditional" );
		traditional = ajaxTraditional;
	}

	return oldParam.call( this, data, traditional );
};

var oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;

jQuery.fn.andSelf = function() {
	migrateWarn( "jQuery.fn.andSelf() replaced by jQuery.fn.addBack()" );
	return oldSelf.apply( this, arguments );
};


var oldDeferred = jQuery.Deferred,
	tuples = [

		// Action, add listener, callbacks, .then handlers, final state
		[ "resolve", "done", jQuery.Callbacks( "once memory" ),
			jQuery.Callbacks( "once memory" ), "resolved" ],
		[ "reject", "fail", jQuery.Callbacks( "once memory" ),
			jQuery.Callbacks( "once memory" ), "rejected" ],
		[ "notify", "progress", jQuery.Callbacks( "memory" ),
			jQuery.Callbacks( "memory" ) ]
	];

jQuery.Deferred = function( func ) {
	var deferred = oldDeferred(),
		promise = deferred.promise();

	deferred.pipe = promise.pipe = function( /* fnDone, fnFail, fnProgress */ ) {
		var fns = arguments;

		migrateWarn( "deferred.pipe() is deprecated" );

		return jQuery.Deferred( function( newDefer ) {
			jQuery.each( tuples, function( i, tuple ) {
				var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];

				// Deferred.done(function() { bind to newDefer or newDefer.resolve })
				// deferred.fail(function() { bind to newDefer or newDefer.reject })
				// deferred.progress(function() { bind to newDefer or newDefer.notify })
				deferred[ tuple[ 1 ] ]( function() {
					var returned = fn && fn.apply( this, arguments );
					if ( returned && jQuery.isFunction( returned.promise ) ) {
						returned.promise()
							.done( newDefer.resolve )
							.fail( newDefer.reject )
							.progress( newDefer.notify );
					} else {
						newDefer[ tuple[ 0 ] + "With" ](
							this === promise ? newDefer.promise() : this,
							fn ? [ returned ] : arguments
						);
					}
				} );
			} );
			fns = null;
		} ).promise();

	};

	if ( func ) {
		func.call( deferred, deferred );
	}

	return deferred;
};



})( jQuery, window );
!function(e,x,h){function r(a,b){var c=Math.max(0,a[0]-b[0],b[0]-a[1]),d=Math.max(0,a[2]-b[1],b[1]-a[3]);return c+d}function s(a,b,c,d){for(var f=a.length,d=d?"offset":"position",c=c||0;f--;){var k=a[f].el?a[f].el:e(a[f]),i=k[d]();i.left+=parseInt(k.css("margin-left"),10);i.top+=parseInt(k.css("margin-top"),10);b[f]=[i.left-c,i.left+k.outerWidth()+c,i.top-c,i.top+k.outerHeight()+c]}}function l(a,b){var c=b.offset();return{left:a.left-c.left,top:a.top-c.top}}function t(a,b,c){for(var b=[b.left,b.top],
c=c&&[c.left,c.top],d,f=a.length,e=[];f--;)d=a[f],e[f]=[f,r(d,b),c&&r(d,c)];return e=e.sort(function(a,b){return b[1]-a[1]||b[2]-a[2]||b[0]-a[0]})}function m(a){this.options=e.extend({},j,a);this.containers=[];this.scrollProxy=e.proxy(this.scroll,this);this.dragProxy=e.proxy(this.drag,this);this.dropProxy=e.proxy(this.drop,this);this.options.parentContainer||(this.placeholder=e(this.options.placeholder),a.isValidTarget||(this.options.isValidTarget=h))}function n(a,b){this.el=a;this.options=e.extend({},
v,b);this.group=m.get(this.options);this.rootGroup=this.options.rootGroup=this.options.rootGroup||this.group;this.parentContainer=this.options.parentContainer;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;this.el.on(o.start,this.handle,e.proxy(this.dragInit,this));this.options.drop&&this.group.containers.push(this)}var o,v={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},j={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,handle:"",itemPath:"",
itemSelector:"li",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(a,b){a.css(b)},onDragStart:function(a){a.css({height:a.height(),width:a.width()});a.addClass("dragged");e("body").addClass("dragging")},onDrop:function(a){a.removeClass("dragged").removeAttr("style");e("body").removeClass("dragging")},onMousedown:function(a,b){b.preventDefault()},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(a,b,c){a=e.extend({},a.data());if(c)return b;b[0]&&
(a.children=b,delete a.subContainer);delete a.sortable;return a},tolerance:0},p={},u=0,w={left:0,top:0,bottom:0,right:0};o={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"};m.get=function(a){p[a.group]||(a.group||(a.group=u++),p[a.group]=new m(a));return p[a.group]};m.prototype={dragInit:function(a,b){this.$document=e(b.el[0].ownerDocument);b.enabled()?(this.toggleListeners("on"),
this.item=e(a.target).closest(this.options.itemSelector),this.itemContainer=b,this.setPointer(a),this.options.onMousedown(this.item,a,j.onMousedown)):this.toggleListeners("on",["drop"]);this.dragInitDone=!0},drag:function(a){if(!this.dragging){if(!this.distanceMet(a))return;this.options.onDragStart(this.item,this.itemContainer,j.onDragStart);this.item.before(this.placeholder);this.dragging=!0}this.setPointer(a);this.options.onDrag(this.item,l(this.pointer,this.item.offsetParent()),j.onDrag);var b=
a.pageX,a=a.pageY,c=this.sameResultBox,d=this.options.tolerance;if(!c||c.top-d>a||c.bottom+d<a||c.left-d>b||c.right+d<b)this.searchValidTarget()||this.placeholder.detach()},drop:function(){this.toggleListeners("off");this.dragInitDone=!1;if(this.dragging){if(this.placeholder.closest("html")[0])this.placeholder.before(this.item).detach();else this.options.onCancel(this.item,this.itemContainer,j.onCancel);this.options.onDrop(this.item,this.getContainer(this.item),j.onDrop);this.clearDimensions();this.clearOffsetParent();
this.lastAppendedItem=this.sameResultBox=h;this.dragging=!1}},searchValidTarget:function(a,b){a||(a=this.relativePointer||this.pointer,b=this.lastRelativePointer||this.lastPointer);for(var c=t(this.getContainerDimensions(),a,b),d=c.length;d--;){var f=c[d][0];if(!c[d][1]||this.options.pullPlaceholder)if(f=this.containers[f],!f.disabled){if(!this.$getOffsetParent())var e=f.getItemOffsetParent(),a=l(a,e),b=l(b,e);if(f.searchValidTarget(a,b))return!0}}this.sameResultBox&&(this.sameResultBox=h)},movePlaceholder:function(a,
b,c,d){var f=this.lastAppendedItem;if(d||!(f&&f[0]===b[0]))b[c](this.placeholder),this.lastAppendedItem=b,this.sameResultBox=d,this.options.afterMove(this.placeholder,a)},getContainerDimensions:function(){this.containerDimensions||s(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent());return this.containerDimensions},getContainer:function(a){return a.closest(this.options.containerSelector).data("sortable")},$getOffsetParent:function(){if(this.offsetParent===
h){var a=this.containers.length-1,b=this.containers[a].getItemOffsetParent();if(!this.options.parentContainer)for(;a--;)if(b[0]!=this.containers[a].getItemOffsetParent()[0]){b=!1;break}this.offsetParent=b}return this.offsetParent},setPointer:function(a){a={left:a.pageX,top:a.pageY};if(this.$getOffsetParent()){var b=l(a,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=b}this.lastPointer=this.pointer;this.pointer=a},distanceMet:function(a){return Math.max(Math.abs(this.pointer.left-
a.pageX),Math.abs(this.pointer.top-a.pageY))>=this.options.distance},scroll:function(){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(a,b){var c=this,b=b||["drag","drop","scroll"];e.each(b,function(b,f){c.$document[a](o[f],c[f+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=h},clearDimensions:function(){this.containerDimensions=h;for(var a=this.containers.length;a--;)this.containers[a].clearDimensions()}};n.prototype={dragInit:function(a){var b=this.rootGroup;
!b.dragInitDone&&1===a.which&&this.options.drag&&!e(a.target).is(this.options.exclude)&&b.dragInit(a,this)},searchValidTarget:function(a,b){var c=t(this.getItemDimensions(),a,b),d=c.length,f=this.rootGroup,e=!f.options.isValidTarget||f.options.isValidTarget(f.item,this);if(!d&&e)return f.movePlaceholder(this,this.el,"append"),!0;for(;d--;)if(f=c[d][0],!c[d][1]&&this.hasChildGroup(f)){if(this.getContainerGroup(f).searchValidTarget(a,b))return!0}else if(e)return this.movePlaceholder(f,a),!0},movePlaceholder:function(a,
b){var c=e(this.items[a]),d=this.itemDimensions[a],f="after",h=c.outerWidth(),i=c.outerHeight(),g=c.offset(),g={left:g.left,right:g.left+h,top:g.top,bottom:g.top+i};this.options.vertical?b.top<=(d[2]+d[3])/2?(f="before",g.bottom-=i/2):g.top+=i/2:b.left<=(d[0]+d[1])/2?(f="before",g.right-=h/2):g.left+=h/2;this.hasChildGroup(a)&&(g=w);this.rootGroup.movePlaceholder(this,c,f,g)},getItemDimensions:function(){this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(.placeholder, .dragged)").get(),
s(this.items,this.itemDimensions=[],this.options.tolerance));return this.itemDimensions},getItemOffsetParent:function(){var a=this.el;return"relative"===a.css("position")||"absolute"===a.css("position")||"fixed"===a.css("position")?a:a.offsetParent()},hasChildGroup:function(a){return this.options.nested&&this.getContainerGroup(a)},getContainerGroup:function(a){var b=e.data(this.items[a],"subContainer");if(b===h){var c=this.$getChildren(this.items[a],"container"),b=!1;c[0]&&(b=e.extend({},this.options,
{parentContainer:this,group:u++}),b=c.sortable(b).data("sortable").group);e.data(this.items[a],"subContainer",b)}return b},enabled:function(){return!this.disabled&&(!this.parentContainer||this.parentContainer.enabled())},$getChildren:function(a,b){var c=this.rootGroup.options,d=c[b+"Path"],c=c[b+"Selector"],a=e(a);d&&(a=a.find(d));return a.children(c)},_serialize:function(a,b){var c=this,d=this.$getChildren(a,b?"item":"container").not(this.options.exclude).map(function(){return c._serialize(e(this),
!b)}).get();return this.rootGroup.options.serialize(a,d,b)},clearDimensions:function(){this.itemDimensions=h;if(this.items&&this.items[0])for(var a=this.items.length;a--;){var b=e.data(this.items[a],"subContainer");b&&b.clearDimensions()}}};var q={enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},serialize:function(){return this._serialize(this.el,!0)}};e.extend(n.prototype,q);e.fn.sortable=function(a){var b=Array.prototype.slice.call(arguments,1);return this.map(function(){var c=
e(this),d=c.data("sortable");if(d&&q[a])return q[a].apply(d,b)||this;!d&&(a===h||"object"===typeof a)&&c.data("sortable",new n(c,a));return this})}}(jQuery,window);
/**
* Bootstrap.js by @fat & @mdo
* plugins: bootstrap-transition.js, bootstrap-modal.js, bootstrap-dropdown.js, bootstrap-scrollspy.js, bootstrap-tab.js, bootstrap-tooltip.js, bootstrap-popover.js, bootstrap-affix.js, bootstrap-alert.js, bootstrap-button.js, bootstrap-collapse.js, bootstrap-carousel.js, bootstrap-typeahead.js
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(a){a(function(){a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")})},hide:function(b){b&&b.preventDefault();var c=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in");if(!b)return;e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){function d(){a(b).each(function(){e(a(this)).removeClass("open")})}function e(b){var c=b.attr("data-target"),d;c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,"")),d=c&&a(c);if(!d||!d.length)d=b.parent();return d}var b="[data-toggle=dropdown]",c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),f,g;if(c.is(".disabled, :disabled"))return;return f=e(c),g=f.hasClass("open"),d(),g||f.toggleClass("open"),c.focus(),!1},keydown:function(c){var d,f,g,h,i,j;if(!/(38|40|27)/.test(c.keyCode))return;d=a(this),c.preventDefault(),c.stopPropagation();if(d.is(".disabled, :disabled"))return;h=e(d),i=h.hasClass("open");if(!i||i&&c.keyCode==27)return c.which==27&&h.find(b).focus(),d.click();f=a("[role=menu] li:not(.divider):visible a",h);if(!f.length)return;j=f.index(f.filter(":focus")),c.keyCode==38&&j>0&&j--,c.keyCode==40&&j<f.length-1&&j++,~j||(j=0),f.eq(j).focus()}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on(".dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",b,c.prototype.toggle).on("keydown.dropdown.data-api",b+", [role=menu]",c.prototype.keydown)}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var c=a(this),d=c.data("target")||c.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(b.$scrollElement.get(0))&&b.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active:last a")[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" ");for(i=g.length;i--;)h=g[i],h=="click"?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):h!="manual"&&(e=h=="hover"?"mouseenter":"focus",f=h=="hover"?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(h);if(h.isDefaultPrevented())return;b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight;switch(f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c=this.tip(),d=c[0].offsetWidth,e=c[0].offsetHeight,f,g,h,i;c.offset(a).addClass(b).addClass("in"),f=c[0].offsetWidth,g=c[0].offsetHeight,b=="top"&&g!=e&&(a.top=a.top+e-g,i=!0),b=="bottom"||b=="top"?(h=0,a.left<0&&(h=a.left*-2,a.left=0,c.offset(a),f=c[0].offsetWidth,g=c[0].offsetHeight),this.replaceArrow(h-d+f,f,"left")):this.replaceArrow(g-e,g,"top"),i&&c.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function e(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var b=this,c=this.tip(),d=a.Event("hide");this.$element.trigger(d);if(d.isDefaultPrevented())return;return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?e():c.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},typeof b.getBoundingClientRect=="function"?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=(typeof c.content=="function"?c.content.call(b[0]):c.content)||b.attr("data-content"),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var b=a(document).height(),c=this.$window.scrollTop(),d=this.$element.offset(),e=this.options.offset,f=e.bottom,g=e.top,h="affix affix-top affix-bottom",i;typeof e!="object"&&(f=g=e),typeof g=="function"&&(g=e.top()),typeof f=="function"&&(f=e.bottom()),i=this.unpin!=null&&c+this.unpin<=d.top?!1:f!=null&&d.top+this.$element.height()>=b-f?"bottom":g!=null&&c<=g?"top":!1;if(this.affixed===i)return;this.affixed=i,this.unpin=i=="bottom"?d.top-c:null,this.$element.removeClass(h).addClass("affix"+(i?"-"+i:""))};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f=typeof c=="object"&&c;e||d.data("affix",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),!function(a){var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning||this.$element.hasClass("in"))return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning||!this.$element.hasClass("in"))return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),typeof c=="object"&&c);e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(b>this.$items.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j;this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h](),j=a.Event("slide",{relatedTarget:e[0],direction:g});if(e.hasClass("active"))return;this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")}));if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),g=typeof c=="string"?c:f.slide;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),c.data()),g;e.carousel(f),(g=c.attr("data-slide-to"))&&e.data("carousel").pause().to(g).cycle(),b.preventDefault()})}(window.jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b=typeof this.$element[a]=="function"),b},move:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){if(this.suppressKeyPressRepeat)return;this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(a){this.focused=!0},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;c.typeahead(c.data())})}(window.jQuery)
;(function(){function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Match_Threshold=0.5;this.Match_Distance=1E3;this.Patch_DeleteThreshold=0.5;this.Patch_Margin=4;this.Match_MaxBits=32}
diff_match_patch.prototype.diff_main=function(a,b,c,d){"undefined"==typeof d&&(d=0>=this.Diff_Timeout?Number.MAX_VALUE:(new Date).getTime()+1E3*this.Diff_Timeout);if(null==a||null==b)throw Error("Null input. (diff_main)");if(a==b)return a?[[0,a]]:[];"undefined"==typeof c&&(c=!0);var e=c,f=this.diff_commonPrefix(a,b);c=a.substring(0,f);a=a.substring(f);b=b.substring(f);var f=this.diff_commonSuffix(a,b),g=a.substring(a.length-f);a=a.substring(0,a.length-f);b=b.substring(0,b.length-f);a=this.diff_compute_(a,
b,e,d);c&&a.unshift([0,c]);g&&a.push([0,g]);this.diff_cleanupMerge(a);return a};
diff_match_patch.prototype.diff_compute_=function(a,b,c,d){if(!a)return[[1,b]];if(!b)return[[-1,a]];var e=a.length>b.length?a:b,f=a.length>b.length?b:a,g=e.indexOf(f);return-1!=g?(c=[[1,e.substring(0,g)],[0,f],[1,e.substring(g+f.length)]],a.length>b.length&&(c[0][0]=c[2][0]=-1),c):1==f.length?[[-1,a],[1,b]]:(e=this.diff_halfMatch_(a,b))?(f=e[0],a=e[1],g=e[2],b=e[3],e=e[4],f=this.diff_main(f,g,c,d),c=this.diff_main(a,b,c,d),f.concat([[0,e]],c)):c&&100<a.length&&100<b.length?this.diff_lineMode_(a,b,
d):this.diff_bisect_(a,b,d)};
diff_match_patch.prototype.diff_lineMode_=function(a,b,c){var d=this.diff_linesToChars_(a,b);a=d.chars1;b=d.chars2;d=d.lineArray;a=this.diff_main(a,b,!1,c);this.diff_charsToLines_(a,d);this.diff_cleanupSemantic(a);a.push([0,""]);for(var e=d=b=0,f="",g="";b<a.length;){switch(a[b][0]){case 1:e++;g+=a[b][1];break;case -1:d++;f+=a[b][1];break;case 0:if(1<=d&&1<=e){a.splice(b-d-e,d+e);b=b-d-e;d=this.diff_main(f,g,!1,c);for(e=d.length-1;0<=e;e--)a.splice(b,0,d[e]);b+=d.length}d=e=0;g=f=""}b++}a.pop();return a};
diff_match_patch.prototype.diff_bisect_=function(a,b,c){for(var d=a.length,e=b.length,f=Math.ceil((d+e)/2),g=f,h=2*f,j=Array(h),i=Array(h),k=0;k<h;k++)j[k]=-1,i[k]=-1;j[g+1]=0;i[g+1]=0;for(var k=d-e,q=0!=k%2,r=0,t=0,p=0,w=0,v=0;v<f&&!((new Date).getTime()>c);v++){for(var n=-v+r;n<=v-t;n+=2){var l=g+n,m;m=n==-v||n!=v&&j[l-1]<j[l+1]?j[l+1]:j[l-1]+1;for(var s=m-n;m<d&&s<e&&a.charAt(m)==b.charAt(s);)m++,s++;j[l]=m;if(m>d)t+=2;else if(s>e)r+=2;else if(q&&(l=g+k-n,0<=l&&l<h&&-1!=i[l])){var u=d-i[l];if(m>=
u)return this.diff_bisectSplit_(a,b,m,s,c)}}for(n=-v+p;n<=v-w;n+=2){l=g+n;u=n==-v||n!=v&&i[l-1]<i[l+1]?i[l+1]:i[l-1]+1;for(m=u-n;u<d&&m<e&&a.charAt(d-u-1)==b.charAt(e-m-1);)u++,m++;i[l]=u;if(u>d)w+=2;else if(m>e)p+=2;else if(!q&&(l=g+k-n,0<=l&&(l<h&&-1!=j[l])&&(m=j[l],s=g+m-l,u=d-u,m>=u)))return this.diff_bisectSplit_(a,b,m,s,c)}}return[[-1,a],[1,b]]};
diff_match_patch.prototype.diff_bisectSplit_=function(a,b,c,d,e){var f=a.substring(0,c),g=b.substring(0,d);a=a.substring(c);b=b.substring(d);f=this.diff_main(f,g,!1,e);e=this.diff_main(a,b,!1,e);return f.concat(e)};
diff_match_patch.prototype.diff_linesToChars_=function(a,b){function c(a){for(var b="",c=0,f=-1,g=d.length;f<a.length-1;){f=a.indexOf("\n",c);-1==f&&(f=a.length-1);var r=a.substring(c,f+1),c=f+1;(e.hasOwnProperty?e.hasOwnProperty(r):void 0!==e[r])?b+=String.fromCharCode(e[r]):(b+=String.fromCharCode(g),e[r]=g,d[g++]=r)}return b}var d=[],e={};d[0]="";var f=c(a),g=c(b);return{chars1:f,chars2:g,lineArray:d}};
diff_match_patch.prototype.diff_charsToLines_=function(a,b){for(var c=0;c<a.length;c++){for(var d=a[c][1],e=[],f=0;f<d.length;f++)e[f]=b[d.charCodeAt(f)];a[c][1]=e.join("")}};diff_match_patch.prototype.diff_commonPrefix=function(a,b){if(!a||!b||a.charAt(0)!=b.charAt(0))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c<e;)a.substring(f,e)==b.substring(f,e)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};
diff_match_patch.prototype.diff_commonSuffix=function(a,b){if(!a||!b||a.charAt(a.length-1)!=b.charAt(b.length-1))return 0;for(var c=0,d=Math.min(a.length,b.length),e=d,f=0;c<e;)a.substring(a.length-e,a.length-f)==b.substring(b.length-e,b.length-f)?f=c=e:d=e,e=Math.floor((d-c)/2+c);return e};
diff_match_patch.prototype.diff_commonOverlap_=function(a,b){var c=a.length,d=b.length;if(0==c||0==d)return 0;c>d?a=a.substring(c-d):c<d&&(b=b.substring(0,c));c=Math.min(c,d);if(a==b)return c;for(var d=0,e=1;;){var f=a.substring(c-e),f=b.indexOf(f);if(-1==f)return d;e+=f;if(0==f||a.substring(c-e)==b.substring(0,e))d=e,e++}};
diff_match_patch.prototype.diff_halfMatch_=function(a,b){function c(a,b,c){for(var d=a.substring(c,c+Math.floor(a.length/4)),e=-1,g="",h,j,n,l;-1!=(e=b.indexOf(d,e+1));){var m=f.diff_commonPrefix(a.substring(c),b.substring(e)),s=f.diff_commonSuffix(a.substring(0,c),b.substring(0,e));g.length<s+m&&(g=b.substring(e-s,e)+b.substring(e,e+m),h=a.substring(0,c-s),j=a.substring(c+m),n=b.substring(0,e-s),l=b.substring(e+m))}return 2*g.length>=a.length?[h,j,n,l,g]:null}if(0>=this.Diff_Timeout)return null;
var d=a.length>b.length?a:b,e=a.length>b.length?b:a;if(4>d.length||2*e.length<d.length)return null;var f=this,g=c(d,e,Math.ceil(d.length/4)),d=c(d,e,Math.ceil(d.length/2)),h;if(!g&&!d)return null;h=d?g?g[4].length>d[4].length?g:d:d:g;var j;a.length>b.length?(g=h[0],d=h[1],e=h[2],j=h[3]):(e=h[0],j=h[1],g=h[2],d=h[3]);h=h[4];return[g,d,e,j,h]};
diff_match_patch.prototype.diff_cleanupSemantic=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=0,h=0,j=0,i=0;f<a.length;)0==a[f][0]?(c[d++]=f,g=j,h=i,i=j=0,e=a[f][1]):(1==a[f][0]?j+=a[f][1].length:i+=a[f][1].length,e&&(e.length<=Math.max(g,h)&&e.length<=Math.max(j,i))&&(a.splice(c[d-1],0,[-1,e]),a[c[d-1]+1][0]=1,d--,d--,f=0<d?c[d-1]:-1,i=j=h=g=0,e=null,b=!0)),f++;b&&this.diff_cleanupMerge(a);this.diff_cleanupSemanticLossless(a);for(f=1;f<a.length;){if(-1==a[f-1][0]&&1==a[f][0]){b=a[f-1][1];c=a[f][1];
d=this.diff_commonOverlap_(b,c);e=this.diff_commonOverlap_(c,b);if(d>=e){if(d>=b.length/2||d>=c.length/2)a.splice(f,0,[0,c.substring(0,d)]),a[f-1][1]=b.substring(0,b.length-d),a[f+1][1]=c.substring(d),f++}else if(e>=b.length/2||e>=c.length/2)a.splice(f,0,[0,b.substring(0,e)]),a[f-1][0]=1,a[f-1][1]=c.substring(0,c.length-e),a[f+1][0]=-1,a[f+1][1]=b.substring(e),f++;f++}f++}};
diff_match_patch.prototype.diff_cleanupSemanticLossless=function(a){function b(a,b){if(!a||!b)return 6;var c=a.charAt(a.length-1),d=b.charAt(0),e=c.match(diff_match_patch.nonAlphaNumericRegex_),f=d.match(diff_match_patch.nonAlphaNumericRegex_),g=e&&c.match(diff_match_patch.whitespaceRegex_),h=f&&d.match(diff_match_patch.whitespaceRegex_),c=g&&c.match(diff_match_patch.linebreakRegex_),d=h&&d.match(diff_match_patch.linebreakRegex_),i=c&&a.match(diff_match_patch.blanklineEndRegex_),j=d&&b.match(diff_match_patch.blanklineStartRegex_);
return i||j?5:c||d?4:e&&!g&&h?3:g||h?2:e||f?1:0}for(var c=1;c<a.length-1;){if(0==a[c-1][0]&&0==a[c+1][0]){var d=a[c-1][1],e=a[c][1],f=a[c+1][1],g=this.diff_commonSuffix(d,e);if(g)var h=e.substring(e.length-g),d=d.substring(0,d.length-g),e=h+e.substring(0,e.length-g),f=h+f;for(var g=d,h=e,j=f,i=b(d,e)+b(e,f);e.charAt(0)===f.charAt(0);){var d=d+e.charAt(0),e=e.substring(1)+f.charAt(0),f=f.substring(1),k=b(d,e)+b(e,f);k>=i&&(i=k,g=d,h=e,j=f)}a[c-1][1]!=g&&(g?a[c-1][1]=g:(a.splice(c-1,1),c--),a[c][1]=
h,j?a[c+1][1]=j:(a.splice(c+1,1),c--))}c++}};diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;diff_match_patch.whitespaceRegex_=/\s/;diff_match_patch.linebreakRegex_=/[\r\n]/;diff_match_patch.blanklineEndRegex_=/\n\r?\n$/;diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/;
diff_match_patch.prototype.diff_cleanupEfficiency=function(a){for(var b=!1,c=[],d=0,e=null,f=0,g=!1,h=!1,j=!1,i=!1;f<a.length;){if(0==a[f][0])a[f][1].length<this.Diff_EditCost&&(j||i)?(c[d++]=f,g=j,h=i,e=a[f][1]):(d=0,e=null),j=i=!1;else if(-1==a[f][0]?i=!0:j=!0,e&&(g&&h&&j&&i||e.length<this.Diff_EditCost/2&&3==g+h+j+i))a.splice(c[d-1],0,[-1,e]),a[c[d-1]+1][0]=1,d--,e=null,g&&h?(j=i=!0,d=0):(d--,f=0<d?c[d-1]:-1,j=i=!1),b=!0;f++}b&&this.diff_cleanupMerge(a)};
diff_match_patch.prototype.diff_cleanupMerge=function(a){a.push([0,""]);for(var b=0,c=0,d=0,e="",f="",g;b<a.length;)switch(a[b][0]){case 1:d++;f+=a[b][1];b++;break;case -1:c++;e+=a[b][1];b++;break;case 0:1<c+d?(0!==c&&0!==d&&(g=this.diff_commonPrefix(f,e),0!==g&&(0<b-c-d&&0==a[b-c-d-1][0]?a[b-c-d-1][1]+=f.substring(0,g):(a.splice(0,0,[0,f.substring(0,g)]),b++),f=f.substring(g),e=e.substring(g)),g=this.diff_commonSuffix(f,e),0!==g&&(a[b][1]=f.substring(f.length-g)+a[b][1],f=f.substring(0,f.length-
g),e=e.substring(0,e.length-g))),0===c?a.splice(b-d,c+d,[1,f]):0===d?a.splice(b-c,c+d,[-1,e]):a.splice(b-c-d,c+d,[-1,e],[1,f]),b=b-c-d+(c?1:0)+(d?1:0)+1):0!==b&&0==a[b-1][0]?(a[b-1][1]+=a[b][1],a.splice(b,1)):b++,c=d=0,f=e=""}""===a[a.length-1][1]&&a.pop();c=!1;for(b=1;b<a.length-1;)0==a[b-1][0]&&0==a[b+1][0]&&(a[b][1].substring(a[b][1].length-a[b-1][1].length)==a[b-1][1]?(a[b][1]=a[b-1][1]+a[b][1].substring(0,a[b][1].length-a[b-1][1].length),a[b+1][1]=a[b-1][1]+a[b+1][1],a.splice(b-1,1),c=!0):a[b][1].substring(0,
a[b+1][1].length)==a[b+1][1]&&(a[b-1][1]+=a[b+1][1],a[b][1]=a[b][1].substring(a[b+1][1].length)+a[b+1][1],a.splice(b+1,1),c=!0)),b++;c&&this.diff_cleanupMerge(a)};diff_match_patch.prototype.diff_xIndex=function(a,b){var c=0,d=0,e=0,f=0,g;for(g=0;g<a.length;g++){1!==a[g][0]&&(c+=a[g][1].length);-1!==a[g][0]&&(d+=a[g][1].length);if(c>b)break;e=c;f=d}return a.length!=g&&-1===a[g][0]?f:f+(b-e)};
diff_match_patch.prototype.diff_prettyHtml=function(a){for(var b=[],c=/&/g,d=/</g,e=/>/g,f=/\n/g,g=0;g<a.length;g++){var h=a[g][0],j=a[g][1],j=j.replace(c,"&amp;").replace(d,"&lt;").replace(e,"&gt;").replace(f,"&para;<br>");switch(h){case 1:b[g]='<ins style="background:#e6ffe6;">'+j+"</ins>";break;case -1:b[g]='<del style="background:#ffe6e6;">'+j+"</del>";break;case 0:b[g]="<span>"+j+"</span>"}}return b.join("")};
diff_match_patch.prototype.diff_text1=function(a){for(var b=[],c=0;c<a.length;c++)1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")};diff_match_patch.prototype.diff_text2=function(a){for(var b=[],c=0;c<a.length;c++)-1!==a[c][0]&&(b[c]=a[c][1]);return b.join("")};diff_match_patch.prototype.diff_levenshtein=function(a){for(var b=0,c=0,d=0,e=0;e<a.length;e++){var f=a[e][0],g=a[e][1];switch(f){case 1:c+=g.length;break;case -1:d+=g.length;break;case 0:b+=Math.max(c,d),d=c=0}}return b+=Math.max(c,d)};
diff_match_patch.prototype.diff_toDelta=function(a){for(var b=[],c=0;c<a.length;c++)switch(a[c][0]){case 1:b[c]="+"+encodeURI(a[c][1]);break;case -1:b[c]="-"+a[c][1].length;break;case 0:b[c]="="+a[c][1].length}return b.join("\t").replace(/%20/g," ")};
diff_match_patch.prototype.diff_fromDelta=function(a,b){for(var c=[],d=0,e=0,f=b.split(/\t/g),g=0;g<f.length;g++){var h=f[g].substring(1);switch(f[g].charAt(0)){case "+":try{c[d++]=[1,decodeURI(h)]}catch(j){throw Error("Illegal escape in diff_fromDelta: "+h);}break;case "-":case "=":var i=parseInt(h,10);if(isNaN(i)||0>i)throw Error("Invalid number in diff_fromDelta: "+h);h=a.substring(e,e+=i);"="==f[g].charAt(0)?c[d++]=[0,h]:c[d++]=[-1,h];break;default:if(f[g])throw Error("Invalid diff operation in diff_fromDelta: "+
f[g]);}}if(e!=a.length)throw Error("Delta length ("+e+") does not equal source text length ("+a.length+").");return c};diff_match_patch.prototype.match_main=function(a,b,c){if(null==a||null==b||null==c)throw Error("Null input. (match_main)");c=Math.max(0,Math.min(c,a.length));return a==b?0:a.length?a.substring(c,c+b.length)==b?c:this.match_bitap_(a,b,c):-1};
diff_match_patch.prototype.match_bitap_=function(a,b,c){function d(a,d){var e=a/b.length,g=Math.abs(c-d);return!f.Match_Distance?g?1:e:e+g/f.Match_Distance}if(b.length>this.Match_MaxBits)throw Error("Pattern too long for this browser.");var e=this.match_alphabet_(b),f=this,g=this.Match_Threshold,h=a.indexOf(b,c);-1!=h&&(g=Math.min(d(0,h),g),h=a.lastIndexOf(b,c+b.length),-1!=h&&(g=Math.min(d(0,h),g)));for(var j=1<<b.length-1,h=-1,i,k,q=b.length+a.length,r,t=0;t<b.length;t++){i=0;for(k=q;i<k;)d(t,c+
k)<=g?i=k:q=k,k=Math.floor((q-i)/2+i);q=k;i=Math.max(1,c-k+1);var p=Math.min(c+k,a.length)+b.length;k=Array(p+2);for(k[p+1]=(1<<t)-1;p>=i;p--){var w=e[a.charAt(p-1)];k[p]=0===t?(k[p+1]<<1|1)&w:(k[p+1]<<1|1)&w|((r[p+1]|r[p])<<1|1)|r[p+1];if(k[p]&j&&(w=d(t,p-1),w<=g))if(g=w,h=p-1,h>c)i=Math.max(1,2*c-h);else break}if(d(t+1,c)>g)break;r=k}return h};
diff_match_patch.prototype.match_alphabet_=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=0;for(c=0;c<a.length;c++)b[a.charAt(c)]|=1<<a.length-c-1;return b};
diff_match_patch.prototype.patch_addContext_=function(a,b){if(0!=b.length){for(var c=b.substring(a.start2,a.start2+a.length1),d=0;b.indexOf(c)!=b.lastIndexOf(c)&&c.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,c=b.substring(a.start2-d,a.start2+a.length1+d);d+=this.Patch_Margin;(c=b.substring(a.start2-d,a.start2))&&a.diffs.unshift([0,c]);(d=b.substring(a.start2+a.length1,a.start2+a.length1+d))&&a.diffs.push([0,d]);a.start1-=c.length;a.start2-=c.length;a.length1+=
c.length+d.length;a.length2+=c.length+d.length}};
diff_match_patch.prototype.patch_make=function(a,b,c){var d;if("string"==typeof a&&"string"==typeof b&&"undefined"==typeof c)d=a,b=this.diff_main(d,b,!0),2<b.length&&(this.diff_cleanupSemantic(b),this.diff_cleanupEfficiency(b));else if(a&&"object"==typeof a&&"undefined"==typeof b&&"undefined"==typeof c)b=a,d=this.diff_text1(b);else if("string"==typeof a&&b&&"object"==typeof b&&"undefined"==typeof c)d=a;else if("string"==typeof a&&"string"==typeof b&&c&&"object"==typeof c)d=a,b=c;else throw Error("Unknown call format to patch_make.");
if(0===b.length)return[];c=[];a=new diff_match_patch.patch_obj;for(var e=0,f=0,g=0,h=d,j=0;j<b.length;j++){var i=b[j][0],k=b[j][1];!e&&0!==i&&(a.start1=f,a.start2=g);switch(i){case 1:a.diffs[e++]=b[j];a.length2+=k.length;d=d.substring(0,g)+k+d.substring(g);break;case -1:a.length1+=k.length;a.diffs[e++]=b[j];d=d.substring(0,g)+d.substring(g+k.length);break;case 0:k.length<=2*this.Patch_Margin&&e&&b.length!=j+1?(a.diffs[e++]=b[j],a.length1+=k.length,a.length2+=k.length):k.length>=2*this.Patch_Margin&&
e&&(this.patch_addContext_(a,h),c.push(a),a=new diff_match_patch.patch_obj,e=0,h=d,f=g)}1!==i&&(f+=k.length);-1!==i&&(g+=k.length)}e&&(this.patch_addContext_(a,h),c.push(a));return c};diff_match_patch.prototype.patch_deepCopy=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=new diff_match_patch.patch_obj;e.diffs=[];for(var f=0;f<d.diffs.length;f++)e.diffs[f]=d.diffs[f].slice();e.start1=d.start1;e.start2=d.start2;e.length1=d.length1;e.length2=d.length2;b[c]=e}return b};
diff_match_patch.prototype.patch_apply=function(a,b){if(0==a.length)return[b,[]];a=this.patch_deepCopy(a);var c=this.patch_addPadding(a);b=c+b+c;this.patch_splitMax(a);for(var d=0,e=[],f=0;f<a.length;f++){var g=a[f].start2+d,h=this.diff_text1(a[f].diffs),j,i=-1;if(h.length>this.Match_MaxBits){if(j=this.match_main(b,h.substring(0,this.Match_MaxBits),g),-1!=j&&(i=this.match_main(b,h.substring(h.length-this.Match_MaxBits),g+h.length-this.Match_MaxBits),-1==i||j>=i))j=-1}else j=this.match_main(b,h,g);
if(-1==j)e[f]=!1,d-=a[f].length2-a[f].length1;else if(e[f]=!0,d=j-g,g=-1==i?b.substring(j,j+h.length):b.substring(j,i+this.Match_MaxBits),h==g)b=b.substring(0,j)+this.diff_text2(a[f].diffs)+b.substring(j+h.length);else if(g=this.diff_main(h,g,!1),h.length>this.Match_MaxBits&&this.diff_levenshtein(g)/h.length>this.Patch_DeleteThreshold)e[f]=!1;else{this.diff_cleanupSemanticLossless(g);for(var h=0,k,i=0;i<a[f].diffs.length;i++){var q=a[f].diffs[i];0!==q[0]&&(k=this.diff_xIndex(g,h));1===q[0]?b=b.substring(0,
j+k)+q[1]+b.substring(j+k):-1===q[0]&&(b=b.substring(0,j+k)+b.substring(j+this.diff_xIndex(g,h+q[1].length)));-1!==q[0]&&(h+=q[1].length)}}}b=b.substring(c.length,b.length-c.length);return[b,e]};
diff_match_patch.prototype.patch_addPadding=function(a){for(var b=this.Patch_Margin,c="",d=1;d<=b;d++)c+=String.fromCharCode(d);for(d=0;d<a.length;d++)a[d].start1+=b,a[d].start2+=b;var d=a[0],e=d.diffs;if(0==e.length||0!=e[0][0])e.unshift([0,c]),d.start1-=b,d.start2-=b,d.length1+=b,d.length2+=b;else if(b>e[0][1].length){var f=b-e[0][1].length;e[0][1]=c.substring(e[0][1].length)+e[0][1];d.start1-=f;d.start2-=f;d.length1+=f;d.length2+=f}d=a[a.length-1];e=d.diffs;0==e.length||0!=e[e.length-1][0]?(e.push([0,
c]),d.length1+=b,d.length2+=b):b>e[e.length-1][1].length&&(f=b-e[e.length-1][1].length,e[e.length-1][1]+=c.substring(0,f),d.length1+=f,d.length2+=f);return c};
diff_match_patch.prototype.patch_splitMax=function(a){for(var b=this.Match_MaxBits,c=0;c<a.length;c++)if(!(a[c].length1<=b)){var d=a[c];a.splice(c--,1);for(var e=d.start1,f=d.start2,g="";0!==d.diffs.length;){var h=new diff_match_patch.patch_obj,j=!0;h.start1=e-g.length;h.start2=f-g.length;""!==g&&(h.length1=h.length2=g.length,h.diffs.push([0,g]));for(;0!==d.diffs.length&&h.length1<b-this.Patch_Margin;){var g=d.diffs[0][0],i=d.diffs[0][1];1===g?(h.length2+=i.length,f+=i.length,h.diffs.push(d.diffs.shift()),
j=!1):-1===g&&1==h.diffs.length&&0==h.diffs[0][0]&&i.length>2*b?(h.length1+=i.length,e+=i.length,j=!1,h.diffs.push([g,i]),d.diffs.shift()):(i=i.substring(0,b-h.length1-this.Patch_Margin),h.length1+=i.length,e+=i.length,0===g?(h.length2+=i.length,f+=i.length):j=!1,h.diffs.push([g,i]),i==d.diffs[0][1]?d.diffs.shift():d.diffs[0][1]=d.diffs[0][1].substring(i.length))}g=this.diff_text2(h.diffs);g=g.substring(g.length-this.Patch_Margin);i=this.diff_text1(d.diffs).substring(0,this.Patch_Margin);""!==i&&
(h.length1+=i.length,h.length2+=i.length,0!==h.diffs.length&&0===h.diffs[h.diffs.length-1][0]?h.diffs[h.diffs.length-1][1]+=i:h.diffs.push([0,i]));j||a.splice(++c,0,h)}}};diff_match_patch.prototype.patch_toText=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b.join("")};
diff_match_patch.prototype.patch_fromText=function(a){var b=[];if(!a)return b;a=a.split("\n");for(var c=0,d=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;c<a.length;){var e=a[c].match(d);if(!e)throw Error("Invalid patch string: "+a[c]);var f=new diff_match_patch.patch_obj;b.push(f);f.start1=parseInt(e[1],10);""===e[2]?(f.start1--,f.length1=1):"0"==e[2]?f.length1=0:(f.start1--,f.length1=parseInt(e[2],10));f.start2=parseInt(e[3],10);""===e[4]?(f.start2--,f.length2=1):"0"==e[4]?f.length2=0:(f.start2--,f.length2=
parseInt(e[4],10));for(c++;c<a.length;){e=a[c].charAt(0);try{var g=decodeURI(a[c].substring(1))}catch(h){throw Error("Illegal escape in patch_fromText: "+g);}if("-"==e)f.diffs.push([-1,g]);else if("+"==e)f.diffs.push([1,g]);else if(" "==e)f.diffs.push([0,g]);else if("@"==e)break;else if(""!==e)throw Error('Invalid patch mode "'+e+'" in: '+g);c++}}return b};diff_match_patch.patch_obj=function(){this.diffs=[];this.start2=this.start1=null;this.length2=this.length1=0};
diff_match_patch.patch_obj.prototype.toString=function(){var a,b;a=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1;b=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;a=["@@ -"+a+" +"+b+" @@\n"];var c;for(b=0;b<this.diffs.length;b++){switch(this.diffs[b][0]){case 1:c="+";break;case -1:c="-";break;case 0:c=" "}a[b+1]=c+encodeURI(this.diffs[b][1])+"\n"}return a.join("").replace(/%20/g," ")};
this.diff_match_patch=diff_match_patch;this.DIFF_DELETE=-1;this.DIFF_INSERT=1;this.DIFF_EQUAL=0;})()
;/*!
 * jQuery Expander Plugin v1.4.5
 *
 * Date: Mon Jan 14 14:44:48 2013 EST
 * Requires: jQuery v1.3+
 *
 * Copyright 2013, Karl Swedberg
 * Licensed under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 *
 *
 *
 *
 *
*/
(function(c){c.expander={version:"1.4.5",defaults:{slicePoint:100,preserveWords:true,widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:false,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:true,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}};
c.fn.expander=function(l){function I(a,d){var e="span",h=a.summary;if(d){e="div";if(x.test(h)&&!a.expandAfterSummary)h=h.replace(x,a.moreLabel+"$1");else h+=a.moreLabel;h='<div class="'+a.summaryClass+'">'+h+"</div>"}else h+=a.moreLabel;return[h,"<",e+' class="'+a.detailClass+'"',">",a.details,"</"+e+">"].join("")}function J(a){var d='<span class="'+a.moreClass+'">'+a.expandPrefix;d+='<a href="#">'+a.expandText+"</a></span>";return d}function y(a,d){if(a.lastIndexOf("<")>a.lastIndexOf(">"))a=a.slice(0,
a.lastIndexOf("<"));if(d)a=a.replace(K,"");return c.trim(a)}function z(a,d){d.stop(true,true)[a.collapseEffect](a.collapseSpeed,function(){d.prev("span."+a.moreClass).show().length||d.parent().children("div."+a.summaryClass).show().find("span."+a.moreClass).show();a.afterCollapse&&a.afterCollapse.call(d)})}function L(a,d,e){if(a.collapseTimer)A=setTimeout(function(){z(a,d);c.isFunction(a.onCollapse)&&a.onCollapse.call(e,false)},a.collapseTimer)}var u="init";if(typeof l=="string"){u=l;l={}}var v=c.extend({},
c.expander.defaults,l),M=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,K=v.wordEnd||/(&(?:[^;]+;)?|[a-zA-Z\u00C0-\u0100]+)$/,B=/<\/?(\w+)[^>]*>/g,C=/<(\w+)[^>]*>/g,D=/<\/(\w+)>/g,x=/(<\/[^>]+>)\s*$/,N=/^(<[^>]+>)+.?/,A;l={init:function(){this.each(function(){var a,d,e,h,m,i,n,o,w,E=[],s=[],q={},r=this,f=c(this),F=c([]),b=c.extend({},v,f.data("expander")||c.meta&&f.data()||{});i=!!f.find("."+b.detailClass).length;n=!!f.find("*").filter(function(){return/^block|table|list/.test(c(this).css("display"))}).length;
var t=(n?"div":"span")+"."+b.detailClass;a=b.moreClass+"";d=b.lessClass+"";var O=b.expandSpeed||0,p=c.trim(f.html());c.trim(f.text());var g=p.slice(0,b.slicePoint);b.moreSelector="span."+a.split(" ").join(".");b.lessSelector="span."+d.split(" ").join(".");if(!c.data(this,"expanderInit")){c.data(this,"expanderInit",true);c.data(this,"expander",b);c.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(j,k){q[k]=c.isFunction(b[k])});g=y(g);for(d=g.replace(B,"").length;d<
b.slicePoint;){a=p.charAt(g.length);if(a=="<")a=p.slice(g.length).match(N)[0];g+=a;d++}g=y(g,b.preserveWords);h=g.match(C)||[];m=g.match(D)||[];e=[];c.each(h,function(j,k){M.test(k)||e.push(k)});h=e;d=m.length;for(a=0;a<d;a++)m[a]=m[a].replace(D,"$1");c.each(h,function(j,k){var G=k.replace(C,"$1"),H=c.inArray(G,m);if(H===-1){E.push(k);s.push("</"+G+">")}else m.splice(H,1)});s.reverse();if(i){i=f.find(t).remove().html();g=f.html();p=g+i;a=""}else{i=p.slice(g.length);a=c.trim(i.replace(B,""));if(a===
""||a.split(/\s+/).length<b.widow)return;a=s.pop()||"";g+=s.join("");i=E.join("")+i}b.moreLabel=f.find(b.moreSelector).length?"":J(b);if(n)i=p;g+=a;b.summary=g;b.details=i;b.lastCloseTag=a;if(q.onSlice)b=(e=b.onSlice.call(r,b))&&e.details?e:b;n=I(b,n);f.html(n);o=f.find(t);w=f.find(b.moreSelector);b.collapseEffect==="slideUp"&&b.expandEffect!=="slideDown"||f.is(":hidden")?o.css({display:"none"}):o[b.collapseEffect](0);F=f.find("div."+b.summaryClass);w.find("a").unbind("click.expander").bind("click.expander",
function(j){j.preventDefault();w.hide();F.hide();q.beforeExpand&&b.beforeExpand.call(r);o.stop(false,true)[b.expandEffect](O,function(){o.css({zoom:""});q.afterExpand&&b.afterExpand.call(r);L(b,o,r)})});b.userCollapse&&!f.find(b.lessSelector).length&&f.find(t).append('<span class="'+b.lessClass+'">'+b.userCollapsePrefix+'<a href="#">'+b.userCollapseText+"</a></span>");f.find(b.lessSelector+" a").unbind("click.expander").bind("click.expander",function(j){j.preventDefault();clearTimeout(A);j=c(this).closest(t);
z(b,j);q.onCollapse&&b.onCollapse.call(r,true)})}})},destroy:function(){this.each(function(){var a,d,e=c(this);if(e.data("expanderInit")){a=c.extend({},e.data("expander")||{},v);d=e.find("."+a.detailClass).contents();e.removeData("expanderInit");e.removeData("expander");e.find(a.moreSelector).remove();e.find("."+a.summaryClass).remove();e.find("."+a.detailClass).after(d).remove();e.find(a.lessSelector).remove()}})}};l[u]&&l[u].call(this);return this};c.fn.expander.defaults=c.expander.defaults})(jQuery);
/*
 MIT License - http://www.opensource.org/licenses/mit-license.php

 For usage and examples, visit:
 http://timeago.yarp.com/

 Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
*/
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(jQuery)})(function(d){function k(){var a;a=d(this);if(!a.data("timeago")){a.data("timeago",{datetime:e.datetime(a)});var b=d.trim(a.text());e.settings.localeTitle?a.attr("title",a.data("timeago").datetime.toLocaleString()):0<b.length&&(!e.isTime(a)||!a.attr("title"))&&a.attr("title",b)}a=a.data("timeago");isNaN(a.datetime)||d(this).text(f(a.datetime));return this}function f(a){return e.inWords((new Date).getTime()-a.getTime())}
d.timeago=function(a){return a instanceof Date?f(a):"string"===typeof a?f(d.timeago.parse(a)):"number"===typeof a?f(new Date(a)):f(d.timeago.datetime(a))};var e=d.timeago;d.extend(d.timeago,{settings:{refreshMillis:6E4,allowFuture:!0,localeTitle:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",
year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(a){function b(b,e){return(d.isFunction(b)?b(e,a):b).replace(/%d/i,c.numbers&&c.numbers[e]||e)}var c=this.settings.strings,e=c.prefixAgo,f=c.suffixAgo;this.settings.allowFuture&&0>a&&(e=c.prefixFromNow,f=c.suffixFromNow);var h=Math.abs(a)/1E3,g=h/60,l=g/60,j=l/24,k=j/365,h=45>h&&b(c.seconds,Math.round(h))||90>h&&b(c.minute,1)||45>g&&b(c.minutes,Math.round(g))||90>g&&b(c.hour,1)||24>l&&b(c.hours,Math.round(l))||42>
l&&b(c.day,1)||30>j&&b(c.days,Math.round(j))||45>j&&b(c.month,1)||365>j&&b(c.months,Math.round(j/30))||1.5>k&&b(c.year,1)||b(c.years,Math.round(k)),g=c.wordSeparator||"";void 0===c.wordSeparator&&(g=" ");return d.trim([e,h,f].join(g))},parse:function(a){a=d.trim(a);a=a.replace(/\.\d+/,"");a=a.replace(/-/,"/").replace(/-/,"/");a=a.replace(/T/," ").replace(/Z/," UTC");a=a.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(a)},datetime:function(a){a=e.isTime(a)?d(a).attr("datetime"):d(a).attr("title");
return e.parse(a)},isTime:function(a){return"time"===d(a).get(0).tagName.toLowerCase()}});var m={init:function(){var a=d.proxy(k,this);a();var b=e.settings;0<b.refreshMillis&&setInterval(a,b.refreshMillis)},update:function(a){d(this).data("timeago",{datetime:e.parse(a)});k.apply(this)}};d.fn.timeago=function(a,b){var c=a?m[a]:m.init;if(!c)throw Error("Unknown function name '"+a+"' for timeago");this.each(function(){c.call(this,b)});return this};document.createElement("abbr");document.createElement("time")});
(function(s,k){var aa=k.jQuery;"object"===typeof exports?module.exports=aa?s(k,aa):function(R){if(R&&!R.fn)throw"Provide jQuery or null";return s(k,R)}:"function"===typeof define&&define.amd?define(function(){return s(k)}):s(k,!1)})(function(s,k){function aa(a,b){return function(){var c,f=this.base;this.base=a;c=b.apply(this,arguments);this.base=f;return c}}function R(a,b){G(b)&&(b=aa(!a?na:a._d?a:aa(na,a),b),b._d=1);return b}function oa(a,b){var c,f=b.props;for(c in f)if(Ca.test(c)&&(!a[c]||!a[c].fix))a[c]=
"convert"!==c?R(a.constructor.prototype[c],f[c]):f[c]}function pa(a){return a}function na(){return""}function Wa(a){try{throw console.log("JsRender dbg breakpoint: "+a),"dbg breakpoint";}catch(b){}return this.base?this.baseApply(arguments):a}function qa(a){this.name=(k.link?"JsViews":"JsRender")+" Error";this.message=a||this.name}function v(a,b){if(a){for(var c in b)a[c]=b[c];return a}}function Da(a,b,c){if(!a)return B.delimiters;if(C(a))return Da.apply(z,a);B.delimiters=[a,b,ga=c?c.charAt(0):ga];
ha=a.charAt(0);ia=a.charAt(1);S=b.charAt(0);ja=b.charAt(1);a="\\"+ha+"(\\"+ga+")?\\"+ia;b="\\"+S+"\\"+ja;ba="(?:(\\w+(?\x3d[\\/\\s\\"+S+"]))|(\\w+)?(:)|(\x3e)|(\\*))\\s*((?:[^\\"+S+"]|\\"+S+"(?!\\"+ja+"))*?)";p.rTag="(?:"+ba+")";ba=RegExp("(?:"+a+ba+"(\\/)?|\\"+ha+"(\\"+ga+")?\\"+ia+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+b,"g");p.rTmpl=RegExp("^\\s|\\s$|\x3c.*\x3e|([^\\\\]|^)[{}]|"+a+".*"+b);return L}function Ea(){var a=this.get("item");return a?a.index:void 0}function Fa(){return this.index}function Ga(a,
b,c){var f,d,g,h=this,e=!ca&&void 0!==b;g=h.ctx;if(a in g||a in(g=ka)){if(d=g&&g[a],"tag"===a||"root"===a||"parentTags"===a||h._.it===a)return d}else g=void 0;if(!d||!G(d)&&h.linked||h.tagCtx){if(!d||!d._cxp)if(g!==ka&&(h=h.tagCtx?h:(h=h.scope||h,!h.isTop&&h.ctx.tag||h),d=(g=h._ocps)&&g[a]||d),(!d||!d._cxp)&&(c||e))d=p._crcp(a,d,h,g);if(g=d&&d._cxp){if(e)return p._ucp(a,b,h,g);if(c)return a=d[1]?p._ceo(d[1].deps):[Xa],a.unshift(d[0]),a._cxp=g,a;d=d[1]?g.tag&&g.tag.cvtArgs?g.tag.cvtArgs(!0,g.tagElse)[g.ind]:
d[1](d[0].data,d[0],p):d[0]._ocp}}d&&G(d)&&(f=function(){return d.apply(!this||this===s?h:this,arguments)},v(f,d),f._vw=h);return f||d}function Ya(a,b){var c,f,d,g,h,e,j,l=this;l.tagName?(e=l,l=e.tagCtxs?e.tagCtxs[b||0]:e.tagCtx):e=l.tag;h=e.bindTo;g=l.args;if((j=e.convert)&&""+j===j)j="true"===j?void 0:l.view.getRsc("converters",j)||T("Unknown converter: '"+j+"'");if(a&&a.length)g=a;else if(j&&!a&&(g=g.slice()),h){d=[];for(c=h.length;c--;)f=h[c],d.unshift(ra(l,f));a&&(g=d)}if(j){h=h||[0];c=h.length;
j=j.apply(e,d||g);if(!C(j)||j.length!==c)j=[j],h=[0],c=1;if(a)g=j;else for(;c--;)f=h[c],+f===f&&(g[f]=j[c])}return g}function ra(a,b){return(a=a[+b===b?"args":"props"])&&a[b]}function Za(a){return this.cvtArgs(!0,a)}function W(a,b,c,f,d,g,h,e){var j="array"===b;this.content=e;this.views=j?[]:{};this.data=f;this.tmpl=d;f=this._={key:0,useKey:j?0:1,id:""+$a++,onRender:h,bnds:{}};this.linked=!!h;this.type=b||"top";(this.parent=c)?(this.root=c.root||this,b=c.views,h=c._,this.isTop=h.scp,this.scope=(!a.tag||
a.tag===c.ctx.tag)&&!this.isTop&&c.scope||this,h.useKey?(b[f.key="_"+h.useKey++]=this,this.index=Ha,this.getIndex=Ea):b.length===(f.key=this.index=g)?b.push(this):b.splice(g,0,this),this.ctx=a||c.ctx):this.ctx=a||{}}function ab(a){return this.base.apply(this,a)}function Ia(a,b,c,f){function d(b){var d;if(""+b===b||0<b.nodeType&&(g=b)){if(!g)if(/^\.\/[^\\:*?"<>]*$/.test(b))(d=y[a=a||b])?b=d:g=document.getElementById(b);else if(k.fn&&!p.rTmpl.test(b))try{g=k(b,document)[0]}catch(e){}if(g)if(f)b=g.innerHTML;
else{if(d=g.getAttribute(sa))d!==X?(b=y[d],delete y[d]):k.fn&&(b=k.data(g)[X]);if(!d||!b)a=a||(k.fn?X:b),b=Ia(a,g.innerHTML,c,f);b.tmplName=a=a||d;a!==X&&(y[a]=b);g.setAttribute(sa,a);k.fn&&k.data(g,X,b)}g=void 0}else b.fn||(b=void 0);return b}var g,h,e=b=b||"";p._html=Y.html;0===f&&(f=void 0,e=d(e));f=f||(b.markup?b:{});f.tmplName=a;c&&(f._parentTmpl=c);if(!e&&(b.markup&&(e=d(b.markup)))&&e.fn)e=e.markup;if(void 0!==e){e.fn||b.fn?e.fn&&(h=e):(b=Ja(e,f),ta(e.replace(bb,"\\$\x26"),b));if(!h){b=h=v(function(){return h.render.apply(h,
arguments)},b);var j,l;for(j in ua)e=j+"s",b[e]&&(l=b[e],b[e]={},z[e](l,b))}return h}}function Ka(a){for(var b=[],c=0,f=a.length;c<f;c++)b.push(a[c].unmap());return b}function Ja(a,b){var c,f=Z._wm||{},d=v({tmpls:[],links:{},bnds:[],_is:"template",render:va},b);d.markup=a;b.htmlTag||(c=cb.exec(a),d.htmlTag=c?c[1].toLowerCase():"");if((c=f[d.htmlTag])&&c!==f.div)d.markup=k.trim(d.markup);return d}function db(a,b){function c(d,g,h){var e,j,l=p.onStore[a];if(d&&typeof d===wa&&!d.nodeType&&!d.markup&&
!d.getTgt&&!("viewModel"===a&&d.getters||d.extend)){for(e in d)c(e,d[e],g);return g||z}void 0===g&&(g=d,d=void 0);d&&""+d!==d&&(h=g,g=d,d=void 0);j=h?"viewModel"===a?h:h[f]=h[f]||{}:c;e=b.compile;null===g?d&&delete j[d]:(e&&(g=e.call(j,d,g,h,0)||{},g._is=a),d&&(j[d]=g));l&&l(d,g,h,e);return g}var f=a+"s";z[f]=c}function La(a){L[a]=function(b){return arguments.length?(B[a]=b,L):B[a]}}function Ma(a){function b(b,f){this.tgt=a.getTgt(b,f)}G(a)&&(a={getTgt:a});a.baseMap&&(a=v(v({},a.baseMap),a));a.map=
function(a,f){return new b(a,f)};return a}function va(a,b,c,f,d,g){var h,e,j,l,k,t,n=f,m="";!0===b?(c=b,b=void 0):typeof b!==wa&&(b=void 0);(h=this.tag)?(n=n||this.view,j=n.getTmpl(h.template||this.tmpl),arguments.length||(a=n)):j=this;if(j){!f&&(a&&"view"===a._is)&&(n=a);n&&a===n&&(a=n.data);l=!n;ca=ca||l;n||((b=b||{}).root=a);if(!ca||Z.useViews||j.useViews||n&&n!==da)m=Na(j,a,b,c,n,d,g,h);else{n?(k=n.data,t=n.index,n.index=Ha):(n=da,k=n.data,n.data=a,n.ctx=b);if(C(a)&&!c){h=0;for(e=a.length;h<e;h++)n.index=
h,n.data=a[h],m+=j.fn(a[h],n,p)}else n.data=a,m+=j.fn(a,n,p);n.data=k;n.index=t}l&&(ca=void 0)}return m}function Na(a,b,c,f,d,g,h,e){var j,l,k,t,n,m,q,F="";if(e&&(k=e.tagName,q=e.tagCtx,c=c?U(c,e.ctx):e.ctx,a===d.content?l=a!==d.ctx._wrp?d.ctx._wrp:void 0:a!==q.content?a===e.template?(l=q.tmpl,c._wrp=q.content):l=q.content||d.content:l=d.content,!1===q.props.link&&(c=c||{},c.link=!1),n=q.props.itemVar))"~"!==n.charAt(0)&&M("Use itemVar\x3d'~myItem'"),n=n.slice(1);d&&(h=h||d._.onRender,c=U(c,d.ctx));
!0===g&&(j=!0,g=0);if(h&&(c&&!1===c.link||e&&e._.noVws))h=void 0;t=h;!0===h&&(t=void 0,h=d._.onRender);m=c=a.helpers?U(a.helpers,c):c;if(C(b)&&!f){f=j?d:void 0!==g&&d||new W(c,"array",d,b,a,g,h,l);d&&d._.useKey&&(f._.bnd=!e||e._.bnd&&e);d=0;for(j=b.length;d<j;d++)n&&(l=b[d],m=v({},c),m[n]=l),l=new W(m,"item",f,b[d],a,(g||0)+d,h,f.content),l._.it=n,k=a.fn(b[d],l,p),F+=f._.onRender?f._.onRender(k,l):k}else n&&(m=v({},c),m[n]=b),f=j?d:new W(m,k||"data",d,b,a,g,h,l),f._.it=n,F+=a.fn(b,f,p);e&&(f.tag=
e,f.tagElse=q.index,q.contentView=f);return t?t(F,f):F}function T(a){throw new p.Err(a);}function M(a){T("Syntax error\n"+a)}function ta(a,b,c,f,d){function g(b){(b-=q)&&p.push(a.substr(q,b).replace(xa,"\\n"))}function h(b,d){b&&(b+="}}",M((d?"{{"+d+"}} block has {{/"+b+" without {{"+b:"Unmatched or missing {{/"+b)+", in template:\n"+a))}var e,j,l,k,t,n=B.allowCode||b&&b.allowCode||!0===L.allowCode,m=[],q=0,F=[],p=m,r=[,,m];n&&b._is&&(b.allowCode=n);c&&(void 0!==f&&(a=a.slice(0,-f.length-2)+S),a=
ha+a+ja);h(F[0]&&F[0][2].pop()[0]);a.replace(ba,function(e,j,u,m,t,N,J,D,E,v,la,I){(J&&j||E&&!u||D&&":"===D.slice(-1)||v)&&M(e);N&&(t=":",m=ma);E=E||c&&!d;var Oa;j=(j||c)&&[[]];var w="",K="",B="",z="",C="",G="",s="",P="";E=!E&&!t;u=u||(D=D||"#data",t);g(I);q=I+e.length;J?n&&p.push(["*","\n"+D.replace(/^:/,"ret+\x3d ").replace(Pa,"$1")+";\n"]):u?("else"===u&&(eb.test(D)&&M('for "{{else if expr}}" use "{{else expr}}"'),j=r[8]&&[[]],r[9]=a.substring(r[9],I),r=F.pop(),p=r[2],E=!0),D&&Qa(D.replace(xa,
" "),j,b).replace(fb,function(a,b,d,c,e,f,g,h){c="'"+e+"':";g?(K+=f+",",z+="'"+h+"',"):d?(B+=c+"j._cp("+f+',"'+h+'",view),',G+=c+"'"+h+"',"):b?s+=f:("trigger"===e&&(P+=f),"lateRender"===e&&(Oa=h),w+=c+f+",",C+=c+"'"+h+"',",k=k||Ca.test(e));return""}).slice(0,-1),j&&j[0]&&j.pop(),l=[u,m||!!f||k||"",E&&[],[(z||(":"===u?"'#data',":"")).slice(0,-1),C.slice(0,-1),G.slice(0,-1)],[(K||(":"===u?"data,":"")).slice(0,-1),w.slice(0,-1),B.slice(0,-1)],s,P,Oa,j||0],p.push(l),E&&(F.push(r),r=l,r[9]=q)):la&&(h(la!==
r[0]&&"else"!==r[0]&&la,r[0]),r[9]=a.substring(r[9],I),r=F.pop());h(!r&&la);p=r[2]});g(a.length);(q=m[m.length-1])&&h(""+q!==q&&+q[9]===q[9]&&q[0]);if(c){j=ya(m,a,c);t=[];for(e=m.length;e--;)t.unshift(m[e][8]);za(j,t)}else j=ya(m,b);return j}function za(a,b){var c,f,d=0,g=b.length;a.deps=[];for(a.paths=[];d<g;d++)for(c in a.paths.push(f=b[d]),f)"_jsvto"!==c&&(f.hasOwnProperty(c)&&f[c].length&&!f[c].skp)&&(a.deps=a.deps.concat(f[c]))}function Ra(a,b){return"\n\t"+(b?b+":{":"")+"args:["+a[0]+"]"+(a[1]||
!b?",\n\tprops:{"+a[1]+"}":"")+(a[2]?",\n\tctx:{"+a[2]+"}":"")}function Qa(a,b,c){var f,d,g,h,e,j=b&&b[0],l={bd:j},k={"0":l},t=0,n=(c?c.links:j&&(j.links=j.links||{}))||da.tmpl.links,m=0,q={},F={},p=(a+(c?" ":"")).replace(gb,function(r,p,A,u,x,O,N,J,D,E,B,v,I,z,w,K,C,G,V,s){function L(a,c,e,g,h,u,A,k){var n="."===e;if(e&&(x=x.slice(c.length),/^\.?constructor$/.test(k||x)&&M(a),n||(a=(g?'view.ctxPrm("'+g+'")':h?"view":"data")+(k?(u?"."+u:g?"":h?"":"."+e)+(A||""):(k=g?"":h?u||"":e,"")),a+=k?"."+k:"",
a=c+("view.data"===a.slice(0,9)?a.slice(5):a)),j)){y="linkTo"===f?d=b._jsvto=b._jsvto||[]:l.bd;if(H=n&&y[y.length-1]){if(H._cpfn){for(;H.sb;)H=H.sb;H.bnd&&(x="^"+x.slice(1));H.sb=x;H.bnd=H.bnd||"^"===x.charAt(0)}}else y.push(x);F[m]=V+(n?1:0)}return a}u&&!J&&(x=u+x);O=O||"";A=A||p||v;x=x||D;E=E||C||"";var P,y,H,Q;D=")";"["===E&&(E="[j._sq(",D=")]");if(N&&!e&&!h)M(a);else{if(j&&(K&&!e&&!h)&&(!f||g||d))if(N=F[m-1],s.length-1>V-(N||0)){N=s.slice(N,V+r.length);if(!0!==P)if(y=d||k[m-1].bd,(H=y[y.length-
1])&&H.prm){for(;H.sb&&H.sb.prm;)H=H.sb;Q=H.sb={path:H.sb,bnd:H.bnd}}else y.push(Q={path:y.pop()});K=ia+":"+N+" onerror\x3d''"+S;P=n[K];P||(n[K]=!0,n[K]=P=ta(K,c,!0));!0!==P&&Q&&(Q._cpfn=P,Q.prm=l.bd,Q.bnd=Q.bnd||Q.path&&0<=Q.path.indexOf("^"))}return e?(e=!I,e?r:v+'"'):h?(h=!z,h?r:v+'"'):(A?(F[m]=V++,l=k[++m]={bd:[]},A):"")+(G?m?"":(t=s.slice(t,V),f?(f=g=d=!1,"\b"):"\b,")+t+(t=V+r.length,j&&b.push(l.bd=[]),"\b"):J?(m&&M(a),j&&b.pop(),f=x,g=u,t=V+r.length,j&&(j=l.bd=b[f]=[],j.skp=!u),x+":"):x?x.split("^").join(".").replace(hb,
L)+(E?(l=k[++m]={bd:[]},q[m]=D,E):O):O?O:w?(w=q[m]||w,q[m]=!1,l=k[--m],w)+(E?(l=k[++m],q[m]=D,E):""):B?(q[m]||M(a),","):p?"":(e=I,h=z,'"'))}});return!m&&p||M(a)}function ya(a,b,c){var f,d,g,h,e,j,l,k,t,n,m,q,p,v,r,z,A,u,x,O,N,J,D,E,y,C,I=0,s=Z.useViews||b.useViews||b.tags||b.templates||b.helpers||b.converters,w="",K={},G=a.length;""+b===b?(A=c?'data-link\x3d"'+b.replace(xa," ").slice(1,-1)+'"':b,b=0):(A=b.tmplName||"unnamed",b.allowCode&&(K.allowCode=!0),b.debug&&(K.debug=!0),n=b.bnds,z=b.tmpls);
for(f=0;f<G;f++)if(d=a[f],""+d===d)w+='\n+"'+d+'"';else if(g=d[0],"*"===g)w+=";\n"+d[1]+"\nret\x3dret";else{h=d[1];O=!c&&d[2];e=Ra(d[3],"params")+"},"+Ra(q=d[4]);y=d[6];C=d[7];v=d[9]&&d[9].replace(Pa,"$1");if(p="else"===g)m&&m.push(d[8]);else if(D=d[5]||!1!==B.debugMode&&"undefined",n&&(m=d[8]))m=[m],I=n.push(1);s=s||q[1]||q[2]||m||/view.(?!index)/.test(q[0]);(d=":"===g)?h&&(g=h===ma?"\x3e":h+g):(O&&(u=Ja(v,K),u.tmplName=A+"/"+g,u.useViews=u.useViews||s,ya(O,u),s=u.useViews,z.push(u)),p||(x=g,s=s||
g&&(!ea[g]||!ea[g].flow),N=w,w=""),u=(u=a[f+1])&&"else"===u[0]);E=D?";\ntry{\nret+\x3d":"\n+";v=p="";if(d&&(m||y||h&&h!==ma||C)){J=new Function("data,view,j,u","// "+A+" "+ ++I+" "+g+"\nreturn {"+e+"};");J._er=D;J._tag=g;J._bd=!!m;J._lr=C;if(c)return J;za(J,m);r='c("'+h+'",view,';t=!0;p=r+I+",";v=")"}w+=d?(c?(D?"try{\n":"")+"return ":E)+(t?(t=void 0,s=k=!0,r+(J?(n[I-1]=J,I):"{"+e+"}")+")"):"\x3e"===g?(l=!0,"h("+q[0]+")"):"((v\x3d"+q[0]+")!\x3dnull?v:"+(c?"null)":'"")')):(j=!0,"\n{view:view,tmpl:"+
(O?z.length:"0")+","+e+"},");if(x&&!u){w="["+w.slice(0,-1)+"]";r='t("'+x+'",view,this,';if(c||m){w=new Function("data,view,j,u"," // "+A+" "+I+" "+x+"\nreturn "+w+";");w._er=D;w._tag=x;m&&za(n[I-1]=w,m);w._lr=C;if(c)return w;p=r+I+",undefined,";v=")"}w=N+E+r+(w.deps&&I||w)+")";x=m=0}D&&!u&&(s=!0,w+=";\n}catch(e){ret"+(c?"urn ":"+\x3d")+p+"j._err(e,view,"+D+")"+v+";}"+(c?"":"ret\x3dret"))}w="// "+A+"\nvar v"+(j?",t\x3dj._tag":"")+(k?",c\x3dj._cnvt":"")+(l?",h\x3dj._html":"")+(c?";\n":',ret\x3d""\n')+
(K.debug?"debugger;":"")+w+(c?"\n":";\nreturn ret;");try{w=new Function("data,view,j,u",w)}catch(L){M("Compiled template code:\n\n"+w+'\n: "'+(L.message||L)+'"')}b&&(b.fn=w,b.useViews=!!s);return w}function U(a,b){return a&&a!==b?b?v(v({},b),a):a:b&&v({},b)}function ib(a){return Sa[a]||(Sa[a]="\x26#"+a.charCodeAt(0)+";")}function jb(a){var b,c,f=[];if(typeof a===wa)for(b in a)c=a[b],b!==$&&(a.hasOwnProperty(b)&&!G(c))&&f.push({key:b,prop:c});return f}function Ta(a,b,c){var f=this.jquery&&(this[0]||
T("Unknown template")),d=f.getAttribute(sa);return va.call(d&&k.data(f)[X]||y(f),a,b,c)}function Ua(a){return void 0!=a?kb.test(a)&&(""+a).replace(lb,ib)||a:""}var mb=!1===k;k=k&&k.fn?k:s.jQuery;var Aa,ba,da,z,$,Xa="_ocp",G,C,y,Y,ka,ea,p,B,Z,L,ha,ia,S,ja,ga,Va,hb=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,gb=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,
ca,xa=/[ \t]*(\r\n|\n|\r)/g,Pa=/\\(['"])/g,bb=/['"\\]/g,fb=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,eb=/^if\s/,cb=/<(\w+)[>\s]/,kb=/[\x00`><\"'&=]/,Ca=/^on[A-Z]|^convert(Back)?$/,nb=/^\#\d+_`[\s\S]*\/\d+_`$/,lb=/[\x00`><"'&=]/g,$a=0,Sa={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;","\x00":"\x26#0;","'":"\x26#39;",'"':"\x26#34;","`":"\x26#96;","\x3d":"\x26#61;"},ma="html",wa="object",sa="data-jsv-tmpl",X="jsvTmpl",Ha="For #index in nested block use #getIndex().",
Ba={},fa=s.jsrender,ob=fa&&k&&!k.render,ua={template:{compile:Ia},tag:{compile:function(a,b,c){function f(){this._={unlinked:!0};this.inline=!0;this.tagName=a}var d,g,h=new p._tg;G(b)?b={depends:b.depends,render:b}:""+b===b&&(b={template:b});if(d=b.baseTag)for(g in b.flow=!!b.flow,b.baseTag=d=""+d===d?c&&c.tags[d]||ea[d]:d,h=v(h,d),b)h[g]=R(d[g],b[g]);else h=v(h,b);if(void 0!==(b=h.template))h.template=""+b===b?y[b]||y(b):b;(f.prototype=h).constructor=h._ctr=f;c&&(h._parentTmpl=c);return h}},viewModel:{compile:function(a,
b){function c(a){j.apply(this,a)}function f(){return new c(arguments)}function d(a,b){for(var d,c,e,f,g=0;g<v;g++){e=p[g];d=void 0;e+""!==e&&(d=e,e=d.getter);if(void 0===(f=a[e])&&d&&void 0!==(c=d.defaultVal))f=G(c)?c.call(a):c;b(f,d&&l[d.type],e)}}function g(a){a=a+""===a?JSON.parse(a):a;var b,c,e,g,h,j,l,k,m=0,p=this;if(C(p)){j={};k=[];c=a.length;for(e=p.length;m<c;m++){l=a[m];h=!1;for(b=0;b<e&&!h;b++)j[b]||(g=p[b],n&&(j[b]=h=n+""===n?l[n]&&(s[n]?g[n]():g[n])===l[n]:n(g,l)));h?(g.merge(l),k.push(g)):
k.push(f.map(l))}r?r(p).refresh(k,!0):p.splice.apply(p,[0,p.length].concat(k))}else for(b in d(a,function(a,b,d){if(b)p[d]().merge(a);else p[d](a)}),a)b!==$&&!s[b]&&(p[b]=a[b])}function h(){var a,b,d,c,e=0;if(C(this))return Ka(this);for(a={};e<v;e++)b=p[e],d=void 0,b+""!==b&&(d=b,b=d.getter),c=this[b](),a[b]=d&&c&&l[d.type]?C(c)?Ka(c):c.unmap():c;for(b in this)if("_is"!==b&&!s[b]&&b!==$&&("_"!==b.charAt(0)||!s[b.slice(1)])&&!G(this[b]))a[b]=this[b];return a}var e,j,l=this,p=b.getters,t=b.extend,n=
b.id,m=k.extend({_is:a||"unnamed",unmap:h,merge:g},t),q="",F="",v=p?p.length:0,r=k.observable,s={};c.prototype=m;for(e=0;e<v;e++)(function(a){a=a.getter||a;s[a]=e+1;var b="_"+a;q+=(q?",":"")+a;F+="this."+b+" \x3d "+a+";\n";m[a]=m[a]||function(d){if(!arguments.length)return this[b];r?r(this).setProperty(a,d):this[b]=d};r&&(m[a].set=m[a].set||function(a){this[b]=a})})(p[e]);j=new Function(q,F.slice(0,-1));j.prototype=m;m.constructor=j;f.map=function(b){b=b+""===b?JSON.parse(b):b;var c,e=0,f=b,j=[];
if(C(b)){b=b||[];for(c=b.length;e<c;e++)j.push(this.map(b[e]));j._is=a;j.unmap=h;j.merge=g;return j}if(b)for(c in d(b,function(a,b){b&&(a=b.map(a));j.push(a)}),f=this.apply(this,j),b)c!==$&&!s[c]&&(f[c]=b[c]);return f};f.getters=p;f.extend=t;f.id=n;return f}},helper:{},converter:{}};z={jsviews:"v0.9.90",sub:{View:W,Err:qa,tmplFn:ta,parse:Qa,extend:v,extendCtx:U,syntaxErr:M,onStore:{template:function(a,b){null===b?delete Ba[a]:Ba[a]=b}},addSetting:La,settings:{allowCode:!1},advSet:na,_ths:oa,_gm:R,
_tg:function(){},_cnvt:function(a,b,c,f){var d,g,h,e="number"===typeof c&&b.tmpl.bnds[c-1],j=b.linkCtx;void 0===f&&(e&&e._lr)&&(f="");void 0!==f?c=f={props:{},args:[f]}:e&&(c=e(b.data,b,p));e=e._bd&&e;g=c.args[0];if(a||e){d=j&&j.tag;c.view=b;if(!d){d=v(new p._tg,{_:{bnd:e,unlinked:!0},inline:!j,tagName:":",convert:a,flow:!0,tagCtx:c});a=c.args.length;if(1<a)for(h=d.bindTo=[];a--;)h.unshift(a);j&&(j.tag=d,d.linkCtx=j);c.ctx=U(c.ctx,(j?j.view:b).ctx);oa(d,c)}d._er=f&&g;d.ctx=c.ctx||d.ctx||{};c.ctx=
void 0;g=d.cvtArgs()[0]}g=e&&b._.onRender?b._.onRender(g,b,d):g;return void 0!=g?g:""},_tag:function(a,b,c,f,d,g){function h(a){var b;if(b=e[a])e[a]=b=C(b)?b:[b],z!==b.length&&T(a+" length not same as bindTo ")}b=b||da;var e,j,l,k,t,n,m,q,s,v,r,z,A=0,u="",x=b.linkCtx||0;r=b.ctx;var B=c||b.tmpl,y="number"===typeof f&&b.tmpl.bnds[f-1];"tag"===a._is?(e=a,a=e.tagName,f=e.tagCtxs):j=b.getRsc("tags",a)||T("Unknown tag: {{"+a+"}} ");if(void 0===g&&y&&(y._lr=(j.lateRender||y._lr)&&"false"!==y._lr))g="";void 0!==
g?(u+=g,f=g=[{props:{},args:[],params:{}}]):y&&(f=y(b.data,b,p));for(n=f.length;A<n;A++){l=f[A];s=l.tmpl;if(!x||!x.tag||A&&!x.tag.inline||e._er||s&&+s===s)s&&B.tmpls&&(l.tmpl=l.content=B.tmpls[s-1]),l.index=A,l.render=va,l.view=b,l.ctx=U(l.ctx,r);if(c=l.props.tmpl)l.tmpl=b.getTmpl(c),l.content=l.content||l.tmpl;e||(e=new j._ctr,v=!!e.init,e.parent=t=r&&r.tag,e.tagCtxs=f,s=e.dataMap,x&&(e.inline=!1,x.tag=e,e.linkCtx=x),(e._.bnd=y||x.fn)?e._.arrVws={}:e.dataBoundOnly&&T(a+" must be data-bound:\n{^{"+
a+"}}"));f=e.tagCtxs;s=e.dataMap;l.tag=e;s&&f&&(l.map=f[A].map);e.flow||(c=l.ctx=l.ctx||{},l=e.parents=c.parentTags=r&&U(c.parentTags,r.parentTags)||{},t&&(l[t.tagName]=t),l[e.tagName]=c.tag=e)}if(!(e._er=g)){oa(e,f[0]);e.rendering={};for(A=0;A<n;A++){l=e.tagCtx=f[A];g=l.props;e.ctx=l.ctx;if(!A){v&&(e.init(l,x,e.ctx),v=void 0);!l.args.length&&!1!==e.argDefault&&(l.args=a=[l.view.data],l.params.args=["#data"]);q=e.bindTo;if(void 0!==q){q=e.bindTo=C(q)?q:[q];for(j=q.length;j--;)r=q[j],isNaN(parseInt(r))||
(r=parseInt(r)),q[j]=r}q=e.bindTo||[0];z=q.length;e._.bnd&&(h("linkedElement"),h("linkedCtxParam"));x&&(x.attr=e.attr=x.attr||e.attr);k=e.attr;e._.noVws=k&&k!==ma}a=e.cvtArgs(void 0,A);if(e.linkedCtxParam)for(j=z;j--;)if(t=e.linkedCtxParam[j])r=q[j],l.ctx[t]=p._cp(ra(l,r),ra(l.params,r),l.view,e._.bnd&&{tag:e,ind:j,tagElse:A});if(j=g.dataMap||s)if(a.length||g.dataMap){t=l.map;if(!t||t.src!==a[0]||d)t&&t.src&&t.unmap(),t=l.map=j.map(a[0],g,void 0,!e._.bnd);a=[t.tgt]}m=void 0;e.render&&(m=e.render.apply(e,
a),b.linked&&(m&&!nb.test(m))&&(c={links:[]},c.render=c.fn=function(){return m},m=Na(c,b.data,void 0,!0,b,void 0,void 0,e)));a.length||(a=[b]);void 0===m&&(a=a[0],e.contentCtx&&(a=!0===e.contentCtx?b:e.contentCtx(a)),m=l.render(a,!0)||(d?void 0:""));u=u?u+(m||""):m}e.rendering=void 0}e.tagCtx=f[0];e.ctx=e.tagCtx.ctx;e._.noVws&&e.inline&&(u="text"===k?Y.html(u):"");return y&&b._.onRender?b._.onRender(u,b,e):u},_er:T,_err:function(a,b,c){var f=void 0!==c?G(c)?c.call(b.data,a,b):c||"":"{Error: "+(a.message||
a)+"}";if(B.onError&&void 0!==(c=B.onError.call(b.data,a,c&&f,b)))f=c;return b&&!b.linkCtx?Y.html(f):f},_cp:pa,_sq:function(a){"constructor"===a&&M("");return a}},settings:{delimiters:Da,advanced:function(a){return a?(v(Z,a),p.advSet(),L):Z}},map:Ma};(qa.prototype=Error()).constructor=qa;Ea.depends=function(){return[this.get("item"),"index"]};Fa.depends="index";W.prototype={get:function(a,b){!b&&!0!==a&&(b=a,a=void 0);var c,f,d,g;d=this;c=!b||"root"===b;if(a){if(g=b&&d.type===b&&d,!g)if(c=d.views,
d._.useKey)for(f in c){if(g=b?c[f].get(a,b):c[f])break}else{f=0;for(d=c.length;!g&&f<d;f++)g=b?c[f].get(a,b):c[f]}}else if(c)g=d.root;else for(;d&&!g;)g=d.type===b?d:void 0,d=d.parent;return g},getIndex:Fa,getRsc:function(a,b){var c,f=this;if(""+b===b){for(;void 0===c&&f;)c=(c=f.tmpl&&f.tmpl[a])&&c[b],f=f.parent;return c||z[a][b]}},getTmpl:function(a){return a&&(a.fn?a:this.getRsc("templates",a)||y(a))},ctxPrm:Ga,_is:"view"};p=z.sub;L=z.settings;if(!(fa||k&&k.render)){for(Aa in ua)db(Aa,ua[Aa]);Y=
z.converters;ka=z.helpers;ea=z.tags;p._tg.prototype={baseApply:ab,cvtArgs:Ya,bndArgs:Za,ctxPrm:Ga};da=p.topView=new W;k?(k.fn.render=Ta,$=k.expando,k.observable&&(v(p,k.views.sub),z.map=k.views.map)):(k={},mb&&(s.jsrender=k),k.renderFile=k.__express=k.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js";},k.isFunction=function(a){return"function"===typeof a},k.isArray=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},p._jq=function(a){a!==k&&(v(a,k),k=a,
k.fn.render=Ta,delete k.jsrender,$=k.expando)},k.jsrender="v0.9.90");B=p.settings;B.allowCode=!1;G=k.isFunction;k.render=Ba;k.views=z;k.templates=y=z.templates;for(Va in B)La(Va);(L.debugMode=function(a){return void 0===a?B.debugMode:(B.debugMode=a,B.onError=a+""===a?new Function("","return '"+a+"';"):G(a)?a:void 0,L)})(!1);Z=B.advanced={useViews:!1,_jsv:!1};ea({"if":{render:function(a){var b=this.tagCtx;return this.rendering.done||!a&&(arguments.length||!b.index)?"":(this.rendering.done=!0,this.selected=
b.index,void 0)},contentCtx:!0,flow:!0},"for":{render:function(a){var b=!arguments.length,c,f=this.tagCtx,d="",g=0;if(!this.rendering.done&&(c=b?f.view.data:a,void 0!==c&&(d+=f.render(c,b),g+=C(c)?c.length:1),this.rendering.done=g))this.selected=f.index;return d},flow:!0},props:{baseTag:"for",dataMap:Ma(jb),flow:!0},include:{flow:!0},"*":{render:pa,flow:!0},":*":{render:pa,flow:!0},dbg:ka.dbg=Y.dbg=Wa});Y({html:Ua,attr:Ua,url:function(a){return void 0!=a?encodeURI(""+a):null===a?a:""}})}B=p.settings;
C=(k||fa).isArray;L.delimiters("{{","}}","^");ob&&fa.views.sub._jq(k);return k||fa},window);
!function(){var q=null;window.PR_SHOULD_USE_CONTINUATION=!0;
(function(){function S(a){function d(e){var b=e.charCodeAt(0);if(b!==92)return b;var a=e.charAt(1);return(b=r[a])?b:"0"<=a&&a<="7"?parseInt(e.substring(1),8):a==="u"||a==="x"?parseInt(e.substring(2),16):e.charCodeAt(1)}function g(e){if(e<32)return(e<16?"\\x0":"\\x")+e.toString(16);e=String.fromCharCode(e);return e==="\\"||e==="-"||e==="]"||e==="^"?"\\"+e:e}function b(e){var b=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],a=
b[0]==="^",c=["["];a&&c.push("^");for(var a=a?1:0,f=b.length;a<f;++a){var h=b[a];if(/\\[bdsw]/i.test(h))c.push(h);else{var h=d(h),l;a+2<f&&"-"===b[a+1]?(l=d(b[a+2]),a+=2):l=h;e.push([h,l]);l<65||h>122||(l<65||h>90||e.push([Math.max(65,h)|32,Math.min(l,90)|32]),l<97||h>122||e.push([Math.max(97,h)&-33,Math.min(l,122)&-33]))}}e.sort(function(e,a){return e[0]-a[0]||a[1]-e[1]});b=[];f=[];for(a=0;a<e.length;++a)h=e[a],h[0]<=f[1]+1?f[1]=Math.max(f[1],h[1]):b.push(f=h);for(a=0;a<b.length;++a)h=b[a],c.push(g(h[0])),
h[1]>h[0]&&(h[1]+1>h[0]&&c.push("-"),c.push(g(h[1])));c.push("]");return c.join("")}function s(e){for(var a=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),c=a.length,d=[],f=0,h=0;f<c;++f){var l=a[f];l==="("?++h:"\\"===l.charAt(0)&&(l=+l.substring(1))&&(l<=h?d[l]=-1:a[f]=g(l))}for(f=1;f<d.length;++f)-1===d[f]&&(d[f]=++x);for(h=f=0;f<c;++f)l=a[f],l==="("?(++h,d[h]||(a[f]="(?:")):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=h&&
(a[f]="\\"+d[l]);for(f=0;f<c;++f)"^"===a[f]&&"^"!==a[f+1]&&(a[f]="");if(e.ignoreCase&&m)for(f=0;f<c;++f)l=a[f],e=l.charAt(0),l.length>=2&&e==="["?a[f]=b(l):e!=="\\"&&(a[f]=l.replace(/[A-Za-z]/g,function(a){a=a.charCodeAt(0);return"["+String.fromCharCode(a&-33,a|32)+"]"}));return a.join("")}for(var x=0,m=!1,j=!1,k=0,c=a.length;k<c;++k){var i=a[k];if(i.ignoreCase)j=!0;else if(/[a-z]/i.test(i.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){m=!0;j=!1;break}}for(var r={b:8,t:9,n:10,v:11,
f:12,r:13},n=[],k=0,c=a.length;k<c;++k){i=a[k];if(i.global||i.multiline)throw Error(""+i);n.push("(?:"+s(i)+")")}return RegExp(n.join("|"),j?"gi":"g")}function T(a,d){function g(a){var c=a.nodeType;if(c==1){if(!b.test(a.className)){for(c=a.firstChild;c;c=c.nextSibling)g(c);c=a.nodeName.toLowerCase();if("br"===c||"li"===c)s[j]="\n",m[j<<1]=x++,m[j++<<1|1]=a}}else if(c==3||c==4)c=a.nodeValue,c.length&&(c=d?c.replace(/\r\n?/g,"\n"):c.replace(/[\t\n\r ]+/g," "),s[j]=c,m[j<<1]=x,x+=c.length,m[j++<<1|1]=
a)}var b=/(?:^|\s)nocode(?:\s|$)/,s=[],x=0,m=[],j=0;g(a);return{a:s.join("").replace(/\n$/,""),d:m}}function H(a,d,g,b){d&&(a={a:d,e:a},g(a),b.push.apply(b,a.g))}function U(a){for(var d=void 0,g=a.firstChild;g;g=g.nextSibling)var b=g.nodeType,d=b===1?d?a:g:b===3?V.test(g.nodeValue)?a:d:d;return d===a?void 0:d}function C(a,d){function g(a){for(var j=a.e,k=[j,"pln"],c=0,i=a.a.match(s)||[],r={},n=0,e=i.length;n<e;++n){var z=i[n],w=r[z],t=void 0,f;if(typeof w==="string")f=!1;else{var h=b[z.charAt(0)];
if(h)t=z.match(h[1]),w=h[0];else{for(f=0;f<x;++f)if(h=d[f],t=z.match(h[1])){w=h[0];break}t||(w="pln")}if((f=w.length>=5&&"lang-"===w.substring(0,5))&&!(t&&typeof t[1]==="string"))f=!1,w="src";f||(r[z]=w)}h=c;c+=z.length;if(f){f=t[1];var l=z.indexOf(f),B=l+f.length;t[2]&&(B=z.length-t[2].length,l=B-f.length);w=w.substring(5);H(j+h,z.substring(0,l),g,k);H(j+h+l,f,I(w,f),k);H(j+h+B,z.substring(B),g,k)}else k.push(j+h,w)}a.g=k}var b={},s;(function(){for(var g=a.concat(d),j=[],k={},c=0,i=g.length;c<i;++c){var r=
g[c],n=r[3];if(n)for(var e=n.length;--e>=0;)b[n.charAt(e)]=r;r=r[1];n=""+r;k.hasOwnProperty(n)||(j.push(r),k[n]=q)}j.push(/[\S\s]/);s=S(j)})();var x=d.length;return g}function v(a){var d=[],g=[];a.tripleQuotedStrings?d.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):a.multiLineStrings?d.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,
q,"'\"`"]):d.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]);a.verbatimStrings&&g.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var b=a.hashComments;b&&(a.cStyleComments?(b>1?d.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):d.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),g.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,q])):d.push(["com",
/^#[^\n\r]*/,q,"#"]));a.cStyleComments&&(g.push(["com",/^\/\/[^\n\r]*/,q]),g.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q]));if(b=a.regexLiterals){var s=(b=b>1?"":"\n\r")?".":"[\\S\\s]";g.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*("+("/(?=[^/*"+b+"])(?:[^/\\x5B\\x5C"+b+"]|\\x5C"+s+"|\\x5B(?:[^\\x5C\\x5D"+b+"]|\\x5C"+
s+")*(?:\\x5D|$))+/")+")")])}(b=a.types)&&g.push(["typ",b]);b=(""+a.keywords).replace(/^ | $/g,"");b.length&&g.push(["kwd",RegExp("^(?:"+b.replace(/[\s,]+/g,"|")+")\\b"),q]);d.push(["pln",/^\s+/,q," \r\n\t\u00a0"]);b="^.[^\\s\\w.$@'\"`/\\\\]*";a.regexLiterals&&(b+="(?!s*/)");g.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,
q],["pun",RegExp(b),q]);return C(d,g)}function J(a,d,g){function b(a){var c=a.nodeType;if(c==1&&!x.test(a.className))if("br"===a.nodeName)s(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)b(a);else if((c==3||c==4)&&g){var d=a.nodeValue,i=d.match(m);if(i)c=d.substring(0,i.index),a.nodeValue=c,(d=d.substring(i.index+i[0].length))&&a.parentNode.insertBefore(j.createTextNode(d),a.nextSibling),s(a),c||a.parentNode.removeChild(a)}}function s(a){function b(a,c){var d=
c?a.cloneNode(!1):a,e=a.parentNode;if(e){var e=b(e,1),g=a.nextSibling;e.appendChild(d);for(var i=g;i;i=g)g=i.nextSibling,e.appendChild(i)}return d}for(;!a.nextSibling;)if(a=a.parentNode,!a)return;for(var a=b(a.nextSibling,0),d;(d=a.parentNode)&&d.nodeType===1;)a=d;c.push(a)}for(var x=/(?:^|\s)nocode(?:\s|$)/,m=/\r\n?|\n/,j=a.ownerDocument,k=j.createElement("li");a.firstChild;)k.appendChild(a.firstChild);for(var c=[k],i=0;i<c.length;++i)b(c[i]);d===(d|0)&&c[0].setAttribute("value",d);var r=j.createElement("ol");
r.className="linenums";for(var d=Math.max(0,d-1|0)||0,i=0,n=c.length;i<n;++i)k=c[i],k.className="L"+(i+d)%10,k.firstChild||k.appendChild(j.createTextNode("\u00a0")),r.appendChild(k);a.appendChild(r)}function p(a,d){for(var g=d.length;--g>=0;){var b=d[g];F.hasOwnProperty(b)?D.console&&console.warn("cannot override language handler %s",b):F[b]=a}}function I(a,d){if(!a||!F.hasOwnProperty(a))a=/^\s*</.test(d)?"default-markup":"default-code";return F[a]}function K(a){var d=a.h;try{var g=T(a.c,a.i),b=g.a;
a.a=b;a.d=g.d;a.e=0;I(d,b)(a);var s=/\bMSIE\s(\d+)/.exec(navigator.userAgent),s=s&&+s[1]<=8,d=/\n/g,x=a.a,m=x.length,g=0,j=a.d,k=j.length,b=0,c=a.g,i=c.length,r=0;c[i]=m;var n,e;for(e=n=0;e<i;)c[e]!==c[e+2]?(c[n++]=c[e++],c[n++]=c[e++]):e+=2;i=n;for(e=n=0;e<i;){for(var p=c[e],w=c[e+1],t=e+2;t+2<=i&&c[t+1]===w;)t+=2;c[n++]=p;c[n++]=w;e=t}c.length=n;var f=a.c,h;if(f)h=f.style.display,f.style.display="none";try{for(;b<k;){var l=j[b+2]||m,B=c[r+2]||m,t=Math.min(l,B),A=j[b+1],G;if(A.nodeType!==1&&(G=x.substring(g,
t))){s&&(G=G.replace(d,"\r"));A.nodeValue=G;var L=A.ownerDocument,o=L.createElement("span");o.className=c[r+1];var v=A.parentNode;v.replaceChild(o,A);o.appendChild(A);g<l&&(j[b+1]=A=L.createTextNode(x.substring(t,l)),v.insertBefore(A,o.nextSibling))}g=t;g>=l&&(b+=2);g>=B&&(r+=2)}}finally{if(f)f.style.display=h}}catch(u){D.console&&console.log(u&&u.stack||u)}}var D=window,y=["break,continue,do,else,for,if,return,while"],E=[[y,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],
"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],M=[E,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],N=[E,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],
O=[N,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],E=[E,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],P=[y,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],
Q=[y,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],W=[y,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],y=[y,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],R=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,
V=/\S/,X=v({keywords:[M,O,E,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",P,Q,y],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),F={};p(X,["default-code"]);p(C([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",
/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);p(C([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],
["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);p(C([],[["atv",/^[\S\s]+/]]),["uq.val"]);p(v({keywords:M,hashComments:!0,cStyleComments:!0,types:R}),["c","cc","cpp","cxx","cyc","m"]);p(v({keywords:"null,true,false"}),["json"]);p(v({keywords:O,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:R}),
["cs"]);p(v({keywords:N,cStyleComments:!0}),["java"]);p(v({keywords:y,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]);p(v({keywords:P,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]);p(v({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]);p(v({keywords:Q,
hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]);p(v({keywords:E,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]);p(v({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);p(v({keywords:W,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]);
p(C([],[["str",/^[\S\s]+/]]),["regex"]);var Y=D.PR={createSimpleLexer:C,registerLangHandler:p,sourceDecorator:v,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:D.prettyPrintOne=function(a,d,g){var b=document.createElement("div");b.innerHTML="<pre>"+a+"</pre>";b=b.firstChild;g&&J(b,g,!0);K({h:d,j:g,c:b,i:1});
return b.innerHTML},prettyPrint:D.prettyPrint=function(a,d){function g(){for(var b=D.PR_SHOULD_USE_CONTINUATION?c.now()+250:Infinity;i<p.length&&c.now()<b;i++){for(var d=p[i],j=h,k=d;k=k.previousSibling;){var m=k.nodeType,o=(m===7||m===8)&&k.nodeValue;if(o?!/^\??prettify\b/.test(o):m!==3||/\S/.test(k.nodeValue))break;if(o){j={};o.replace(/\b(\w+)=([\w%+\-.:]+)/g,function(a,b,c){j[b]=c});break}}k=d.className;if((j!==h||e.test(k))&&!v.test(k)){m=!1;for(o=d.parentNode;o;o=o.parentNode)if(f.test(o.tagName)&&
o.className&&e.test(o.className)){m=!0;break}if(!m){d.className+=" prettyprinted";m=j.lang;if(!m){var m=k.match(n),y;if(!m&&(y=U(d))&&t.test(y.tagName))m=y.className.match(n);m&&(m=m[1])}if(w.test(d.tagName))o=1;else var o=d.currentStyle,u=s.defaultView,o=(o=o?o.whiteSpace:u&&u.getComputedStyle?u.getComputedStyle(d,q).getPropertyValue("white-space"):0)&&"pre"===o.substring(0,3);u=j.linenums;if(!(u=u==="true"||+u))u=(u=k.match(/\blinenums\b(?::(\d+))?/))?u[1]&&u[1].length?+u[1]:!0:!1;u&&J(d,u,o);r=
{h:m,c:d,j:u,i:o};K(r)}}}i<p.length?setTimeout(g,250):"function"===typeof a&&a()}for(var b=d||document.body,s=b.ownerDocument||document,b=[b.getElementsByTagName("pre"),b.getElementsByTagName("code"),b.getElementsByTagName("xmp")],p=[],m=0;m<b.length;++m)for(var j=0,k=b[m].length;j<k;++j)p.push(b[m][j]);var b=q,c=Date;c.now||(c={now:function(){return+new Date}});var i=0,r,n=/\blang(?:uage)?-([\w.]+)(?!\S)/,e=/\bprettyprint\b/,v=/\bprettyprinted\b/,w=/pre|xmp/i,t=/^code$/i,f=/^(?:pre|code|xmp)$/i,
h={};g()}};typeof define==="function"&&define.amd&&define("google-code-prettify",[],function(){return Y})})();}()
;/**
 * @preserve jed.js https://github.com/SlexAxton/Jed
 */
/*
-----------
A gettext compatible i18n library for modern JavaScript Applications

by Alex Sexton - AlexSexton [at] gmail - @SlexAxton
WTFPL license for use
Dojo CLA for contributions

Jed offers the entire applicable GNU gettext spec'd set of
functions, but also offers some nicer wrappers around them.
The api for gettext was written for a language with no function
overloading, so Jed allows a little more of that.

Many thanks to Joshua I. Miller - unrtst@cpan.org - who wrote
gettext.js back in 2008. I was able to vet a lot of my ideas
against his. I also made sure Jed passed against his tests
in order to offer easy upgrades -- jsgettext.berlios.de
*/
(function (root, undef) {

  // Set up some underscore-style functions, if you already have
  // underscore, feel free to delete this section, and use it
  // directly, however, the amount of functions used doesn't
  // warrant having underscore as a full dependency.
  // Underscore 1.3.0 was used to port and is licensed
  // under the MIT License by Jeremy Ashkenas.
  var ArrayProto    = Array.prototype,
      ObjProto      = Object.prototype,
      slice         = ArrayProto.slice,
      hasOwnProp    = ObjProto.hasOwnProperty,
      nativeForEach = ArrayProto.forEach,
      breaker       = {};

  // We're not using the OOP style _ so we don't need the
  // extra level of indirection. This still means that you
  // sub out for real `_` though.
  var _ = {
    forEach : function( obj, iterator, context ) {
      var i, l, key;
      if ( obj === null ) {
        return;
      }

      if ( nativeForEach && obj.forEach === nativeForEach ) {
        obj.forEach( iterator, context );
      }
      else if ( obj.length === +obj.length ) {
        for ( i = 0, l = obj.length; i < l; i++ ) {
          if ( i in obj && iterator.call( context, obj[i], i, obj ) === breaker ) {
            return;
          }
        }
      }
      else {
        for ( key in obj) {
          if ( hasOwnProp.call( obj, key ) ) {
            if ( iterator.call (context, obj[key], key, obj ) === breaker ) {
              return;
            }
          }
        }
      }
    },
    extend : function( obj ) {
      this.forEach( slice.call( arguments, 1 ), function ( source ) {
        for ( var prop in source ) {
          obj[prop] = source[prop];
        }
      });
      return obj;
    }
  };
  // END Miniature underscore impl

  // Jed is a constructor function
  var Jed = function ( options ) {
    // Some minimal defaults
    this.defaults = {
      "locale_data" : {
        "messages" : {
          "" : {
            "domain"       : "messages",
            "lang"         : "en",
            "plural_forms" : "nplurals=2; plural=(n != 1);"
          }
          // There are no default keys, though
        }
      },
      // The default domain if one is missing
      "domain" : "messages",
      // enable debug mode to log untranslated strings to the console
      "debug" : false
    };

    // Mix in the sent options with the default options
    this.options = _.extend( {}, this.defaults, options );
    this.textdomain( this.options.domain );

    if ( options.domain && ! this.options.locale_data[ this.options.domain ] ) {
      throw new Error('Text domain set to non-existent domain: `' + options.domain + '`');
    }
  };

  // The gettext spec sets this character as the default
  // delimiter for context lookups.
  // e.g.: context\u0004key
  // If your translation company uses something different,
  // just change this at any time and it will use that instead.
  Jed.context_delimiter = String.fromCharCode( 4 );

  function getPluralFormFunc ( plural_form_string ) {
    return Jed.PF.compile( plural_form_string || "nplurals=2; plural=(n != 1);");
  }

  function Chain( key, i18n ){
    this._key = key;
    this._i18n = i18n;
  }

  // Create a chainable api for adding args prettily
  _.extend( Chain.prototype, {
    onDomain : function ( domain ) {
      this._domain = domain;
      return this;
    },
    withContext : function ( context ) {
      this._context = context;
      return this;
    },
    ifPlural : function ( num, pkey ) {
      this._val = num;
      this._pkey = pkey;
      return this;
    },
    fetch : function ( sArr ) {
      if ( {}.toString.call( sArr ) != '[object Array]' ) {
        sArr = [].slice.call(arguments, 0);
      }
      return ( sArr && sArr.length ? Jed.sprintf : function(x){ return x; } )(
        this._i18n.dcnpgettext(this._domain, this._context, this._key, this._pkey, this._val),
        sArr
      );
    }
  });

  // Add functions to the Jed prototype.
  // These will be the functions on the object that's returned
  // from creating a `new Jed()`
  // These seem redundant, but they gzip pretty well.
  _.extend( Jed.prototype, {
    // The sexier api start point
    translate : function ( key ) {
      return new Chain( key, this );
    },

    textdomain : function ( domain ) {
      if ( ! domain ) {
        return this._textdomain;
      }
      this._textdomain = domain;
    },

    gettext : function ( key ) {
      return this.dcnpgettext.call( this, undef, undef, key );
    },

    dgettext : function ( domain, key ) {
     return this.dcnpgettext.call( this, domain, undef, key );
    },

    dcgettext : function ( domain , key /*, category */ ) {
      // Ignores the category anyways
      return this.dcnpgettext.call( this, domain, undef, key );
    },

    ngettext : function ( skey, pkey, val ) {
      return this.dcnpgettext.call( this, undef, undef, skey, pkey, val );
    },

    dngettext : function ( domain, skey, pkey, val ) {
      return this.dcnpgettext.call( this, domain, undef, skey, pkey, val );
    },

    dcngettext : function ( domain, skey, pkey, val/*, category */) {
      return this.dcnpgettext.call( this, domain, undef, skey, pkey, val );
    },

    pgettext : function ( context, key ) {
      return this.dcnpgettext.call( this, undef, context, key );
    },

    dpgettext : function ( domain, context, key ) {
      return this.dcnpgettext.call( this, domain, context, key );
    },

    dcpgettext : function ( domain, context, key/*, category */) {
      return this.dcnpgettext.call( this, domain, context, key );
    },

    npgettext : function ( context, skey, pkey, val ) {
      return this.dcnpgettext.call( this, undef, context, skey, pkey, val );
    },

    dnpgettext : function ( domain, context, skey, pkey, val ) {
      return this.dcnpgettext.call( this, domain, context, skey, pkey, val );
    },

    // The most fully qualified gettext function. It has every option.
    // Since it has every option, we can use it from every other method.
    // This is the bread and butter.
    // Technically there should be one more argument in this function for 'Category',
    // but since we never use it, we might as well not waste the bytes to define it.
    dcnpgettext : function ( domain, context, singular_key, plural_key, val ) {
      // Set some defaults

      plural_key = plural_key || singular_key;

      // Use the global domain default if one
      // isn't explicitly passed in
      domain = domain || this._textdomain;

      var fallback;

      // Handle special cases

      // No options found
      if ( ! this.options ) {
        // There's likely something wrong, but we'll return the correct key for english
        // We do this by instantiating a brand new Jed instance with the default set
        // for everything that could be broken.
        fallback = new Jed();
        return fallback.dcnpgettext.call( fallback, undefined, undefined, singular_key, plural_key, val );
      }

      // No translation data provided
      if ( ! this.options.locale_data ) {
        throw new Error('No locale data provided.');
      }

      if ( ! this.options.locale_data[ domain ] ) {
        throw new Error('Domain `' + domain + '` was not found.');
      }

      if ( ! this.options.locale_data[ domain ][ "" ] ) {
        throw new Error('No locale meta information provided.');
      }

      // Make sure we have a truthy key. Otherwise we might start looking
      // into the empty string key, which is the options for the locale
      // data.
      if ( ! singular_key ) {
        throw new Error('No translation key found.');
      }

      var key  = context ? context + Jed.context_delimiter + singular_key : singular_key,
          locale_data = this.options.locale_data,
          dict = locale_data[ domain ],
          defaultConf = (locale_data.messages || this.defaults.locale_data.messages)[""],
          pluralForms = dict[""].plural_forms || dict[""]["Plural-Forms"] || dict[""]["plural-forms"] || defaultConf.plural_forms || defaultConf["Plural-Forms"] || defaultConf["plural-forms"],
          val_list,
          res;

      var val_idx;
      if (val === undefined) {
        // No value passed in; assume singular key lookup.
        val_idx = 0;

      } else {
        // Value has been passed in; use plural-forms calculations.

        // Handle invalid numbers, but try casting strings for good measure
        if ( typeof val != 'number' ) {
          val = parseInt( val, 10 );

          if ( isNaN( val ) ) {
            throw new Error('The number that was passed in is not a number.');
          }
        }

        val_idx = getPluralFormFunc(pluralForms)(val);
      }

      // Throw an error if a domain isn't found
      if ( ! dict ) {
        throw new Error('No domain named `' + domain + '` could be found.');
      }

      val_list = dict[ key ];

      // If there is no match, then revert back to
      // english style singular/plural with the keys passed in.
      if ( ! val_list || val_idx > val_list.length ) {
        if (this.options.missing_key_callback) {
          this.options.missing_key_callback(key, domain);
        }
        res = [ singular_key, plural_key ];

        // collect untranslated strings
        if (this.options.debug===true) {
          console.log(res[ getPluralFormFunc(pluralForms)( val ) ]);
        }
        return res[ getPluralFormFunc()( val ) ];
      }

      res = val_list[ val_idx ];

      // This includes empty strings on purpose
      if ( ! res  ) {
        res = [ singular_key, plural_key ];
        return res[ getPluralFormFunc()( val ) ];
      }
      return res;
    }
  });


  // We add in sprintf capabilities for post translation value interolation
  // This is not internally used, so you can remove it if you have this
  // available somewhere else, or want to use a different system.

  // We _slightly_ modify the normal sprintf behavior to more gracefully handle
  // undefined values.

  /**
   sprintf() for JavaScript 0.7-beta1
   http://www.diveintojavascript.com/projects/javascript-sprintf

   Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>
   All rights reserved.

   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions are met:
       * Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.
       * Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in the
         documentation and/or other materials provided with the distribution.
       * Neither the name of sprintf() for JavaScript nor the
         names of its contributors may be used to endorse or promote products
         derived from this software without specific prior written permission.

   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   DISCLAIMED. IN NO EVENT SHALL Alexandru Marasteanu BE LIABLE FOR ANY
   DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
   ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
  var sprintf = (function() {
    function get_type(variable) {
      return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();
    }
    function str_repeat(input, multiplier) {
      for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}
      return output.join('');
    }

    var str_format = function() {
      if (!str_format.cache.hasOwnProperty(arguments[0])) {
        str_format.cache[arguments[0]] = str_format.parse(arguments[0]);
      }
      return str_format.format.call(null, str_format.cache[arguments[0]], arguments);
    };

    str_format.format = function(parse_tree, argv) {
      var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;
      for (i = 0; i < tree_length; i++) {
        node_type = get_type(parse_tree[i]);
        if (node_type === 'string') {
          output.push(parse_tree[i]);
        }
        else if (node_type === 'array') {
          match = parse_tree[i]; // convenience purposes only
          if (match[2]) { // keyword argument
            arg = argv[cursor];
            for (k = 0; k < match[2].length; k++) {
              if (!arg.hasOwnProperty(match[2][k])) {
                throw(sprintf('[sprintf] property "%s" does not exist', match[2][k]));
              }
              arg = arg[match[2][k]];
            }
          }
          else if (match[1]) { // positional argument (explicit)
            arg = argv[match[1]];
          }
          else { // positional argument (implicit)
            arg = argv[cursor++];
          }

          if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {
            throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));
          }

          // Jed EDIT
          if ( typeof arg == 'undefined' || arg === null ) {
            arg = '';
          }
          // Jed EDIT

          switch (match[8]) {
            case 'b': arg = arg.toString(2); break;
            case 'c': arg = String.fromCharCode(arg); break;
            case 'd': arg = parseInt(arg, 10); break;
            case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;
            case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;
            case 'o': arg = arg.toString(8); break;
            case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;
            case 'u': arg = Math.abs(arg); break;
            case 'x': arg = arg.toString(16); break;
            case 'X': arg = arg.toString(16).toUpperCase(); break;
          }
          arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);
          pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';
          pad_length = match[6] - String(arg).length;
          pad = match[6] ? str_repeat(pad_character, pad_length) : '';
          output.push(match[5] ? arg + pad : pad + arg);
        }
      }
      return output.join('');
    };

    str_format.cache = {};

    str_format.parse = function(fmt) {
      var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;
      while (_fmt) {
        if ((match = /^[^\x25]+/.exec(_fmt)) !== null) {
          parse_tree.push(match[0]);
        }
        else if ((match = /^\x25{2}/.exec(_fmt)) !== null) {
          parse_tree.push('%');
        }
        else if ((match = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {
          if (match[2]) {
            arg_names |= 1;
            var field_list = [], replacement_field = match[2], field_match = [];
            if ((field_match = /^([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
              field_list.push(field_match[1]);
              while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {
                if ((field_match = /^\.([a-z_][a-z_\d]*)/i.exec(replacement_field)) !== null) {
                  field_list.push(field_match[1]);
                }
                else if ((field_match = /^\[(\d+)\]/.exec(replacement_field)) !== null) {
                  field_list.push(field_match[1]);
                }
                else {
                  throw('[sprintf] huh?');
                }
              }
            }
            else {
              throw('[sprintf] huh?');
            }
            match[2] = field_list;
          }
          else {
            arg_names |= 2;
          }
          if (arg_names === 3) {
            throw('[sprintf] mixing positional and named placeholders is not (yet) supported');
          }
          parse_tree.push(match);
        }
        else {
          throw('[sprintf] huh?');
        }
        _fmt = _fmt.substring(match[0].length);
      }
      return parse_tree;
    };

    return str_format;
  })();

  var vsprintf = function(fmt, argv) {
    argv.unshift(fmt);
    return sprintf.apply(null, argv);
  };

  Jed.parse_plural = function ( plural_forms, n ) {
    plural_forms = plural_forms.replace(/n/g, n);
    return Jed.parse_expression(plural_forms);
  };

  Jed.sprintf = function ( fmt, args ) {
    if ( {}.toString.call( args ) == '[object Array]' ) {
      return vsprintf( fmt, [].slice.call(args) );
    }
    return sprintf.apply(this, [].slice.call(arguments) );
  };

  Jed.prototype.sprintf = function () {
    return Jed.sprintf.apply(this, arguments);
  };
  // END sprintf Implementation

  // Start the Plural forms section
  // This is a full plural form expression parser. It is used to avoid
  // running 'eval' or 'new Function' directly against the plural
  // forms.
  //
  // This can be important if you get translations done through a 3rd
  // party vendor. I encourage you to use this instead, however, I
  // also will provide a 'precompiler' that you can use at build time
  // to output valid/safe function representations of the plural form
  // expressions. This means you can build this code out for the most
  // part.
  Jed.PF = {};

  Jed.PF.parse = function ( p ) {
    var plural_str = Jed.PF.extractPluralExpr( p );
    return Jed.PF.parser.parse.call(Jed.PF.parser, plural_str);
  };

  Jed.PF.compile = function ( p ) {
    // Handle trues and falses as 0 and 1
    function imply( val ) {
      return (val === true ? 1 : val ? val : 0);
    }

    var ast = Jed.PF.parse( p );
    return function ( n ) {
      return imply( Jed.PF.interpreter( ast )( n ) );
    };
  };

  Jed.PF.interpreter = function ( ast ) {
    return function ( n ) {
      var res;
      switch ( ast.type ) {
        case 'GROUP':
          return Jed.PF.interpreter( ast.expr )( n );
        case 'TERNARY':
          if ( Jed.PF.interpreter( ast.expr )( n ) ) {
            return Jed.PF.interpreter( ast.truthy )( n );
          }
          return Jed.PF.interpreter( ast.falsey )( n );
        case 'OR':
          return Jed.PF.interpreter( ast.left )( n ) || Jed.PF.interpreter( ast.right )( n );
        case 'AND':
          return Jed.PF.interpreter( ast.left )( n ) && Jed.PF.interpreter( ast.right )( n );
        case 'LT':
          return Jed.PF.interpreter( ast.left )( n ) < Jed.PF.interpreter( ast.right )( n );
        case 'GT':
          return Jed.PF.interpreter( ast.left )( n ) > Jed.PF.interpreter( ast.right )( n );
        case 'LTE':
          return Jed.PF.interpreter( ast.left )( n ) <= Jed.PF.interpreter( ast.right )( n );
        case 'GTE':
          return Jed.PF.interpreter( ast.left )( n ) >= Jed.PF.interpreter( ast.right )( n );
        case 'EQ':
          return Jed.PF.interpreter( ast.left )( n ) == Jed.PF.interpreter( ast.right )( n );
        case 'NEQ':
          return Jed.PF.interpreter( ast.left )( n ) != Jed.PF.interpreter( ast.right )( n );
        case 'MOD':
          return Jed.PF.interpreter( ast.left )( n ) % Jed.PF.interpreter( ast.right )( n );
        case 'VAR':
          return n;
        case 'NUM':
          return ast.val;
        default:
          throw new Error("Invalid Token found.");
      }
    };
  };

  Jed.PF.extractPluralExpr = function ( p ) {
    // trim first
    p = p.replace(/^\s\s*/, '').replace(/\s\s*$/, '');

    if (! /;\s*$/.test(p)) {
      p = p.concat(';');
    }

    var nplurals_re = /nplurals\=(\d+);/,
        plural_re = /plural\=(.*);/,
        nplurals_matches = p.match( nplurals_re ),
        res = {},
        plural_matches;

    // Find the nplurals number
    if ( nplurals_matches.length > 1 ) {
      res.nplurals = nplurals_matches[1];
    }
    else {
      throw new Error('nplurals not found in plural_forms string: ' + p );
    }

    // remove that data to get to the formula
    p = p.replace( nplurals_re, "" );
    plural_matches = p.match( plural_re );

    if (!( plural_matches && plural_matches.length > 1 ) ) {
      throw new Error('`plural` expression not found: ' + p);
    }
    return plural_matches[ 1 ];
  };

  /* Jison generated parser */
  Jed.PF.parser = (function(){

var parser = {trace: function trace() { },
yy: {},
symbols_: {"error":2,"expressions":3,"e":4,"EOF":5,"?":6,":":7,"||":8,"&&":9,"<":10,"<=":11,">":12,">=":13,"!=":14,"==":15,"%":16,"(":17,")":18,"n":19,"NUMBER":20,"$accept":0,"$end":1},
terminals_: {2:"error",5:"EOF",6:"?",7:":",8:"||",9:"&&",10:"<",11:"<=",12:">",13:">=",14:"!=",15:"==",16:"%",17:"(",18:")",19:"n",20:"NUMBER"},
productions_: [0,[3,2],[4,5],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,1],[4,1]],
performAction: function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$) {

var $0 = $$.length - 1;
switch (yystate) {
case 1: return { type : 'GROUP', expr: $$[$0-1] };
break;
case 2:this.$ = { type: 'TERNARY', expr: $$[$0-4], truthy : $$[$0-2], falsey: $$[$0] };
break;
case 3:this.$ = { type: "OR", left: $$[$0-2], right: $$[$0] };
break;
case 4:this.$ = { type: "AND", left: $$[$0-2], right: $$[$0] };
break;
case 5:this.$ = { type: 'LT', left: $$[$0-2], right: $$[$0] };
break;
case 6:this.$ = { type: 'LTE', left: $$[$0-2], right: $$[$0] };
break;
case 7:this.$ = { type: 'GT', left: $$[$0-2], right: $$[$0] };
break;
case 8:this.$ = { type: 'GTE', left: $$[$0-2], right: $$[$0] };
break;
case 9:this.$ = { type: 'NEQ', left: $$[$0-2], right: $$[$0] };
break;
case 10:this.$ = { type: 'EQ', left: $$[$0-2], right: $$[$0] };
break;
case 11:this.$ = { type: 'MOD', left: $$[$0-2], right: $$[$0] };
break;
case 12:this.$ = { type: 'GROUP', expr: $$[$0-1] };
break;
case 13:this.$ = { type: 'VAR' };
break;
case 14:this.$ = { type: 'NUM', val: Number(yytext) };
break;
}
},
table: [{3:1,4:2,17:[1,3],19:[1,4],20:[1,5]},{1:[3]},{5:[1,6],6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{4:17,17:[1,3],19:[1,4],20:[1,5]},{5:[2,13],6:[2,13],7:[2,13],8:[2,13],9:[2,13],10:[2,13],11:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],18:[2,13]},{5:[2,14],6:[2,14],7:[2,14],8:[2,14],9:[2,14],10:[2,14],11:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],18:[2,14]},{1:[2,1]},{4:18,17:[1,3],19:[1,4],20:[1,5]},{4:19,17:[1,3],19:[1,4],20:[1,5]},{4:20,17:[1,3],19:[1,4],20:[1,5]},{4:21,17:[1,3],19:[1,4],20:[1,5]},{4:22,17:[1,3],19:[1,4],20:[1,5]},{4:23,17:[1,3],19:[1,4],20:[1,5]},{4:24,17:[1,3],19:[1,4],20:[1,5]},{4:25,17:[1,3],19:[1,4],20:[1,5]},{4:26,17:[1,3],19:[1,4],20:[1,5]},{4:27,17:[1,3],19:[1,4],20:[1,5]},{6:[1,7],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[1,28]},{6:[1,7],7:[1,29],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16]},{5:[2,3],6:[2,3],7:[2,3],8:[2,3],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,3]},{5:[2,4],6:[2,4],7:[2,4],8:[2,4],9:[2,4],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,4]},{5:[2,5],6:[2,5],7:[2,5],8:[2,5],9:[2,5],10:[2,5],11:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[1,16],18:[2,5]},{5:[2,6],6:[2,6],7:[2,6],8:[2,6],9:[2,6],10:[2,6],11:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[1,16],18:[2,6]},{5:[2,7],6:[2,7],7:[2,7],8:[2,7],9:[2,7],10:[2,7],11:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[1,16],18:[2,7]},{5:[2,8],6:[2,8],7:[2,8],8:[2,8],9:[2,8],10:[2,8],11:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[2,8],16:[1,16],18:[2,8]},{5:[2,9],6:[2,9],7:[2,9],8:[2,9],9:[2,9],10:[2,9],11:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[2,9],16:[1,16],18:[2,9]},{5:[2,10],6:[2,10],7:[2,10],8:[2,10],9:[2,10],10:[2,10],11:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[1,16],18:[2,10]},{5:[2,11],6:[2,11],7:[2,11],8:[2,11],9:[2,11],10:[2,11],11:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],18:[2,11]},{5:[2,12],6:[2,12],7:[2,12],8:[2,12],9:[2,12],10:[2,12],11:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],18:[2,12]},{4:30,17:[1,3],19:[1,4],20:[1,5]},{5:[2,2],6:[1,7],7:[2,2],8:[1,8],9:[1,9],10:[1,10],11:[1,11],12:[1,12],13:[1,13],14:[1,14],15:[1,15],16:[1,16],18:[2,2]}],
defaultActions: {6:[2,1]},
parseError: function parseError(str, hash) {
    throw new Error(str);
},
parse: function parse(input) {
    var self = this,
        stack = [0],
        vstack = [null], // semantic value stack
        lstack = [], // location stack
        table = this.table,
        yytext = '',
        yylineno = 0,
        yyleng = 0,
        recovering = 0,
        TERROR = 2,
        EOF = 1;

    //this.reductionCount = this.shiftCount = 0;

    this.lexer.setInput(input);
    this.lexer.yy = this.yy;
    this.yy.lexer = this.lexer;
    if (typeof this.lexer.yylloc == 'undefined')
        this.lexer.yylloc = {};
    var yyloc = this.lexer.yylloc;
    lstack.push(yyloc);

    if (typeof this.yy.parseError === 'function')
        this.parseError = this.yy.parseError;

    function popStack (n) {
        stack.length = stack.length - 2*n;
        vstack.length = vstack.length - n;
        lstack.length = lstack.length - n;
    }

    function lex() {
        var token;
        token = self.lexer.lex() || 1; // $end = 1
        // if token isn't its numeric value, convert
        if (typeof token !== 'number') {
            token = self.symbols_[token] || token;
        }
        return token;
    }

    var symbol, preErrorSymbol, state, action, a, r, yyval={},p,len,newState, expected;
    while (true) {
        // retreive state number from top of stack
        state = stack[stack.length-1];

        // use default actions if available
        if (this.defaultActions[state]) {
            action = this.defaultActions[state];
        } else {
            if (symbol == null)
                symbol = lex();
            // read action for current state and first input
            action = table[state] && table[state][symbol];
        }

        // handle parse error
        _handle_error:
        if (typeof action === 'undefined' || !action.length || !action[0]) {

            if (!recovering) {
                // Report error
                expected = [];
                for (p in table[state]) if (this.terminals_[p] && p > 2) {
                    expected.push("'"+this.terminals_[p]+"'");
                }
                var errStr = '';
                if (this.lexer.showPosition) {
                    errStr = 'Parse error on line '+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(', ') + ", got '" + this.terminals_[symbol]+ "'";
                } else {
                    errStr = 'Parse error on line '+(yylineno+1)+": Unexpected " +
                                  (symbol == 1 /*EOF*/ ? "end of input" :
                                              ("'"+(this.terminals_[symbol] || symbol)+"'"));
                }
                this.parseError(errStr,
                    {text: this.lexer.match, token: this.terminals_[symbol] || symbol, line: this.lexer.yylineno, loc: yyloc, expected: expected});
            }

            // just recovered from another error
            if (recovering == 3) {
                if (symbol == EOF) {
                    throw new Error(errStr || 'Parsing halted.');
                }

                // discard current lookahead and grab another
                yyleng = this.lexer.yyleng;
                yytext = this.lexer.yytext;
                yylineno = this.lexer.yylineno;
                yyloc = this.lexer.yylloc;
                symbol = lex();
            }

            // try to recover from error
            while (1) {
                // check for error recovery rule in this state
                if ((TERROR.toString()) in table[state]) {
                    break;
                }
                if (state == 0) {
                    throw new Error(errStr || 'Parsing halted.');
                }
                popStack(1);
                state = stack[stack.length-1];
            }

            preErrorSymbol = symbol; // save the lookahead token
            symbol = TERROR;         // insert generic error symbol as new lookahead
            state = stack[stack.length-1];
            action = table[state] && table[state][TERROR];
            recovering = 3; // allow 3 real symbols to be shifted before reporting a new error
        }

        // this shouldn't happen, unless resolve defaults are off
        if (action[0] instanceof Array && action.length > 1) {
            throw new Error('Parse Error: multiple actions possible at state: '+state+', token: '+symbol);
        }

        switch (action[0]) {

            case 1: // shift
                //this.shiftCount++;

                stack.push(symbol);
                vstack.push(this.lexer.yytext);
                lstack.push(this.lexer.yylloc);
                stack.push(action[1]); // push state
                symbol = null;
                if (!preErrorSymbol) { // normal execution/no error
                    yyleng = this.lexer.yyleng;
                    yytext = this.lexer.yytext;
                    yylineno = this.lexer.yylineno;
                    yyloc = this.lexer.yylloc;
                    if (recovering > 0)
                        recovering--;
                } else { // error just occurred, resume old lookahead f/ before error
                    symbol = preErrorSymbol;
                    preErrorSymbol = null;
                }
                break;

            case 2: // reduce
                //this.reductionCount++;

                len = this.productions_[action[1]][1];

                // perform semantic action
                yyval.$ = vstack[vstack.length-len]; // default to $$ = $1
                // default location, uses first token for firsts, last for lasts
                yyval._$ = {
                    first_line: lstack[lstack.length-(len||1)].first_line,
                    last_line: lstack[lstack.length-1].last_line,
                    first_column: lstack[lstack.length-(len||1)].first_column,
                    last_column: lstack[lstack.length-1].last_column
                };
                r = this.performAction.call(yyval, yytext, yyleng, yylineno, this.yy, action[1], vstack, lstack);

                if (typeof r !== 'undefined') {
                    return r;
                }

                // pop off stack
                if (len) {
                    stack = stack.slice(0,-1*len*2);
                    vstack = vstack.slice(0, -1*len);
                    lstack = lstack.slice(0, -1*len);
                }

                stack.push(this.productions_[action[1]][0]);    // push nonterminal (reduce)
                vstack.push(yyval.$);
                lstack.push(yyval._$);
                // goto new state = table[STATE][NONTERMINAL]
                newState = table[stack[stack.length-2]][stack[stack.length-1]];
                stack.push(newState);
                break;

            case 3: // accept
                return true;
        }

    }

    return true;
}};/* Jison generated lexer */
var lexer = (function(){

var lexer = ({EOF:1,
parseError:function parseError(str, hash) {
        if (this.yy.parseError) {
            this.yy.parseError(str, hash);
        } else {
            throw new Error(str);
        }
    },
setInput:function (input) {
        this._input = input;
        this._more = this._less = this.done = false;
        this.yylineno = this.yyleng = 0;
        this.yytext = this.matched = this.match = '';
        this.conditionStack = ['INITIAL'];
        this.yylloc = {first_line:1,first_column:0,last_line:1,last_column:0};
        return this;
    },
input:function () {
        var ch = this._input[0];
        this.yytext+=ch;
        this.yyleng++;
        this.match+=ch;
        this.matched+=ch;
        var lines = ch.match(/\n/);
        if (lines) this.yylineno++;
        this._input = this._input.slice(1);
        return ch;
    },
unput:function (ch) {
        this._input = ch + this._input;
        return this;
    },
more:function () {
        this._more = true;
        return this;
    },
pastInput:function () {
        var past = this.matched.substr(0, this.matched.length - this.match.length);
        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\n/g, "");
    },
upcomingInput:function () {
        var next = this.match;
        if (next.length < 20) {
            next += this._input.substr(0, 20-next.length);
        }
        return (next.substr(0,20)+(next.length > 20 ? '...':'')).replace(/\n/g, "");
    },
showPosition:function () {
        var pre = this.pastInput();
        var c = new Array(pre.length + 1).join("-");
        return pre + this.upcomingInput() + "\n" + c+"^";
    },
next:function () {
        if (this.done) {
            return this.EOF;
        }
        if (!this._input) this.done = true;

        var token,
            match,
            col,
            lines;
        if (!this._more) {
            this.yytext = '';
            this.match = '';
        }
        var rules = this._currentRules();
        for (var i=0;i < rules.length; i++) {
            match = this._input.match(this.rules[rules[i]]);
            if (match) {
                lines = match[0].match(/\n.*/g);
                if (lines) this.yylineno += lines.length;
                this.yylloc = {first_line: this.yylloc.last_line,
                               last_line: this.yylineno+1,
                               first_column: this.yylloc.last_column,
                               last_column: lines ? lines[lines.length-1].length-1 : this.yylloc.last_column + match[0].length}
                this.yytext += match[0];
                this.match += match[0];
                this.matches = match;
                this.yyleng = this.yytext.length;
                this._more = false;
                this._input = this._input.slice(match[0].length);
                this.matched += match[0];
                token = this.performAction.call(this, this.yy, this, rules[i],this.conditionStack[this.conditionStack.length-1]);
                if (token) return token;
                else return;
            }
        }
        if (this._input === "") {
            return this.EOF;
        } else {
            this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(),
                    {text: "", token: null, line: this.yylineno});
        }
    },
lex:function lex() {
        var r = this.next();
        if (typeof r !== 'undefined') {
            return r;
        } else {
            return this.lex();
        }
    },
begin:function begin(condition) {
        this.conditionStack.push(condition);
    },
popState:function popState() {
        return this.conditionStack.pop();
    },
_currentRules:function _currentRules() {
        return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;
    },
topState:function () {
        return this.conditionStack[this.conditionStack.length-2];
    },
pushState:function begin(condition) {
        this.begin(condition);
    }});
lexer.performAction = function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {

var YYSTATE=YY_START;
switch($avoiding_name_collisions) {
case 0:/* skip whitespace */
break;
case 1:return 20
break;
case 2:return 19
break;
case 3:return 8
break;
case 4:return 9
break;
case 5:return 6
break;
case 6:return 7
break;
case 7:return 11
break;
case 8:return 13
break;
case 9:return 10
break;
case 10:return 12
break;
case 11:return 14
break;
case 12:return 15
break;
case 13:return 16
break;
case 14:return 17
break;
case 15:return 18
break;
case 16:return 5
break;
case 17:return 'INVALID'
break;
}
};
lexer.rules = [/^\s+/,/^[0-9]+(\.[0-9]+)?\b/,/^n\b/,/^\|\|/,/^&&/,/^\?/,/^:/,/^<=/,/^>=/,/^</,/^>/,/^!=/,/^==/,/^%/,/^\(/,/^\)/,/^$/,/^./];
lexer.conditions = {"INITIAL":{"rules":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],"inclusive":true}};return lexer;})()
parser.lexer = lexer;
return parser;
})();
// End parser

  // Handle node, amd, and global systems
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = Jed;
    }
    exports.Jed = Jed;
  }
  else {
    if (typeof define === 'function' && define.amd) {
      define('jed', function() {
        return Jed;
      });
    }
    // Leak a global regardless of module system
    root['Jed'] = Jed;
  }

})(this);
/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
$.fn.setCursorPosition=function(c){this.each(function(g,b){if(b.setSelectionRange)b.setSelectionRange(c,c);else if(b.createTextRange){var a=b.createTextRange();a.collapse(!0);a.moveEnd("character",c);a.moveStart("character",c);a.select()}});return this};
(function(c){var g=function(b){var a,d;b=c(b);if(!b.parent().length)return!1;a=b.data("size-data");d={width:b.width(),height:b.height()};if(!a||d.width!==a.width||d.height!==a.height)b.trigger(c.Event("textarea-resize")),b.data("size-data",d);return!!d.height};c.fn.textareaResize=function(){return this.each(function(){var b=c(this),a,d,e;if(!b.data("size-data")){b.data("size-data",{width:b.width(),height:b.height()});b.on("mousedown",function(){a=setInterval(function(){!1===g(b)&&clearInterval(a)},
15);e=!0});if(swarm.has.nonStandardResizeControl())b.on("mousemove",function(){e=!0;d||(d=setTimeout(function(){d=!1;g(b)},200))});c(document).on("mouseup",function(){clearInterval(a);e&&g(b);e=!1})}})}})(window.jQuery);
(function(c){var g=function(b,a){this.$element=c(b);this.options=a;this.getPlot();this.renderRevisionPoints();this.setMarkerMode(a.markerMode||this.markerMode);this.setScrollControlls();this.scrollToMarker(!0);this.markerRadius=this.getMarker().outerWidth()/2;var d=this;this.$element.tooltip({selector:".rev, .marker, .connector",container:"body",html:!0,template:this.tooltipTemplate,title:function(){if(c(this).hasClass("connector")){var a=d.getMarker("both"),b=d.getRevisionData(a.right.data("target")),
a=d.getRevisionData(a.left.data("target"));return d.getDiffLabel(b,a)}b=c(c.data(this,"target"));return b.attr("data-original-title")||b.attr("title")}});1>=(this.getRevisionData()||[]).length||(this.$element.on("mousedown.slider",c.proxy(this.mousedown,this)),c(document).on("mouseup.slider",c.proxy(this.mouseup,this)))};g.prototype={constructor:g,markerMode:1,connectorTemplate:'\x3cdiv class\x3d"connector" data-original-title\x3d"" draggable\x3d"false"\x3e\x3cdiv class\x3d"connector-inner"\x3e\x3c/div\x3e\x3c/div\x3e',
markerTemplate:'\x3cdiv class\x3d"marker" data-original-title\x3d"" draggable\x3d"false"\x3e\x3cdiv class\x3d"marker-dot border-box"\x3e\x3c/div\x3e\x3c/div\x3e',tooltipTemplate:'\x3cdiv class\x3d"tooltip slider-tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e',markerRadius:0,setMarkerMode:function(b){this.previousRevision=null;this.removeModeVisuals();if(1===b)this.markerMode=b,this.moveMarker(this.$element.find(".active").last(),
null,!0);else if(2===b){var a=this.$element.find(".active").last(),d=this.$element.find(".active").not(a).first();d.length||(d=a.prev(".rev"));d.length||(d=a,a=a.next(".rev"));this.markerMode=b;this.$connector=c(this.connectorTemplate).insertAfter(this.getPlot());this.moveMarker(a,"right",!0);this.moveMarker(d,"left",!0)}this.updateActive()},_getClosestMarker:function(b){if(1===this.markerMode)return this.getMarker();var a=this.getMarker("both"),d=Math.abs(b-(a.left.offset().left+this.markerRadius));
b=Math.abs(b-(a.right.offset().left+this.markerRadius));return d<b?a.left:a.right},_getClosestRevNode:function(b,a,d){var c=2*this.getRevisionData().length-2;b=Math.round(Math.floor(b/(d/c))/2);this.setClosestRevNode(this.$element.find(".rev")[b],a);return a.data("target")},setClosestRevNode:function(b,a){var d=a.data("target");if(d!==b&&((1===this.markerMode||this.getMarker().not(a[0]).data("target")!==d)&&c(d).removeClass("closest"),c(b).addClass("closest"),a.data("target",b),this.$element.trigger("slider-closest-change",
this),this._mouseListen)){var e=this.$element.data("tooltip");e.leave({currentTarget:d});d=c.data(b,"tooltip");2===this.markerMode?(d=this.$connector.data("tooltip"))&&d.tip().find(".tooltip-inner").html(d.getTitle()):(!d||!d.tip()[0].parentNode)&&e.enter({currentTarget:b})}},_updateMarker:function(b,a){var d=this.$element[0].getBoundingClientRect(),e=this.closestMarker,f=this.slaveMarker,h="left"===e.data("side");this.lockstep&&(b-=this.markerOffset);b=Math.max(b,d.left);b=Math.max(b,d.left+this.lockstep);
b=Math.min(b,d.right);b=Math.min(b,d.right+this.lockstep);b-=d.left+c(window).scrollLeft();this.lockstep&&(f.css("left",b-this.lockstep+"px"),this._getClosestRevNode(b-this.lockstep,f,d.width));if(2===this.markerMode&&!this.lockstep){var j=d.width/(this.getRevisionData().length-1),g=parseFloat(f.css("left"),10);b=h?Math.min(b,g-j):Math.max(b,g+j)}e.css("left",b+"px");this._getClosestRevNode(b,e,d.width);2===this.markerMode&&(this.updateConnector(),setTimeout(c.proxy(this.moveConnectorTooltip,this),
0));this.$element.trigger("slider-move",this,b);a&&(this.lockstep&&this.moveMarker(f.data("target"),f,!0),this.moveMarker(e.data("target"),e))},onMarkerMouseMove:function(b,a){var d=b.pageX-this.markerRadius;this.dragging=!0;this._updateMarker(d,a);this.scrollToMarker(!1,d)},moveConnectorTooltip:function(){var b=this.$connector.data("tooltip");if(!b||!b.tip()[0].parentNode)this.$element.data("tooltip").enter({currentTarget:this.$connector[0]});else{var a=b.tip(),d=b.getPosition(),c=a[0].offsetWidth,
a=a[0].offsetHeight,f=d.left+d.width/2,h=this.getScroller();h&&(h=h[0].getBoundingClientRect(),f=Math.min(h.right,Math.max(f,h.left)));b.applyPlacement({top:d.top-a,left:f-c/2},"top")}},updateConnector:function(){var b=this.getMarker("both"),a=b.left[0].style.left,d=b.right[0].style.left,c=0<a.indexOf("%")&&0<d.indexOf("%"),f=c?"%":"px";c||(a=b.left.css("left"),d=b.right.css("left"));a=parseFloat(a,10);d=parseFloat(d,10);this.$connector.css({left:a+f,width:d-a+f})},moveMarker:function(b,a,d){b=this.$element.find(b);
if(b.length){a=a instanceof c?a:this.getMarker(a);var e=parseInt(b.data("rev-index"),10);a.css(this.getRevNodePosition(e));2===this.markerMode&&this.updateConnector();this.setClosestRevNode(b[0],a);b=c(a.data("target")).is(".active");a=this.getMarker().not(a);e=c(a.data("target")).is(".active");if(!d&&(!b||a.length&&!e))this.updateActive(),this.$element.trigger("slider-moved",this)}},updateActive:function(){var b=2===this.markerMode?this.getMarker("right"):this.getMarker(),b=c(b.data("target"));this.currentRevision=
this.getRevisionData(b);this.$element.find(".rev").removeClass("active");b.addClass("active");2===this.markerMode&&(b=this.getMarker("left"),b=c(b.data("target")),this.previousRevision=this.getRevisionData(b),b.addClass("active"))},renderRevisionPoints:function(){this.$element.find(".rev").remove();var b=this,a=this.getRevisionData();c.each(a,function(a,e){var f=b.getRevNodePosition(a),f="left: "+f.left+";",f=c('\x3cdiv id\x3d"revision-point'+e.rev+'" class\x3d"rev manual-tooltip '+((e.selected?"active":
"")+(e.pending?"":" committed"))+'" style\x3d"'+f+'"\x3e\x3cdiv class\x3d"rev-dot border-box"\x3e\x3c/div\x3e\x3c/div\x3e');f.data("rev-index",a);f.attr("title",b.getRevisionLabel(e));f.appendTo(b.$element)})},setScrollControlls:function(b){b=parseInt(b||30,10);var a=this.$element,d=a.closest(".review-slider-wrapper"),e=d.find(".btn-scroll-left"),d=d.find(".btn-scroll-right"),f=e.add(d),h=this.getRevisionData().length,j=this.$element.find(".rev");if(2<j.length&&parseInt(j.eq(1).css("left"),10)-parseInt(j.eq(0).css("left"),
10)<b){a.wrap(c('\x3cdiv class\x3d"slider-scroll"\x3e\x3c/div\x3e').css("overflow-x","auto")).width((h-1)*b);var g=this.getScroller();e.on("mousedown",function(){g.animate({scrollLeft:0},g.scrollLeft())});d.on("mousedown",function(){var b=a.width()-g.scrollLeft()+g.width();g.animate({scrollLeft:a.width()},b)});f.on("mouseup",function(){g.stop(!0)})}else f.hide(),a.css({position:"relative",left:"-45px"})},getScroller:function(){return this.$element.parent().is(".slider-scroll")?this.$element.closest(".slider-scroll"):
!1},scrollToMarker:function(b,a){var d=this.getScroller(),c=this.getMarker("left"),f=this.getMarker("right");if(d){if(b)return d.animate({scrollLeft:parseInt(f.css("left"),10)-Math.round(d.width()/2)},500);var h=parseInt(c.css("left"),10)+this.markerRadius,j=parseInt(f.css("left"),10)+this.markerRadius,f=d.scrollLeft(),c=d.scrollLeft()+d.width(),h=f-h,j=j-c;d.stop(!0);var g=a+this.markerRadius,l=d[0].getBoundingClientRect(),h=g<l.left||0<h&&60>=h,j=g>l.right||0<j&&60>=j;if(h||j){var m=this,f={duration:2*
(h?f:this.$element.width()-c),progress:function(){m._updateMarker(a)}};d.animate({scrollLeft:h?0:m.$element.width()},f)}}},getRevNodePosition:function(b){var a=this.getRevisionData().length;return{left:(1>=a?100:100*(b/(a-1)))+"%"}},getRevisionLabel:function(b){var a=swarm.timeFormatter.timeValue(b.time);return"#"+b.rev+" "+swarm.te("by")+" \x3cb\x3e"+b.user+"\x3c/b\x3e "+swarm.timeFormatter.convert(a)+'\x3cbr /\x3e\x3cspan class\x3d"muted"\x3e'+swarm.te(b.pending?"Shelved in %s":"Committed in %s",
[b.change])+"\x3c/span\x3e"},getDiffLabel:function(b,a){return'\x3cdiv class\x3d"text-left"\x3e#'+b.rev+' \x3cspan class\x3d"muted"\x3e'+swarm.te(b.pending?"Shelved in %s":"Committed in %s",[b.change])+"\x3c/span\x3e\x3cbr /\x3e#"+a.rev+' \x3cspan class\x3d"muted"\x3e'+swarm.te(a.pending?"Shelved in %s":"Committed in %s",[a.change])+"\x3c/span\x3e\x3c/div\x3e"},getRevisionData:function(b){return b?this.options.data[c(b).data("rev-index")]:this.options.data},getMarker:function(b){this.$marker=this.$marker||
this.$element.find(".marker");var a;for(a=0;a<this.markerMode;a++)this.$marker[a]||(this.$marker=this.$marker.add(c(this.markerTemplate).insertAfter(this.getPlot())));if(!b||1===this.$marker.length)return this.$marker;a=this.$marker.eq(0).offset().left;var d=this.$marker.eq(1).offset().left;a={left:a<d?this.$marker.eq(0):this.$marker.eq(1),right:a>=d?this.$marker.eq(0):this.$marker.eq(1)};a.left.data("side","left");a.right.data("side","right");return"both"===b?a:a[b]},removeModeVisuals:function(){this.$marker&&
(this.$marker.remove(),this.$marker=null);this.$connector&&(this.$connector.remove(),this.$connector=null);this.$element.find(".closest").removeClass("closest")},getPlot:function(){this.$plot=this.$plot||this.$element.find(".plot");this.$plot.length||(this.$plot=c('\x3cdiv class\x3d"plot" /\x3e').prependTo(this.$element));return this.$plot},mousedown:function(b){if(0===b.button){b.preventDefault();var a=c(b.target),d=this.$element.data("tooltip");a.is(".marker-dot, .rev-dot, .connector-inner")&&(a=
a.parent());this.markerOffset=this.lockstep=0;this._mouseListen=!0;this._clickTarget=a[0];this.closestMarker=a.hasClass("marker")?a:this._getClosestMarker(b.pageX);this.slaveMarker=this.getMarker().not(this.closestMarker);this.getMarker().addClass("moving");this.$element.off("mouseenter.tooltip",".rev, .marker, .connector");this.$element.off("mouseleave.tooltip",".rev, .marker, .connector");if(2===this.markerMode){var e="left"===this.closestMarker.data("side"),f=this.closestMarker.offset().left,h=
this.slaveMarker.offset().left,g=this.closestMarker.find(".marker-dot").outerWidth()/2;this.markerOffset=b.pageX-(f+this.markerRadius);if(Math.abs(this.markerOffset)>g&&(e&&0<this.markerOffset||!e&&0>this.markerOffset))this.lockstep=f-h}if(a.hasClass("rev"))this.moveMarker(a[0],this.closestMarker,!0);else{if(1===this.markerMode||!a.hasClass("connector"))a=2===this.markerMode?this.$connector[0]:this.closestMarker.data("target"),d.enter({currentTarget:a});this.onMarkerMouseMove(b)}c(document).on("mousemove.slider",
c.proxy(this.onMarkerMouseMove,this));setTimeout(c.proxy(function(){this.closestMarker&&d.leave({currentTarget:this.closestMarker[0]})},this),500)}},mouseup:function(b){if(this._mouseListen){c(document).off("mousemove.slider");this.getMarker().removeClass("moving");if(this.dragging)this.onMarkerMouseMove(b,!0);else this.moveMarker(this._clickTarget,this.closestMarker);this.closestMarker=null;this._mouseListen=!1;this._clickTarget=null;this.dragging=!1;b=this.$element.data("tooltip");this.$element.on("mouseleave.tooltip",
".rev, .marker, .connector",c.proxy(b.leave,b));this.$element.on("mouseenter.tooltip",".rev, .marker, .connector",c.proxy(b.enter,b));this.$element.find(".rev, .connector").trigger("mouseout");this.$element.closest(".slider-scroll").stop(!0)}},disable:function(){this.$element.addClass("disabled");this.$element.append('\x3cdiv class\x3d"overlay"\x3e\x3c/div\x3e');this.$element.off("mousedown.slider");c(document).off("mouseup.slider")}};c.fn.versionSlider=function(b){return this.each(function(){var a=
c(this),d=a.data("versionSlider");d?"object"===typeof b&&(c.extend(d.options,b),d.renderRevisionPoints(),d.setMarkerMode(d.options.markerMode||d.markerMode)):(d=c.extend({},a.data(),"object"===typeof b&&b),a.data("versionSlider",new g(this,d)))})};c.fn.versionSlider.Constructor=g})(window.jQuery);
(function(c){var g=function(b,a){this.$element=c(b);this.options=c.extend({},c.fn.multiPicker.defaults,a);this.init()};g.prototype={constructor:g,itemTemplate:'\x3cdiv class\x3d"multipicker-item" data-id\x3d"{{\x3eid?id:value}}" data-value\x3d"{{\x3evalue}}"\x3e\x3cdiv class\x3d"pull-left"\x3e\x3cdiv class\x3d"btn-group"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-info button-name" disabled\x3e{{\x3evalue}}\x3c/button\x3e{{if !disabled}}\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-info item-remove"title\x3d"{{te:"Remove"}}" aria-label\x3d"{{te:"Remove"}}"\x3e\x3ci class\x3d"icon-remove icon-white"\x3e\x3c/i\x3e\x3c/button\x3e{{/if}}\x3c/div\x3e{{if inputName}}\x3cinput type\x3d"hidden" name\x3d"{{\x3einputName}}[]" value\x3d"{{\x3evalue}}"\x3e{{/if}}\x3c/div\x3e\x3c/div\x3e',init:function(){this.$element.typeahead(this.options);
this.typeahead=this.$element.data("typeahead");this.typeahead.select=c.proxy(this.select,this);this.typeahead.highlighter=c.proxy(this.highlighter,this);this.typeahead.matcher=c.proxy(this.matcher,this);this.$element.addClass("multipicker-input");this.getItemsContainer().addClass("multipicker-items-container clearfix");if(this.options.consumeEnterKeyPress)this.$element.on("keypress",function(b){13===b.keyCode&&(b.preventDefault(),b.stopPropagation())});c.each(this.options.selected,c.proxy(function(b,
a){this.addItem(a)},this));this.update();this.options.disabled&&this.disable()},setSource:function(b){this.typeahead.source=b},highlighter:function(b){b=c("\x3cspan /\x3e").text(b).html();var a=c("\x3cspan /\x3e").text(this.typeahead.query).html(),a=a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26");return b.replace(RegExp("("+a+")","ig"),function(a,b){return"\x3cstrong\x3e"+b+"\x3c/strong\x3e"})},matcher:function(b){return-1!==b.toLowerCase().indexOf(this.typeahead.query.toLowerCase())&&-1===this.getSelected().indexOf(this.typeahead.updater(b))},
addItem:function(b){if(-1!==this.getSelected().indexOf(b))return!1;var a=this.getItemsContainer();if(a.length){var d=this;this.createItem(b).appendTo(a).find(".item-remove").on("click",function(a){a.stopPropagation();c(this).tooltip("destroy");c(this).closest(".multipicker-item").remove();d.update()})}this.update()},createItem:function(b,a,d){return this.options.createItem?this.options.createItem.call(this,b,d):c(c.templates(this.itemTemplate).render({id:d&&d.id?d.id:b,value:b,inputName:a||this.options.inputName,
disabled:this.options.disabled}))},select:function(){var b=this.typeahead.$menu.find(".active").attr("data-value");!1!==this.addItem(this.typeahead.updater(b))&&this.$element.val("");return this.typeahead.hide()},getSelected:function(){var b=[];this.getItemsContainer().find(".multipicker-item").each(function(){b.push(c(this).data("value"))});return b},getItemsContainer:function(){return c(this.options.itemsContainer)},update:function(){this.updateRequired();c.isFunction(this.options.onUpdate)&&this.options.onUpdate.call(this)},
updateRequired:function(){if(null!==this.options.required){var b="function"===typeof this.options.required?this.options.required.call(this):this.options.required,a=0===this.getSelected().length;this.$element.prop("required",b&&a).trigger("change")}},clear:function(){var b=this.getItemsContainer();b.find("[title]").tooltip("destroy");b.find(".multipicker-item").remove();this.update()},disable:function(){this.$element.prop("disabled",!0)},enable:function(){this.$element.prop("disabled",!1)}};c.fn.multiPicker=
function(b){return this.each(function(){var a=c(this),d=a.data("multipicker");if(d){if("string"===typeof b)d[b]()}else d=c.extend({},a.data(),"object"===typeof b&&b),a.data("multipicker",new g(this,d))})};c.fn.multiPicker.defaults={itemsContainer:null,inputName:null,onUpdate:null,onSelect:null,required:null,createItem:null,selected:[],source:[],disabled:!1,consumeEnterKeyPress:!0};c.fn.multiPicker.Constructor=g})(window.jQuery);
(function(c){var g=function(a,b){var e=this;this.$element=c(a);this.options=c.extend({},c.fn.userMultiPicker.defaults,b);this.groupUsers={};this.projectPrefix="swarm-project-";this.groupKeyPrefix="swarm-group-";var f=this.options.source||[];delete this.options.source;var h=[];c.each(this.options.selected,function(){h.push(e.makeUserItem(this))});c.each(this.options.enableGroups?this.options.selectedGroups:[],function(){h.push(e.makeGroupItem(this))});this.options.selected=h;this.init();this.typeahead.updater=
c.proxy(this.updater,this);this.typeahead.render=c.proxy(this.render,this);this.typeahead.sorter=c.proxy(this.sorter,this);this.typeahead.show=c.proxy(this.show,this);this.typeahead.process=c.proxy(this.process,this);this.typeahead.positionAutocomplete=c.proxy(this.positionAutocomplete,this);this.setSource(f);this.disable();this.$element.prop("required")&&!this.$element.val()&&this.$element.addClass("invalid");if(this.options.disabled){if(this.options.disabled&&!c.isEmptyObject(f)){var g=[];f.users&&
c.each(f.users,function(){g.push(e.makeUserItem(this))});f.groups&&c.each(f.groups,function(){g.push(e.makeGroupItem(this))});this.setSource(g)}}else c.fn.userMultiPicker.Promise(this).done(c.proxy(this.setSource,this));this.typeahead.$menu.addClass(this.options.additionalClass);this.typeahead.$element.on("click",function(){e.typeahead.shown&&e.typeahead.$element.get(0).selectionStart<e.typeahead.$element.val().lastIndexOf(e.typeahead.options.triggerChar)&&e.typeahead.hide()})};g.prototype=c.extend({},
c.fn.multiPicker.Constructor.prototype,{constructor:g,textareaSelectionPosition:function(a){var b,e,f,h,g;if((h=a[0])&&c(h).is("textarea")&&null!==h.selectionEnd){b={position:"absolute",overflow:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word",boxSizing:"content-box",top:0,left:-9999};e="boxSizing fontFamily fontSize fontStyle fontVariant fontWeight height letterSpacing lineHeight paddingBottom paddingLeft paddingRight paddingTop textDecoration textIndent textTransform width word-spacing".split(" ");
f=0;for(g=e.length;f<g;f++)a=e[f],b[a]=c(h).css(a);a=document.createElement("div");c(a).css(b);c(h).after(a);e=document.createTextNode(h.value.substring(0,h.selectionEnd));b=document.createTextNode(h.value.substring(h.selectionEnd));f=document.createElement("span");f.innerHTML="\x26nbsp;";a.appendChild(e);a.appendChild(f);a.appendChild(b);a.scrollTop=h.scrollTop;h=c(f).position();c(a).remove();return h}},show:function(){var a=c.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});
if(this.options.onCaret){var a=this.textareaSelectionPosition(c(this.$element)),b=parseInt(c(this.$element).css("line-height"),10)||18;this.typeahead.$menu.insertAfter(this.$element).css({position:"absolute",top:a.top+b,left:a.left}).show()}else this.typeahead.$menu.insertAfter(this.$element).css({top:a.top+a.height,left:a.left}).show();this.typeahead.shown=!0;return this},process:function(a){var b=this,e="";if(this.options.triggerChar&&this.options.minLength){var f=RegExp("(?:"+this.options.triggerChar+
this.options.triggerModifiers+"{0,1})+([^\\s]{"+this.options.minLength+",})$"),e=this.typeahead.query.substring(0,this.typeahead.$element.get(0).selectionStart).match(f);if(!e)return this.typeahead.hide(),!1;e[1]&&(this.typeahead.query=e[1])}a=c.grep(a,function(a){if(e[0]&&-1!==e[0].indexOf(b.options.groupTriggerChar)){if("group"===a.type)return b.matcher(a)}else return b.matcher(a)});a=this.sorter(a);return!a.length?this.typeahead.hide():this.render(a.slice(0,this.options.items)).show()},matcher:function(a){if(a.fullName){if(a.fullName&&
-1===a.fullName.toLowerCase().indexOf(this.typeahead.query.toLowerCase()))return!1}else if(-1===a.label.toLowerCase().indexOf(this.typeahead.query.toLowerCase()))return!1;var b=this.options.excludeUsers||[],c=this.options.excludeGroups||[],f=this.options.excludeProjects||[],g=a.id.substr(this.projectPrefix.length),j=this.options.enableGroups;if("object"===typeof this.options.excludeProjects){if(this.getSelected(a).length||"user"===a.type&&-1!==b.indexOf(a.id)||"group"===a.type&&-1!==c.indexOf(a.id)||
"project"===a.type&&-1!==f.indexOf(g)||"user"!==a.type&&!j)return!1}else if("boolean"===typeof this.options.excludeProjects&&(this.getSelected(a).length||"user"===a.type&&-1!==b.indexOf(a.id)||"group"===a.type&&-1!==c.indexOf(a.id)||"project"===a.type||"user"!==a.type&&!j))return!1;return!0},setSource:function(a){this.typeahead.source=a;this.enable();this.$element.removeClass("invalid")},updater:function(a){return a.split(" (")[0]},sorter:function(a){a.sort(function(a,b){a=a.label.toLowerCase();b=
b.label.toLowerCase();return a===b?0:a>b?1:-1});return a},addItem:function(a){var b="project"===a.type?"group":a.type;if(this.getSelected(a).length)return!1;var e=this.getItemsContainer();if(e.length){var f=e.find(".type-"+b);f.length||(f=c("\x3cdiv\x3e").addClass("clearfix type-"+b)["group"===b?"prependTo":"appendTo"](e));var e=b+"-section-label",g={user:swarm.te("Individuals:"),group:swarm.te("Groups:"),project:swarm.te("Groups:")};f.find("."+e).length||c("\x3clabel\x3e"+g[a.type]+"\x3c/label\x3e").addClass(e).appendTo(f);
f=this.createItem("group"===b&&this.options.useGroupKeys?this.groupKeyPrefix+a.label:a.label,"group"===b?this.options.groupInputName||this.options.inputName+"-groups":this.options.inputName,a).data("value",a).appendTo(f);f.find("input:not(.preserve-value)").val(a.id);"group"===b&&(b=f.find(".quorum").val(),e=f.find("button"),g=e.hasClass("minimum-true")&&"true"===b?swarm.te("Voting requirements cannot be reduced"):swarm.te("Change Required Votes"),e.removeClass("btn-info").addClass("btn-primary"),
f.find(".item-require").attr("title",g).attr("aria-label",g),f.find("li").show(),f.find("li a[data-required\x3d"+(""===b?!1:b)+"]").parent().hide(),this.options.useGroupKeys&&(f.find("input:not(.preserve-value)").val(this.groupKeyPrefix+a.id),f.find(".button-name").text(a.id.replace(this.groupKeyPrefix))));var j=this,k={user:"",group:swarm.te("Group"),project:swarm.te("Project")};f.find(".button-name").prop("disabled",j.options.disabled).click(function(a){a.preventDefault()}).tooltip({html:!0,container:"body",
customClass:"multipicker-item",title:function(){var b='\x3cspan class\x3d"label-type type-'+a.type+'"\x3e'+k[a.type]+'\x3c/span\x3e\x3cspan class\x3d"name"\x3e';if(a.fullName){if(a.id===a.fullName){var d;for(d=0;d<j.typeahead.source.length;d++)if(j.typeahead.source[d].id===a.id){a.fullName=j.typeahead.source[d].fullName;break}}b=a.id===a.fullName?b+(a.id+" ("+a.fullName+")\x3c/span\x3e"):b+(a.fullName+"\x3c/span\x3e")}else b+=a.label+"\x3c/span\x3e";if("group"===a.type||"project"===a.type){d=j.groupUsers[a.id];
if("array"===c.type(d))return b+'\x3cdiv class\x3d"group-users muted"\x3e'+d.slice(0,100).join(", ")+(100<d.length?" ...":"")+"\x3c/div\x3e";if(!d){var e=c(this).data("tooltip");j.groupUsers[a.id]=c.ajax("/api/v9/users?fields[]\x3dUser\x26group\x3d"+a.id).done(function(b){j.groupUsers[a.id]=c.map(b,function(a){return a.User});e.tip().hasClass("in")&&e.show()})}}return b}});var l=this;f.find(".item-remove").on("click",function(a){a.stopPropagation();c(this).tooltip("destroy");c(this).closest(".multipicker-item").remove();
l.update()})}this.update()},select:function(){var a=this.typeahead.$menu.find(".active").data("value");a&&(!1!==this.addItem(a)&&this.options.clearInput)&&this.$element.val("");c.isFunction(this.options.onSelect)&&this.options.onSelect.call(this);return this.typeahead.hide()},getSelected:function(a){var b=[];this.getItemsContainer().find(".multipicker-item").each(function(){var e=c(this).data("value");(!a||a.id===e.id&&e.type===a.type)&&b.push(e)});return b},render:function(a){var b=this,e=this.typeahead,
f=this.typeahead.$menu,g={project:[],group:[],user:[]};c.each(a,function(){g[this.type]=g[this.type]||[];g[this.type].push(this)});var j=this.options.maxItems/a.length;a=[];c.each(g,function(b,d){a=c.merge(a,d.slice(0,Math.ceil(d.length*j)))});var k={user:swarm.t("Users"),group:swarm.t("Groups"),project:swarm.t("Projects")},l,m,n=[];c.each(a,function(){m=c(e.options.item).data("value",this).attr("data-id",this.id).attr("data-label",this.label).attr("data-type",this.type);m.find("a").addClass("force-wrap").html(b.highlighter(this.fullName));
b.options.enableGroups&&this.type!==l&&(l=this.type,m.prepend(c.templates('\x3cspan class\x3d"group-heading"\x3e{{te:label}}\x3c/span\x3e').render({label:k[this.type]})));n.push(m[0])});f.html(n);return e},makeUserItem:function(a){a=c.isPlainObject(a)?a:{User:a.valueOf()};var b=a.User,e=a.User;a.FullName&&a.FullName!==a.User&&(e+=" ("+a.FullName+")",b="true"===swarm.config.get("users.display_fullname")?a.FullName:b);return{id:a.User,type:"user",label:b,fullName:e}},updateUserItem:function(a){var b=
c('.multipicker-item[data-id\x3d"'+a.User+'"]');0<b.length&&b.find(".button-name").text(a.FullName)},makeGroupItem:function(a){a=c.isPlainObject(a)?a:{Group:a.valueOf()};var b=a.Group;if(0===a.Group.indexOf(this.projectPrefix))return b=a.Group.substr(this.projectPrefix.length),a.name&&a.name!==a.Group&&(b+=" ("+a.name+")"),{id:a.Group,type:"project",label:a.Group.substr(this.projectPrefix.length),fullName:b};b=a.Group.replace(this.groupKeyPrefix,"");a.name&&a.name!==a.Group&&(b+=" ("+a.name+")");
return{id:a.Group.replace(this.groupKeyPrefix,""),type:"group",label:a.Group.replace(this.groupKeyPrefix,""),fullName:b}}});c.fn.userMultiPicker=function(a){return this.each(function(){var b=c(this),e=b.data("user-multipicker");if(e){if("string"===typeof a)e[a]()}else e=c.extend({},b.data(),"object"===typeof a&&a),b.data("user-multipicker",new g(this,e))})};c.fn.userMultiPicker.Constructor=g;c.fn.userMultiPicker.defaults=c.extend({},c.fn.multiPicker.defaults,{excludeUsers:[],excludeGroups:[],excludeProjects:[],
groupInputName:null,enableGroups:!1,maxItems:20,clearInput:!0,additionalClass:""});var b;c.fn.userMultiPicker.Promise=function(a){var d={data:{fields:["User","FullName"],format:"json"}},e={data:{fields:["Group","name"],format:"json"}};a.options.ignoreBlacklist&&(d.data.ignoreBlacklist=a.options.ignoreBlacklist,e.data.ignoreBlacklist=a.options.ignoreBlacklist);return b=b||c.when(c.ajax("/api/v9/users",d),c.ajax("/groups",e)).then(function(b,d){swarm.users={};var e=[];c.each(b[0],function(){swarm.users[this.User]=
this.FullName;"true"===swarm.config.get("users.display_fullname")&&a.updateUserItem(this);e.push(a.makeUserItem(this))});c.each(d[0].groups,function(){e.push(a.makeGroupItem(this))});return e})}})(window.jQuery);
(function(c){function g(b,a,d,e,f){var h=/([^\[\]\s]*)\[([^\[\]\s]*)\](.*)/i;if(h.test(a)&&!e){var j=h.exec(a);a=j[1];var h=j[2],j=j[3],k=!h||c.isNumeric(h)&&"reviewers"!==a,l=b[a]=b[a]||(k?[]:{});k&&!j?f(b,a,d):g(l,h+j,d,e,f)}else e&&(void 0!==b[a]&&!c.isArray(b[a]))&&(b[a]=[b[a]]),f(b,a,d)}c.deparam=function(b,a,d){var e=function(b,d,e){if(a)switch(e){case "undefined":e=null;break;case "null":case "":e=null;break;case "true":e=!0;break;case "false":e=!1;break;default:e=c.isNumeric(e)?+e:e}else e=
e||"";c.isArray(b[d])?b[d].push(e):b[d]=e};void 0===d&&(d=c.ajaxSettings.traditional);b=b.replace(/^\?/,"").replace(/\+/g,"%20").split("\x26");var f={},h,j,k;for(h=0;h<b.length;h++)j=b[h].split("\x3d"),k=decodeURIComponent(j[0]),j=1<j.length?decodeURIComponent(j[1]):"",g(f,k,j,d,e);return f}})(window.jQuery);(function(c){c.isScrolledToBottom=function(g,b){g=g||window;b=b||document;return c(g).scrollTop()+2>=c(b).height()-c(g).height()}})(window.jQuery);
(function(c){c.fn.animateFlash=function(){var g=c(this);g.addClass("flash");setTimeout(function(){g.removeClass("flash")},2E3)}})(window.jQuery);
(function(c){c.extend(c.expr[":"],{"off-top":function(g){return c(g).offset().top<c(window).scrollTop()},"off-right":function(g){return c(g).offset().left+c(g).outerWidth()-c(window).scrollLeft()>c(window).width()},"off-bottom":function(g){return c(g).offset().top+c(g).outerHeight()-c(window).scrollTop()>c(window).height()},"off-left":function(g){return c(g).offset().left<c(window).scrollLeft()},"off-screen":function(g){return c(g).is(":off-top, :off-right, :off-bottom, :off-left")}})})(window.jQuery);/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
(function(a){a(function(){a("#php-swarm-app").tooltip({selector:"[title]:not(.manual-tooltip)",container:"body"})});var e=a.fn.tooltip;a.fn.tooltip=function(c){if(a.isPlainObject(c)&&(c.isDelegated=c.isDelegated||!!c.selector,this.addClass(!c.isDelegated&&"manual"===c.trigger?"manual-tooltip":""),"manual"===c.trigger&&this.closest(".modal").length))this.one("show",function(c){c.target===this&&a(this).data("tooltip").tip().addClass("modal-tooltip")});this.off("show.tooltip.class");this.on("show.tooltip.class",
function(c){c.target===this&&a(this).data("tooltip")&&(c=a(this).data("tooltip").options,a(this).data("tooltip").tip().addClass(c.customClass||c.customclass))});return e.apply(this,arguments)};a.fn.tooltip.Constructor=e.Constructor;a.fn.tooltip.defaults=e.defaults;a.fn.tooltip.defaults.animation=!1;a.fn.tooltip.defaults.delay={show:150,hide:0};var g=a.fn.tooltip.Constructor.prototype,f=g.applyPlacement;g.applyPlacement=function(a,h){var b=this.tip(),d=b[0].offsetWidth,j=document.documentElement.clientWidth-
(a.left+d);0>j&&(a.left+=j);var e=f.apply(this,[a,h]);0>j&&(b=b[0].offsetWidth,this.replaceArrow(2*j-d+b,b,"left"));return e};var h=g.setContent;g.setContent=function(){h.apply(this,arguments);"object"===typeof this.options.title&&this.tip().find(".tooltip-inner").empty().append(this.options.title)}})(window.jQuery);
(function(a){var e=a.fn.popover;a.fn.popover=function(g){this.off("show.popover.class");this.on("show.popover.class",function(e){e.target===this&&a(this).data("popover")&&(e=a(this).data("popover").options,a(this).data("popover").tip().addClass(e.customClass||e.customclass))});return e.apply(this,arguments)};a.fn.popover.Constructor=e.Constructor;a.fn.popover.defaults=e.defaults;a.fn.popover.Constructor.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")}})(window.jQuery);
(function(a){a.fn.collapse.Constructor.prototype.dimension=function(){this.$element.addClass("collapsing");return this.$element.hasClass("width")?"width":"height"};a(document).on("shown.collapse.data-api hidden.collapse.data-api",".collapse",function(e){this===e.target&&a(this).removeClass("collapsing")})})(window.jQuery);
(function(a){function e(b){var d=b.attr("data-target");d||(d=(d=b.attr("href"))&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,""));d=d&&a("selector");if(!d||!d.length)d=b.parent();return d}function g(){a("[data-toggle\x3ddropdown]").each(function(){var b=e(a(this));b.hasClass("open")&&a(this).trigger("dropdown-close");b.removeClass("open")})}var f=a.fn.dropdown.Constructor.prototype,h=f.keydown,c=function(b){var d=b.data("active-target");if(!d||!d.parentNode)b.removeClass("open").detach();else{var c="function"===
typeof d.getBoundingClientRect?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},d=a.extend({},c,a(d).offset());b.hasClass("pull-right")?b.offset({top:d.top+d.height,left:d.left+d.width-b[0].offsetWidth}):b.offset({top:d.top+d.height,left:d.left})}},l=function(){a(".contained-dropdown").removeClass("open").detach()};f.toggle=function(){var b,d,j,h,f=a(this),k=f.attr("data-dropdown-container");if(!f.is(".disabled, :disabled"))return k&&((b=f.data("dropdown-menu"))?d=b.hasClass("open"):
(b=f.parent().find(".dropdown-menu"),b.detach(),b.removeClass("open").addClass("contained-dropdown"),f.data("dropdown-menu",b))),l(),j=e(f),h=j.hasClass("open"),g(),h||j.toggleClass("open"),f.focus(),k&&b&&!d&&(b.data("active-target",this),b.addClass("open").css({top:0,left:0}).appendTo(k),c(b)),!1};f.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this),c=d.is("[role\x3dmenu]")?d:d.data("dropdown-menu"),e=c&&c.data("active-target");!e||!c||!c.is(d)?h.apply(this,arguments):(b.preventDefault(),
b.stopPropagation());e&&(c&&!d.is(".disabled, :disabled"))&&(e=c.hasClass("open"),!e||e&&27===b.keyCode?(27===b.which&&a(c.data("active-target")).focus(),d.is(c)&&d.click()):(c=a("li:not(.divider):visible a",c),c.length&&(d=c.index(c.filter(":focus")),38===b.keyCode&&0<d&&d--,40===b.keyCode&&d<c.length-1&&d++,-1===d&&(d=0),c.eq(d).focus())))}};a(window).on("resize.dropdown.clear",l);a(document).off("click.dropdown.data-api").off("keydown.dropdown.data-api","[data-toggle\x3ddropdown], [role\x3dmenu]").on("click.dropdown.container.data-api",
l).on("click.dropdown.data-api",g).on("click.dropdown.data-api","[data-toggle\x3ddropdown]",f.toggle).on("keydown.dropdown.data-api","[data-toggle\x3ddropdown], [role\x3dmenu]",f.keydown).on("shown.dropdown.position hidden.dropdown.position",function(){a(".contained-dropdown").each(function(){c(a(this))})})})(window.jQuery);
(function(a){function e(h,c){this.options=c;this.$el=a(h);this.$parent=this.$el.closest(this.options.parentSelector);this.$target=this.$parent.find(this.options.targetSelector);this.$boundary=this.options.boundary?a(this.options.boundary):this.$parent;this.$el.addClass("swarm-affix");this.$target.hasClass("in")&&this.listen();this.$target.on("hide show",function(b){b.target!==this&&a.fn.swarmAffix.checkAll()});var e=this;this.$target.on("hidden shown",function(b){b.target===this&&("hidden"===b.type&&
e.check(),e.listen("hidden"===b.type));a.fn.swarmAffix.checkAll()});if(this.options.scrollToTarget)this.$target.on("hide",function(b){b.target===this&&(b=e.$parent.offset().top-e.getFixedTop(),b<a(window).scrollTop()&&a("html, body").animate({scrollTop:b},"fast","swing"))})}var g=null;e.prototype={listen:function(e){this.eventListener=this.eventListener&&a(window).off("scroll resize",this.eventListener)&&null;if(!e){var c=a.proxy(this.check,this);this.eventListener=function(a){(a.target===this||a.target===
document||a.target===document.documentElement||a.target===document.body)&&swarm.requestFrame(c)};a(window).on("scroll resize",this.eventListener)}},getFixedTop:function(){null===g&&(g=0,a("."+this.options.offsetClass).each(function(){if(a(this).hasClass("swarm-affix"))return!1;"fixed"===a(this).css("position")&&(g+=this.offsetHeight)}),setTimeout(function(){g=null},1E3));return g},check:function(){var e=this.$el[0].offsetHeight;if(e){var c="top"===this.options.position,f=a(window).scrollTop(),b=this.$boundary[0].getBoundingClientRect(),
d=c&&this.getFixedTop(),g=c?f+d:f+a(window).height()-e,m=b.top+f+b.height,n=this.showAffix,k=this.showAffixMiddle,p=this.showAffixBottom;this.showAffix=b.top+f<=g&&g<=m&&this.$target.hasClass("in");this.showAffixMiddle=this.showAffixBottom=!1;this.options.animate&&(this.showAffixMiddle=this.showAffix&&g>=m-b.height/2,this.showAffixBottom=this.showAffix&&g>=m-e);e=a.proxy(function(){this.$el.toggleClass("affix "+(c?this.options.offsetClass:""),this.showAffix);this.options.animate&&(this.showAffix&&
!n&&this.$el.css({top:"",bottom:""}),this.$el.toggleClass("affix-middle",this.showAffixMiddle),this.$el.toggleClass("affix-bottom",this.showAffixBottom))},this);if(n!==this.showAffix||k!==this.showAffixMiddle||p!==this.showAffixBottom)this.options.animate&&this.showAffix&&!n?(c?this.$el.css("top",(b.top>=d-10?d:b.top+1)+"px"):this.$el.css("bottom",(-10<=b.bottom?0:b.bottom)+"px"),swarm.requestFrame(e)):e()}}};a.fn.swarmAffix=function(f){a.fn.swarmAffix.checkAll(!0);return this.each(function(){var c=
a.data(this,"swarm-affix");c?f&&f.boundary&&(c.$boundary=a(f.boundary)):(f=a.extend({},a.fn.swarmAffix.defaults,f),c=new e(this,f),a.data(this,"swarm-affix",c));swarm.requestFrame(function(){c.check()})})};var f=[!1,!1];a.fn.swarmAffix.checkAll=function(e){var c=e?0:1;swarm.requestFrame(function(){f[c]||(a(".swarm-affix"+(e?".affix":"")).each(function(){var c=a.data(this,"swarm-affix");c.eventListener&&c.check()}),f[c]=!0,setTimeout(function(){f[c]=!1},0))})};a.fn.swarmAffix.defaults={offsetClass:"offset-fixed",
parentSelector:".diff-wrapper",targetSelector:".diff-details",boundary:null,scrollToTarget:!1,animate:!0,position:"top"}})(window.jQuery);/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
var swarm={};window.addEventListener("clearPhpPage",function(){swarm.isReviewPage()||$("#php-swarm-app").empty()},!1);window.addEventListener("reloadPhpPage",function(){0===$("#php-swarm-app").children().length&&location.reload()},!1);swarm.isReviewPage=function(){var a=$("body").data("base-url")||"";return RegExp(a+"reviews/.*[1-9]").test(location.pathname)};
swarm.requestFrame=function(a){window.requestAnimationFrame?window.requestAnimationFrame(a):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(a):setTimeout(a,1E3/60)};swarm.encodeURIPath=function(a){return encodeURIComponent(a).replace(/\%2F/g,"/")};swarm.encodeURIDepotPath=function(a){return swarm.encodeURIPath(a.replace(/^\/*/,""))};swarm.url=function(a){return"/"===a.charAt(0)?($("body").data("base-url")||"")+a:a};
swarm.serverId=function(){return $("body").data("server-id")||"p4"};swarm.assetUrl=function(a){return"/"===a.charAt(0)?($("body").data("asset-base-url")||"")+a:a};swarm.localStorage={set:function(a,b){return!swarm.localStorage.canStore()?null:window.localStorage.setItem(a,b)},get:function(a){return!swarm.localStorage.canStore()?null:window.localStorage.getItem(a)},canStore:function(){try{return void 0!==window.localStorage&&null!==window.localStorage}catch(a){return!1}}};
swarm.config={globalConfig:[],get:function(a){void 0===swarm.config.globalConfig[a]&&(swarm.config.globalConfig=$("body").data("config"));return swarm.config.globalConfig[a]}};
swarm.query={first:function(a,b){b=b||document;return(b=b instanceof window.jQuery?b[0]:b)&&b.querySelector?$(b.querySelector(a)):$(a,b).first()},all:function(a,b){b=b||document;return(b=b instanceof window.jQuery?b[0]:b)&&b.querySelectorAll?$(b.querySelectorAll(a)):$(a,b)},apply:function(a,b,c){var d;for(d=0;d<b.length;d++)swarm.query.all(a,b[d]).each(c)}};
swarm.history={supported:!(!window.history||!window.history.pushState),isPageShow:!1,initialized:!1,init:function(){swarm.history.switchTab();if(!swarm.history.initialized)if(swarm.history.supported)$(document).on("shown.swarm.tab",'[data-toggle\x3d"tab"]',function(){var a=window.history.state&&window.history.state.tab,c=$(this).attr("href");c&&c!==a&&swarm.history.pushState({tab:c},null,c)}),swarm.history.onPopState(function(a){a=a.originalEvent;a.state&&(a.state.tab&&!1!==a.state.autoSwitchTab)&&
swarm.history.switchTab(a.state.tab)}),$(window).on("pageshow",function(){swarm.history.isPageShow=!0;setTimeout(function(){swarm.history.isPageShow=!1},0)}),$(window).on("beforeSetState",function(a,c){$.extend(c,{tab:$(".nav-tabs").find("li.active \x3e a[href]").attr("href"),route:swarm.history.getPageRoute()})}),swarm.history.initialized=!0,swarm.history.doStateUpdate();else{var a=location.hash?"":$(".nav-tabs").find("li.active \x3e a[href]").attr("href");$(document).on("shown.swarm.tab",'[data-toggle\x3d"tab"]',
function(){var b=$(this).attr("href");(b=b.substr(b.indexOf("#")))&&(b!==location.hash&&(b!==a||location.hash))&&location.assign(location.pathname+location.search+b)});$(window).on("hashchange.swarm.history",function(){swarm.history.switchTab(location.hash||a)})}},replaceState:function(a,b,c){if(swarm.history.supported){var d={};$(window).triggerHandler("beforeSetState",[d,"replace"]);a=$.extend(d,a);window.history.replaceState(a,b,c)}},pushState:function(a,b,c){if(swarm.history.supported){var d=
{};$(window).triggerHandler("beforeSetState",[d,"push"]);a=$.extend(d,a);window.history.pushState(a,b,c)}},clearState:function(){swarm.history.supported&&window.history.replaceState(null,null,null)},doStateUpdate:function(){swarm.history.supported&&swarm.history.initialized&&swarm.history.replaceState(null,null,null)},onPopState:function(a){if(swarm.history.supported)$(window).on("popstate",function(b){swarm.history.isPageShow||a.apply(this,arguments)})},getPageRoute:function(){var a=$("body")[0].className.match(/\broute\-(\S+)/i);
return a&&a[1]},switchTab:function(a){if((a=(a||window.location.hash||$(".nav-tabs").find("li.active \x3e a[href]").attr("href")||"").replace(/^#/,""))&&$('.nav-tabs a[href\x3d"#'+a+'"]').length&&!$('.nav-tabs li.active a[href\x3d"#'+a+'"]').length){var b=$("#"+a+".fade"),c=b.parent().find("\x3e .fade.active");b.removeClass("fade");c.removeClass("fade");$('.nav-tabs a[href\x3d"#'+a+'"]').one("shown",function(){c.addClass("fade");b.addClass("in fade")}).tab("show")}},patchPartialSuppport:function(){if(swarm.history.supported&&
swarm.has.partialHistorySupport()){var a=window.history.pushState,b=window.history.replaceState,c=window.onpopstate;window.history.state=null;window.history.pushState=function(b,c,f){window.history.state=b;return a.call(window.history,b,c,f)};window.history.replaceState=function(a,c,f){window.history.state=a;return b.call(window.history,a,c,f)};window.onpopstate=function(a){window.history.state=a.state;c&&c.call(window,a)}}}};
swarm.overlay={show:function(a){void 0===a&&(a=!0);$("#modal-overlay").show();!0===a&&$("#modal-overlay .spinner").show()},hide:function(){$("#modal-overlay").hide();$("#modal-overlay .spinner").hide()}};
swarm.modal={show:function(a){var b=function(){return 0>parseInt($(this).css("marginLeft"),10)?-($(this).width()/2):0};$(a).css({width:"auto",marginLeft:""}).modal("show").css({marginLeft:b});if(!$(a).data("resize-swarm-modal")){var c=$(window).on("resize",function(){$(a).css("marginLeft","");$(a).css({marginLeft:b})});$(a).data("resize-swarm-modal",c)}}};
swarm.tooltip={showConfirm:function(a,b){$(a).popover($.extend({trigger:"manual",container:"body",placement:"top"},b,{html:!0,content:'\x3cdiv class\x3d"pad2 padw0 content"\x3e'+(b.content||"")+'\x3c/div\x3e\x3cdiv class\x3d"buttons center pad2 padw0"\x3e'+(b.buttons.length?b.buttons.join(""):"")+"\x3c/div\x3e",template:'\x3cdiv class\x3d"popover popover-confirm '+(b.classes||"")+'" tabindex\x3d"0"\x3e \x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e \x3cdiv class\x3d"popover-content center"\x3e\x3c/div\x3e\x3c/div\x3e'})).popover("show");
$(a).data("popover").tip().focus();$(document).mouseup(function(a){0===$(".popover").has(a.target).length&&$(".popover-confirm .btn-cancel").click()});return $(a).data("popover")}};
swarm.alert={popup:function(a,b){var c=$.templates('\x3cdiv class\x3d"swarm-alert alert alert-{{\x3etype}}" id\x3d"inner-message"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"alert"\x3e\x3cspan\x3ex\x3c/span\x3e\x3c/button\x3e{{\x3emessage}}\x3c/div\x3e').render({message:a,type:b});$("body").append(c);swarm.alert.closeIfVisible("#inner-message")},closeIfVisible:function(a){a=$(a);0<$("#inner-message").length&&$("#inner-message").delay(5E3).fadeTo(500,0,function(){$(a).remove()})}};
swarm.form={checkInvalid:function(a){var b=$(a).find(".invalid").length;try{b+=$(a).find(":invalid").length}catch(c){b+=$(a).find("[required]:enabled").filter(function(){return $(this).val()?!1:!0}).length}$(a).toggleClass("invalid",0<b);$(a).find('[type\x3d"submit"]').not(".loading").prop("disabled",!!b)},post:function(a,b,c,d,e){swarm.form.rest("POST",a,b,c,d,e)},patch:function(a,b,c,d,e){swarm.form.rest("PATCH",a,b,c,d,e)},put:function(a,b,c,d,e){swarm.form.rest("PUT",a,b,c,d,e)},restDelete:function(a,
b,c,d,e){swarm.form.rest("DELETE",a,b,c,d,e)},rest:function(a,b,c,d,e,f){var j=d,g=null;$.isPlainObject(d)&&(j=d.callback,e=d.errorNode,g=d.errorHandler,f=d.prepareData);var h=$(c).find('[type\x3d"submit"]');swarm.form.disableButton(h);swarm.form.clearErrors(c);$.ajax(b,{type:a||"POST",data:f?f(c):$(c).serialize(),headers:{"X-CSRF-TOKEN":encodeURIComponent($("body").data("csrf")||"")},error:e||g?function(a,b,c){this.errorHandled=!0;g&&g(a,b,c)}:"",complete:function(a,b){swarm.form.enableButton(h);
$(c).is(".invalid")&&h.prop("disabled",!0);if(("success"===b||swarm.ignoredAjaxError)&&a.responseText){var d={isValid:!1,error:swarm.te("There is a problem with the Helix Swarm server, please contact your administrator. They will find more details in the Helix Swarm logs.")};try{d=JSON.parse(a.responseText)}catch(f){}swarm.form.postHandler.apply(this,[c,j,e,d])}}})},flattenFieldMessages:function(a){var b={},c=function(a,b,f){$.each(a,function(a,d){var h=f?f+"["+a+"]":a;$.isPlainObject(d)?c(d,b,h):
b[h]=d})};c(a,b);return b},postHandler:function(a,b,c,d){a=$(a);if(!1===d.isValid||d.error||d.messages&&d.messages.length){var e=d.error&&!d.details&&$.isEmptyObject(d.messages)?[d.error]:[],f=$.Event("form-errors");f.action="error";$.each(d.details||swarm.form.flattenFieldMessages(d.messages)||[],function(b,c){var d=swarm.form.getElement(a,b).closest(".controls"),f=d.closest(".control-group");f.addClass("error");f.one("focusin.swarm.form.error",function(){swarm.form.clearErrors(this)});$.each("object"===
typeof c?c:[c],function(a,b){if(d.length)return $("\x3cspan /\x3e").text(b).addClass("help-block help-error").appendTo(d),!1;e.push(b)})});e.length&&(c=c&&$(c)||a,c.prepend($.templates('\x3cdiv class\x3d"alert"\x3e{{for errors}}\x3cdiv\x3e{{\x3e#data}}\x3c/div\x3e{{/for}}\x3c/div\x3e').render({errors:e})),a.one("focusin.swarm.form.error",function(){c.find("\x3e .alert").remove()}));a.trigger(f)}else d.redirect&&(swarm.form.disableButton($(a).find('[type\x3d"submit"]')),window.location=d.redirect);
b&&b(d,a)},getElement:function(a,b){var c,d=b,e=$(a).find('[name\x3d"'+d+'"], [name^\x3d"'+d+'["]');for(c=(b.match(/\]/g)||[]).length;0===e.length&&0<c;c--)d=d.replace(/\[[^\[]*\]$/,""),e=$(a).find('[name\x3d"'+d+'"], [name^\x3d"'+d+'["]');return e},clearErrors:function(a,b){a=$(a);a.is("form")||(a=a.closest(".control-group.error"));a.find(".alert").remove();a.find(".help-error").remove();a.find(".control-group.error").removeClass("error");a.removeClass("error");if(!b){var c=$.Event("form-errors");
c.action="clear";a.trigger(c)}},disableButton:function(a){$(a).prop("disabled",!0).addClass("loading");var b=setTimeout(function(){$(a).addClass("animate")},500);$(a).data("animationTimeout",b)},enableButton:function(a){$(a).prop("disabled",!1).removeClass("loading animate");clearTimeout($(a).data("animationTimeout"))}};
swarm.about={show:function(){$(".about-dialog.modal").length?swarm.modal.show(".about-dialog.modal"):$.ajax({url:"/about",data:{format:"partial"}}).done(function(a){$("body").append(a);$(".about-dialog .token").click(function(){$(this).select()})})}};
swarm.info={init:function(){swarm.info.refreshLog();$("iframe").on("load",function(){swarm.info.resizeIframe($(this))});$('a[data-toggle\x3d"tab"]').on("shown",function(){var a=$(this).attr("href");"#phpinfo"===a&&swarm.info.resizeIframe($("iframe"));$(".nav-tabs .btn-group").toggleClass("hidden","#log"!==a)});$(".btn-refresh").click(function(a){a.preventDefault();swarm.info.refreshLog()});$('.nav-tabs .active a[href\x3d"#log"]').length&&$(".nav-tabs .btn-group").removeClass("hidden");swarm.info.queueStatus();
setInterval(function(){swarm.info.queueStatus()},6E5);$("#startqueueworker").click(function(a){a.preventDefault();swarm.overlay.show();swarm.info.startWorker()});$("#startdebugqueueworker").click(function(a){a.preventDefault();swarm.overlay.show();swarm.info.startWorker(!0)});$("#updatequeue").click(function(a){a.preventDefault();swarm.overlay.show();swarm.info.queueStatus()});$("#showqueue").click(function(a){a.preventDefault();$("#queueinfo .tasks-list").toggle();$(this).text()===swarm.te("Show Task Queue")?
$(this).text(swarm.te("Hide Task Queue")):$(this).text(swarm.te("Show Task Queue"))});swarm.info.cacheStatus(!1);$("[id^\x3dverify-]").click(function(a){$("#inner-message").remove();a.preventDefault();swarm.overlay.show();swarm.info.cacheVerify(a.target.id.split("-")[1])});$("#refresh-table").click(function(a){$("#inner-message").remove();a.preventDefault();swarm.overlay.show();swarm.info.cacheStatus(!0)});$("#clear-config").click(function(a){$("#inner-message").remove();a.preventDefault();swarm.overlay.show();
swarm.info.clearConfig()})},refreshLog:function(){var a=$(".swarmlog-latest tbody");a.empty();a.append('\x3ctr class\x3d"loading"\x3e\x3ctd colspan\x3d"3"\x3e\x3cspan class\x3d"loading animate"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e");$.ajax({url:"/info/log",data:{format:"partial"}}).done(function(a){$(".swarmlog-latest tbody").html(a);$(".timeago").formatTimestamp();$("tr.has-details").click(function(){var a=$(this).next("tr.entry-details");$(this).find(".icon-chevron-right").toggleClass("icon-chevron-down");
a.toggle()})})},resizeIframe:function(a){a.height(a.contents().outerHeight())},queueStatus:function(){$.ajax({url:"/queue/status"}).done(function(a){var b=$("#queueinfotablebody"),c=$("#startqueueworker"),d=$("#startdebugqueueworker");$("#queuepleasewait").empty();b.empty();$.each(a,function(a,c){var d=a.replace(/([A-Z])/g," $1").trim().toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()});b.append($("\x3ctr\x3e").append($("\x3ctd\x3e").attr("class",a+"-name").text(d)).append($("\x3ctd\x3e").attr("class",
a+"-value").text(c)))});a.maxWorkers===a.workers?(c.hide(),d.hide()):(c.show(),d.show());swarm.info.getTasks();$("#updatequeue").show();$("#showqueue").show();swarm.overlay.hide()})},startWorker:function(a){var b="/queue/worker";!0===a&&(b+="?retire\x3d1");$.ajax({url:b}).done(function(){setTimeout(function(){swarm.info.queueStatus();swarm.overlay.hide()},2E3)})},cacheVerify:function(a){var b="/api/v9/cache/redis/verify";"all"!==a&&(b+="?context\x3d"+a);$.ajax({url:b,type:"POST"}).done(function(){setTimeout(function(){swarm.info.cacheStatus(!1);
swarm.overlay.hide();swarm.alert.popup(swarm.te("Successfully verified "+a+" Redis cache."),"success");swarm.alert.closeIfVisible("body")},2E3)})},cacheStatus:function(a){$.ajax({url:"/api/v9/cache/redis/verify"}).done(function(b){var c=$("#cache-info-table-body");$("#cache-please-wait").empty();c.empty();c.append($("\x3ctr\x3e").append($("\x3cth\x3e").attr("class","context-name").text(swarm.te("Context"))).append($("\x3cth\x3e").attr("class","state-value").text(swarm.te("State"))).append($("\x3cth\x3e").attr("class",
"progress-value").text(swarm.te("Progress"))));$.each(b,function(a,b){"object"===typeof b&&$.each(b,function(a,b){var d=a.charAt(0).toUpperCase()+a.slice(1),d=$("\x3ctr\x3e").append($("\x3ctd\x3e").attr("class","context-name").text(d));d.append($("\x3ctd\x3e").attr("class","state-value").text(b.state)).append($("\x3ctd\x3e").attr("class","progress-value").text(b.progress));c.append(d)})});swarm.overlay.hide();!0===a&&setTimeout(function(){swarm.alert.popup(swarm.te("Successfully refreshed status."),
"success");swarm.alert.closeIfVisible("body")},2E3)})},clearConfig:function(){$.ajax({url:"/api/v9/cache/config/",type:"delete",headers:{"X-CSRF-TOKEN":encodeURIComponent($("body").data("csrf")||"")},success:function(){setTimeout(function(){swarm.overlay.hide();swarm.alert.popup(swarm.te("Successfully reloaded the config."),"success");swarm.alert.closeIfVisible("body")},2E3)},error:function(){swarm.alert.popup(swarm.te("Failed to load config."),"error");swarm.overlay.hide();swarm.alert.closeIfVisible("body")}})},
getTasks:function(a){$.ajax({url:"/queue/tasks",data:{type:a||"allTasks"}}).done(function(a){var c=$("#taskstablebody"),d=$("#futuretaskstablebody");c.empty();d.empty();$.isEmptyObject(a.tasks)?c.append($("\x3ctr\x3e").text(swarm.te("There are no current or future tasks."))):($.each(a.tasks.currentTasks,function(a,b){swarm.info.taskTable(swarm.te("Task"),c,a,b)}),$.each(a.tasks.futureTasks,function(a,b){swarm.info.taskTable(swarm.te("Future task"),d,a,b)}))})},taskTable:function(a,b,c,d){b.append($("\x3ctr\x3e").attr("class",
"title").append($("\x3ctd\x3e").text(a+" - "+c).attr("colspan","100%")));$.each(d,function(a,c){var d=a.toLowerCase().replace(/\b[a-z]/g,function(a){return a.toUpperCase()});if("object"===typeof c){var d=$("\x3ctr\x3e").append($("\x3ctd\x3e").attr("class","empty-data").text(d)),g="";$.each(Object.values(c),function(a,b){g="object"===typeof b?g+(JSON.stringify(b)+", "):g+(b+", ")});d.append($("\x3ctd\x3e").attr("class",a).text(g));b.append(d)}else"time"===a&&(c=new Date(1E3*c)),b.append($("\x3ctr\x3e").append($("\x3ctd\x3e").attr("class",
"empty-data").text(d)).append($("\x3ctd\x3e").attr("class",a).text(c)))})}};
swarm.has={nonStandardResizeControl:function(){return!!navigator.userAgent.match(/webkit/i)},historyAnimation:function(){return!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i))},fullFileApi:function(){return!(void 0===window.FormData||void 0===window.File)},_cssCalcSupport:null,cssCalcSupport:function(){if(null===swarm.has._cssCalcSupport){var a=$("\x3cdiv /\x3e",{css:{position:"absolute",top:"-9999px",left:"-9999px",width:"calc(10px + 5px)"}}).appendTo("body");swarm.has._cssCalcSupport=
0!==a[0].offsetWidth;a.remove()}return swarm.has._cssCalcSupport},partialHistorySupport:function(){return!!(window.history&&void 0===window.history.state)},xhrUserAbortAsError:function(){return!(!navigator.userAgent.match(/gecko/i)||!navigator.userAgent.match(/firefox/i)||navigator.userAgent.match(/webkit/i)||navigator.userAgent.match(/trident/i))}};swarm.setCookie=function(a,b,c){document.cookie=a+"\x3d"+b+";path\x3d"+($("body").data("baseUrl")||"/")+(c?";Expires\x3d"+c:"")};
$(function(){$("body").is(".route-home.authenticated")&&$.getJSON("/queue/status",function(a){var b="";0===a.workers?b=swarm.te("Hmm... no queue workers? Ask your administrator to check the")+' \x3ca href\x3d"'+swarm.assetUrl("/docs/Content/Swarm/setup.worker.html")+'"\x3e'+swarm.te("worker setup")+"\x3c/a\x3e.":a.pingError&&(b=$.templates('{{te:"Swarm triggers not working?"}} {{if error !\x3d\x3d true}}\x3cdiv class\x3d"ping-error"\x3e{{\x3eerror}}\x3c/div\x3e{{/if}}{{te:"Ask your administrator to check the"}} \x3ca href\x3d"{{:url}}"\x3e{{te:"triggers setup"}}\x3c/a\x3e.').render({error:a.pingError,
url:swarm.assetUrl("/docs/Content/Swarm/setup.perforce.html#setup.perforce.triggers")}));b&&($("body \x3e .container-fluid").first().prepend('\x3cdiv class\x3d"alert alert-error center"\x3e'+b+"\x3c/div\x3e"),$(".ping-error").expander({slicePoint:80}))});$(document).ready(function(){swarm.alert.closeIfVisible("#message");$(document).keydown(function(a){$("#modal-overlay").is(":visible")&&(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation())});if(document.documentElement.style.hasOwnProperty("-ms-scroll-limit")&&
document.documentElement.style.hasOwnProperty("-ms-ime-align"))window.addEventListener("hashchange",function(){var a=window.location.hash.slice(1);swarm.history.switchTab(a)},!1);else $(window).on("hashchange",function(a){a=a.originalEvent.newURL.split("#")[1];swarm.history.switchTab(a)})})});/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.activity={_loading:!1,msgIds:function(){swarm.te("addressed an issue on");swarm.te("approved");swarm.te("archived");swarm.te("changed author of");swarm.te("cleared an issue on");swarm.te("cleared their vote on");swarm.te("commented on");swarm.te("committed");swarm.te("created");swarm.te("disabled notifications on");swarm.te("re-enabled notifications on");swarm.te("edited a comment on");swarm.te("edited reviewers on");swarm.te("joined");swarm.te("left");swarm.te("liked a comment on");swarm.te("made their vote optional on");
swarm.te("made their vote required on");swarm.te("made themselves optional on");swarm.te("made themselves required on");swarm.te("modified");swarm.te("opened an issue on");swarm.te("rejected");swarm.te("released");swarm.te("reopened an issue on");swarm.te("reported");swarm.te("requested");swarm.te("requested further review of");swarm.te("requested revisions to");swarm.te("submitted");swarm.te("updated description of");swarm.te("updated files in");swarm.te("updated");swarm.te("voted down");swarm.te("voted up");
swarm.te("review %s");swarm.te("passed tests for");swarm.te("failed tests for");swarm.te("running tests for");swarm.te("verified an issue on")},init:function(c){var d=$("table.activity-stream").filter(function(a,c){return void 0!==$(c).attr("data-stream")}).first(),e=swarm.localStorage.get("activity.type");e&&d.find("th .nav-pills a.type-"+e).closest("li").addClass("active");d.find("th .nav-pills a").click(function(){var a=$(this).attr("class").match(/type-([\w]+)/).pop(),d=$(this).closest("li").is(".active");
$(this).closest(".nav-pills").find("li").removeClass("active");$(this).closest("li").toggleClass("active",!d);swarm.activity.load(c,!0);swarm.localStorage.set("activity.type",!d?a:null);return!1});d.find("ul.dropdown-menu a").on("click",function(a){a.preventDefault();a=$(this).closest("li").data("scope");swarm.localStorage.set("activity.scope",a);swarm.activity.load(c,!0)});d.find(".dropdown-toggle").on("click",function(a){$(this).closest(".dropdown").length||a.stopPropagation()});$(document).on("swarm-login",
function(){swarm.activity.load(c,!0)})},load:function(c,d,e){if(swarm.activity._loading){if(!d)return;swarm.activity._loading.abort();swarm.activity._loading=!1}var a=$("table.activity-stream");if(!(void 0!==e||!a.length||a.data("stream").trim()!=="stream-"+(c||"global")))if(d&&(a.data("last-seen",null),a.data("end-of-data",null),a.find("tbody.activity-table").empty()),!a.data("end-of-data")){a.find("tbody.activity-table").append('\x3ctr class\x3d"loading muted hide"\x3e \x3ctd colspan\x3d"3"\x3e  \x3cspan class\x3d"loading"\x3e'+
swarm.te("Loading...")+"\x3c/span\x3e \x3c/td\x3e\x3c/tr\x3e");setTimeout(function(){a.find("tbody.activity-table tr.loading").removeClass("hide").find(".loading").addClass("animate")},void 0===e?2E3:0);var l=c;d=swarm.localStorage.get("activity.scope")||"user";var h=swarm.user.getAuthenticatedUser(),k=a.is(".switchable")&&null!==h,j=k&&"user"===d;j&&(c="personal-"+h.id,a.addClass("stream-"+c));var f=a.data("type-filter");null===f&&(f=a.find("th .nav-pills li.active a"),f=f.length&&f.attr("class").match(/type-([\w]+)/).pop());
d=a.data("last-seen");var g="/activity"+(c?"/streams/":"");swarm.activity._loading=$.ajax({url:"/api/v9/activity/",data:{stream:c,max:50,after:d,type:f||null,disableHtml:!1},dataType:"json",success:function(d){a.find("tbody.activity-table tr.loading").remove();(null===d.lastSeen||d.lastSeen===a.data("last-seen"))&&a.data("end-of-data",!0);a.data("last-seen",d.lastSeen);d=d.activity;if(!swarm.localStorage.get("activity.scope")&&j&&!d.length)swarm.localStorage.set("activity.scope","all"),swarm.activity._loading=
!1,swarm.activity.load(l,!0);else{k&&a.find("thead .activity-title").removeClass("default-title").text(j?swarm.t("Followed Activity"):swarm.t("All Activity"));a.find("thead .activity-dropdown").toggleClass("dropdown",k);a.toggleClass("stream-personal",j);g="/"!==g.substr(-1)?g+"/":g;void 0===c?a.find("a.rss-link").attr("href",swarm.url(g+"rss")):a.find("a.rss-link").attr("href",swarm.url(g+"rss?stream\x3d"+c));!a.find("tbody.activity-table tr").length&&(!d.length&&a.data("end-of-data"))&&a.find("tbody.activity-table").append($('\x3ctr class\x3d"activity-info"\x3e\x3ctd\x3e\x3cdiv class\x3d"alert border-box pad3"\x3e'+
(f?swarm.te("No matching activity."):swarm.te("No activity."))+"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"));var h;$.each(d,function(d,b){b.fullname="true"===swarm.config.get("users.display_fullname");var c=b.comments[0];b.comments={count:c,label:c?swarm.tp("%s comment","%s comments",c):swarm.t("Add a comment"),title:b.comments[1]?swarm.tp("%s archived",null,b.comments[1]):"",url:b.url+(b.url&&!b.url.match("#")?"#comments":"")};b.condensed=a.is(".condensed");b.rowClass=(b.topic?"has-topic ":"")+(b.type?
"activity-type-"+b.type+" ":"")+(b.action?"activity-action-"+b.action.toLowerCase().replace(/ /g,"-"):"");c=b.target.match(/^(\w+) (\d+)(?: \(revision (\d+)\))?(?: \((.+), line (\d+)\))?$/)||[];"review"===c[1]||"change"===c[1]?(b.target=swarm.te(c[1])+" %s",b.targetReplacements=c.slice(2),b.targetReplacements[1]?b.target+=" ("+swarm.te("revision")+" %s)":b.targetReplacements.splice(1,1),b.targetReplacements[2]&&(b.target+=" (%s, "+swarm.te("line")+" %s)")):(b.target=b.target.replace("review",swarm.te("review")),
b.target=b.target.replace("Review",swarm.te("Review")),b.target=b.target.replace("change",swarm.te("change")));h=$.templates('\x3ctr id\x3d"{{\x3eid}}" class\x3d"row-main {{\x3erowClass}}"\x3e\x3ctd rowspan\x3d"2" width\x3d64\x3e{{:avatar}}\x3c/td\x3e\x3ctd class\x3d"activity-body"\x3e{{if !condensed}}\x3csmall class\x3d"pull-right"\x3e\x3cspan class\x3d"timeago muted" title\x3d"{{\x3edate}}"\x3e\x3c/span\x3e\x3c/small\x3e{{/if}}{{if user}}{{if userExists}}\x3ca alt\x3d"{{:userFullName}}" title\x3d"{{:userFullName}}" href\x3d"{{url:"/users"}}/{{url:user}}"\x3e{{/if}}\x3cstrong\x3e{{if fullname}}{{:userFullName}} {{else}}{{\x3euser}}{{/if}}\x3c/strong\x3e{{if userExists}}\x3c/a\x3e{{/if}} {{/if}}{{if behalfOf}} ({{te:"on behalf of"}} {{if behalfOfExists}}\x3ca alt\x3d"{{:behalfOfFullName}}" title\x3d"{{:behalfOfFullName}}" href\x3d"{{url:"/users"}}/{{url:behalfOf}}"\x3e{{/if}}\x3cstrong\x3e{{\x3ebehalfOf}}\x3c/strong\x3e{{if behalfOfExists}}\x3c/a\x3e{{/if}}) {{/if}}{{te:action}} {{if url}}\x3ca href\x3d"{{:url}}"\x3e{{/if}}{{te:target targetReplacements}}{{if url}}\x3c/a\x3e{{/if}}{{if preposition \x26\x26 projectList}} {{te:preposition}} {{:projectList}}{{/if}}\x3cdiv class\x3d"description force-wrap"\x3e{{:description}}\x3c/div\x3e\x3c/td\x3e\x3ctd rowspan\x3d"2" class\x3d"color-stripe"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr id\x3d"{{\x3eid}}-append" class\x3d"row-append"\x3e\x3ctd\x3e{{if condensed}}\x3csmall\x3e\x3cspan class\x3d"timeago muted" title\x3d"{{\x3edate}}"\x3e\x3c/span\x3e\x3c/small\x3e{{/if}}{{if topic}}\x3cdiv class\x3d"comment-link{{if !comments.count}} no-comments{{/if}}"\x3e\x3csmall\x3e\x3ci class\x3d"icon-comment"\x3e\x3c/i\x3e \x3ca href\x3d"{{:comments.url}}" title\x3d"{{\x3ecomments.title}}"\x3e{{\x3ecomments.label}}\x3c/a\x3e\x3c/small\x3e\x3c/div\x3e{{/if}}\x3c/td\x3e\x3c/tr\x3e\x3ctr class\x3d"row-spacing"\x3e\x3ctd colspan\x3d"3"\x3e\x3c/td\x3e\x3c/tr\x3e').render(b);
c=$(h);a.find("tbody.activity-table").append(c);c.find("div.description").expander();c.find(".timeago").formatTimestamp()});e=(void 0===e?50:e)-d.length;if(e>Math.round(25)||a.height()<$(window).height())return swarm.activity._loading=!1,swarm.activity.load(c,!1,e);setTimeout(function(){swarm.activity._loading=!1},500)}}})}}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.user={userDetails:"",toolbar:"",csrf:"",settings:{init:function(){var a=$("#settingsForm");a.hasClass("readOnly")&&(a.find(":checkbox").attr("disabled",!0),a.find(".settingsSave").attr("disabled",!0),a.find("#settingsReset").attr("disabled",!0),a.find("#settingsCancel").attr("disabled",!0),a.find("#time-format-display").attr("disabled",!0));swarm.user.settings.configureReset();$("#settingsToken").attr("value",$("body").data("csrf"));swarm.user.settings.preventButtonDoubleClick()},configureReset:function(){$("#settingsReset").click(function(){$("#settings tbody input[type\x3dcheckbox]").each(function(a,
b){b.checked=$(this).data("default")});$("#settings tbody select").each(function(a,b){var c=this.dataset["default"];$(b).find("option").each(function(b,a){c.toLowerCase()===a.id.toLowerCase()&&(a.selected=!0)})})})},preventButtonDoubleClick:function(){$("#settingsForm").submit(function(){$(this).find("button").prop("disabled",!0)})}},follow:function(a,b,c){c=$(c);swarm.form.disableButton(c);c.tooltip("destroy");var e=c.is(".following"),f=e?"unfollow":"follow";$.post("/"+f+"/"+encodeURIComponent(a)+
"/"+encodeURIComponent(b),function(a){swarm.form.enableButton(c);a.isValid&&(c.text(e?swarm.t("Follow"):swarm.t("Unfollow")),c.toggleClass("following"),c.tooltip({title:e?swarm.t("No longer following %s",[b]):swarm.t("Now following %s",[b]),trigger:"manual"}).tooltip("show"),swarm.user.updateFollowersSidebar(f),setTimeout(function(){c.tooltip("destroy")},3E3))});return!1},unfollowalldialog:function(){$("#unfollow-modal").modal("show")},unfollowall:function(a,b){b=$(b);swarm.form.disableButton(b);
b.tooltip("destroy");$.post("/api/v8/users/"+a+"/unfollowall",function(a){swarm.form.enableButton(b);a.isValid&&location.reload()});return!1},updateFollowersSidebar:function(a){var b=swarm.user.getAuthenticatedUser(),c=$(".profile-sidebar .metrics .followers .count"),e=$(".profile-sidebar .followers.profile-block"),f=e.find(".avatars");if(b){var d=f.find('img[data-user\x3d"'+b.id+'"]').closest("span");d.css("opacity","follow"===a?1:0.2);"follow"===a&&!d.length&&(d=f.find("\x3e div").last(),d=d.length&&
5>d.children().length&&d||$("\x3cdiv /\x3e").appendTo(f),$('\x3cspan class\x3d"border-box" /\x3e').html(b.avatar).appendTo(d),e.removeClass("hidden"));c.text(parseInt(c.text(),10)+("follow"===a?1:-1))}},getAuthenticatedUser:function(){return $("body").data("user")}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.project={projectVars:{},initEdit:function(a,c,b,d){$.templates({defaultReviewerButton:'\x3cdiv class\x3d"multipicker-item" data-value\x3d"{{\x3eisRequired}}" data-id\x3d"{{\x3eitemId}}"\x3e\x3cdiv class\x3d"pull-left"\x3e\x3cdiv id\x3d"{{\x3eid}}" class\x3d"btn-group"\x3e\x3cbutton type\x3d"button" class\x3d"subform-forced btn btn-mini btn-info item-require {{if isRequired !\x3d\x3d "false"}}active{{/if}}" data-toggle\x3d"{{if isGroup}}dropdown{{else}}button{{/if}}" title\x3d"{{if isRequired !\x3d\x3d "false"}}{{te:"Make Vote Optional"}}{{else}}{{te:"Make Vote Required"}}{{/if}}"  aria-label\x3d"{{if isRequired !\x3d\x3d "false"}}{{te:"Make Vote Optional"}}{{else}}{{te:"Make Vote Required"}}{{/if}}"\x3e\x3ci class\x3d"{{if isRequired !\x3d\x3d "false"}}icon-star{{else}}icon-star-empty{{/if}} icon-white{{if isRequired \x3d\x3d\x3d "1"}} requiredOne {{else isRequired}} requiredAll {{/if}}"\x3e{{if isRequired \x3d\x3d\x3d "1"}}{{:isRequired}}{{/if}}\x3c/i\x3e\x3cinput type\x3d"hidden" class\x3d"requirement preserve-value quorum" name\x3d"{{\x3einputName}}[{{\x3eitemId}}][required]" value\x3d"{{\x3eisRequired}}" /\x3e\x3c/button\x3e{{if isGroup}}\x3cul class\x3d"group-required item-require dropdown-menu"\x3e\x3cli class\x3d"optional"\x3e\x3ca href\x3d"#" data-required\x3d"false"\x3e\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e {{te:"Make Vote Optional"}}\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"one"\x3e\x3ca href\x3d"#" data-required\x3d"1"\x3e\x3ci class\x3d"icon-star"\x3e1\x3c/i\x3e {{te:"Make One Vote Required"}}\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"all"\x3e\x3ca href\x3d"#" data-required\x3d"true"\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e {{te:"Make All Votes Required"}}\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e{{/if}}\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-info button-name" disabled\x3e{{\x3evalue}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-info item-remove"title\x3d"{{te:"Remove"}}" aria-label\x3d"{{te:"Remove"}}"\x3e\x3ci class\x3d"icon-remove icon-white"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'});
$(a).hasClass("view-only")&&(swarm.project.projectVars.mode="viewonly");var e=$(a).find("#members"),g=$(a).find("#owners"),f=$(a).find("#project-reviewers");swarm.project.projectVars.enableGroups=d;e.userMultiPicker({required:!0,itemsContainer:$(a).find(".members-list"),inputName:"members",groupInputName:"subgroups",enableGroups:d,excludeProjects:[b],disabled:swarm.project.isViewOnly()});g.userMultiPicker({itemsContainer:$(a).find(".owners-list"),inputName:"owners",required:function(){return $(a).find(".checkbox-owners").prop("checked")},
disabled:swarm.project.isViewOnly()});var h=$(".project-edit form").data("project").defaults.reviewers,e=function(a,b){var c=$(b).data("project").defaults.reviewers;return c?Object.keys(c).filter(function(b){return"group"===a?-1!==b.indexOf("swarm-group-"):-1===b.indexOf("swarm-group-")}):[]};f.userMultiPicker({current:$(this),itemsContainer:$(a).find(".reviewers-list"),selected:e("other",$(".project-edit form")),selectedGroups:e("group",$(".project-edit form")),inputName:"defaults[reviewers]",groupInputName:"defaults[reviewers]",
enableGroups:d,useGroupKeys:!0,excludeProjects:!0,createItem:function(a,b){var c=-1!==a.indexOf("swarm-group-"),d=c?"swarm-group-":"",f=d+b.id;return $($.templates.defaultReviewerButton.render({value:d+a,id:f+"-project",inputName:this.options.inputName,isGroup:c,isRequired:h[f]&&h[f].required?h[f].required:"false",itemId:f}))},disabled:swarm.project.isViewOnly()});$("form").on("click",".control-group-reviewers div.type-user button.item-require",function(){var a=$(this);setTimeout(function(){var b=
a.hasClass("active");a.find("i").toggleClass("icon-star",b).toggleClass("icon-star-empty",!b);a.find("input").val(b);a.attr("data-original-title",b?swarm.t("Vote Required"):swarm.t("Vote Optional"));a.tooltip("show");setTimeout(function(){a.attr("data-original-title",b?swarm.t("Make Vote Optional"):swarm.t("Make Vote Required"))},1E3)},0)});$("form").on("click",".control-group-reviewers .group-required a",function(a){a.preventDefault();a=$(this);var b=a.closest(".btn-group"),c=a.data("required");
b.find("input.requirement").val(c);setTimeout(function(){var a=b.find("button.item-require");a.find("i").removeClass("icon-star icon-star-empty").addClass(c?"icon-star":"icon-star-empty").text(1===c?c:"");b.find("li").show();b.find("li a[data-required\x3d"+c+"]").parent().hide();b.find("ul").hide();a.attr("data-original-title",c?1===c?swarm.t("One Vote Required"):swarm.t("Vote Required"):swarm.t("Vote Optional"));a.tooltip("show");setTimeout(function(){a.attr("data-original-title",swarm.t("Change Required Votes"));
a.tooltip("hide")},1E3)},0)});$("form").on("click.reviewer",".control-group-reviewers div.type-group button.subform-forced",function(a){swarm.project.toggleDefaultMenu(a)});$(a).find(".checkbox-owners").on("click",function(){var b=$(a).find(".checkbox-owners").prop("checked");$(a).find("#owners").userMultiPicker("updateRequired");$(a).find(".owners-list input").prop("disabled",!b)});swarm.project.branch.init(a);$(a).find(".swarm-branch-group").on("click",swarm.project.branch.openNewSubForm);$(a).on("click.swarm.branch.clear",
".branches .clear-branch-btn",function(){$(this).parent().find(".subform-identity-element").val("");swarm.project.branch.closeSubForm($(this).closest(".btn-group").find(".btn-branch.dropdown-toggle"))});$(a).on("click.swarm.branch.close",".branches .close-branch-btn",function(){swarm.project.branch.closeSubForm($(this).closest(".btn-group").find(".btn-branch.dropdown-toggle"))});$(a).find(".automated-tests .help-details").popover({container:".automated-tests",trigger:"hover focus"});$(a).find(".automated-deployment .help-details").popover({container:".automated-deployment",
trigger:"hover focus"});swarm.form.checkInvalid($(a).find("form"));$(a).find("form").submit(function(b){b.preventDefault();swarm.form.post(c,$(a).find("form"),null,null,function(a){var b=$.deparam($(a).serialize());$.isArray(b.branches)&&(b.branches=b.branches.filter(function(a){return void 0!==a}));b=$.extend({owners:null},b);!b.branches&&!$(a).find(".branches").is(".readonly")&&(b.branches=null);b=$.extend({members:null},b);d&&(b=$.extend({subgroups:null},b));return b})});$(a).find(".btn-delete").on("click",
function(a){a.preventDefault();var c=$(this);setTimeout(function(){var a=swarm.tooltip.showConfirm(c,{placement:"top",content:swarm.te("Delete this project?"),buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-confirm"\x3e'+swarm.te("Delete")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e"]});a.tip().on("click",".btn-cancel",function(){a.destroy()});a.tip().on("click",".btn-confirm",function(){swarm.form.disableButton(a.tip().find(".btn-confirm"));
a.tip().find(".buttons .btn").prop("disabled",!0);$.post("/projects/delete/"+encodeURIComponent(b),function(b){if(b.isValid)window.location.href=swarm.url("/");else{a.destroy();var d=swarm.tooltip.showConfirm(c,{placement:"top",content:b.error,buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary"\x3e'+swarm.te("Ok")+"\x3c/button\x3e"]});d.tip().on("click",".btn",function(){d.destroy()})}})})},5)});$(a).find(".btn-save").on("click",function(b){if(!$("body").hasClass("admin")){var c="",d=
swarm.user.getAuthenticatedUser()?swarm.user.getAuthenticatedUser().id:null,f=$.deparam($(a).find("form").serialize()),e=$.map(f.branches||[],function(a){return a.moderators||[]}),h=$.isArray(f.owners),g=$.isArray(f.subgroups),k=-1!==$.inArray(d,f.members),p=-1!==$.inArray(d,f.owners),d=-1!==$.inArray(d,e),f="1"===f["private"],k=k||g;h&&!p&&(c="\x3cp\x3e"+swarm.te("You might not be able to edit this project later if you are not an owner.")+"\x3c/p\x3e");!h&&!k&&(c="\x3cp\x3e"+swarm.te("You might not be able to edit this project later if you are not a member.")+
"\x3c/p\x3e");f&&(!k&&!p&&!d)&&(c+="\x3cp\x3e"+swarm.te("You might not be able to access this project later. Only owners, members and branch moderators can access private projects.")+"\x3c/p\x3e");if(c){b.preventDefault();b.stopPropagation();b=$(this);var l=swarm.tooltip.showConfirm(b,{placement:"top",customClass:"project-save-tooltip",content:c,buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-confirm"\x3e'+swarm.te("Continue")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+
swarm.te("Cancel")+"\x3c/button\x3e"]}),q=b.closest(".group-buttons").find(".btn");q.prop("disabled",!0);l.tip().on("click",".btn-cancel",function(){l.destroy();q.prop("disabled",!1)});l.tip().on("click",".btn-confirm",function(){l.destroy();$(a).find("form").submit()})}}});$(document).on("click",function(b){0===$(b.target).closest(".project-save-tooltip").length&&void 0!==$(a).find(".btn-save").data("popover")&&(b.preventDefault(),$(a).find(".btn-save").data("popover").destroy(),$(a).find("form .group-buttons .btn").prop("disabled",
!1))});f=function(){var a="",a="URL"===$("select#postFormat").val()?"foo\x3dbar\x26baz\x3dbuzz":'{"foo" : "bar", "baz" : "buzz"}';$("textarea#postBody").attr("placeholder",a)};f();$("select#postFormat").on("change",f);f=function(){var a=$("input#reviewEmails").prop("checked")||$("input#changeEmails").prop("checked");$(".email-flags").find(".help-block").toggleClass("hide",a)};f();$(".email-flags").find('input[type\x3d"checkbox"]').on("change",f);$("input[type\x3dcheckbox][data-toggle\x3dcollapse]").on("click",
function(a){$(this).parent().siblings("div.body").hasClass("collapsing")&&a.preventDefault()});swarm.project.workflow.init()},toggleDefaultMenu:function(a){a=$(a.target).closest("button");var c=a.parent().find(".dropdown-menu");c&&0<c.length?c.toggle():$(a).button("toggle")},workflow:{init:function(){"true"===swarm.config.get("workflow.enabled")?($("#project-workflow-control").find("button").prop("disabled",!0),$(".branch-button").find("button").prop("disabled",!0),$.ajax({url:"/api/v9/workflows",
dataType:"json",success:function(a){swarm.project.projectVars.workflows=a.workflows;$(".swarm-branch-link").toggleClass("hidden");var c=$(".project-edit form").data("project");swarm.workflow.workflowDropdown({parent:$("#project-control-group-workflow"),prefix:"project",workflows:a.workflows,currentWorkflowId:c.workflow,localStorageKey:"swarm.project.workflow",disabled:swarm.project.isViewOnly()});var b,d=0;c.branches.forEach(function(c){b="branch-"+d;c=swarm.workflow.workflowDropdown({parent:$("#"+
b+"-control-group-workflow"),prefix:b,workflows:a.workflows,currentWorkflowId:c.workflow,localStorageKey:"swarm.branch"+d+".workflow",noneSelected:swarm.te("Inherit from project"),disabled:swarm.project.isViewOnly()});if(!swarm.project.isViewOnly())c.on("click",function(){$(this).toggleClass("open")});d++});$(".branch-button").find("button").prop("disabled",!1);$(".branch-button .dropdown-menu :input.btn-workflow").attr("disabled",swarm.project.isViewOnly());$("#project-control-group-workflow button").attr("disabled",
swarm.project.isViewOnly())}})):$(".swarm-branch-link").toggleClass("hidden")}},branch:{_branchIndex:0,init:function(a){$(a).find(".control-group.branches .existing").each(function(){swarm.project.branch.initBranch(this);$(this).find(".btn-branch.dropdown-toggle").dropdown();var a=parseInt($(this).find("input.subform-identity-element").attr("name").match(/branches\[([0-9]+)\]/)[1],10);a>=swarm.project.branch._branchIndex&&(swarm.project.branch._branchIndex=a+1)});$(a).on("click.moderator.checkbox",
".checkbox-moderators",function(){$(this).closest(".control-group-moderators").find(".collapse").collapse($(this).prop("checked")?"show":"hide")});$(a).find(".branches.readonly").find(".swarm-branch-link").hide()},initBranch:function(a){$(a).find(".btn-branch.dropdown-toggle").on("click",function(){if($(this).parent().hasClass("open"))swarm.project.branch.onCloseSubForm(this);else $(".branches .open .btn-branch.dropdown-toggle").not(this).each(function(){swarm.project.branch.onCloseSubForm(this)}),
swarm.project.branch.onOpenSubForm(this)});$("html").on("click.swarm.branchgroup.close",function(){swarm.project.branch.onCloseSubForm($(a).find(".btn-branch.dropdown-toggle"))});var c=function(){var b=$(a).closest(".branch-button"),c=b.find(".dropdown-subform");swarm.form.checkInvalid(c);b.find(".btn-branch.dropdown-toggle").toggleClass("btn-danger",c.is(".invalid"));c.find(".btn.close-branch-btn").prop("disabled",c.is(".invalid"))};$(a).find("input,textarea").on("input keyup blur",c);var b=$(a).find("input.reviewers"),
d=b.data("selected"),e=function(a,b){return b&&0<b.length?Object.keys($(b).data("selected")||{}).filter(function(b){return"group"===a?-1!==b.indexOf("swarm-group-"):-1===b.indexOf("swarm-group-")}):[]};b.userMultiPicker({itemsContainer:$(a).find(".branch-reviewers-list"),disabled:$(a).closest(".branches").is(".readonly")||swarm.project.isViewOnly(),selected:e("other",b),selectedGroups:e("group",b),enableGroups:swarm.project.projectVars.enableGroups,useGroupKeys:!0,excludeProjects:!0,createItem:function(b,
c){var e=-1!==b.indexOf("swarm-group-"),g=e?"swarm-group-":"",j=g+c.id;return $($.templates.defaultReviewerButton.render({value:g+b,id:j+"-"+$(a).attr("id"),inputName:this.options.inputName,isGroup:e,isRequired:d[j]&&d[j].required?d[j].required:"false",itemId:j}))}});var g=$(a).find("input.input-moderators");g.userMultiPicker({itemsContainer:$(a).find(".moderators-list"),disabled:$(a).closest(".branches").is(".readonly")||swarm.project.isViewOnly(),enableGroups:swarm.project.projectVars.enableGroups,
excludeProjects:!0,onUpdate:function(){c();var b=$(a).find(".checkbox-moderators:checked").length?$.map(this.getSelected(),function(a){return a.label}):[],d=b.length?swarm.tp("%s Moderator","%s Moderators",b.length):"";this.$element.closest(".branch-button").find(".moderators-info").text(d).attr({"data-original-title":b.join(", "),title:""})},required:function(){return $(a).find(".checkbox-moderators").prop("checked")}});$(a).find(".checkbox-moderators").on("click",function(){var b=$(this).prop("checked");
$(a).find(".moderators-list input").prop("disabled",!b);g.userMultiPicker("update");c()});c();$(a).closest(".branches").is(".readonly")&&($(a).find("input,textarea,.item-remove,.clear-branch-btn,.btn-mini").prop("disabled",!0),$(a).find(".close-branch-btn").text(swarm.te(" Close ")));$(a).on("click.reviewer","button.subform-forced",function(a){swarm.project.toggleDefaultMenu(a)});$(a).on("click.reviewer",".control-group-reviewers div.type-group button.subform-forced",function(a){swarm.project.toggleDefaultMenu(a)})},
onOpenSubForm:function(a){setTimeout(function(){$(a).parent().find(".subform-identity-element").focus()},0)},onCloseSubForm:function(a){var c=$(a).parent().find(".subform-identity-element").val(),b=$(a).closest("form");c?$(a).html('\x3cspan class\x3d"branch-label"\x3e\x3c/span\x3e\x3cspan class\x3d"caret"\x3e\x3c/span\x3e').find("span.branch-label").text(c):$(a).closest(".branch-button").remove();swarm.form.checkInvalid(b)},closeSubForm:function(a){swarm.project.branch.onCloseSubForm($(a).dropdown("toggle"))},
openNewSubForm:function(a){a.preventDefault();a.stopPropagation();0<$(".popover.popover-confirm").length&&$(".popover-confirm .btn-cancel").click();$(".branches .open .btn-branch.dropdown-toggle").each(function(){swarm.project.branch.closeSubForm(this)});a=swarm.project.branch._branchIndex;var c=$(".controls .branch-template").children().clone(),b=c.find(".subform-identity-element"),d=c.find(".branch-paths"),e=c.find("input.reviewers"),g=c.find("input.input-moderators"),f=c.find("#branch-new-workflow"),
h=c.find("#branch-new-workflow-control"),m=c.find("input.minimum-up-votes"),n=c.find("input.retain-default-reviewers");b.attr("name","branches["+a+"][name]");d.attr("name","branches["+a+"][paths]");f.attr("name","branches["+a+"][workflow]");m.attr("name","branches["+a+"][minimumUpVotes]");n.attr("name","branches["+a+"][retainDefaultReviewers]");b.attr("id","branch-name-"+a);d.attr("id","branch-paths-"+a);f.attr("id","branch-"+a+"-workflow");h.attr("id","branch-"+a+"-workflow-control");m.attr("id",
"branch-"+a+"-minimum-up-votes");n.attr("id","branch-"+a+"-retain-default-reviewers");d.attr("required",!0);b.attr("required",!0);b.siblings("label").attr("for","branch-name-"+a);d.siblings("label").attr("for","branch-paths-"+a);m.siblings("label").attr("for","branch-"+a+"-minimum-up-votes");n.siblings("label").attr("for","branch-"+a+"-retain-default-reviewers");e.attr("id","branches-"+a+"-defaults-reviewers");e.data("input-name","branches["+a+"][defaults][reviewers]");e.parents(".control-group-reviewers").find("label").attr("for",
"branches-"+a+"-defaults-reviewers");g.attr("data-input-name","branches["+a+"][moderators]");swarm.project.branch._branchIndex++;c.insertBefore($(this).parent());c.attr("id","branch-"+a);swarm.project.branch.initBranch(c);c.find(".btn-branch.dropdown-toggle").dropdown("toggle");swarm.project.branch.onOpenSubForm(c.find(".btn-branch.dropdown-toggle"));c="branch-"+a;"true"===swarm.config.get("workflow.enabled")&&(a=swarm.workflow.workflowDropdown({parent:$("div#branch-new-control-group-workflow"),prefix:c,
workflows:swarm.project.projectVars.workflows,currentWorkflowId:null,localStorageKey:"swarm.branch"+a+".workflow",noneSelected:swarm.te("Inherit from project"),disabled:swarm.project.isViewOnly()||!1}),a.on("click",function(){$(this).toggleClass("open")}),a.find(".clear").removeAttr("style"))}},isViewOnly:function(){return"viewonly"===swarm.project.projectVars.mode}};
swarm.projects={_loading:!1,init:function(){var a=$(".projects .toolbar .search input[name\x3dkeywords]"),c=function(){var b=a.val().trim(),c=b.length?0:$(".projects").data("maximum");$(".projects").data("keywords")!==b&&($(".projects").data("keywords",a.val()),b.length&&(b="?keywords\x3d"+encodeURIComponent(a.val()),b!==location.search&&swarm.history.pushState(null,null,b)),swarm.projects.load(!0,c))};$(".projects .toolbar .search .btn-search").on("click",c);a.on("keypress",function(a){var d=a.keyCode||
a.which;"keypress"===a.type&&13!==d||c()});$(document).on("swarm-login",function(){swarm.projects.loadAll(!0)});c()},sortByProjectName:function(a,c){return swarm.projects.sortByString(a.name,c.name)},sortByNameIdArray:function(a,c){return swarm.projects.sortByString(a[0],c[0])},sortByString:function(a,c){var b=a.toUpperCase(),d=c.toUpperCase();return b<d?-1:b>d?1:0},loadAll:function(a){var c=[],b=[];void 0===a&&(a=!1);if(swarm.projects._loading){if(!a)return;swarm.projects._loading.abort();swarm.projects._loading=
!1}a&&$(".projects .project-cells").empty();$.templates({loading:'\x3cdiv class\x3d"project-cells loading"\x3e\x3cspan class\x3d"loading animate muted"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/div\x3e"});$("#my-projects").append($.templates.loading.render());$("#all-projects").append($.templates.loading.render());swarm.projects._loading=$.ajax({url:"/projects?format\x3djson",dataType:"json",data:{keywords:$(".projects").data("keywords"),fields:"id name members owners description private".split(" ")},
success:function(a){c=a.projects.sort(swarm.projects.sortByProjectName);$.each(c,function(){(!0===this.isMember||!0===this.isOwner||!0===this.isModerator)&&b.push(this)});$("#my-projects .loading").remove();$("#all-projects .loading").remove();swarm.projects.populate($("#my-projects"),b);swarm.projects.populate($("#all-projects"),c);setTimeout(function(){swarm.projects._loading=!1},500)}})},load:function(a,c,b){var d=[],e=[];b="/projects?format\x3djson"+(c?"\x26maximum\x3d"+c:"")+(b?"\x26after\x3d"+
b:"");if(a){var g=function(){var a=$(".projects .nav").width(),b=$(".projects .loading .muted").width(),c=$(".projects .loading .little-bee").width();$(".projects .loading .little-bee").width(14>c?14:c+0.005*(a-b-c));$(".projects .loading:visible").length&&setTimeout(g,2E3)};swarm.projects._loading&&(swarm.projects._loading.abort(),swarm.projects._loading=!1);$(".projects .project-cells").empty();$(".projects .loading .little-bee").width(0);g();$(".loading").toggleClass("hidden",!1)}swarm.projects._loading=
$.ajax({url:b,dataType:"json",data:{keywords:$(".projects").data("keywords"),fields:"id name members owners description private".split(" ")},success:function(a){d=a.projects.sort(swarm.projects.sortByProjectName);$.each(d,function(){(!0===this.isMember||!0===this.isOwner||!0===this.isModerator)&&e.push(this)});swarm.projects.populateIncrementally($("#my-projects"),e);swarm.projects.populateIncrementally($("#all-projects"),d);c?swarm.projects.load(!1,0):($(".loading").toggleClass("hidden",!0),$(".tab-content .empty").toggleClass("hidden",
!1));setTimeout(function(){swarm.projects._loading=!1},500)},error:function(){$(".loading").toggleClass("hidden",!0)}})},populateIncrementally:function(a,c){var b=a.find(".project-cells");b.length||(b=$('\x3cdiv class\x3d"project-cells"\x3e'),a.prepend(b));b.empty();$.templates({projectDisplay:'\x3cdiv class\x3d"project-cell pad1"\x3e\x3cdiv class\x3d"content pad2"\x3e\x3cspan class\x3d"permission"\x3e{{if project.isPrivate}}\x3ci class\x3d"icon-eye-close private-project-icon" title\x3d"{{\x3eprivateTitle}}"\x3e\x3c/i\x3e {{/if}}{{if project.isOwner}}\x3ci class\x3d"swarm-icon icon-project-owner" title\x3d"{{\x3eownerTitle}}"\x3e\x3c/i\x3e {{/if}}\x3c/span\x3e\x3cspan class\x3d"link"\x3e\x3ca href\x3d"{{url:"/projects"}}/{{urlc:project.id}}" class\x3d"force-wrap name"\x3e{{\x3eproject.name}}\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"users badge count-{{\x3eproject.users}} data-customclass\x3d"project-users-badge" title\x3d"{{\x3emembersTitle}}"\x3e{{\x3eproject.users}}\x3c/span\x3e\x3cp class\x3d"force-wrap description muted"\x3e\x3csmall\x3e{{:project.description}}\x3c/small\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e'});
var d=swarm.te("Private Project"),e=swarm.te("You are an owner");$.each(c,function(){var a=swarm.tpe("%d Member","%d Members",this.members);this.users=this.members;b.append($.templates.projectDisplay.render({project:this,membersTitle:a,privateTitle:d,ownerTitle:e}));100<=this.description.length&&b.find(".project-cell .description").last().expander({slicePoint:100})});0===b.find(".project-cell").length?"all-projects"===a.attr("id")||$("body").hasClass("authenticated")?b.html('\x3cdiv class\x3d"alert border-box pad3 empty hidden"\x3e'+
swarm.te("No projects.")+"\x3c/div\x3e"):(a.find(".loading").toggleClass("hidden",!0),b.html('\x3cdiv class\x3d"muted empty"\x3e'+swarm.te("My projects will only be populated once you have logged in.")+'\x3ca href\x3d"/login/" onclick\x3d"swarm.user.login(); return false;"\x3e '+swarm.te("Log in")+"\x3c/a\x3e "+swarm.te("now.")+"\x3c/div\x3e")):b.find(".empty").remove()},populate:function(a,c){var b=$('\x3cdiv class\x3d"project-cells"\x3e\x3c/div\x3e');$.templates({projectDisplay:'\x3cdiv class\x3d"project-cell pad1"\x3e\x3cdiv class\x3d"content pad2"\x3e\x3cspan class\x3d"permission"\x3e{{if project.isPrivate}}\x3ci class\x3d"icon-eye-close private-project-icon" title\x3d"{{\x3eprivateTitle}}"\x3e\x3c/i\x3e {{/if}}{{if project.isOwner}}\x3ci class\x3d"swarm-icon icon-project-owner" title\x3d"{{\x3eownerTitle}}"\x3e\x3c/i\x3e {{/if}}\x3c/span\x3e\x3cspan class\x3d"link"\x3e\x3ca href\x3d"{{url:"/projects"}}/{{urlc:project.id}}" class\x3d"force-wrap name"\x3e{{\x3eproject.name}}\x3c/a\x3e\x3c/span\x3e\x3cspan class\x3d"users badge count-{{\x3eproject.users}} data-customclass\x3d"project-users-badge" title\x3d"{{\x3emembersTitle}}"\x3e{{\x3eproject.users}}\x3c/span\x3e\x3cp class\x3d"force-wrap description muted"\x3e\x3csmall\x3e{{:project.description}}\x3c/small\x3e\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e'});
var d=swarm.te("Private Project"),e=swarm.te("You are an owner");$.each(c,function(){var a=swarm.tpe("%d Member","%d Members",this.members);this.users=this.members;b.append($.templates.projectDisplay.render({project:this,membersTitle:a,privateTitle:d,ownerTitle:e}));100<=this.description.length&&b.find(".project-cell .description").last().expander({slicePoint:100})});a.append(b);0===b.find(".project-cell").length&&("all-projects"===a.attr("id")||$("body").hasClass("authenticated")?b.append('\x3cdiv class\x3d"alert border-box pad3"\x3e'+
swarm.te("No projects.")+"\x3c/div\x3e"):b.append('\x3cdiv class\x3d"muted"\x3e'+swarm.te("My projects will only be populated once you have logged in.")+'\x3ca href\x3d"/login/" onclick\x3d"swarm.user.login(); return false;"\x3e '+swarm.te("Log in")+"\x3c/a\x3e "+swarm.te("now.")+"\x3c/div\x3e"))},update:function(a,c){var b=$("body").is(".authenticated"),d=a.find("tbody tr.is-member,tbody tr.is-owner"),e="user"===c;c||(c=swarm.localStorage.get("projects.scope")||"user",e=d.length?b&&"user"===c:!1);
b="";a.find("thead .projects-dropdown").is(".dropdown")&&(b=e?"My ":"All ");a.find("thead .projects-title").text(swarm.t(b+"Projects"));b=a.find("tbody tr").hide();d=e?d:b;d.show();a.find("tbody tr.projects-info").remove();d.length||a.find("tbody").append($('\x3ctr class\x3d"projects-info"\x3e\x3ctd\x3e\x3cdiv class\x3d"alert border-box pad3"\x3e'+swarm.te("No projects.")+"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"));b.removeClass("first-visible last-visible");d.first().addClass("first-visible");d.last().addClass("last-visible")}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.groups={_loading:!1,init:function(){var b=$(".groups-toolbar input[name\x3dkeywords]");$("table.groups").data("keywords",b.val());swarm.groups.load();var a=function(){$("table.groups").data("keywords")!==b.val()&&(swarm.groups._loading&&(swarm.groups._loading.abort(),swarm.groups._loading=!1),$("table.groups").data("keywords",b.val()),swarm.groups.load(!0))},d=function(){a();var c="?keywords\x3d"+encodeURIComponent(b.val());c!==location.search&&swarm.history.pushState(null,null,c)};$(".groups-toolbar .btn-search").on("click",
d);b.on("keypress",function(a){var b=a.keyCode||a.which;"keypress"===a.type&&13!==b||d()});$(document).on("swarm-login",function(){location.reload()});$(window).scroll(function(){$.isScrolledToBottom()&&swarm.groups.load()});swarm.history.onPopState(function(){var c=$.deparam(location.search.replace(/^\?/,""),!1,!0);b.val(c.q||"");a()})},load:function(b){if(swarm.groups._loading){if(!b)return;swarm.groups._loading.abort();swarm.groups._loading=!1}var a=$("table.groups");a.length&&(b&&(a.data("last-seen",
null),a.data("end-of-data",null),a.find("tbody").empty()),a.data("end-of-data")||(a.find("tbody").append('\x3ctr class\x3d"loading"\x3e\x3ctd colspan\x3d"5"\x3e\x3cspan class\x3d"loading animate muted"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e"),swarm.groups._loading=$.ajax({url:location.pathname,skipBaseUrl:!0,data:{format:"json",max:50,after:a.data("last-seen"),keywords:a.data("keywords"),fields:"Group name ownerAvatars memberCount description isMember isInGroup emailFlags".split(" "),
sort:"-isInGroup,-isEmailEnabled,name",excludeProjects:!0},dataType:"json",success:function(b){a.find("tbody tr.loading").remove();var c=b.lastSeen;(null===c||c===a.data("last-seen"))&&a.data("end-of-data",!0);a.data("last-seen",c);$.each(b.groups,function(b,c){var d=3,f="",e=[],h=swarm.user.getAuthenticatedUser();h&&c.ownerAvatars.sort(function(b,a){var c=$(b).find("img").data("user"),e=$(a).find("img").data("user");return c===h.id?-1:e===h.id?1:0});$.each(c.ownerAvatars||[],function(b,a){0<d?(d--,
f+=a):e.push($(a).attr("title")||$(a).find("img").data("user"))});e.length&&(f+='\x3cspan class\x3d"more-owners" title\x3d"'+e.join(",")+'"\x3e+'+e.length+"\x3c/span\x3e");c.ownerAvatars=f;var g=[];c.emailFlags.reviews&&g.push(swarm.te("Reviews"));c.emailFlags.commits&&g.push(swarm.te("Commits"));c.notifications=g.join(", ");g=$.templates('\x3ctr data-id\x3d"{{\x3eGroup}}" class\x3d"{{if isInGroup}}is-in-group{{/if}}{{if isMember}} is-member{{/if}}"\x3e \x3ctd class\x3d"name"\x3e\x3ca class\x3d"force-wrap" href\x3d"{{url:"/groups"}}/{{url:Group}}"\x3e{{\x3ename}}\x3c/a\x3e  {{if name !\x3d Group}}\x3cp class\x3d"muted force-wrap"\x3e{{:Group}}\x3c/p\x3e{{/if}}\x3c/td\x3e \x3ctd class\x3d"description"\x3e{{:description}}\x3c/td\x3e \x3ctd class\x3d"owners"\x3e{{:ownerAvatars}}\x3c/td\x3e \x3ctd class\x3d"members"\x3e  \x3cspan class\x3d"badge" title\x3d"{{if isMember}}'+
swarm.te("You are a member")+"{{else isMember !\x3d\x3d null}}"+swarm.te("You are not a member")+'{{/if}}"\x3e   {{\x3ememberCount}}  \x3c/span\x3e \x3c/td\x3e\x3c/tr\x3e').render(c);$(g).appendTo(a.find("tbody"))});!a.find("tbody tr").length&&(!b.length&&a.data("end-of-data"))&&$('\x3ctr class\x3d"groups-info"\x3e \x3ctd colspan\x3d"'+a.find("thead th").length+'"\x3e  \x3cdiv class\x3d"alert border-box pad3"\x3e'+swarm.te("No groups.")+"\x3c/div\x3e \x3c/td\x3e\x3c/tr\x3e").appendTo(a.find("tbody"));
a.find(".description").expander({slicePoint:90});b=a.find(".is-in-group").last();b.next().length&&b.addClass("last-is-in-group");setTimeout(function(){swarm.groups._loading=!1},500)}})))}};
swarm.group={initEdit:function(b,a,d){var c=$(b).find("#members"),l=$(b).find("#owners");c.userMultiPicker({itemsContainer:$(b).find(".members-list"),inputName:"Users",groupInputName:"Subgroups",enableGroups:!0,excludeGroups:[d]});l.userMultiPicker({itemsContainer:$(b).find(".owners-list"),inputName:"Owners"});swarm.form.checkInvalid($(b).find("form"));$(b).find("form").submit(function(c){c.preventDefault();swarm.form.post(a,$(b).find("form"),null,null,function(a){a=$.deparam($(a).serialize());a=
$.extend({Owners:null,Users:null,Subgroups:null},a);0<$("#notificationForm").length&&(a=$.extend({useMailingList:!1},a));return a})});var j=function(a){var b=$("#emailValidIndicator");$.post("/validate/emailAddress",{emailAddress:a.val()}).done(function(a){b.removeClass("valid icon-ok icon-remove").addClass(a.valid?"valid icon-ok":"icon-remove").show();swarm.notifications.group.configureSettingsFields()})};$("input#emailAddress").on("input keyup blur",function(){clearTimeout(swarm.group.emailAddressTimeout);
var a=$(this);swarm.group.emailAddressTimeout=setTimeout(function(){$("#hiddenEmailAddress").val(a.val());$("#useMailingList").prop("checked")&&j(a)},100)});var k=function(){var a=$("#emailValidIndicator"),b=$("#emailAddress");a.hide();0===$("#useMailingList:checked").length?(b.prop("disabled",!0),$("#groupNotificationHelp .help-block").show()):($("#groupNotificationHelp .help-block").hide(),b.prop("disabled",!1),j(b))};k();$("#useMailingList").on("click",function(){k();swarm.notifications.group.configureSettingsFields()});
$(b).find(".btn-delete").on("click",function(a){a.preventDefault();var b=$(this),c=swarm.tooltip.showConfirm(b,{placement:"top",content:swarm.te("Delete this group?"),buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-confirm"\x3e'+swarm.te("Delete")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e"]});c.tip().on("click",".btn-cancel",function(){c.destroy()});c.tip().on("click",".btn-confirm",function(){swarm.form.disableButton(c.tip().find(".btn-confirm"));
c.tip().find(".buttons .btn").prop("disabled",!0);$.post("/groups/delete/"+encodeURIComponent(d),function(a){if(a.isValid)window.location.href=swarm.url("/");else{c.destroy();var d=swarm.tooltip.showConfirm(b,{placement:"top",content:a.error,buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary"\x3e'+swarm.te("Ok")+"\x3c/button\x3e"]});d.tip().on("click",".btn",function(){d.destroy()})}})})});c=function(){var a=$("input#emailReviews").prop("checked")||$("input#emailCommits").prop("checked");
$(".email-flags").find("#author-help").toggleClass("hide",a)};c();$(".email-flags").find('input[type\x3d"checkbox"]').on("change",c)}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.browse={_pathCache:[{},{}],_pushingState:!1,_showDeleted:!1,_aceDir:"/ace-min",editor:null,init:function(){$("body").data("browse-initialized")||(swarm.browse.defineTemplates({}),$("body").data("browse-initialized",!0),$(".timeago").formatTimestamp(),$(".prettyprint").length&&swarm.browse.prettify(),$(".breadcrumb .active").append($(".browse-title .rev")),swarm.browse.initHistory(),$(".file-history .description").expander({slicePoint:90}),swarm.browse.handleTabChange(),swarm.browse.handleLineHash(),
$(window).one("load",function(){setTimeout(function(){swarm.browse.handleLineHash()},0)}),swarm.history.supported&&($("body").on("click.browse-files",".browse-files .dir a, .browse-files .file a, .breadcrumb li a",function(a){!a.ctrlKey&&!a.metaKey&&(swarm.browse.openPath(this.href,!1,$(this).closest(".file").length),a.preventDefault())}),$(window).on("beforeSetState",function(a,b){$.extend(b,{browseUrl:$(".breadcrumb").data("url"),isFile:$(".browse-title .rev").length,autoSwitchTab:!1})}),swarm.history.doStateUpdate(),
swarm.history.onPopState(function(a){a=a.originalEvent.state||{};if(!a.browseUrl)return location.reload();swarm.browse.openPath(a.browseUrl,!0,a.isFile)})),$(document).on("show.browse-content",'.browse-content .nav-tabs a[data-toggle\x3d"tab"]',swarm.browse.handleTabChange),swarm.browse._aceDir=$("body").data("config").development?"/ace":"/ace-min")},pathLoaded:function(a){swarm.browse.handleLineHash();swarm.browse.initHistory();$(".deleted-files button").toggleClass("active",swarm.browse._showDeleted);
a?swarm.history.switchTab(window.history.state.tab):swarm.history.doStateUpdate();swarm.browse.handleTabChange()},openEditor:function(a,b){var c=$("#file-edit-content").empty().removeClass("confirming").addClass("processing");$.ajax({url:"/api/v10/files/"+a+(b?"?fileRevision\x3d"+encodeURIComponent(b):""),method:"get",errorHandled:!0}).done(function(b){var f=b.data;swarm.browse.getFileContent(f.contentLink,f.fileRevision,f.contentType).then(function(b){c.html($.templates(swarm.browse.editorFormTemplate).render({aceDir:swarm.browse._aceDir,
path:a,metadata:f,content:b},{formatPath:function(a,b){return"\x3cspan\x3e"+a.replace(/^\/*/,"").split("/").join("\x3c/span\x3e/\x3cspan\x3e")+(b||"")+"\x3c/span\x3e"}})).removeClass("processing")},function(b){c.html($.templates(swarm.browse.editorFormTemplate).render({aceDir:swarm.browse._aceDir,path:a,failed:!0,messages:[{type:"error",text:b.status+":"+b.statusText+", "+f.fileName}]})).removeClass("processing")})}).fail(function(b){c.html($.templates(swarm.browse.editorFormTemplate).render({aceDir:swarm.browse._aceDir,
path:a,failed:!0,messages:b.responseJSON.messages?b.responseJSON.messages.map(function(a){return{type:"error",text:a.text}}):[{type:"error",text:b.status+":"+b.statusText}]})).removeClass("processing")})},getFileContent:function(a,b,c){return $.ajax({url:a+(b?"?v\x3d"+encodeURIComponent(b):""),headers:{Accept:c},dataType:"text",method:"get",errorHandled:!0})},shelveFile:function(){swarm.browse.putFileContent("shelve")},submitFile:function(){swarm.browse.putFileContent("submit")},putFileContent:function(a){var b,
c;$("#file-edit-content .messages").empty().hide();$("#file-edit-content .modal-body").removeClass("with-messages");b=null;var d=[];c=$("#file-edit-content .modal-body textarea.changelist-description");var f=c.attr("name"),e=c.val();if(!e||0===e.trim().length)b="description"===f?swarm.t("You must include a changelist description."):swarm.t("You must provide a review comment.");d[f]=c.val();c=$("#file-edit-content input.base64Path").val();a=JSON.stringify($.extend({action:a,content:swarm.browse.editor.getValue()},
d));b?($("#file-edit-content .modal-body").addClass("with-messages"),$("#file-edit-content .messages").append($("\x3cp\x3e",{"class":"error",text:b})).show()):($("#file-edit-content").addClass("processing").find("button, input, textarea").prop("disabled",!0),swarm.browse.editor.setReadOnly(!0),swarm.browse.editor.setStyle("readonly"),$.ajax({url:"/api/v10/files/"+c,method:"put",errorHandled:!0,headers:{"X-CSRF-TOKEN":encodeURIComponent($("body").data("csrf"))},contentType:"application/json",data:a}).done(function(){$("#file-edit-content").removeClass("processing").modal("hide").html("").hide();
location.reload()}).fail(function(a){$("#file-edit-content .modal-body").addClass("with-messages");var b=[];$.each(a.responseJSON.messages||[{type:"error",text:a.status+": "+a.statusText}],function(a,c){b.push($("\x3cp\x3e",{"class":"error",text:c.text||a+": "+Object.values(c).join(", ")}))});$("#file-edit-content .modal-body \x3e .messages").append(b).show();$("#file-edit-content").removeClass("processing").find("button, input, textarea").prop("disabled",!1);swarm.browse.editor.setReadOnly(!1);swarm.browse.editor.unsetStyle("readonly")}))},
openPath:function(a,b,c){$("#file-edit-content").modal("hide").html("").hide();a=a.replace(/\/$/,"").replace(/\#.*$/,"");var d=$(".breadcrumb").data("path"),f=d.match(/\//g).length,e=a.substring(a.indexOf("/files")),g=0>e.match(/\//g).length-f?"prev":"next",h="next"===g?"left":"right";if(d===e)return b&&swarm.history.switchTab(window.history.state.tab);b||swarm.history.pushState({isFile:c},null,a);swarm.browse.getCached(d)||swarm.browse.setCached(d);var d=0<e.lastIndexOf("/")?e.substr(e.lastIndexOf("/")+
1):"//",j=$("\x3cdiv /\x3e",{"class":"item "+g}).appendTo(".browse-files-carousel");c=swarm.browse.getLoadingPane(e,c);$(".browse-title").text(d);j.append(c);c=function(){$(".browse-files-carousel .item.active").remove();j.removeClass(g+" "+h).addClass("active");$(".browse-files-carousel").height("");$("body").css("overflowY","");$(".browse-files-carousel").css("overflow","");j.find(".loading").length||swarm.browse.pathLoaded(b)};$.support.transition&&(!b||!swarm.has.historyAnimation())?($(".browse-files-carousel").css("overflow",
"hidden"),$("body").css("overflowY","hidden"),$(".browse-files-carousel").height($(window).height()),$(".browse-files-carousel .item.active").add(j).addClass(h),j.one($.support.transition.end,c)):c();(e=swarm.browse.getCached(e))?swarm.browse.handlePathResponse(e.data,j,b,e.inputs,!0):$.ajax({url:a,skipBaseUrl:!0,data:{format:"partial",showDeleted:swarm.browse._showDeleted||void 0},success:function(a){swarm.browse.handlePathResponse(a,j,b)},error:function(b){403===b.status&&(this.errorHandled=!0,
j.html($('\x3cdiv class\x3d"browse-content"\x3e \x3cdiv class\x3d"alert"\x3e'+swarm.te("You don't have permission to view this file.")+"\x3c/div\x3e\x3c/div\x3e")),j.is(".active")&&swarm.browse.pathLoaded(),$(".breadcrumb").data("path",a),$("head title").html($("head title").html().split("-").shift()+" - "+swarm.te("Not Allowed")),swarm.browse.handleReactBreadcrumbTrail(a.replace(/.*\/([^\/]*)*/,"/$1")))}})},handleReactBreadcrumbTrail:function(a){var b=null;"function"!==typeof Event?(b=document.createEvent("CustomEvent"),
b.initCustomEvent("change-breadcrumb",!1,!1,"/"===a?"":a)):b=new CustomEvent("change-breadcrumb",{detail:"/"===a?"":a});a=document.getElementsByClassName("breadcrumb-trail");var c;for(c=0;c<a.length;c++)a[c].dispatchEvent(b)},handlePathResponse:function(a,b,c,d,f){if(null!==b[0].parentNode){var e=$("\x3cdiv /\x3e").append($.parseHTML(a,document,!0));a=e.find("title");var g=e.find(".browse-title"),h=e.find(".breadcrumb"),e=e.find(".browse-content");b.html(e);$.each(d||[],function(){b.find("input[name\x3d"+
this.name+"]").val(this.value)});$(".browse-title").replaceWith(g);h.find(".rev").remove();$(".breadcrumb").replaceWith(h);swarm.browse.handleReactBreadcrumbTrail(h.text().replace(/.*\/([^\/]*)*/,"/$1"));$(".breadcrumb .active").append($(".browse-title .rev"));d="";g=$("head title");1===a.html().split(" - ").length&&(d=g.html().split("-").shift()+" - ");g.html(d+a.html());f||(swarm.browse.prettify(),$(".file-history .description").expander({slicePoint:90}));$(".timeago").formatTimestamp();b.is(".active")&&
swarm.browse.pathLoaded(c)}},getCached:function(a){var b=swarm.browse._pathCache[swarm.browse._showDeleted?1:0],c=(new Date).getTime()-6E5;return b.hasOwnProperty(a)&&b[a].time>c&&b[a]},setCached:function(a,b){b=void 0!==b?b:swarm.browse._showDeleted;swarm.browse._pathCache[b?1:0][a]={time:(new Date).getTime(),data:$("title")[0].outerHTML+$("body").html(),inputs:$("input").serializeArray()}},initHistory:function(){var a=$(".breadcrumb").data("path"),b=$(".browse-content .user-filter input"),c=$(".browse-content .range-filter input"),
d=$("#commits"),f=swarm.url("/files");0===a.indexOf(f)&&(a=a.slice(f.length));swarm.changes.init(a,d,{user:b,range:c});b.add(c).off("input.history-filters keyup.history-filters blur.history-filters").on("input.history-filters keyup.history-filters blur.history-filters",function(){clearTimeout(swarm.changes.filterTimeout);swarm.changes.filterTimeout=setTimeout(function(){swarm.changes.load(a,d,{user:b.val(),reset:!0,range:c.val()})},500)});c.off("click.range-filter").on("click.range-filter",function(a){a.stopPropagation();
c.closest(".range-filter").find(".popover").length||c.data("popover").show()});$(document).off("click.range-filter").on("click.range-filter",function(a){c.length&&1===a.which&&c.closest(".range-filter").find(".popover").length&&c.popover("hide")});$(document).off("click.range-filter-popover").on("click.range-filter-popover",".range-filter .popover",function(a){a.stopPropagation()});c.length&&c.popover({container:".range-filter",trigger:"manual"})},toggleAnnotations:function(a){a=$(a);var b=a.is(".active");
a.toggleClass("active");$(".view-text ol").toggleClass("annotated");b?$(".view-text ol li .annotation").hide():$(".view-text .annotation").length?$(".view-text ol li .annotation").show():($(".view-text ol li").each(function(){$(this).prepend('\x3cspan class\x3d"annotation"\x3e\x26nbsp;\x3c/span\x3e')}),$.ajax({url:window.location,data:{annotate:!0},dataType:"json",success:function(a){var b=0,f=null,e=a.annotate;if(0!==e.length){var g=$.templates('\x3ca href\x3d"'+$.views.converters.url("/changes/")+
'{{:id}}"\x3e\x3cspan class\x3d"text"\x3e{{\x3echange.user}}\x3c/span\x3e\x3c/a\x3e'),h=$.templates('\x3cp class\x3d"monospace"\x3e{{:change.desc}}\x3c/p\x3e\x3cspan class\x3d"timeago muted" title\x3d"{{\x3echange.time}}"\x3e\x3c/span\x3e');$(".view-text").on("mouseenter",".annotation a",function(){var b=$(this),d=b.attr("href").match(/changes\/([0-9]+)/)[1],f=a.changes[d];b.popover({title:swarm.te("Change")+" "+d,animation:!1,trigger:"hover",html:!0,content:$(h.render({change:f}))}).popover("show");
b.data("popover").tip().find("span.timeago").formatTimestamp()});$(".view-text ol li .annotation").each(function(){var h=$(this),k=e[b].lower,l=a.changes[k],m=k===f;h.html(g.render({id:encodeURIComponent(k),change:l}));h.addClass(m?"repeat":"");f=k;b++})}}}))},getShortLink:function(a){a=$(a);a.toggleClass("active");a.is(".active")?(a.tooltip("disable"),a.tooltip("hide")):a.tooltip("enable");if(!a.data("popover")){var b=window.location.pathname,c=swarm.url("/");0===b.indexOf(c)&&(b=b.slice(c.length-
1));$.post("/l",{uri:b+window.location.search},function(b){var c=swarm.te("Press CTRL-C to copy");-1!==navigator.userAgent.indexOf("Mobile")?c=swarm.te("Long-press to copy"):-1!==navigator.userAgent.indexOf("Mac")&&(c=swarm.translator.jed.sprintf(swarm.te("Press %s-C to copy"),["\x26#8984;"]));b=$.templates('\x3cdiv class\x3d"short-link"\x3e\x3cinput class\x3d"center" type\x3d"text" value\x3d"{{\x3euri}}" size\x3d"{{\x3esize}}" readonly\x3e\x3cbr\x3e\x3cspan class\x3d"muted"\x3e\x3csmall\x3e{{:hint}}\x3c/small\x3e\x3c/span\x3e\x3c/div\x3e').render({uri:b.uri,
hint:c,size:b.uri.length});a.popover({html:!0,content:b,placement:"top",container:"body",customClass:"short-link-popover"});var e=a.data("popover").tip();a.popover().on("shown",function(){e.find("input").select();e.find("input").on("click",function(){$(this).select()})});var g=function(){a.removeClass("active").popover("hide");var b=$(".short-link-popover");0<b.length&&b.remove()};swarm.history.onPopState(g);$(window).on("beforeSetState",g);$(document).on("show.swarm.tab",'[data-toggle\x3d"tab"]',
g);$(document).on("click",function(b){!e.is(b.target)&&(0===e.has(b.target).length&&!a.is(b.target)&&0===a.has(b.target).length)&&g()});a.popover("show")},"json")}},getArchive:function(a,b){a=$(a);a.toggleClass("active");a.is(".active")?(a.data("popover")||swarm.browse.initArchivePopover(a,b),a.popover("show"),$.ajax({url:a.attr("href"),skipBaseUrl:!0,data:{background:!0,changeId:b,format:"json"},success:function(b){setTimeout(swarm.browse.pollForArchive(b.digest,a),2E3)},error:function(b,d,f){swarm.browse.updateArchiveStatus(a,
{error:f});this.errorHandled=!0}})):swarm.browse.cancelArchiveDownload(a)},initArchivePopover:function(a,b){a.popover({trigger:"manual",container:b?"body":".browse-content",html:!0,placement:"top",content:'\x3cdiv class\x3d"pad1 padw0 content archive-status"\x3e\x3cdiv class\x3d"close"\x3e\x26times;\x3c/div\x3e\x3cdiv class\x3d"progress active"\x3e\x3cdiv class\x3d"bar underlay"\x3e\x3cspan class\x3d"padw2"\x3e'+swarm.te("Initializing...")+'\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"bar"\x3e\x3cspan class\x3d"padw2"\x3e'+
swarm.te("Initializing...")+"\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"});var c=function(){swarm.browse.cancelArchiveDownload(a)};$(document).on("click",function(b){(!a.data("popover").tip().is(b.target)&&0===a.data("popover").tip().has(b.target).length&&!a.is(b.target)&&0===a.has(b.target).length||$(b.target).is(".archive-status .close"))&&c()});swarm.history.onPopState(c);$(window).on("beforeSetState",c);$(document).on("show.swarm.tab",'[data-toggle\x3d"tab"]',c)},updateArchiveStatus:function(a,
b){var c=a.data("popover")?a.data("popover").tip():null;if(c){var d,f,e;!b.success&&!b.error?(d=parseInt(b.progress,10)||0,f="compress"===b.phase?swarm.t("Compressing..."):swarm.t("Syncing...")):b.success?(d=100,f=swarm.t("Downloading..."),e="progress-success",setTimeout(function(){a.removeClass("active").popover("hide")},3E3)):(d=100,f=swarm.t("Error")+": "+swarm.t(b.error)||swarm.t("Unknown"),e="progress-danger");c.find(".progress .bar").css("width",d+"%");c.find(".progress .bar span").text(f);
c.find(".progress").removeClass("progress-success progress-danger").addClass(e);a.removeClass("btn-danger").find("i").attr("class","icon-briefcase");b.error&&a.addClass("btn-danger").find("i").attr("class","icon-warning-sign icon-white")}},cancelArchiveDownload:function(a){a.removeClass("active").popover("hide");swarm.browse._archivePolling&&(window.clearTimeout(swarm.browse._archivePolling),swarm.browse._archivePolling=null)},_archivePolling:null,pollForArchive:function(a,b){window.clearTimeout(swarm.browse._archivePolling);
swarm.browse._archivePolling=setTimeout(function(){$.ajax("/archive-status/"+a,{data:{format:"json"},success:function(c){swarm.browse.updateArchiveStatus(b,c);swarm.browse._archivePolling&&!c.error&&(c.success?window.location.href=b.attr("href"):swarm.browse.pollForArchive(a,b))},error:function(a,d,f){swarm.browse.updateArchiveStatus(b,{error:f});this.errorHandled=!0}})},1E3)},prettify:function(){window.prettyPrint();$(".prettyprint.nocode li").filter(function(){return!this.firstChild||1!==this.firstChild.nodeType}).wrapInner('\x3cspan class\x3d"pln" /\x3e')},
getLoadingPane:function(a,b){var c='\x3cspan class\x3d"loading muted pad2"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e";b||(c='\x3ctable class\x3d"table table-compact browse-files"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth class\x3d"file-name"\x3e'+swarm.te("Name")+'\x3c/th\x3e\x3cth class\x3d"file-time"\x3e'+swarm.te("Modified")+'\x3c/th\x3e\x3cth class\x3d"file-size"\x3e'+swarm.te("Size")+'\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr class\x3d"dir"\x3e\x3ctd colspan\x3d"3"\x3e\x3cspan class\x3d"loading muted"\x3e'+
swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e");var d=$('\x3cdiv class\x3d"browse-content"\x3e\x3cul class\x3d"nav nav-tabs browse-tabs"\x3e\x3cli class\x3d"active"\x3e\x3ca href\x3d"#browse" data-toggle\x3d"tab"\x3e\x3ci class\x3d"icon-'+(b?"file":"folder-open")+'"\x3e\x3c/i\x3e '+swarm.te(b?"View":"Browse")+'\x3c/a\x3e\x3c/li\x3e\x3cli\x3e\x3ca href\x3d"#commits" data-toggle\x3d"tab"\x3e\x3ci class\x3d"icon-time"\x3e\x3c/i\x3e '+swarm.te("Commits")+'\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"tab-content"\x3e\x3cdiv class\x3d"tab-pane fade in active" id\x3d"browse"\x3e'+
c+"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");d.find(".loading").css("visibility","hidden");setTimeout(function(){d.find(".loading").css("visibility","").addClass("animate")},500);return d},handleLineHash:function(){var a=window.location.hash.replace(/^#l?/i,"");if(a){var b=parseInt(a,10),c=0<b?$("ol.linenums li:nth-child("+b+")"):[];if(c.length&&($("html, body").scrollTop(c.offset().top-Math.round($(window).height()/4)),c.addClass("highlight"),a.match(/[0-9]+\-[0-9]+/))){c=0;a=parseInt(a.split("-").pop(),
10);for(c=b;c<a;c++)$("ol.linenums li:nth-child("+(c+1)+")").addClass("highlight")}}},handleTabChange:function(a){a=$(a&&a.target||".nav-tabs .active a[href]").attr("href");$(".btn-blame").closest(".btn-group").toggle("#view"===a);$(".user-filter").toggle("#commits"===a);$(".range-filter").toggle("#commits"===a);$(".deleted-filter").toggle("#browse"===a);$(".btn-group-archive").toggle("#browse"===a);var b=$(".project-navbar");b.find("ul.nav li").removeClass("active");"#browse"===a||"#view"===a?b.find("ul.nav a.browse-link").closest("li").addClass("active"):
"#commits"===a&&b.find("ul.nav a.history-link").closest("li").addClass("active")},toggleDeletedFiles:function(a){swarm.browse._showDeleted=!swarm.browse._showDeleted;$(a).toggleClass("active",swarm.browse._showDeleted);a=$(".breadcrumb").data("url");var b=$(".breadcrumb").data("path"),c=swarm.browse.getCached(b);swarm.browse.setCached(b,!swarm.browse._showDeleted);var d=function(a){a=$("\x3cdiv /\x3e").append($.parseHTML(a)).find(".tab-content #browse");$(".tab-content #browse").replaceWith(a);$(".timeago").formatTimestamp()};
c?d(c.data):($("table.browse-files tbody").html('\x3ctr\x3e\x3ctd colspan\x3d"3"\x3e\x3cspan class\x3d"loading animate muted pad2"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e"),$.ajax({url:a,skipBaseUrl:!0,data:{format:"partial",showDeleted:swarm.browse._showDeleted||void 0},success:function(a){d(a);swarm.browse.setCached(b)}}))},toggleDiscardConfirmation:function(){$("#file-edit-content").toggleClass("confirming")},defineTemplates:function(){swarm.browse.editorFormTemplate='\x3cdiv class\x3d"container-fluid modal-form"\x3e\n    \x3cdiv class\x3d"row-fluid modal-header"\x3e\n        \x3cbutton type\x3d"button" class\x3d"close" {{if !failed}}onclick\x3d"swarm.browse.toggleDiscardConfirmation()"{{else}}data-dismiss\x3d"modal"{{/if}}\x3e\x3c/button\x3e\n        \x3ch3 id\x3d"edit-file-title" class\x3d"force-wrap"\x3e'+
swarm.t("Edit file")+'\x3c/h3\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row-fluid modal-body {{:messages?\' with-messages\':\'\'}}"\x3e\n        \x3cdiv class\x3d"messages {{:messages?\'show\':\'hide\'}}" \x3e\n            {{for messages}}\x3cp class\x3d"{{:type}}"\x3e{{:text}}\x3c/p\x3e{{/for}}        \x3c/div\x3e\n        {{if !failed}}\n        \x3cdiv class\x3d"file-path" \x3e\n            \x3cp\x3e{{:~formatPath(metadata.fileName,metadata.fileRevision)}}\x3c/p\x3e        \x3c/div\x3e\n        \x3cdiv class\x3d"file-editor"\x3e\n           \x3cpre id\x3d"editor"\x3e{{\x3econtent}}\x3c/pre\x3e\n           \x3cscript src\x3d"/vendor/{{:aceDir}}/ace.js" type\x3d"text/javascript" charset\x3d"utf-8"\x3e\x3c/script\x3e\n           \x3cscript src\x3d"/vendor/{{:aceDir}}/ext-modelist.js" type\x3d"text/javascript" charset\x3d"utf-8"\x3e\x3c/script\x3e\n           \x3cscript\x3e\n               swarm.browse.editor \x3d ace.edit("editor");               swarm.browse.editor.setTheme("ace/theme/textmate");               swarm.browse.editor.session.setMode(ace.require("ace/ext/modelist").getModeForPath("{{:metadata.fileName}}").mode);           \x3c/script\x3e        \x3c/div\x3e\n        \x3cdiv class\x3d"description-container"\x3e\n            \x3clabel for\x3d"changelist-description"\x3e'+
swarm.t("Changelist description")+'\x3c/label\x3e\n            \x3cdiv class\x3d"messages hide"\x3e\x3c/div\x3e            \x3ctextarea class\x3d"changelist-description" name\x3d"description"\x3e'+swarm.t("Modified through swarm. #review")+'\x3c/textarea\x3e\n        \x3c/div\x3e        {{/if}}\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row-fluid modal-footer"\x3e\n        \x3cdiv class\x3d"control-group group-buttons"\x3e\n        {{if !failed}}\n          \x3cdiv class\x3d"controls text-left"\x3e\n            \x3cinput type\x3d"hidden" name\x3d"path" class\x3d"base64Path" value\x3d"{{:path}}"/\x3e            \x3cbutton type\x3d"button" name\x3d"action" value\x3d"cancel" onclick\x3d"swarm.browse.toggleDiscardConfirmation()" class\x3d"btn btn-mlarge btn-text"\x3e'+
swarm.t("Discard changes")+'\x3c/a\x3e\n          \x3c/div\x3e\n          \x3cdiv class\x3d"controls"\x3e\n            \x3cbutton type\x3d"button" name\x3d"action" value\x3d"submit" onclick\x3d"swarm.browse.submitFile()" class\x3d"btn btn-mlarge btn-primary"\x3e'+swarm.t("Commit")+'\x3c/button\x3e\n            \x3cbutton type\x3d"button" name\x3d"action" value\x3d"shelve" onclick\x3d"swarm.browse.shelveFile()" class\x3d"btn btn-mlarge btn-secondary"\x3e'+swarm.t("Shelve")+'\x3c/button\x3e\n          \x3c/div\x3e\n        {{else}}\n          \x3cdiv class\x3d"controls"\x3e\n            \x3cbutton type\x3d"button" name\x3d"action" value\x3d"close" data-dismiss\x3d"modal" class\x3d"btn btn-mlarge btn-secondary"\x3e'+
swarm.t("Close")+'\x3c/button\x3e\n          \x3c/div\x3e\n        {{/if}}\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\x3cdiv id\x3d"confirm-dialog-container"\x3e\n    \x3cdiv class\x3d"modal-dialog confirm-discard"\x3e\n        \x3cdiv class\x3d"modal-header"\x3e\n            \x3cbutton type\x3d"button" class\x3d"close" onclick\x3d"swarm.browse.toggleDiscardConfirmation()"\x3e\x3c/button\x3e\n            \x3ch3\x3e'+swarm.t("Discard changes")+'\x3c/h3\x3e        \x3c/div\x3e\n        \x3cdiv class\x3d"modal-content"\x3e\n            \x3cp\x3e'+
swarm.t("Are you sure that you want to")+'\x26nbsp;\x3cspan class\x3d"confirm-action"\x3e'+swarm.t("discard these changes?")+'\x3c/span\x3e\x3c/p\x3e        \x3c/div\x3e\n        \x3cdiv class\x3d"modal-footer"\x3e\n            \x3cbutton type\x3d"button" class\x3d"btn btn-mlarge btn-text" onclick\x3d"swarm.browse.toggleDiscardConfirmation()"\x3e'+swarm.t("Cancel")+'\x3c/button\x3e\n            \x3cbutton type\x3d"button" class\x3d"btn btn-mlarge btn-confirm" data-dismiss\x3d"modal"\x3e'+swarm.t("Discard")+
"\x3c/button\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\x3c/div\x3e\n"}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.diff={_activeScroller:null,_navElement:null,_navQueue:null,_scrolling:null,moreContextLines:1,maxBottomContextLines:10,init:function(){swarm.diff.moreContextLines=swarm.config.get("reviews.more_context_lines")||swarm.diff.moreContextLines;swarm.diff.maxBottomContextLines=swarm.config.get("reviews.max_bottom_context_lines")||swarm.diff.maxBottomContextLines;swarm.diff._navQueue=[];$(".diff-wrapper .diff-details.collapse").on("shown hidden",function(a){if(a.target===this){a="hidden"===a.type;
var c=$(this).closest(".diff-wrapper");c.toggleClass("collapsed",a);!a&&c.find(".loading").length&&(swarm.diff.loadDiff(c),swarm.diff.processDiffActionBtn());c.data("dirty-scroll-width")&&swarm.diff.updateScrollerWidth(c);c.data("dirty-sideways-width")&&swarm.diff.updateSidewaysWidth(c)}});$(document).on("click",".btn-all-content",function(){var a=$(this).closest(".diff-wrapper"),c=a.find(".btn-all-content");c.hasClass("active")?c.removeClass("active"):c.addClass("active");c=a.find(".diff-details");
c.empty();c.append('\x3cdiv class\x3d"changes-list"\x3e\x3cdiv class\x3d"loading animate muted pad3"\x3e'+swarm.te("Loading...")+"\x3c/div\x3e\x3c/div\x3e");swarm.diff.loadDiff(a);swarm.diff.processDiffActionBtn();a.data("dirty-scroll-width")&&swarm.diff.updateScrollerWidth(a);a.data("dirty-sideways-width")&&swarm.diff.updateSidewaysWidth(a)});$(".diff-wrapper").on("diff-loaded",function(){setTimeout($.proxy(function(){$(".diff-header .diff-header-affix",this).swarmAffix({scrollToTarget:!0});swarm.diff.processDiffActionBtn()},
this),0)});$(".diff-header a.filename").on("click.file",function(a){a.preventDefault()});$(document).on("click.diff.btn",".diff-header .btn",function(a){a.stopPropagation()});$(document).on("click.diff.ws.btn",".btn-ws",function(){swarm.diff.toggleWhitespace(this)});$(document).on("click.diff.inline.btn",".btn-inline",function(){swarm.diff.showInline(this);$(this).closest(".diff-header-affix").swarmAffix({scrollToTarget:!0})});$(document).on("click.diff.sideways.btn",".btn-sideways",function(){swarm.diff.showSideways(this);
$(this).closest(".diff-header-affix").swarmAffix({scrollToTarget:!0})});$(document).on("click.diff.full.btn",".btn-full",function(a){swarm.diff.toggleFullFile($(a.target).closest(".diff-wrapper"))});$(".diff-wrapper").on("show-full show-more-context",function(){$(".diff-header .diff-header-affix",this).swarmAffix({scrollToTarget:!0})});$(document).on("click.diff.more.context",".diff-type-meta .context-icon-container",function(){var a=$(this).closest(".diff-type-meta"),c=this.classList||["section"];
a.hasClass("is-cut")||swarm.diff.renderMoreContext(a,c[c.length-1],swarm.diff.moreContextLines)});if(1===$("#files.active .diff-wrapper").length)$(".diff-wrapper .diff-details").collapse("show");else if(1===$("#files .diff-wrapper").length)$('.change-tabs a[href\x3d"#files"]').one("shown",function(){$(".diff-wrapper .diff-details").collapse("show")});$(window).on("hashchange.diff.context",swarm.diff.handleHash);swarm.diff.handleHash();$(window).resize(function(){$(".diff-wrapper").trigger("diff-resize");
swarm.has.cssCalcSupport()||$(".diff-wrapper .diff-details.in").each(function(){swarm.diff.updateScrollerWidth($(this).closest(".diff-wrapper"))})});swarm.diff.processDiffActionBtn();var a=!1;$(window).on("keydown",function(b){!a&&(!b.altKey&&!b.ctrlKey&&!b.metaKey&&!b.isDefaultPrevented()&&!$(b.target).is("input, textarea, select")&&$("#files.active").length)&&(a=!0,78===b.which?(b.preventDefault(),swarm.diff._navQueue.push("n"),swarm.diff.processNavQueue()):80===b.which&&(b.preventDefault(),swarm.diff._navQueue.push("p"),
swarm.diff.processNavQueue()))});$(window).on("keyup",function(){a=!1})},processNavQueue:function(a,b){if(b||!swarm.diff._navigating){swarm.diff._navigating=!0;a=a&&$(a)||$(swarm.diff._navElement);var c=swarm.diff.getNavElements(),d="n"===swarm.diff._navQueue[0]?0:-1;a.length&&a[0].parentNode&&(d=c.index(a)+("n"===swarm.diff._navQueue[0]?1:-1));var d=-1>=d?c.length-1:d,d=d===c.length?0:d,e=c.eq(d);e.is(".diff-details")&&!e.closest(".diff-wrapper").data("diff-loaded")?(e.closest(".diff-wrapper").one("diff-loaded",
function(){swarm.diff.processNavQueue(null,!0)}),e.collapse("show")):e.is(".diff-details")?swarm.diff.processNavQueue(e,!0):(c=function(){swarm.diff._navElement=e[0];swarm.diff._navQueue.shift();swarm.diff._navigating=!1;swarm.diff._navQueue.length?swarm.diff.processNavQueue():(swarm.diff.focusNavElement(e),swarm.diff.scrollToElement(e))},d=e.closest(".diff-details"),d.is(".in")?c():(swarm.diff._navigating=!0,d.one("shown",c),d.collapse("show")))}},focusNavElement:function(a){a=$(a);swarm.diff._navElement=
a[0];$(".diff-nav-focus-start, .diff-nav-focus-end").removeClass("diff-nav-focus-start diff-nav-focus-end");var b=a,c=$();a.closest(".diff-body").is(".diff-sideways")&&(b=b.add(swarm.diff.getPairedRow(a[0])));b.each(function(){c=$(this).next("tr.diff-type-same, tr.diff-type-meta").length||1>$(this).next().length?c.add(this):c.add($(this).nextUntil("tr.diff-type-same, tr.diff-type-meta").last())});b.addClass("diff-nav-focus-start");c.addClass("diff-nav-focus-end")},getNavElements:function(a){var b=
a&&$()||$(".diff-details");a=a&&$(a)||$(".diff-details");var c=a.find(".diff-body").filter(function(){var a=$(this).css("display"),b=$($(this).data("diff-pair")).css("display");return"block"===a&&(!$(this).is(".right-side")||"block"!==b)}),c=c.length?c:a;return b=b.add(c.find(".diff-type-meta + .diff-type-add, .diff-type-meta + .diff-type-delete,.diff-type-same + .diff-type-add, .diff-type-same + .diff-type-delete,.diff-image, .diff-description"))},handleHash:function(){var a=window.location.hash.replace(/^#/,
"");if(a){var a=a.split(","),b=$("a[name\x3d"+a[0]+"]").closest(".diff-wrapper");if(b.length){var c=b.find(".diff-details.collapse"),d=b.closest(".tab-pane"),e=$('.nav-tabs a[href\x3d"#'+d[0].id+'"]');e.one("shown",function(){c.not(".in").collapse("show");if(!a[1])return swarm.diff.scrollToElement(b);swarm.diff.handleSubHash(a[1],b)});d.is(".active")?e.trigger($.Event("shown")):e.tab("show")}}},handleSubHash:function(a,b){if(!b.data("comments-loaded"))return b.one("comments-loaded",function(){swarm.diff.handleSubHash(a,
b)}),!1;var c=b.find(".diff-body").filter(function(){return"block"===$(this).css("display")}).add(b.find(".diff-footer")),d;"l"===a.charAt(0)?d=c=c.find("tr."+a):(c=c.find("."+a),d=c.closest(".comments-section"));var e=b.data("file");return(!c.length||d.hasClass("diff-full-context"))&&(e.isEdit||e.fromFile)&&!b.hasClass("show-full")?(b.one("show-full",function(){swarm.diff.handleSubHash(a,b)||(b.find(".btn-full").removeClass("active"),swarm.diff.toggleFullFile(b))}),b.find(".btn-full").addClass("active"),
swarm.diff.toggleFullFile(b),!1):c.length?(d.hasClass("comments-section")&&("none"===d.css("display")&&(d.toggle(!0).trigger("show"),d.hasClass("comments-row")&&($(swarm.diff.getPairedRow(d)).toggle(!0).trigger("show"),swarm.comments.sizeCommentRowForDiff(d))),d.find(".closed-comments-body.hidden").find(c).length&&d.find(".closed-comments-header").click()),swarm.diff.scrollToElement(c),!0):!1},scrollToElement:function(a){if(a.length){a=a.offset().top;var b=parseInt($("body").css("padding-top"),10);
$("html, body").animate({scrollTop:a-3*b},"fast","swing")}},getDiffMode:function(a){a=$(a);return!a.find(".diff-details").length?"inline":a.find(".btn-sideways").hasClass("active")?"sideways":a.find(".btn-inline").hasClass("active")?"inline":!0===$("body").data("diff-preferences").view_diffs_side_by_side?"sideways":"inline"},getActiveDiffBody:function(a,b){a=$(a);var c=a.hasClass("ignore-ws")?"no-ws":"ws",d=swarm.diff.getDiffMode(a),c=a.find(".diff-"+d+"."+c);if(b)var e=a.hasClass("pure-add"),f=a.hasClass("action-delete"),
c=c.filter(function(){var a=$(this);return e&&!a.hasClass("left-side")||f&&!a.hasClass("right-side")||!0});return c},_getDiffFiles:function(a){a=$(a);var b=a.data("file"),c={};if(b.diffLeft||b.diffRight)return b.diffRight&&(c.right={path:b.depotFile,rev:b.diffRight}),b.diffLeft&&(c.left={path:b.depotFile,rev:b.diffLeft}),c;a=a.closest(".change-wrapper").data("change");var d="pending"===a.status,e=b.fromFile&&b.fromRev;c.right={path:b.depotFile,rev:d?"@\x3d"+a.id:"stream"===b.type?"@"+a.id:"#"+b.rev};
var f=1===$(".review-wrapper").data("head");if((!b.isAdd||e)&&"none"!==b.rev||f)c.left={path:e?b.fromFile:b.depotFile,rev:!f&&"stream"===b.type?"@"+(d?b.rev:parseInt(a.id,10)-1):"#"+(e?b.fromRev:f?"head":d?b.rev:parseInt(b.rev,10)-1)};return c},addDiffButtons:function(a,b,c,d,e){if(0===a.find(".btn-inline, .btn-sideways").length){b='\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+swarm.te("Show In-Line")+'"            class\x3d"btn btn-mini btn-inline '+
("inline"===b?"active":"")+'"\x3e        \x3ci class\x3d"swarm-icon icon-diff-inline"\x3e\x3c/i\x3e    \x3c/button\x3e    \x3cbutton type\x3d"button" title\x3d"'+swarm.te("Show Side-by-Side")+'"            class\x3d"btn btn-mini btn-sideways '+("sideways"===b?"active":"")+'"\x3e        \x3ci class\x3d"swarm-icon icon-diff-sideways"\x3e\x3c/i\x3e    \x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+swarm.te("Show Whitespace")+'"        class\x3d"btn btn-mini btn-sws btn-show-whitespace"        onclick\x3d"swarm.diff.toggleShowWhitespace(this);"\x3e        \x3cspan\x3e\x26bull;\x3c/span\x3e    \x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+
swarm.te("Ignore Whitespace")+'"            class\x3d"btn btn-mini btn-ws btn-ignore-whitespace'+(1===c?" active":"")+'"            data-toggle\x3d"button"\x3e        \x3ci class\x3d"swarm-icon icon-ignore-ws"\x3e\x3c/i\x3e    \x3c/button\x3e\x3c/div\x3e';d&&(b+='\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+swarm.te("Show All Diffs")+'"            class\x3d"btn btn-mini btn-all-content" \x3e        \x3ci class\x3d"icon-resize-full"\x3e\x3c/i\x3e    \x3c/button\x3e\x3c/div\x3e');
if(e.isEdit||e.fromFile)b+='\x3cdiv class\x3d"btn-group collapse-hidden"\x3e    \x3cbutton type\x3d"button" title\x3d"'+swarm.te("Show Full Context")+'"            class\x3d"btn btn-mini btn-full" data-toggle\x3d"button"\x3e        \x3ci class\x3d"swarm-icon icon-expand-file"\x3e\x3c/i\x3e    \x3c/button\x3e\x3c/div\x3e';a.find(".diff-toolbar").prepend($(b))}},loadDiff:function(a,b){a=$(a);var c=null;a.find(".btn-all-content").hasClass("active")&&(c="unlimited");var d=a.data("file");if(d.isDelete&&
d.action.match("move")){var e;$(".diff-wrapper").each(function(){if($(this).data("file").fromFile===d.depotFile)return e=$(this),!1});a.find(".diff-details").html('\x3cdiv class\x3d"diff-body"\x3e  \x3cdiv class\x3d"diff-description pad3"\x3e'+d.type.charAt(0).toUpperCase()+d.type.substr(1)+"    "+swarm.te(e?"file moved to":"file moved")+(e?' \x3ca href\x3d"#"\x3e\x3c/a\x3e':"")+".  \x3c/div\x3e\x3c/div\x3e").append('\x3cdiv class\x3d"diff-footer"\x3e\x3c/div\x3e');a.find(".diff-details a").text(e.data("file").depotFile).click(function(a){window.location=
"#"+e.find("a[name]").attr("name");e.find(".diff-details").hasClass("out")&&e.find(".diff-details").collapse("show");a.preventDefault()});b=b&&b();a.data("diff-loaded",!0).trigger($.Event("diff-loaded"));return b}var f=swarm.diff._getDiffFiles(a),h=a.is(".ignore-ws")?1:0,g=$(".review-wrapper").data("review");$.ajax({url:"/diff",data:{left:f.left&&f.left.path+f.left.rev,right:f.right&&f.right.path+f.right.rev,ignoreWs:h,action:d.action||null,type:d.type||"file",maxDiffs:c,reviewId:g?g.id:null,reviewUpdated:g?
g.updated:null},dataType:"text",success:function(c){var e=$($.parseHTML(c,document,!0));a.find(".diff-alert").remove();a.find(".diff-cut").remove();var f=e.hasClass("diff-cut");c=function(b){a.find(".loading, .diff-scroll-container, .diff-footer").remove();var c=a.find(".diff-details").append(e);f&&$('\x3cdiv class\x3d"alert alert-info diff-alert collapse-hidden"\x3e\x3ci class\x3d"icon-info-sign"\x3e\x3c/i\x3e'+e.get(0).innerHTML+"\x3c/div\x3e").insertAfter(a.find(".diff-toolbar"));b&&(c.append('\x3cdiv class\x3d"diff-scroll-container"\x3e\x3cdiv class\x3d"diff-scroll"\x3e\x3cdiv class\x3d"scroll-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
swarm.diff.addScrollListeners(a,a.find(".diff-scroll")));c.append('\x3cdiv class\x3d"diff-footer"\x3e\x3c/div\x3e')};if(!e.find(".diff-table").length)return c(),swarm.diff.addDiffButtons(a,swarm.diff.getDiffMode(a),h,f,d),a.trigger($.Event("load")),b=b&&b(),a.data("diff-loaded",!0).trigger($.Event("diff-loaded")),b;if(d.isAdd&&0===swarm.query.all("tr.diff-type-delete, tr.diff-type-same",e).length)a.addClass("pure-add");else if(!d.isDelete){swarm.diff.subDiff($(e.get(f?1:0)));var g=swarm.query.first("tr.diff-type-meta",
e),n=g.next();(n.hasClass("ll1")||!n.find(".line-num-left").data("num"))&&g.addClass("all-context-loaded")}g=swarm.diff.getDiffMode(a);swarm.query.all("tr.diff",e).not(".diff-type-meta").addClass("diff-content");c(!0);swarm.diff.addDiffButtons(a,g,h,f,d);a.trigger($.Event("load"));"inline"===g&&swarm.diff.updateScrollerWidth(a);"sideways"===g&&!swarm.diff.getActiveDiffBody(a).length&&swarm.diff.showSideways(a.find(".btn-sideways"));b=b&&b();a.data("diff-loaded",!0).trigger($.Event("diff-loaded"));
return b},error:function(b){403===b.status?(this.errorHandled=!0,a.find(".diff-details").html($('\x3cdiv class\x3d"alert pad3"\x3e'+swarm.te("You don't have permission to view this file.")+"\x3c/div\x3e"))):422===b.status&&(this.errorHandled=!0,a.find(".diff-details").html($('\x3cdiv class\x3d"alert pad3"\x3e'+swarm.te("This review is not up to date. Please refresh your browser.")+"\x3c/div\x3e")))}})},subDiff:function(a){var b=function(a){a=$(a);return a.hasClass("lf")&&"lf"||a.hasClass("crlf")&&
"crlf"||a.hasClass("cr")&&"cr"},c=function(){var a,b;$(this).html($(this).html().replace(/(^[\t ]+)|([\t ]+$)/g,function(c,h,g){a=h||a;b=g||b;return""}));$(this).before(a);$(this).after(b)};swarm.query.all("tr.diff-type-delete + tr.diff-type-add",a).each(function(){for(var d=$(this),e=d,f=[],h=[this];(e=e.prev("tr.diff-type-delete")).length;)f.unshift(e[0]);for(;(d=d.next("tr.diff-type-add")).length;)h.push(d[0]);h=$(h);f=$(f);h.addClass("diff-type-edit");f.addClass("diff-type-edit");var g=!1;h.each(function(a){if(a>=
f.length)return!1;if(b(h[a])!==b(f[a]))return g=!0,!1});g&&(h.addClass("line-end-changed"),f.addClass("line-end-changed"));$(f[f.length-1]).data("padChunkLength",Math.max(h.length-f.length,0));$(h[h.length-1]).data("padChunkLength",Math.max(f.length-h.length,0));swarm.diff._subDiffChunk(f,h);a.is(".no-ws")&&(swarm.query.apply("span.insert, span.delete",h,c),swarm.query.apply("span.insert, span.delete",f,c))})},addScrollListeners:function(a,b){b.scroll(function(){if(!(swarm.diff._activeScroller&&swarm.diff._activeScroller.source!==
this)){clearTimeout(swarm.diff._scrolling);swarm.diff._scrolling=setTimeout(function(){swarm.diff._activeScroller=null},1E3);if(!swarm.diff._activeScroller){var b=swarm.diff.getActiveDiffBody(a).find(".diff-scroll").add(a.find(".diff-scroll-container .diff-scroll"));swarm.diff._activeScroller={source:this,targets:b.not(this)}}swarm.diff._activeScroller.targets.scrollLeft(this.scrollLeft)}})},showSideways:function(a,b){if(a&&$(a).length){var c=$(a).closest(".diff-wrapper"),d=c.find(".diff-inline.active"),
e=c.hasClass("ignore-ws")?c.find(".diff-sideways.no-ws"):c.find(".diff-sideways.ws"),f=b?$():e;c.find(".btn-inline").removeClass("active");c.find(".btn-sideways").addClass("active");if(!f.length){var h=d.hasClass("ws")?"ws":"no-ws",g=d.clone(!0).attr("class","diff-body diff-sideways border-box "+h+" left-side"),h=d.clone(!0).attr("class","diff-body diff-sideways border-box "+h+" right-side");swarm.query.all("img.loaded",g).removeClass("loaded");swarm.query.all("img.loaded",h).removeClass("loaded");
var j=function(){this.value&&this.value===this.placeholder&&(this.value="")};swarm.query.apply("[placeholder]",g,j);swarm.query.apply("[placeholder]",h,j);var j=function(){$.cleanData([this]);this.parentNode.removeChild(this)},l=$('\x3ctd class\x3d"line-value blank"\x3e\x26nbsp;\x3c/td\x3e'),k=["diff-content","has-comments","archived-only"],m=function(){var a=" "+this.parentNode.className+" ",b;for(b=0;b<k.length;b++)a=a.replace(" "+k[b]+" "," ");this.parentNode.className=$.trim(a)+" line-pad";this.parentNode.replaceChild(l[0].cloneNode(!0),
this)},f=f.add(g).add(h);g.data("diff-pair",h[0]);h.data("diff-pair",g[0]);swarm.query.all("tr.diff.diff-type-add.diff-type-edit",g).each(j);swarm.query.all("tr.diff.diff-type-delete.diff-type-edit",h).each(j);swarm.query.apply("tr.diff.diff-type-edit",f,function(){var a=$.data(this,"padChunkLength");void 0!==a&&0<a&&swarm.diff.pad(a,this)});var n=$([1]);swarm.query.apply("td.line-value",f,function(){n[0]=this.parentNode;if(!n.hasClass("diff-type-meta")){var a=this.firstChild;a&&3===a.nodeType&&(a.splitText(1),
this.removeChild(a))}});swarm.query.all("td.line-num-right",g).each(j);swarm.query.all("td.line-num-left",h).each(j);swarm.query.all("tr.diff.diff-type-add td.line-value",g).each(m);swarm.query.all("tr.diff.diff-type-delete td.line-value",h).each(m);f.insertAfter(c.find(".diff-body").last());swarm.diff.addScrollListeners(c,f.find(".diff-scroll"))}b&&e.remove();d.css("display","none").trigger("hide");f.css("display","block").trigger("show");c.find(swarm.diff._navElement).length&&swarm.diff.focusNavElement(swarm.diff.getNavElements(c)[0]);
b||!e.length?swarm.diff.updateSidewaysWidth(c):swarm.diff.updateScrollerWidth(c)}},updateScrollerWidth:function(a,b){var c=swarm.diff.getActiveDiffBody(a,!0).find("table.diff-table");if(null===b||void 0===b){if(a.hasClass("collapsed")){a.data("dirty-scroll-width",!0);return}b=0;var d;for(d=0;d<c.length;d++)b=Math.max(b,c.eq(d).width())}2===c.length?swarm.has.cssCalcSupport()?d="calc("+b+"px - (100% / 2) + 100%)":(d=a.width(),d=b-d/2+d+"px"):d=b+"px";a.data("dirty-scroll-width",1>b);a.find(".scroll-content").css("minWidth",
d);a.find(".diff-scroll-container .diff-scroll").swarmAffix({position:"bottom",animate:!1,boundary:c})},updateSidewaysWidth:function(a){a.hasClass("pure-add")||a.hasClass("action-delete")?swarm.diff.updateScrollerWidth(a):a.hasClass("collapsed")?a.data("dirty-sideways-width",!0):(a.data("dirty-sideways-width",!1),a.find(".diff-sideways.left-side").each(function(){var b=$(this),c=$(b.data("diff-pair")),d=b.find("table.diff-table"),e=c.find("table.diff-table"),f=$().add(d).add(e),h=[];f.css({minWidth:"",
width:"1px"});if("none"===b[0].style.display&&"none"===c[0].style.display){var g={display:"block",visibility:"hidden"},j=function(a){h.push(a.width())};$.swap(b[0],g,j,[d]);$.swap(c[0],g,j,[e])}else h=[d.width(),e.width()],swarm.diff.updateScrollerWidth(a,Math.max(h[0],h[1]));f.css({minWidth:Math.max(h[0],h[1])+"px",width:""})}),a.trigger("diff-resize"))},_subDiffChunk:function(a,b){var c=new window.diff_match_patch,d=[],e=[];a.each(function(a,b){d.push(swarm.query.first("td.line-value",b).text().substring(1))});
b.each(function(a,b){e.push(swarm.query.first("td.line-value",b).text().substring(1))});var f=c.diff_main(d.join("\n"),e.join("\n")),h="",g="";c.diff_cleanupSemantic(f);$.each(f,function(a,b){var c=[],d=[];$.each(b[1].split("\n"),function(a,e){e=swarm.diff.spanifyWhitespace($.views.converters.html(e));switch(b[0]){case 1:d.push('\x3cspan class\x3d"insert"\x3e'+e+"\x3c/span\x3e");break;case -1:c.push('\x3cspan class\x3d"delete"\x3e'+e+"\x3c/span\x3e");break;default:e="\x3cspan\x3e"+e+"\x3c/span\x3e",
d.push(e),c.push(e)}});h+=c.join("\n");g+=d.join("\n")});$.each(h.split("\n"),function(b,c){swarm.query.first("td.line-value",a[b]).html("-"+c)});$.each(g.split("\n"),function(a,c){swarm.query.first("td.line-value",b[a]).html("+"+c)})},showInline:function(a){a=$(a).closest(".diff-wrapper");var b=a.find(".diff-inline.active"),c=a.find(".diff-sideways");a.find(".btn-inline").addClass("active");a.find(".btn-sideways").removeClass("active");b.show().trigger($.Event("show"));c.hide().trigger($.Event("hide"));
a.find(swarm.diff._navElement).length&&swarm.diff.focusNavElement(swarm.diff.getNavElements(a)[0]);swarm.diff.updateScrollerWidth(a)},pad:function(a,b){b=$(b);for(var c=swarm.diff.getLineSelector(b).replace("."," "),d;0<a--;)d=$(b).clone(),d.removeClass("diff-content has-comments archived-only"+c).addClass("line-pad"),d.find("td").html(" \x26nbsp;"),d.find(".line-num").attr("data-num",""),d.insertAfter(b)},collapseAll:function(){$(".diff-details.collapse.in").trigger("hide").removeClass("in").css("height",
"0").trigger("hidden")},expandAll:function(){$(".diff-details.collapse").not(".in").trigger("show").addClass("in").css("height","auto").trigger("shown")},toggleFullFile:function(a){var b=a.data("file");if(b.isEdit||b.fromFile){if(a.data("full-file"))return swarm.diff._renderFullFile(a);var c=swarm.diff._getDiffFiles(a);$.ajax({url:"/files/"+swarm.encodeURIDepotPath(c.left.path)+"?v\x3d"+encodeURIComponent(c.left.rev),data:{view:!0,type:b.type},dataType:"text",success:function(b){b=b.match(/^.*((\r\n|\n|\r)|$)/gm);
a.data("full-file",b);swarm.diff._renderFullFile(a)}})}},buildContextRowsHtml:function(a,b,c,d){d=d||"";var e="",f=$.templates('\x3ctr class\x3d"diff diff-type-same diff-content {{\x3eclass}}" tabindex\x3d"0"\x3e  \x3ctd class\x3d"line-num line-num-left" data-num\x3d"{{\x3eleft}}"\x3e\x3c/td\x3e  \x3ctd class\x3d"line-num line-num-right" data-num\x3d"{{\x3eright}}"\x3e\x3c/td\x3e  \x3ctd class\x3d"line-value"\x3e {{:value}}\x3c/td\x3e\x3c/tr\x3e');$.each(a,function(a,g){if(null!==g){var j=b+a,l=c+
a,k=g.split(/(\r\n|\n|\r)/),m=(k[1]||"").replace(/\r/,"cr").replace(/\n/,"lf");e+=f.render({"class":d+" ll"+j+" lr"+l+" "+m,left:j,right:l,value:swarm.diff.spanifyWhitespace($.views.converters.html(k[0]))})}});return e},_renderFullFile:function(a){a.toggleClass("show-full",a.find(".btn-full").hasClass("active"));if(a.find(".diff-inline.active").hasClass("fully-loaded"))swarm.diff.updateSidewaysWidth(a);else{var b=a.data("full-file"),c=$(".diff-inline.active tbody",a).first(),d=0,e,f,h,g;$(".diff-inline.active tr.diff-type-meta",
a).each(function(){var a=$("td.context .meta-value",this).html().match(/@@ \-([0-9]+),([0-9]+) \+([0-9]+),([0-9]+) @@/);if(a){e=parseInt(a[1],10);f=parseInt(a[2],10);h=parseInt(a[3],10);g=parseInt(a[4],10);var a=$(this),c=b.slice(d,e-1);a.before(swarm.diff.buildContextRowsHtml(c,e-c.length,h-c.length,"diff-full-context"));d=e+f-1}});d<b.length&&c.append(swarm.diff.buildContextRowsHtml(b.slice(d),e+f,h+g,"diff-full-context"));"sideways"===swarm.diff.getDiffMode(a)?swarm.diff.showSideways($(".btn-sideways",
a),!0):$(".diff-sideways",a).remove();$(".diff-inline.active",a).addClass("fully-loaded")}a.trigger($.Event("show-full"))},renderMoreContext:function(a,b,c){a=$(a);if(a.length){var d=a.closest(".diff-wrapper"),e=swarm.diff._getDiffFiles(d);if(!d.data("rendering-more-context")){d.data("rendering-more-context",!0);var f,h=a.find(".meta-value").html();swarm.query.all(".diff-inline.active tr.diff-type-meta",d).each(function(){if($(this).find(".meta-value").html()===h)return f=$(this),!1});var g=function(a,
b){a=$(a);return!a.length?null:a.filter(".diff-content").not(".diff-full-context,.diff-type-add").length?parseInt(a.find("td.line-num-left").data("num"),10)||null:g(a[b?"next":"prev"](),b)},j=[],l=0,k=0,m=g(f,!1),n=g(f,!0);switch(b){case "above":l=n-c;k=n-1;l<=m&&(l=m+1,k=n-1);break;case "below":l=m+1;k=m+c;n&&k>=n&&(l=m+1,k=n-1);break;case "bottom":c=swarm.diff.maxBottomContextLines;l=m+1;k=l+c;break;case "top":k=n-1;break;default:l=m+1,k=n-1}k&&j.push((0<l?l:1)+"-"+k);j.length?$.ajax({url:"/view/"+
swarm.encodeURIDepotPath(e.left.path),data:{format:"json",v:e.left.rev,lines:j},dataType:"json",success:function(b){var e=function(a,b){if(a&&b&&b.length){var c,e=swarm.query.all(".diff-inline.active tr.ll"+(a-1),d).not(".diff-full-context");e.length||(c=!0,e=swarm.query.all(".diff-inline.active tr.ll"+(a+b.length),d).not(".diff-full-context"));if(e.length){var f,g;f=g=e;e.hasClass("diff-type-delete")&&(f=e,g=e=e.nextUntil(":not(.diff-type-edit)").last());f=parseInt(g.find("td.line-num-right").data("num"),
10)-parseInt(f.find("td.line-num-left").data("num"),10);f=swarm.diff.buildContextRowsHtml(b,a,a+f,"additional-context-content");c?e.before(f):e.after(f)}}},h,j=[];$.each(b,function(a,b){a=parseInt(a,10);if(!h||h+j.length!==a)e(h,j),h=a,j=[];j.push(b)});e(h,j);var m=Object.keys(b).length;swarm.query.all(".diff-inline.active tr.diff-type-meta",d).each(function(){var a=$(this),b=g(a,!1),d=g(a,!0);(b&&d&&b+1>=d||d&&1===d||!d&&a.is(f)&&m<c)&&a.addClass("all-context-loaded")});a.find(".context-icon-container").each(function(){$(this).data("tooltip")&&
$(this).data("tooltip").hide()});"sideways"===swarm.diff.getDiffMode(d)?swarm.diff.showSideways(d.find(".btn-sideways"),!0):d.find(".diff-sideways").remove();d.trigger($.Event("show-more-context"))},complete:function(){d.data("rendering-more-context",!1)}}):(swarm.query.all("tr.diff-type-meta",d).each(function(){$(this).find(".meta-value").html()===h&&$(this).addClass("all-context-loaded")}),a.find(".icon-more-context").each(function(){$(this).data("tooltip")&&$(this).data("tooltip").hide()}),d.data("rendering-more-context",
!1))}}},inlineAll:function(){$(".btn-inline").not(".active").each(function(){swarm.diff.showInline(this)})},sidewaysAll:function(){$(".btn-sideways").not(".active").each(function(){swarm.diff.showSideways(this)})},processDiffActionBtn:function(){$("#toolbar-btn-ignore-whitespace").hasClass("active")!==$("body").data("diff-preferences").ignore_whitespace&&$(".btn-ws").each(function(){$(this).hasClass("active")!==$("#toolbar-btn-ignore-whitespace").hasClass("active")&&($(this).toggleClass("active"),
swarm.diff.toggleWhitespace(this))});$(".btn-sws").each(function(){$(this).hasClass("active")!==$("#toolbar-btn-show-whitespace").hasClass("active")&&swarm.diff.toggleShowWhitespace(this)})},toggleShowAllWhitespace:function(a){$(a).toggleClass("active");$(".btn-sws").each(function(){$(this).hasClass("active")!==$(a).hasClass("active")&&swarm.diff.toggleShowWhitespace(this)})},toggleIgnoreAllWhitespace:function(a){$(a).toggleClass("active");$(".btn-ws").each(function(){$(this).hasClass("active")!==
$(a).hasClass("active")&&($(this).toggleClass("active"),swarm.diff.toggleWhitespace(this))})},toggleWhitespace:function(a){var b=$(a).closest(".diff-wrapper"),c=$(".diff-inline.active",b),d=$(".diff-inline",b).not(".active"),e=function(){d.addClass("active");d.show().trigger("show");c.hide().trigger("hide");$(".btn-full",b).is(".active")&&swarm.diff.toggleFullFile(b);$(".btn-sideways",b).is(".active")?($(".diff-sideways",b).hide().trigger("hide"),d.find(".diff-description").length||swarm.diff.showSideways($(".btn-sideways",
b))):(b.find(swarm.diff._navElement).length&&swarm.diff.focusNavElement(swarm.diff.getNavElements(b)[0]),swarm.diff.updateScrollerWidth(b))};a=$(".btn-ws",b).is(".active");var f=".diff-inline"+(a?".no-ws":".ws");c.removeClass("active");b.toggleClass("ignore-ws",a);if(b.find(f).length)return e();swarm.diff.loadDiff(b,function(){d=b.find(f);e()})},getPairedRow:function(a){var b=$(a).closest(".diff-body");if(!b.is(".diff-sideways"))return null;b=$(b.data("diff-pair")).find(".diff-table \x3e tbody");
a=$(a).index();return b.children().length>a?b.children()[a]:null},getLineNumber:function(a){var b=$(a).attr("class").match(/ll([0-9]+)/);a=$(a).attr("class").match(/lr([0-9]+)/);return{left:b&&parseInt(b[1],10),right:a&&parseInt(a[1],10)}},getLineSelector:function(a){var b=[];a=swarm.diff.getLineNumber(a);a.left=a.left&&b.push("ll"+a.left);a.right=a.right&&b.push("lr"+a.right);return b.length?"."+b.join("."):""},spanifyWhitespace:function(a){return a.replace(/( )/g,'\x3cspan class\x3d"space"\x3e$1\x3c/span\x3e').replace(/(\t)/g,
'\x3cspan class\x3d"tab"\x3e$1\x3c/span\x3e')},toggleShowWhitespace:function(a){a=$(a);a.toggleClass("active");a.closest(".diff-wrapper").toggleClass("show-whitespace",a.is(".active"))}};
swarm.changes={_loading:!1,init:function(a,b,c){b=$(b);var d=$('.nav-tabs a[href\x3d"#'+b.attr("id")+'"]');!b.children().length&&$(d).has(".active")&&swarm.changes.load(a,b,c);$(document).off("shown.changes");$(document).on("shown.changes",d,function(){b.children().length||swarm.changes.load(a,b,c)});$(window).off("scroll.changes");$(window).on("scroll.changes",function(){b.is(".active")&&$(".change-history").length&&$.isScrolledToBottom()&&swarm.changes.load(a,b,c)})},load:function(a,b,c){if(!swarm.changes._loading){c=
c||{};var d=c.user instanceof $?c.user.val():c.user,e=c.range instanceof $?c.range.val():c.range,f=c.reset,h=c.status;c=c.includeReviews;swarm.changes._loading=!0;a=a?a.replace(/^\/+|\/+$/g,""):"";var d=$.trim(d),g=$(".change-history",b);if(f&&a===g.data("path")&&e===g.data("range")&&d===g.data("user"))swarm.changes._loading=!1;else{var j=g.data("page");g.length?j?g.data("page",++j):g.data("page",j=2):j=1;var l=$(".change-history tbody tr:last",b).attr("id");f&&(j=1,l=null);var k=g.data("project-id")||
$(b).data("project-id");$.ajax({url:(k?"/projects/"+k:"")+"/changes/"+a,data:{user:d,range:e,after:l,max:50*j,format:"partial",status:h,includeReviews:c},dataType:"text",success:function(c,j,k){c=$("\x3cdiv /\x3e").append($.parseHTML(c)).find("table");j=c.find("tbody tr");f&&g.find("tbody").empty();!j.length&&(f||!g.length)?(c=c.is(".remote")?swarm.te("Remote depot (change details are not available)."):"shelved"===h?swarm.te("No shelved changes."):swarm.te("No matching changes."),k.getResponseHeader("X-Swarm-Range-Error")?
($(b).html('\x3cdiv class\x3d"alert alert-danger pad3"\x3e'+swarm.te("Range Syntax Error")+"\x3c/div\x3e"),$(".range-filter").addClass("control-group error")):$(b).html('\x3cdiv class\x3d"alert pad3"\x3e'+c+"\x3c/div\x3e")):($(b).find(".alert").remove(),$(".range-filter").removeClass("control-group error"),b&&!g.length?$(b).append(c):$(".change-history tbody",b).append(j),g.data("path",a),g.data("user",d),g.data("range",e),j.find(".timeago").formatTimestamp(),j.find(".description").expander({slicePoint:90}))},
complete:function(){$(b).trigger("changes-loaded");setTimeout(function(){swarm.changes._loading=!1},500)},error:function(a){a.getResponseHeader("X-Swarm-Range-Error")&&($(b).html('\x3cdiv class\x3d"alert alert-danger pad3"\x3e'+swarm.te("Range Syntax Error")+"\x3c/div\x3e"),$(".range-filter").addClass("control-group error"),this.errorHandled=!0)}})}}}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.comments={_loadingTasks:!1,mentionsMode:"",mentionsArray:[],init:function(a,c,b,d,e,f){$(b).data("counter-node",d).data("context",c);"1"===swarm.localStorage.get("diff.comments.version.specific")&&$(".version-specific-comments").addClass("active");swarm.comments.load(a,b);$(b).on("click.comment.context",".context a",function(){$(this).attr("href").match(window.location.hash)&&setTimeout(swarm.diff.handleHash,0)});swarm.comments.initViewTasks(a);$(document).on("swarm-login",function(){var c=
{context:$(b).data("context"),limitVersion:$(".version-specific-comments").is(".active")?1:0};$.ajax("/comments/"+a,{data:c}).done(function(a){swarm.comments.update(b,a)})});$(document).on("shown.comments.tab",'li a[href\x3d"#comments"]',function(){$(b).find("table.opened-comments \x3e tbody \x3e tr.row-main").length||$(b).find(".comment-add textarea").focus()});$(document).on("click.comment.read-state",".comments-wrapper .read-state a",function(a){a.preventDefault();var b=$(this),c=b.closest(".read-state");
a=swarm.user.getAuthenticatedUser().id;a=c.is(".read")?{removeReadBy:a}:{addReadBy:a};b=b.closest("tr.row-main");b=swarm.comments.getCommentId(b);$.ajax("/comment/edit/"+b+"?_method\x3dPATCH",{type:"POST",dataType:"json",data:a,success:function(a){swarm.comments.updateReadBy(c,a)}})});$(document).on("click.comments.mark-all",".all-comment-controls .mark-all-unread, .all-comment-controls .mark-all-read",function(b){b.preventDefault();b=$(b.target).closest("a").hasClass("mark-all-unread")?"unread":
"read";var c="read"===b?"unread":"read",d=$(document.body).find(".comments-container .comment-summary .read-state."+c);$.ajax("/api/v9/comments/"+b,{type:"POST",dataType:"json",data:{topic:a},success:function(a){$(d).each(function(){var b=$(this);swarm.comments.updateReadBy(b,a)})}})});$(document).on("click.task-state.menu",".task-state-menu a",function(a){a.preventDefault();var c=$(this),d=$(c.closest(".task-state-menu").data("active-target")).closest("tr.row-main"),e=swarm.comments.getCommentId(d);
$.post("/comment/edit/"+e,{taskState:c.data("task-state")},function(a){a.isValid&&(swarm.comments.updateReadBy(d.find(".read-state"),a),d.find("button.dropdown-toggle").data("tooltip")&&d.find("button.dropdown-toggle").data("tooltip").hide(),$("tr.c"+e).removeClass("task-state-"+d.data("task-state")).data("task-transitions",a.taskTransitions).data("task-state",a.comment.taskState),swarm.comments.renderTaskControls(d),"verified:archive"===c.data("task-state")&&($("tr.c"+e).nextAll().addBack().toggleClass("closed"),
swarm.comments.updateArchived(null,d,b)),swarm.comments.renderTaskSummary(b),swarm.comments.updateReviewTransitions())})});$(document).on("click.comments.edit",".comments-wrapper .edit-comment",function(a){a.preventDefault();swarm.comments.showEditForm($(this).closest("tr.row-append").prev(".row-main"))});$(document).on("click.comments.reply",".comments-wrapper .reply-comment",function(a){a.preventDefault();a=$(this).closest("tr").next();var b=0!==a.find("\x3e td \x3e .comment-replies \x3e .comment-replies-wrapper \x3e .comments-wrapper \x3e .comment-add").length;
$(".comment-replies-wrapper:empty").remove();b?(0===a.find(".comments-container table").length&&a.find(".comment-replies").empty(),swarm.comments.sizeCommentRowForDiff(a.closest(".comments-row"))):swarm.comments.showReplyForm(a)});$(document).on("click.comments.close",".comments-wrapper .btn-close",function(a){a.preventDefault();var c=$(this),d=c.closest("tr.row-main");a=d.is(".closed")?"remove":"add";var e=swarm.comments.getCommentId(d);c.find("button.btn-close").prop("disabled",!0);var f={};f[a+
"Flags"]=["closed"];var m=[e];d.nextAll("tr.c"+e+"-replies").find("tr.row-main").each(function(){m.push(swarm.comments.getCommentId(this))});var p=m.length,n=0;$(m).each(function(){var a=this;$.post("/comment/edit/"+this,f,function(e){$("tr.c"+a).nextUntil(".row-main").addBack().toggleClass("closed");swarm.comments.updateArchived(c,d,b);swarm.comments.renderTaskSummary(b);$("tr.c"+a).find("button.btn-close").prop("disabled",!1);swarm.comments.updateReadBy(d.find(".read-state"),e);n++;n===p&&swarm.comments.updateReviewTransitions()})})});
$(document).on("click.comments.like",".comments-wrapper .likes a",function(a){a.preventDefault();var b=$(this),c=b.closest(".likes"),d=c.find(".likes-counter");a=b.closest("tr.row-append");a=swarm.comments.getCommentId(a);var e=swarm.user.getAuthenticatedUser().id,f=c.is(".user-likes");$.post("/comment/edit/"+a,f?{removeLike:e}:{addLike:e},function(a){c.toggleClass("has-likes",0<a.comment.likes.length);c.toggleClass("user-likes",!f);c.find("i").toggleClass("icon-heart",f).toggleClass("swarm-icon icon-heart-red",
!f);d.text(a.comment.likes.length);d.attr({"data-original-title":a.comment.likes.join(", "),title:""});b.attr({"data-original-title":swarm.t(f?"Like":"Unlike"),title:""});b.is(":hover")&&b.tooltip("show")})});$(".tab-content, .attribute-comments").on("focusout",".row-replies .comments-wrapper",function(a){var b=$(this);setTimeout(function(){var c=b.is(document.activeElement),d=b.find("textarea").val(),e=$(a.target).closest(".comment-replies-wrapper"),f=e.find(".row-main").length;!c&&!d&&(f?e.find(".comment-add").filter(function(a,
b){var c=$(b).find("textarea");return c&&!c.val()}):e).fadeOut({complete:function(){swarm.comments.sizeCommentRowForDiff(e.closest(".comments-row"));this.remove()}})},10)});$(b).on("update",function(){$(b).find(".comments-table .comment-body a").each(function(){var a=$(this),b=a.attr("href"),c=null;b.match(/\.(gif|png|jpe?g)(\?|$)/i)&&(c=$("\x3cimg\x3e").attr("src",b));var d=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i;b.match(d)&&(c=$('\x3ciframe width\x3d640 height\x3d390 frameborder\x3d"0" allowfullscreen\x3e\x3c/iframe\x3e').attr("src",
"https://www.youtube.com/embed/"+b.match(d)[1]));c&&a.closest("td").find(".comment-attachments").append(c.wrap('\x3cdiv class\x3d"referenced-media"\x3e\x3c/div\x3e').parent())})});if(swarm.has.fullFileApi())$("body").on("dragenter",function(){$(".comment-form .can-attach").dropZone({uploaderOptions:{extraData:{_csrf:$("body").data("csrf")},onStart:swarm.comments.uploaderCallback,onRemove:swarm.comments.uploaderCallback}})});else $(b).on("update",function(){$(b).find(".textarea-wrapper.can-attach").removeClass("can-attach");
$(b).find(".drop-note").hide()});swarm.comments.renderTaskSummary();$(document).on("change.comment",".comment-form textarea",function(){swarm.comments.setFormState($(this).closest("form"),{body:$(this).val()})});$(".version-specific-comments").on("click",function(){var c={context:$(b).data("context"),limitVersion:$(this).toggleClass("active").is(".active")?1:0};swarm.localStorage.set("diff.comments.version.specific",c.limitVersion);$.ajax("/comments/"+a,{data:c}).done(function(a){$(".diff-content.has-comments").removeClass("has-comments");
$("tr.comments-section").remove();swarm.comments.update(b,a)})});e&&(swarm.comments.mentionsMode=e);f&&(swarm.comments.mentionsArray=f);swarm.comments.initAttributeComments()},updateReadBy:function(a,c){var b=-1!==c.comment.readBy.indexOf(swarm.user.getAuthenticatedUser().id),d=a.find("a"),e=a.closest("tr.row-main"),f=swarm.comments.getCommentId(e),e=$(".diff-body .c"+f+".row-main").closest(".comments-row");$("tr.c"+f+" .read-state i").toggleClass("icon-comment-unread",b).toggleClass("icon-comment-read",
!b);$("tr.c"+f+", tr.c"+f+" .read-state, tr.c"+f+"-append").toggleClass("read",b).toggleClass("unread",!b);$("#files").toggleClass("measure-comment",!0);f=$("tr.c"+f+" .content-context");f.length&&(b?f.hide():f.show());e.each(function(){swarm.comments.sizeCommentRowForDiff($(this))});$("#files").toggleClass("measure-comment",!1);d.attr({"data-original-title":swarm.t(b?"Mark comment as unread":"Mark comment as read"),title:""});d.is(":hover")&&d.tooltip("show")},updateReviewTransitions:function(){"true"===
swarm.config.get("reviews.disable_approve_when_tasks_open")&&$.ajax("/reviews/"+$(".review-wrapper").data("review").id,{data:{format:"json"},dataType:"json",success:function(a){swarm.review.updateReview($(".review-wrapper"),a)}})},initViewTasks:function(a){$.templates({viewTasksDialog:'\x3cdiv class\x3d"modal hide fade view-tasks" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"view-tasks-title" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"view-tasks-title"\x3e{{tpe:"Task" "Tasks" 2}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\x3cdiv class\x3d"controls reporters"\x3e\x3cdiv class\x3d"input-prepend" clear\x3d"both"\x3e\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"input-xlarge reporter-multipicker" data-items\x3d"100"placeholder\x3d"'+
swarm.te("Reporter Name")+'"\x3e\x3c/div\x3e\x3cdiv class\x3d"btn-group group-radio" data-filter-key\x3d"state"\x3e\x3cbutton type\x3d"button" title\x3d"'+swarm.te("Open")+'" aria-label\x3d"'+swarm.te("Open")+'" class\x3d"btn btn-filter" data-filter-value\x3d"open"\x3e\x3ci class\x3d"swarm-icon icon-task-open"\x3e\x3c/i\x3e\x3c/button\x3e\x3cbutton type\x3d"button" title\x3d"'+swarm.te("Addressed")+'" aria-label\x3d"'+swarm.te("Addressed")+'" class\x3d"btn btn-filter" data-filter-value\x3d"addressed"\x3e\x3ci class\x3d"swarm-icon icon-task-addressed"\x3e\x3c/i\x3e\x3c/button\x3e\x3cbutton type\x3d"button" title\x3d"'+
swarm.te("Verified")+'" aria-label\x3d"'+swarm.te("Verified")+'" class\x3d"btn btn-filter" data-filter-value\x3d"verified"\x3e\x3ci class\x3d"swarm-icon icon-task-verified"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"tasks-browser"\x3e\x3ctable class\x3d"tasks table table-compact sortable"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth\x3e\x26nbsp;\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-select" disabled\x3e{{te:"View"}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Cancel"}}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e'});
$(document).on("click.view.tasks",".review-header .view-tasks",function(){swarm.comments.openViewTasksDialog(a,function(a,b){var d=a.data("id"),e=a.data("url"),f;swarm.form.disableButton(b.find(".modal-footer .btn-select"));b.find(".modal-footer .btn-cancel").prop("disabled",!0);b.modal("hide");window.location.href=swarm.url(e);swarm.history.switchTab();if("#comments"===e)f=$("#comments .c"+d).children().last(),swarm.diff.scrollToElement(f),f.animateFlash();else if(f=$("#files .c"+d).children().last(),
f.length)f.animateFlash();else $(".diff-wrapper").one("diff-loaded",function(){f=$("#files .c"+d).children().last();f.animateFlash()})})})},uploaderCallback:function(a){if("remove"!==a.type){a=this.controlsContainer.closest("form");var c=$.extend({uploaders:[]},swarm.comments.getFormState(a)),b=this.controlsContainer.closest(".comments-section");c.uploaders.push(this);swarm.comments.setFormState(a,c);b.length&&swarm.comments.sizeCommentRowForDiff(b.filter(".comments-row"))}},updateArchived:function(a,
c,b){a=$(a);$(".comments-wrapper").each(function(){swarm.comments.moveClosedComments(this,!0)});a.data("tooltip")&&a.data("tooltip").hide();if(c.closest(".comments-section").length){c=c.closest(".comments-section");var d=(a=c.hasClass("comments-row"))?$(swarm.diff.getPairedRow(c)):$(),e=$().add(c).add(d);!e.find(".opened-comments tr").length&&!swarm.comments.hasPending(c)&&(!d.length||!swarm.comments.hasPending(d))?e.hide().trigger("hide"):a&&swarm.comments.sizeCommentRowForDiff(c)}else $('.change-tabs a[href\x3d"#files"]').off("shown.comments.close").one("shown.comments.close",
function(){$(".diff-wrapper").each(function(){swarm.comments.sizeForDiff(this)})});swarm.comments.updateCounts(b)},load:function(a,c){var b={context:$(c).data("context"),limitVersion:$(".version-specific-comments").is(".active")?1:0};$.ajax("/comments/"+a,{data:b}).done(function(a){$(".diff-content.has-comments").removeClass("has-comments");$("tr.comments-section").remove();swarm.comments.update(c,a);swarm.form.checkInvalid($(c).find("form"))})},update:function(a,c){var b=$(a);b.html(c);b.find("input[name\x3dcontext]").val(JSON.stringify(b.data("context")));
b.find(".comments-wrapper").data("comment-container",a);$(".diff-wrapper").removeClass("has-comments");b.find(".comments-table tr.row-main").each(function(){var a=$(this).data("context");a&&a.md5&&$(".diff-header-affix \x3e a").filter('[name\x3d"'+a.md5+'"]').closest(".diff-wrapper").addClass("has-comments")});swarm.comments.updateAttributeComments(b);swarm.comments.moveClosedComments(b.find(".comments-wrapper").first());swarm.comments.updateCounts(b);$(".change-tabs .active a").is('[href\x3d"#comments"]')&&
!b.find("table.opened-comments \x3e tbody \x3e tr.row-main").length&&b.find(".comment-add textarea").focus();b.find("table.comments-table \x3e tbody \x3e tr.row-main").each(function(a,b){swarm.comments.renderTaskControls(b)});swarm.comments.renderTaskSummary(a);swarm.comments.applyCommentState($("#comments"));b.trigger($.Event("update"));swarm.mentions.init("main-mentions-wrapper")},updateCounts:function(a){a=$(a);var c=$(a.data("counter-node")),b=a.find(".comments-table.opened-comments tr.row-main").length;
a=a.find(".comments-table.closed-comments tr.row-main").length;var d=swarm.tp("%s archived",null,a);c.html(b).attr("title",d).attr("data-original-title",d);$(".comments-label").each(function(a,b){var c=$(b),h=c.parent().next(),l=h.find(".comments-table.opened-comments tr.row-main").length,h=h.find(".comments-table.closed-comments tr.row-main").length,j=l+h;d=swarm.tp("%s archived",null,h);c.html('\x3ca href\x3d"#" onclick\x3d"return false;"\x3e'+swarm.tpe("%s comment","%s comments",l)+"\x3c/a\x3e").attr("title",
d).attr("data-original-title",d).toggleClass("hidden",0===j)})},updateAttributeComments:function(a){var c=$(a);$.each(["description"],function(a,d){var e=$("."+d+"-comments"),f=null,g=c.find("\x3e .comments-container \x3e table \x3e tbody \x3e tr.row-main").filter(function(){return $(this).data("context").attribute&&$(this).data("context").attribute===d}),h=e.find("\x3e .comments-container"),l=h.is(":visible");h.remove();g.each(function(){var a=swarm.comments.getCommentId(this);f=f||swarm.comments._createCommentWrapper($("#comments").first(),
{attribute:"description"}).appendTo(e);f.find("\x3e .comments-table \x3e tbody").append(c.find(".c"+a+",.c"+a+"-append,.c"+a+"-replies").clone(!0))});swarm.comments.moveClosedComments(e.find("\x3e .comments-container").first());var g=e.find("table.opened-comments tr.row-main").length,j=e.find("table.closed-comments tr.row-main").length,h=g+j,j=swarm.tp("%s archived",null,j);e.find(".comments-label").html('\x3ca href\x3d"#" onclick\x3d"return false;"\x3e'+swarm.tpe("%s comment","%s comments",g)+"\x3c/a\x3e").attr("title",
j).attr("data-original-title",j).toggleClass("hidden",0===h);e.toggleClass("has-comments",0!==h);e.find(".comments-header .comment-form-link").toggleClass("hidden",0!==h);e.find("\x3e .comments-container").toggle(l)})},renderTaskSummary:function(a){var c=$(a),b=c.find("table.opened-comments");a=b.find("tr.task-state-open").length;var d=b.find("tr.task-state-addressed").length,b=b.find("tr.task-state-verified").length;c.find(".comments-wrapper").length||(b=d=a="-");var c=swarm.tpe("Task","Tasks",2),
e=swarm.tpe("View Task","View Tasks",2),f=swarm.tpe("Open Task","Open Tasks",2),g=swarm.tpe("Addressed Task","Addressed Tasks",2),h=swarm.tpe("Verified Task","Verified Tasks",2);$(".task-summary").html($.templates('\x3cdiv\x3e{{\x3etaskText}}\x3cbutton type\x3d"button" class\x3d"bare privileged view-tasks pad0 padw1"aria-label\x3d"{{\x3eviewTaskText}}" title\x3d"{{\x3eviewTaskText}}"\x3e\x3ci class\x3d"icon-list"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"task-totals"\x3e\x3cspan class\x3d"tasks-open {{if open \x3e 0}}has-value{{/if}}" title\x3d"{{\x3eopenTaskText}}" aria-label\x3d"{{\x3eopenTaskText}}"\x3e\x3ci class\x3d"swarm-icon icon-task-open"\x3e\x3c/i\x3e{{\x3eopen}}\x3c/span\x3e\x3cspan class\x3d"tasks-addressed {{if addressed \x3e 0}}has-value{{/if}}" title\x3d"{{\x3eaddressedTaskText}}" aria-label\x3d"{{\x3eaddressedTaskText}}"\x3e\x3ci class\x3d"swarm-icon icon-task-addressed"\x3e\x3c/i\x3e{{\x3eaddressed}}\x3c/span\x3e\x3cspan class\x3d"tasks-verified {{if verified \x3e 0}}has-value{{/if}}" title\x3d"{{\x3everifiedTaskText}}" aria-label\x3d"{{\x3everifiedTaskText}}"\x3e\x3ci class\x3d"swarm-icon icon-task-verified"\x3e\x3c/i\x3e{{\x3everified}}\x3c/span\x3e\x3c/div\x3e').render({open:a,
addressed:d,verified:b,taskText:c,viewTaskText:e,openTaskText:f,addressedTaskText:g,verifiedTaskText:h}))},renderTaskControls:function(a){var c=swarm.comments.getCommentId(a);a=$(a);var b=a.data("task-state");a=a.data("task-transitions");var d=!swarm.user.getAuthenticatedUser();a=$.map(a,function(a,b){return{state:b,css:b.replace(":","-"),label:a}});var e=$.templates('\x3cbutton class\x3d"bare pad0 dropdown-toggle btn-{{:taskState}} {{if disabled}}disabled{{/if}}" title\x3d"{{te:tooltip}}" data-customClass\x3d"task-state-tooltip" data-dropdown-container\x3d"body" data-toggle\x3d"dropdown"\x3e\x3ci class\x3d"swarm-icon icon-task-{{:taskState}}"\x3e\x3c/i\x3e\x3ci class\x3d"caret"\x3e\x3c/i\x3e\x3c/button\x3e\x3cul role\x3d"menu" class\x3d"task-state-menu dropdown-menu pull-right"\x3e{{for taskTransitions}}\x3cli\x3e\x3ca href\x3d"#" data-task-state\x3d"{{:state}}"\x3e\x3ci class\x3d"swarm-icon icon-task-{{:css}}"\x3e\x3c/i\x3e {{\x3elabel}}\x3c/a\x3e\x3c/li\x3e{{/for}}\x3c/ul\x3e').render({taskState:b,
tooltip:function(a){a="comment"===a?"Not a":a;return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()+" Task"}(b),taskTransitions:a,disabled:d});$("tr.c"+c+".row-main").each(function(a,c){$(c).addClass("task-state-"+b).find(".task-state").html(e)})},moveClosedComments:function(a,c){a=$(a);var b=a.find(".closed-comments"),d=a.find("\x3e .opened-comments"),e=0<a.closest(".comments-section").length;if(d.length){b.length||(b=d.clone().toggleClass("opened-comments closed-comments"),b.find("\x3etbody").empty(),
a.prepend('\x3cdiv class\x3d"closed-comments-wrapper"\x3e\x3cdiv role\x3d"button" class\x3d"closed-comments-header center" aria-expanded\x3d"false" tabIndex\x3d"0"\x3e\x3c/div\x3e\x3cdiv class\x3d"closed-comments-body '+(e?"hidden":"collapse")+'"\x3e\x3c/div\x3e\x3c/div\x3e'),a.find(".closed-comments-body").append(b).on("shown hidden",function(a){a.target===this&&($(this).parent().toggleClass("expanded","shown"===a.type),$(this).prev(".closed-comments-header").attr("aria-expanded","shown"===a.type))}),
a.find(".closed-comments-header").on("click",function(a){a.preventDefault();a=$(this).next(".closed-comments-body");var b=e?a.hasClass("hidden"):!a.hasClass("in");e?a.toggleClass("hidden",!b).trigger(b?"shown":"hidden"):a.collapse(b?"show":"hide")}));var f=d.find("\x3e tbody \x3e tr.closed");b.find("\x3e tbody").append(f);b.find(".comments-table").toggleClass("opened-comments",!1);f.find(".btn-close").attr({"data-original-title":swarm.t("Restore"),"aria-label":swarm.t("Restore")});c&&swarm.comments.sortComments(b.find("\x3e tbody \x3e tr"));
f=b.find("\x3e tbody \x3e tr").not(".closed");d.find("\x3e tbody").append(f);d.find(".comments-table").toggleClass("opened-comments",!0);f.find(".btn-close").attr({"data-original-title":swarm.t("Archive"),"aria-label":swarm.t("Archive")});c&&swarm.comments.sortComments(d.find("\x3e tbody \x3e tr"));var f=swarm.query.all("tr.row-main",b),g=swarm.query.all("tr.row-main",d);a.find(".closed-comments-header").html("\x3cstrong\x3e"+f.length+"\x3c/strong\x3e "+swarm.tpe("archived comment","archived comments",
f.length));d.toggleClass("hidden",!g.length);a.find(".closed-comments-wrapper").toggleClass("hidden",!f.length);a.closest(".comments-section").prev().toggleClass("archived-only",!g.length);a.closest(".comments-section").toggleClass("archived-only",!g.length);f=function(a){$(a).find("tbody \x3e tr.row-main").each(function(){var a=$(this),b=a.data("context").content,c=a.closest(".comments-section").prev(".diff-content"),c=c.length&&swarm.comments.getDiffContext(c),d=a.prev().prev().data("context"),
d=d&&d.content,e=a.find(".content-context");e.length&&(c&&JSON.stringify(c)===JSON.stringify(b)?e.hide():d&&JSON.stringify(d)===JSON.stringify(b)?e.hide():0<a.closest(".comment-replies-wrapper").length?e.hide():a.is(".read")?e.hide():e.show())});swarm.comments.stripeReplies(a)};f(d);f(b)}},stripeReplies:function(a,c){$(a).find("\x3e tbody \x3e tr.row-replies \x3e td \x3e .comment-replies \x3e .comments-container").each(function(){var a=$(this);0<a.find("tbody tr").length?(a.removeClass(["odd","even"]).addClass(!c?
"odd":"even"),swarm.comments.stripeReplies(a.find("\x3e table"),!c)):a.find("\x3e table").hide()})},sortComments:function(a){[].sort.call(a,function(a,b){var d=swarm.comments.getCommentId(a)-swarm.comments.getCommentId(b),e=swarm.comments.getCommentRowOrder(a)-swarm.comments.getCommentRowOrder(b);return d||e}).appendTo(a.parent())},getCommentRowOrder:function(a){return(a=$(a).attr("class").match(/r([0-9]+)/))&&parseInt(a[1],10)},getCommentId:function(a){return(a=$(a).attr("class").match(/c([0-9]+)/))&&
parseInt(a[1],10)},getReplyLevel:function(a){return(a=$(a).attr("class").match(/l([0-9]+)/))&&parseInt(a[1],10)},add:function(a,c){a=$(a);swarm.form.post("/comments/add",a,function(b){if(b.isValid){void 0===c&&(c=!1);var d=a.closest(".comments-container.comments-wrapper").parent();swarm.comments.setFormState(a,null);swarm.comments.update(a.closest(".comments-container.comments-wrapper").data("comment-container"),b.comments);var e=!b.comment.context.line?d:$(".diff-body:visible");if(0!==a.closest(".comment-replies-wrapper").length){var d=
$(window),e=e.find(".c"+b.comment.id+".row-main"),f,g,h,l,j=e.closest(".comment-replies-wrapper"),k={};0<j.length&&(f=d.scrollTop(),g=d.scrollLeft(),h=g+d.width(),l=f+d.height(),k=j.offset(),k.bottom=k.top+j.outerHeight(),k.right=k.top+j.outerWidth(),(l<k.bottom||f>k.top||g>k.right||h<k.left)&&$("html,body").animate({scrollTop:k.bottom-d.height()},"slow","linear"),e.nextAll("tr").addBack().animateFlash())}if(0<b.delayedSent||!0===c)swarm.alert.popup(swarm.tpe("Sending a notification for %s comment",
"Sending a notification for %s comments",void 0===b.delayedSent?1:b.delayedSent),"success")}},null,function(a){a=$(a).serializeArray();$(".version-specific-comments").is(".active")&&a.push({name:"limitVersion",value:"1"});return a})},edit:function(a,c){a=$(a);var b=a.closest("tr.row-main"),d=swarm.comments.getCommentId(b);swarm.form.post("/comments/edit/"+d,a,function(d){if(d.isValid&&(void 0===c&&(c=!1),swarm.comments.setFormState(a,null),swarm.comments.update(b.closest(".comments-wrapper").data("comment-container"),
d.comments),0<d.delayedSent||!0===c))swarm.alert.popup(swarm.tpe("Sending a notification for %s comment","Sending a notification for %s comments",void 0===d.delayedSent?1:d.delayedSent),"success")},null,function(a){a=$(a).serializeArray();a.push({name:"renderComments",value:"true"});$(".version-specific-comments").is(".active")&&a.push({name:"limitVersion",value:"1"});$.grep(a,function(a){return"attachments[]"===a.name}).length||a.push({name:"attachments",value:""});return a})},initAttributeComments:function(){$.each(["description"],
function(a,c){var b=$("."+c+"-comments");b.find(".comment-form-link").append($.templates('{{if user}}\x3ca href\x3d"#" class\x3d"add-comment" onclick\x3d"return false;"\x3e{{te:"Add a Comment"}}\x3c/a\x3e{{else}}\x3ca href\x3d"{{url:"/login"}}" class\x3d"login" onclick\x3d"swarm.user.login(); return false;"\x3e{{te:"Log in to comment"}}\x3c/a\x3e{{/if}}').render({user:swarm.user.getAuthenticatedUser()})).addClass("hidden");$(document).on("swarm-login",function(){b.find(".comment-form-link").html('\x3ca href\x3d"#" class\x3d"add-comment"\x3e'+
swarm.te("Add a Comment")+"\x3c/a\x3e")});b.on("click.add.description.comment.line",".comments-header",function(){if(swarm.user.getAuthenticatedUser()||b.hasClass("has-comments")){var a=b.find(".comments-wrapper");a.is(":visible")&&a.has(".comments-table").length?a.fadeOut({complete:function(){!b.find(".row-main").length&&!b.find(".comment-add textarea").val()&&b.removeClass("has-comments")}}).trigger("hide"):(a.length||(a=swarm.comments._createCommentWrapper($("#comments").first(),{attribute:"description"}),
b.append(a).addClass("has-comments")),a.find(".has-comments").length||(b.addClass("has-comments"),swarm.comments.showAddForm(a)),a.fadeIn())}})})},initDiff:function(a){$(".diff-wrapper").on("load",function(){var c=$(this);c.find(".diff-footer").append($.templates('\x3cdiv class\x3d"file-comments-handle"\x3e\x3ci class\x3d"icon-comment"\x3e\x3c/i\x3e\x3cspan class\x3d"comments-label variable hidden"\x3e\x3c/span\x3e\x3cspan class\x3d"comment-form-link variable"\x3e{{if user}}\x3ca href\x3d"#" class\x3d"add-comment" onclick\x3d"return false;"\x3e{{te:"Add a Comment"}}\x3c/a\x3e{{else}}\x3ca href\x3d"{{url:"/login"}}" class\x3d"login" onclick\x3d"swarm.user.login(); return false;"\x3e{{te:"Log in to comment"}}\x3c/a\x3e{{/if}}\x3c/span\x3e\x3c/div\x3e').render({user:swarm.user.getAuthenticatedUser()}));
c.data("comment-container")||(c.data("comment-container",a),$(a).on("update",function(){swarm.comments.updateDiff(c)}));swarm.comments.updateDiff(c)});$(document).on("swarm-login",function(){$(".diff-footer").find(".file-comments-handle .comment-form-link").html('\x3ca href\x3d"#" class\x3d"add-comment"\x3e'+swarm.te("Add a Comment")+"\x3c/a\x3e")});$(".diff-wrapper").on("click.comments.login",".comment-form-link a.login",function(){var a=$(this).closest(".comments-section");a.length||(a=$(this).closest(".diff-footer").find(".file-comments-handle"));
swarm.comments.setSectionState(a,{pending:{login:!0}})});$(document).on("hidden.comments.login",".login-dialog",function(){swarm.user.getAuthenticatedUser()||$(".diff-wrapper").each(function(){swarm.comments.clearPendingLogin(this)})});$(".diff-wrapper").on("click.comment.line","tr.diff, .file-comments-handle",function(a){var b=window.getSelection(),d=$(b.anchorNode).add(b.focusNode);if(!(0!==a.button||!b.isCollapsed&&d.closest(".diff-body").length))if(b=$(this),!b.hasClass("diff-type-meta")&&!b.hasClass("line-pad")&&
(swarm.user.getAuthenticatedUser()||!b.hasClass("file-comments-handle")||b.hasClass("has-comments"))){a=$().add(b);if(d=b.hasClass("diff")){var e=b.closest(".diff-sideways"),f=$(swarm.diff.getPairedRow(b));a=a.add(f);!b.is(".diff-type-delete")&&e.is(".left-side")&&(b=f)}e=b.next(".comments-section");if(e.is(":visible")&&e.has(".comments-wrapper").length){var g=a.next(".comments-section");g.fadeOut({complete:function(){$(this).trigger("hidden");!g.find(".has-comments").length&&(!g.find(".comment-add textarea").val()&&
!g.find(".drop-controls div").length)&&($(this).prev().removeClass("has-comments"),$(this).remove())}}).trigger("hide")}else b=d?swarm.comments.getLineCommentWrapper(b):swarm.comments.getFileCommentWrapper(b.closest(".diff-wrapper")),a.next(".comments-section").show().trigger("show"),a.filter(".archived-only").next(".comments-section").find(".closed-comments-body").removeClass("hidden").trigger("shown"),b.find(".has-comments").length?swarm.comments.sizeCommentRowForDiff(b.closest(".comments-row")):
swarm.comments.showAddForm(b)}});$(".diff-wrapper").on("focusout.comment",".comments-section",function(){var a=$(this),b=a.hasClass("comments-row");setTimeout(function(){var d=b&&$(swarm.diff.getPairedRow(a)),e=document.activeElement,f=swarm.comments.getSectionState(a)||{},f=f.pending&&f.pending.login,g=a.is(e),h=g||a.find(e).length,l=a.find("textarea").val(),j=a.find(".drop-controls div").length,k=a.find(".comments-table tr").length;if(d&&d.length)var m=swarm.comments.getSectionState(d)||{},f=f||
m.pending&&m.pending.login,g=g||d.is(e),h=h||d.find(e).length,l=l||d.find("textarea").val(),j=j||d.find(".drop-controls div").length,k=k||d.find(".comments-table tr").length;!f&&(!h&&!l&&!k&&!j)&&a.add(d||null).fadeOut({complete:function(){$(this).prev().removeClass("has-comments");$(this).trigger("hidden");$(this).remove()}}).trigger("hide")},500)});$(".diff-wrapper").on("show.comment.row hide.comment.row",".comments-section",function(a){$(a.target).is(".comments-section")&&swarm.comments.setSectionState($(this),
{collapsed:"hide"===a.type})});$(".diff-wrapper").on("show.comment.state.inline",".diff-inline",function(a){$(a.target).is(".diff-inline")&&swarm.comments.applyCommentState($(this).closest(".diff-wrapper"))});$(".diff-wrapper").on("textarea-resize",".comment-form textarea",function(){swarm.comments.sizeCommentRowForDiff($(this).closest(".comments-row"))});$(".diff-wrapper").on("form-errors",".comment-add form, form.comment-edit",function(){swarm.comments.sizeCommentRowForDiff($(this).closest(".comments-row"))});
$(".diff-wrapper").on("shown.closed.comments, hidden.closed.comments",".comments-wrapper .closed-comments-body",function(a){this===a.target&&swarm.comments.sizeCommentRowForDiff($(this).closest(".comments-row"))});$(".diff-wrapper").on("show.comment.sideways",".diff-sideways.left-side",function(a){$(a.target).is(".diff-sideways.left-side")&&swarm.comments.updateSidewaysDiff($(this).closest(".diff-wrapper"))});$(".diff-wrapper").on("show-full show-more-context",function(){swarm.comments.updateDiff(this)});
$(".diff-wrapper").on("diff-resize",function(){swarm.comments.sizeForDiff(this)});swarm.mentions.init("main-mentions-wrapper")},updateDiff:function(a){a=$(a);var c=a.data("comment-container"),b=a.data("file").depotFile,d=a.find(".diff-inline, .diff-footer"),e=function(a){var b=swarm.comments.getCommentId(a);a=a.add(a.nextAll(".c"+b+"-append,.c"+b+"-replies")).clone(!0);a.find("img.loaded").removeClass("loaded");a.find(".context").remove();a.find(".timeago").formatTimestamp();0===a.find("form").closest("tr.row-replies").length&&
a.find("form").remove();a.removeClass("edit-mode").next().removeClass("edit-mode");return a};if($("#files.active").length){d.find("tr.has-comments, .file-comments-handle.has-comments").removeClass("has-comments");d.find(".comments-cell").empty();var f;$(c).find(".comments-wrapper, .comments-wrapper .closed-comments-body").find("\x3e .comments-table \x3e tbody \x3e tr.row-main").each(function(){var c=$(this),d=c.data("context"),g=(d.leftLine?".ll"+d.leftLine:"")+(d.rightLine?".lr"+d.rightLine:"");
if(d.file!==b)return!0;if(!g){var h=e(c);f=f||swarm.comments.getFileCommentWrapper(a);f.find("\x3e .comments-table").addClass("has-comments").find("\x3e tbody").append(h);swarm.mentions.init("mentions-file-add-form");return!0}a.find(".diff-inline").each(function(){var b=$(this).find(g);b.length||(b=d.leftLine?$(this).find(".ll"+d.leftLine):$(this).find(".lr"+d.rightLine));b=a.hasClass("show-full")?b.not(".additional-context-content"):b.not(".diff-full-context");if(!b.length)return!0;var f;f=swarm.comments.getDiffContext(b);
JSON.stringify(f)!==JSON.stringify(d.content)&&(d.content&&3<=d.content.length)&&(b=(f=swarm.comments.findDiffContent(d.content,this))||b);f=e(c);swarm.comments.getLineCommentWrapper(b).find("\x3e table.comments-table").addClass("has-comments").find("\x3e tbody").append(f)})});d.find(".comments-section").not(":has(.has-comments)").remove();if(0!==d.find(".comments-section").length||swarm.comments.hasPending(a)){a.find(".comments-wrapper").each(function(){swarm.comments.moveClosedComments(this)});
var d=a.find(".diff-footer .comments-section .opened-comments tr.row-main").length,g=a.find(".diff-footer .comments-section .closed-comments tr.row-main").length,h=g+d,g=swarm.tp("%s archived",null,g);a.find(".diff-footer .file-comments-handle .comments-label").html('\x3ca href\x3d"#" onclick\x3d"return false;"\x3e'+swarm.tpe("%s comment","%s comments",d)+"\x3c/a\x3e").attr("title",g).attr("data-original-title",g).toggleClass("hidden",0===h);a.find(".diff-footer .file-comments-handle .comment-form-link").toggleClass("hidden",
0!==h);!1===$("body").data("diff-preferences").show_comments_in_files?a.find(".comments-section").hide():a.find(".comments-section.archived-only").hide();"sideways"===swarm.diff.getDiffMode(a)?swarm.diff.showSideways(a.find(".btn-sideways"),!0):(a.find(".diff-sideways").remove(),swarm.comments.applyCommentState(a));$(c).find(".comments-wrapper \x3e .comments-table \x3e tbody \x3e tr").length&&a.data("comments-loaded",!0).trigger($.Event("comments-loaded"));swarm.comments.clearPendingLogin(a)}}else $('.change-tabs a[href\x3d"#files"]').off("shown.comments.update"),
$('.change-tabs a[href\x3d"#files"]').one("shown.comments.update",function(){swarm.comments.updateDiff(a)})},hasPending:function(a){if(a instanceof window.jQuery||a instanceof window.HTMLElement){a=$(a);if(a.hasClass("diff-wrapper")){var c=!1;$.each(a.data("comment-state")||{},function(a,b){c=swarm.comments.hasPending(b);return!c});return c}return swarm.comments.hasPending(swarm.comments.getSectionState(a))}var b=a.pending&&!!a.pending.body,d=a.pending&&a.pending.uploaders&&!!a.pending.uploaders.length;
return a.pending&&!!a.pending.login||b||d},sizeForDiff:function(a){a=$(a);a.each(function(){var a=$(this),b=a.find(".diff-details");if(a.data("diff-loaded")&&!b.hasClass("in"))b.off("show.size.comments").on("show.size.comments",function(d){b.is(d.target)&&(b.off("show.size.comments"),setTimeout(function(){swarm.comments.sizeForDiff(a)},0))})});a.find(".diff-details.in .diff-body").each(function(){var a=$(this);if(a.filter(".diff-sideways").not(".left-side").length&&"none"!==$(a.data("diff-pair")).css("display"))return!0;
a.find(".comments-row").filter(":visible").each(function(){swarm.comments.sizeCommentRowForDiff(this)})})},sizeCommentRowForDiff:function(a){a=$(a);var c=a.closest(".diff-body"),b=a.find(".comments-wrapper").outerHeight();if(c.is(".diff-sideways")){var c=swarm.diff.getPairedRow(a),d=$(c).find(".comments-wrapper").outerHeight();a=a.add(c);b=Math.max(!b?0:b,!d?0:d)}a.find("\x3etd").height(b)},updateSidewaysDiff:function(a){a=$(a);a.find(".comments-section").length?(a.find(".diff-sideways.left-side  tr.comments-row.diff-type-add").remove(),
a.find(".diff-sideways.left-side  tr.comments-row.diff-type-same").remove(),a.find(".diff-sideways.right-side tr.comments-row.diff-type-delete").remove(),a.find(".diff-sideways tr.comments-row").each(function(){for(var a=$(this).prev();a.hasClass("line-pad");)a=$(a).prev();$(this).insertAfter(a)}),a.find(".diff-sideways.left-side").each(function(){var a,b,d,e,f,g=$(this).find("tr.diff"),h=$($(this).data("diff-pair")).find("tr.diff");for(a=0;a<g.length;a++)b=$(g[a].nextSibling),d=$(h.length<=a?null:
h[a].nextSibling),e=b.hasClass("comments-row"),f=d.hasClass("comments-row"),e&&!f&&(d=b.clone(),d.find(".comments-cell").empty(),d.insertAfter(h.eq(a))),f&&!e&&(b=d.clone(),b.find(".comments-cell").empty(),b.insertAfter(g.eq(a))),e&&(f&&!0===$("body").data("diff-preferences").show_comments_in_files)&&(b=b.add(d).filter(".archived-only"),1===b.length&&b.show())}),swarm.comments.applyCommentState(a)):swarm.comments.hasPending(a)&&swarm.comments.applyCommentState(a)},_createCommentWrapper:function(a,
c){a=$(a);var b=$('\x3cdiv class\x3d"comments-container comments-wrapper border-box variable"\x3e \x3ctable class\x3d"table opened-comments comments-table"\x3e  \x3ctbody\x3e\x3c/tbody\x3e \x3c/table\x3e\x3c/div\x3e'),d=a.find(".comment-add").first().clone(),e=d.find("form");c=$.extend(c,a.data("context"));e.find("input[name\x3dcontext]").val(JSON.stringify(c));e.find("textarea").val("");e.find(".drop-controls").html("");d.find("img.loaded").removeClass("loaded");b.append(d);swarm.form.clearErrors(e,
!0);swarm.form.checkInvalid(e);b.data("commentContainer",a);return b},getFileCommentWrapper:function(a){a=$(a);var c=a.data("comment-container"),b=a.find(".diff-footer"),d=b.find(".file-comments-handle"),b=b.find(".file-comments-section"),e=b.find(".comments-wrapper");b.length||(b=$('\x3cdiv class\x3d"file-comments-section comments-section comments-cell" tabIndex\x3d"0" /\x3e').insertAfter(d));e.length||(a=a.data("file"),e=swarm.comments._createCommentWrapper(c,{file:a.depotFile,type:a.type}).appendTo(b),
e.find(".btn").addClass("btn-small"));d.addClass("has-comments");return e},getLineCommentWrapper:function(a){var c=$(a).closest(".diff-wrapper").data("comment-container"),b=$(a).next("tr.comments-row"),d=b.find(".comments-cell \x3e .comments-container");b.length||(b=$(a).attr("class").match(/diff-(type|full)-[a-z]+/gi).join(" "),b=$(a).clone().insertAfter(a).attr("class","comments-section comments-row "+b),b.find(".line-value").attr("class","comments-cell"),b.find(".line-num").attr("data-num",""),
b.find("td").empty());if(!d.length){var d=swarm.diff.getLineNumber(a),e=$(a).closest(".diff-wrapper").data("file"),d=swarm.comments._createCommentWrapper(c,{file:e.depotFile,leftLine:d.left,rightLine:d.right,content:swarm.comments.getDiffContext(a),type:e.type}).appendTo(b.find(".comments-cell")),c=d.find(".comment-add");c.find("table").length&&($("\x3ca /\x3e",{href:"#",text:swarm.t("Add a Comment")}).click(function(){swarm.comments.showAddForm($(this).closest(".comments-wrapper"));return!1}).appendTo($("\x3cdiv /\x3e",
{"class":"comment-form-link"}).appendTo(c)),c.find(".btn").addClass("btn-small"),(c.find("textarea").val()?c.find(".comment-form-link"):c.find("table")).addClass("hidden"));$(a).addClass("has-comments")}(a=swarm.diff.getPairedRow(a))&&!$(a).next(".comments-row").length&&b.clone().insertAfter(a).find(".comments-cell").empty();return d},applyPendingUploaders:function(a,c){c&&(a.find(".can-attach").dropZone({uploaderOptions:{extraData:{_csrf:$("body").data("csrf")},onStart:swarm.comments.uploaderCallback,
onRemove:swarm.comments.uploaderCallback}}),$.each(c,function(b,c){a.find(".can-attach").data("dropZone").addUploader(c)}))},applyCommentState:function(a){if(a.is(".diff-wrapper"))swarm.comments.applyDiffCommentState(a);else if(swarm.comments.applyEditCommentState(a),swarm.comments.applyReplyCommentState(a),a=a.find("\x3e .comments-wrapper \x3e .comment-add form"),a.length){var c=swarm.comments.getFormState(a);swarm.comments.applyPendingUploaders(a,c.uploaders);a.find("textarea").val(c.body||"");
swarm.form.checkInvalid(a)}},applyDiffCommentState:function(a){var c=!1===$("body").data("diff-preferences").show_comments_in_files,b=$(a).find(".diff-footer"),d=swarm.diff.getActiveDiffBody(a);d.length&&($.each($(a).data("comment-state")||{},function(e,f){f=$.extend({collapsed:c},f);b.find(e).each(function(){var b=swarm.comments.hasPending(f);if(!b&&!$(this).next(".comments-section").find(".has-comments").length)$(this).removeClass("has-comments").next(".comments-section").remove();else{var c=swarm.comments.getFileCommentWrapper(a),
d=f.pending&&f.pending.body||"";c.find("\x3e .comment-add textarea").val(d).trigger("change");c.closest(".comments-section").toggle(!f.collapsed);swarm.comments.applyPendingUploaders(c.find(".comment-add form"),f.pending&&f.pending.uploaders||[]);!f.collapsed&&b&&swarm.comments.showAddForm(c)}});d.find(e).each(function(){var a=$(this).closest(".diff-body"),b=$(this).hasClass("diff-type-delete");if(!(a.hasClass("left-side")&&!b||a.hasClass("right-side")&&b)){var a=swarm.diff.getPairedRow(this),c=swarm.comments.getSectionState(a)||
f,b=swarm.comments.hasPending(f),d=swarm.comments.hasPending(c),e=b||0!==$(this).next().find(".has-comments").length,d=d||0!==$(a).next().find(".has-comments").length;if(!e&&!d)$(this).removeClass("has-comments").next(".comments-row").remove(),$(a).removeClass("has-comments").next(".comments-row").remove();else{var e=swarm.comments.getLineCommentWrapper(this),m=f.pending&&f.pending.body||"";m&&e.find("\x3e.comment-add textarea").val(m).trigger("change");swarm.comments.applyPendingUploaders(e.find(".comment-add form"),
f.pending&&f.pending.uploaders||[]);c=!f.collapsed||d&&!c.collapsed;e.closest(".comments-row").toggle(c);$(a).next(".comments-row").toggle(c);c&&b&&swarm.comments.showAddForm(e)}}});swarm.comments.applyEditCommentState(d);swarm.comments.applyEditCommentState(b)}),swarm.comments.sizeForDiff(a))},applyEditCommentState:function(a){var c=$("#comments").data("comment-state")||{};$.each(c,function(b){b=a.find(".row-main.c"+b);b.length&&swarm.comments.showEditForm(b)})},applyReplyCommentState:function(a){var c=
$("#comments").data("comment-state")||{};$.each(c,function(b){b=a.find("."+b).closest(".row-replies");b.length&&swarm.comments.showReplyForm(b)})},clearPendingLogin:function(a){$.each($(a).data("comment-state")||{},function(c,b){b.pending&&b.pending.login&&swarm.comments.setState(a,c,{pending:{login:null}})})},setState:function(a,c,b){if(c){a=$(a);var d=a.data("comment-state")||{};null===b?delete d[c]:d[c]=$.extend(!0,d[c],b);a.data("comment-state",d)}},setSectionState:function(a,c){$(a).each(function(){var a=
$(this);swarm.comments.setState(a.closest(".diff-wrapper"),swarm.comments.getSectionKey(a),c)})},setFormState:function(a,c){a=$(a);var b=a.closest(".comments-section"),d=a.closest(".row-replies");a.is(".comment-edit")?swarm.comments.setState($("#comments"),swarm.comments.getCommentId(a.closest(".row-main")),c):d.length?swarm.comments.setState($("#comments"),"replies-to-"+swarm.comments.getCommentId(d),c):b.length?swarm.comments.setSectionState(b,{pending:c}):swarm.comments.setState($("#comments"),
"add",c)},getFormState:function(a){a=$(a);var c;c=a.closest(".comments-section");var b=a.closest(".row-replies");a.is(".comment-edit")?(c=$("#comments").data("comment-state")||{},c=c[swarm.comments.getCommentId(a.closest(".row-main"))]):b.length?(c=$("#comments").data("comment-state")||{},c=c["replies-to-"+swarm.comments.getCommentId(b)]):c.length?(c=swarm.comments.getSectionState(c)||{},c=c.pending):(c=$("#comments").data("comment-state")||{},c=c.add);return c||{}},getSectionState:function(a){if($(a).length){var c=
{collapsed:!1===$("body").data("diff-preferences").show_comments_in_files},b=$(a).closest(".diff-wrapper");a=swarm.comments.getSectionKey(a);b=b.data("comment-state")||{};return a&&$.extend(c,b[a])}},getSectionKey:function(a){var c;a=$(a);if(a.hasClass("comments-row"))a=a.prev(),c=a.length?swarm.diff.getLineSelector(a):null;else if(a.hasClass("diff"))c=swarm.diff.getLineSelector(a);else if(a.hasClass("file-comments-section")||a.hasClass("file-comments-handle"))c=".file-comments-handle";return c},
getDiffContext:function(a){a=$(a).closest(".diff-wrapper").find(".diff-inline.ws").find(swarm.diff.getLineSelector(a));for(var c=[];5>c.length;){if(a.is(".diff-content"))c.unshift(a.find(".line-value").text().slice(0,256));else if(!a.is(".comments-row"))break;a=a.prev()}return c},findDiffContent:function(a,c){var b=!1;$(c).find(".diff-content .line-value").each(function(){if(a[a.length-1]===$(this).text().slice(0,256)){var c=$(this).closest("tr"),e=swarm.comments.getDiffContext(c);if(JSON.stringify(e)===
JSON.stringify(a))return b=c,!1}});return b},showAddForm:function(a){a=$(a);swarm.comments.hideUnchangedForms(a);a.find(".comment-add table").length&&(a.find(".comment-add table").toggleClass("hidden",!1),a.find("\x3e .comment-add .comment-form-link").toggleClass("hidden",!0),a.find("textarea").textareaResize());swarm.comments.sizeForDiff(a.closest(".diff-wrapper"));var c=a.find(".comment-add textarea");setTimeout(function(){c.focus()},0);swarm.mentions.init("mentions-add-form")},showReplyForm:function(a){if(0===
a.find(".comment-replies-wrapper").length){var c=a.closest(".comments-container"),c=1+swarm.comments.getReplyLevel(c);a.find(".comment-replies").html('\x3cdiv class\x3d"comments-container comment-replies-wrapper variable l'+c+(c%2?" odd":" even")+'"\x3e\x3c/div\x3e')}var c=swarm.comments.getCommentId(a),c=swarm.comments._createCommentWrapper($("div.tab-pane#comments div.comments-wrapper").first(),$.extend($(".c"+c+".row-main").data("context"),{comment:c})).removeClass("comments-container").attr("tabindex",
"-1"),b=c.find("form"),d=b.find("textarea");c.find(".comment-form-link").remove();a.find("\x3e td \x3e .comment-replies \x3e .comment-replies-wrapper").prepend(c);if(d.length){a=swarm.comments.getFormState(b);var e=a.uploaders||$(".attachment").map(function(){return $(this).data("attachment")}),f=b.find(".can-attach").data("dropZone");d.val(a.body);f&&$.each(e,function(a,b){f.addUploader(b)});swarm.form.checkInvalid(b)}swarm.comments.showAddForm(c)},showEditForm:function(a){if(!a.find("form.comment-edit").length){var c=
a.closest(".comments-wrapper"),b=a.find(".comment-body").outerHeight(),d=swarm.comments.prepareEditForm(a),e=d.find("textarea"),f=d.find(".can-attach").data("dropZone");swarm.comments.hideUnchangedForms(c);a.addClass("edit-mode").next().addClass("edit-mode");e.val(a.data("body"));a.find("td:last-child()").append(d);e.height(b+(e.outerHeight()-e.height()));b=swarm.comments.getFormState(d);a=b.uploaders||a.find(".attachment").map(function(){return $(this).data("attachment")});e.val(b.body||e.val());
f&&$.each(a,function(a,b){f.addUploader(b)});swarm.form.checkInvalid(d);swarm.comments.sizeForDiff(c.closest(".diff-wrapper"));setTimeout(function(){var a=e.val();e.focus().val("").val(a).scrollTop(e.prop("scrollHeight")-e.height())},0);swarm.mentions.init("mentions-edit-form")}},hideEditForm:function(a){a.removeClass("edit-mode").next().removeClass("edit-mode");a.find("form").remove();swarm.comments.sizeCommentRowForDiff(a.closest(".comments-row"))},prepareEditForm:function(a){var c=a.closest(".comments-wrapper").find("\x3e .comment-add form").clone(),
b=c.find(".btn-primary");c.attr("onsubmit","");c.find("textarea").val("");c.find(".upload-controls").remove();c.addClass("comment-edit comment-form");c.find('textarea[name\x3d"body"]').attr("placeholder",swarm.te("Edit Comment"));c.find("textarea").textareaResize();c.find(".can-attach").dropZone({uploaderOptions:{extraData:{_csrf:$("body").data("csrf")},onStart:swarm.comments.uploaderCallback,onRemove:swarm.comments.uploaderCallback}});c.find("label.flag-task").remove();b.text(swarm.te("Save")).removeClass("disabled").prop("disabled",
!1);c.on("submit",function(a){a.preventDefault();swarm.comments.edit(this)});$($.templates('\x3cbutton type\x3d"reset" class\x3d"btn btn-default btn-cancel"\x3e{{te:"Cancel"}}\x3c/button\x3e').render()).insertAfter(b).on("click",function(){swarm.comments.setFormState(a.find("form"),null);swarm.comments.hideEditForm(a)});a.closest(".diff-wrapper").length&&c.find(".btn").addClass("btn-small");return c},hideUnchangedForms:function(a){a.closest(".diff-wrapper").find(".comments-wrapper").each(function(){!$(this).find(".comment-add textarea").val()&&
!$(this).find(".upload-controls").length&&($(this).find(".comment-add table").toggleClass("hidden",!0),$(this).find("\x3e .comment-add .comment-form-link").toggleClass("hidden",!1));$(this).find(".comment-edit").each(function(){var a=$(this),b=$.deparam(a.serialize()),a=a.closest(".row-main");if(a.data("body")===b.body){var d=a.find(".attachment").map(function(){return String($(this).data("attachment").id)});JSON.stringify(d.toArray())===JSON.stringify(b.attachments||[])&&swarm.comments.hideEditForm(a)}})})},
toggleDiffComments:function(a){$(a).toggleClass("active");var c=$(a).is(".active"),b=$([null]),d=$([null]);a=swarm.query.all(".diff-wrapper .comments-section").filter(function(){b[0]=this;if(c&&(b.hasClass("archived-only")||!b.find("tr").length))if(d[0]=swarm.diff.getPairedRow(this),!d[0]||d.hasClass("archived-only")||!d.find("tr").length)return!1;return b.toggle(c).trigger(c?"show":"hide")&&!0});swarm.comments.sizeForDiff(a.closest(".diff-wrapper"))},loadTasks:function(){if(!swarm.comments._loadingTasks){var a=
$("table.tasks"),c=a.find("tbody");c.empty();c.append('\x3ctr class\x3d"loading"\x3e\x3ctd colspan\x3d"5"\x3e\x3cspan class\x3d"loading animate muted"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e");swarm.comments._loadingTasks=$.ajax({url:"/comments/"+a.data("topic"),data:{format:"json",tasksOnly:!0,user:a.data("user"),taskStates:[a.data("state")],ignoreArchived:!0,max:1E3,limitVersion:$(".version-specific-comments").is(".active")?1:0,context:$("#comments").data("context")},dataType:"json",
success:function(b){c.find(".loading").remove();a.data("tasks",b.comments);swarm.comments.refreshTasks(a);a.trigger("loaded");setTimeout(function(){swarm.comments._loadingTasks=!1},500)}})}},refreshTasks:function(a){var c=$(a).find("thead"),b=$(a).find("tbody"),d=a.data("tasks.fields"),e=a.data("tasks");c.find("tr").empty();$.each(d,function(a,b){c.find("tr").append($.templates('\x3cth data-field\x3d"{{\x3efield}}"\x3e{{\x3ecaption}}\x3c/th\x3e').render({field:a,caption:b}))});b.empty();$.each(e,
function(){var a=this,c="",e;$.each(d,function(b){var d="body"===b?' class\x3d"description"':"",e="taskState"===b?swarm.te(a[b].charAt(0).toUpperCase()+a[b].slice(1)):a[b];if("user"===b){var h=a.userFullName,e=a[b];c+=$.templates('\x3ctd{{:cl}}\x3e\x3cspan data-reporter\x3d"{{\x3evalue}}" title\x3d"{{\x3efullname}}"\x3e{{\x3evalue}}\x3c/span\x3e\x3c/td\x3e').render({cl:d,fullname:h,value:e})}else c+=$.templates("\x3ctd{{:cl}}\x3e{{\x3evalue}}\x3c/td\x3e").render({cl:d,value:e})});e=$("\x3ctr\x3e"+
c+"\x3c/tr\x3e");b.append(e);e.data("id",a.id);e.data("url",a.url)});a=$(a).data("user");b.find("tr").length||b.append($.templates('\x3ctr class\x3d"no-tasks"\x3e\x3ctd colspan\x3d"{{\x3ecount}}"\x3e\x3cdiv class\x3d"alert border-box pad3"\x3e{{if user}}'+swarm.te("No matching tasks")+".{{else}}"+swarm.te("No tasks")+".{{/if}}\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e").render({count:Object.keys(d).length,user:a}));b.find(".description").expander({slicePoint:70})},toggleTaskFilter:function(a){swarm.comments._loadingTasks||
($(a).toggleClass("active"),$(a).closest(".btn-group.group-radio").find(".btn-filter").not(a).removeClass("active"),swarm.comments.applyTaskFilters())},applyTaskFilters:function(){var a={},c=$(".modal.view-tasks"),b=$("table.tasks");c.find(".btn-filter.active").each(function(){var b=$(this),c=b.closest(".btn-group"),c=b.data("filterKey")||c.data("filterKey"),b=b.data("filterValue");c&&""!==b&&(a.hasOwnProperty(c)?($.isArray(a[c])||(a[c]=[a[c]]),a[c].push(b)):a[c]=b)});a.state?b.data("state",a.state):
b.removeData("state");swarm.comments.loadTasks()},openViewTasksDialog:function(a,c){$(".modal.view-tasks").remove();var b=$($.templates.viewTasksDialog.render()).appendTo("body"),d=b.find(".tasks-browser"),e=b.find(".reporter-multipicker"),f=$("table.tasks"),g={taskState:swarm.te("Status"),user:swarm.te("Reporter"),body:swarm.te("Description")};f.data("tasks.fields",g);var h=function(){b.find(".btn.btn-select").prop("disabled",!b.find(".tasks-browser tr.selected").length)};d.on("click.task.select",
"tr",function(a){!$(a.target).is("a")&&!$(this).closest("thead").length&&(a=$(this),d.find("tr.selected").not(a).removeClass("selected"),a.toggleClass("selected"),h())});d.dblclick(function(a){a=$(a.target).closest("tr");a.length&&"function"===typeof c&&c(a,b)});d.on("loaded","table.tasks",function(){h()});b.find(".btn.btn-select").on("click",function(a){a.preventDefault();a=b.find(".tasks-browser tr.selected");a.length&&"function"===typeof c&&c(a,b)});e.userMultiPicker({onSelect:function(){var a=
this.typeahead.$menu.find(".active");a.length&&(a=a.data("value").id,e.val(a),f.data("user",a),swarm.comments.loadTasks())}});$(".view-tasks .btn-filter").on("click.tasks.filter",function(a){a.preventDefault();swarm.comments.toggleTaskFilter(this)});$("table.tasks.sortable thead tr").sortable({containerSelector:"tr",itemSelector:"th",placeholder:'\x3cth class\x3d"placeholder"\x3e\x3c/th\x3e',vertical:!1,onDrop:function(a,b,c){c(a);b=a.closest("table");a=a.parent().find("th").map(function(){return $(this).data("field")}).get();
var d=b.data("tasks.fields");g={};$.each(a,function(){g[this]=d[this]});b.data("tasks.fields",g);swarm.comments.refreshTasks(b);b.find("tbody").removeClass("sorting")},onDragStart:function(a,b,c){a.appendTo(a.parent());c(a);a.closest("table").find("tbody").addClass("sorting")},onDrag:function(a,b){a.css({left:b.left+"px",top:a.closest("tr").top+"px"})}});b.on("shown",function(a){a.target===this&&$(this).find(".reporters input.reporter-multipicker").focus()});b.on("hidden",function(a){a.target===this&&
$(this).remove()});swarm.modal.show(b);f.data("topic",a);swarm.comments.loadTasks()}};(function(b){var f=function(a){b.extend(this,f.defaults,a);this.getControls();this.isExistingFile()?this.rebuildControls():this.upload();this.onStart(b.Event("start",{target:this}))};f.defaults={file:null,maxSize:null,uploadUrl:null,controlsContainer:null,extraData:null,onStart:b.noop,onRemove:b.noop};f.prototype={uploaded:null,response:null,controls:null,isExistingFile:function(){return!(this.file instanceof window.File)},isRemoved:function(){return this.controls&&this.controls.find("input").prop("disabled")?
!0:!1},upload:function(){this.uploaded=0;if(this.file.size>this.maxSize)return this.errorBar(this.getControls(),swarm.te("File too large")+" (\x3e"+(1024>this.maxSize?this.maxSize+"B":this.maxSize<Math.pow(1024,2)?Math.round(this.maxSize/1024)+"KB":Math.round(this.maxSize/Math.pow(1024,2))+"MB")+")");var a=new FormData;a.append("file",this.file);a.append("name",this.file.name);b.each(this.extraData||{},function(c,b){a.append(c,b)});var c=new XMLHttpRequest;this.attachProgressHandler(c);this.attachLoadHandler(c);
this.attachErrorHandler(c);c.open("POST",this.uploadUrl);c.send(a)},attachErrorHandler:function(a){a.addEventListener("error",b.proxy(function(a){a=a.currentTarget;a.isValid=!1;this.response=a;this.updateProgress()},this))},attachProgressHandler:function(a){a.upload.addEventListener("progress",b.proxy(function(a){a.lengthComputable&&(this.uploaded=a.loaded);this.updateProgress()},this))},attachLoadHandler:function(a){a.addEventListener("load",b.proxy(function(a){a=this.response=a.currentTarget;var d=
this.getControls();try{a.json=b.parseJSON(a.responseText),a.isValid=200===a.status&&a.json.isValid}catch(e){a.isValid=!1}a.isValid&&(this.uploaded=this.file.size,d.append('\x3cinput type\x3d"hidden" name\x3d"attachments[]" value\x3d\''+a.json.attachment.id+"'\x3e"));this.updateProgress()},this))},updateProgress:function(){var a=this.isExistingFile()?100:100*Math.round(this.uploaded/this.file.size),b=this.getControls();b.find(".bar").css("width",a+"%");if(this.response&&!this.response.isValid)this.errorBar(b,
swarm.te("Upload Failed"));else if(this.response||this.isExistingFile())b.find(".progress").removeClass("active progress-striped").addClass("progress-success"),b.find(".bar").css("width","100%"),b.removeClass("invalid"),swarm.form.checkInvalid(b.closest("form"))},getControls:function(){if(this.controls)return this.controls;this.controls=b(b.templates('\x3cdiv class\x3d"upload-controls pad1 invalid"\x3e\x3cspan class\x3d"close" title\x3d"{{te:"Remove"}}"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/span\x3e\x3cdiv class\x3d"progress active"\x3e\x3cdiv class\x3d"bar underlay"\x3e{{\x3efile.name}}\x3c/div\x3e\x3cdiv class\x3d"bar"\x3e{{\x3efile.name}}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e').render({file:this.file}));
this.controlsContainer.append(this.controls);this.controls.find(".close").on("click",b.proxy(function(){var a=this.controls.find(".close"),c=this.controls.find("input"),d=this.controls.find(".close i"),e=!c.prop("disabled");c.prop("disabled",e);e?(this.controls.addClass("removed"),a.attr("data-original-title",swarm.te("Restore")),d.removeClass("icon-remove").addClass("icon-share-alt"),this.controls.removeClass("invalid"),swarm.form.checkInvalid(this.controls.closest("form"))):(this.controls.removeClass("removed"),
a.attr("data-original-title",swarm.te("Remove")),d.removeClass("icon-share-alt").addClass("icon-remove"));a.tooltip("show");swarm.form.checkInvalid(this.controlsContainer.closest("form"));this.onRemove(b.Event("remove",{target:this}))},this));swarm.form.checkInvalid(this.controlsContainer.closest("form"));return this.controls},rebuildControls:function(a){var c=this.isRemoved();b(this.controls).remove();this.controls=null;this.controlsContainer=a?b(a):this.controlsContainer;a=this.getControls();if(this.isExistingFile()||
this.response&&this.response.isValid){var d=this.isExistingFile()?this.file.id:this.response.json.attachment.id,d=b("\x3cinput\x3e").attr("type","hidden").attr("name","attachments[]").attr("value",d);a.append(d);c&&(d.prop("disabled",!0),a.addClass("removed"),a.find(".close").attr("title",swarm.te("Restore")),a.find(".close i").removeClass("icon-remove").addClass("icon-share-alt"))}this.updateProgress()},errorBar:function(a,b){var d=a.find(".progress"),e=a.find(".bar");d.removeClass("active progress-striped");
d.addClass("progress-danger");e.append(" - "+b);e.css("width","100%")}};var g=function(a,c){this.$element=b(a);this.options=b.extend({},b.fn.dropZone.defaults,c);this.$controlsContainer=this.$element.find(".drop-controls");this.uploaders=[];this.$element.on("dragover dragenter",function(c){c.preventDefault();c.stopPropagation();b(a).addClass("dragover")});this.$element.on("dragleave",function(){b(a).removeClass("dragover")});this.$element.on("drop",b.proxy(this.onDrop,this))};g.prototype={constructor:g,
onDrop:function(a){a.preventDefault();a.stopPropagation();this.$element.removeClass("dragover");var b=a.originalEvent.dataTransfer.files;for(a=0;a<b.length;a++)this.addUploader(b[a])},addUploader:function(a){a instanceof f?(a.controlsContainer=this.$controlsContainer,a.rebuildControls()):a=new f(b.extend({file:a,maxSize:this.$element.closest("form").data("max-size"),controlsContainer:this.$controlsContainer,uploadUrl:this.$element.data("upload-url")},this.options.uploaderOptions));this.uploaders.push(a)},
addExistingFile:function(a){this.addUploader(a)}};b.fn.dropZone=function(a){return this.each(function(){var c=b(this);!c.data("dropZone")&&swarm.has.fullFileApi()&&c.data("dropZone",new g(this,a))})};b.fn.dropZone.Constructor=g;b.fn.dropZone.defaults={uploaderOptions:null}})(window.jQuery);/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
$.expr.pseudos.dataLabelContains=$.expr.createPseudo(function(a){return function(b){return 0<=String($(b).data("short-label")).toLowerCase().indexOf(a.toLowerCase())}});
swarm.reviews={msgIds:function(){swarm.te("Reviewers");swarm.te("Up Votes");swarm.te("Down Votes");swarm.te("Edit Reviewers");swarm.te("Reviewer Name");swarm.te("Edit Reviewers");swarm.te("Make Vote Optional");swarm.te("Make Vote Required");swarm.te("Make One Vote Required");swarm.te("Make All Votes Required");swarm.te("Close");swarm.te("Already Committed");swarm.te("Update");swarm.te("Withdraw group from review");swarm.te("Exempt (review owner)");swarm.te("Make my Vote Optional");swarm.te("Make my Vote Required");
swarm.te("Leave Review");swarm.te("Vote Up");swarm.te("Vote Down");swarm.te("Clear Vote");swarm.te("Disable Notifications");swarm.te("Enable Notifications");swarm.te("Join Review");swarm.te("Pre-commit");swarm.te("Post-commit")},init:function(){var a=$(".reviews .tab-pane.active"),b=$.deparam(location.search,!0);swarm.reviews.setFilters(b,a);swarm.reviews.load(a,!0);$(".reviews .tab-pane").not(a).each(function(){swarm.reviews.setFilters(b,this);swarm.reviews.load(this,!0)});$(".reviews .btn-filter").on("click.reviews.filter",
function(a){a.preventDefault();swarm.reviews.toggleFilter(this,!0)});swarm.reviews.initMultiPicker();$(window).scroll(function(){if($.isScrolledToBottom()){var a=$(".reviews .tab-pane.active"),c=a.find("table"),a=parseInt($(".reviews ."+a.attr("id")+"-counter").text(),10)||0,b=c.find("tbody tr").length;a>b&&(c.data("end-of-data",null).data("last-seen",c.data("last-filtered")||c.data("last-seen")),c.find("span.little-bee").width(14),swarm.reviews.load($(".reviews .tab-pane.active")))}});$(".reviews .toolbar .search input").on(["input",
"keyup","blur"].map(function(a){return a+".reviews.search"}).join(" "),function(a){var c=$(this).closest(".tab-pane");clearTimeout(swarm.reviews.searchTimeout);swarm.reviews.searchTimeout=setTimeout(function(){if($(a.target).val()!==(c.data("last-search")||""))swarm.reviews.applyFilters(c),c.data("last-search",$(a.target).val())},500)});$(document).on("swarm-login",function(){swarm.reviews.load(a,!0);$(".reviews .tab-pane").not(a).each(function(){swarm.reviews.load(this,!0)})})},initMultiPicker:function(){$(".dropdown-menu").on("click",
".input-filter",function(a){a.stopPropagation()});if($("body").hasClass("authenticated"))$(".btn-user .user-filter .input-filter").each(function(){var a=$(this),b=a.closest(".btn-group"),d=b.find(".dropdown-toggle");a.on("change",function(){a.siblings(".clear").hide();a.val()&&a.siblings(".clear").show()}).change();a.siblings(".clear").on("click",function(c){a.val("").data("filter-value","").change();c.stopPropagation()});a.on("keydown",function(c){if($(this).data("user-multipicker").typeahead.$menu.find(".active:visible").length)return!0;
13===c.keyCode?($(document).trigger("click.dropdown.data-api"),c.preventDefault()):27===c.keyCode&&(a.val(""),$(document).trigger("click.dropdown.data-api"),c.preventDefault())});d.on("dropdown-close",function(){if(!a.val()&&b.find(".btn-filter.active").length)return!1;swarm.reviews.toggleFilter(!a.val()?b.find(".default"):a,!0)});a.userMultiPicker({onSelect:function(){var c=this.typeahead.$menu.find(".active");c.length&&a.val(c.data("value").id);$(document).trigger("click.dropdown.data-api")}})});
else $(document).on("swarm-login",function(){swarm.reviews.initMultiPicker()})},addEventsToProjectDropdown:function(){function a(a){a.find("a.btn-filter").each(function(){this.innerHTML=$(this).data("short-label");$(this).show()})}function b(a){a&&(a=a.replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1"));return a}$(".btn-project .project-filter .input-filter").each(function(){var d=$(this),c=d.closest(".btn-group"),e=c.find(".dropdown-toggle"),g=c.find(".dropdown-menu li.list-item");d.on("input change",function(){d.siblings(".clear").hide();
d.val()?(d.siblings(".clear").show(),g.find("a.btn-filter").each(function(){$(this).hide()}),g.find("a.btn-filter:dataLabelContains('"+d.val()+"')").each(function(){var a=$(this).data("short-label"),c=RegExp(d.val(),"gi");this.innerHTML=a.replace(c,"\x3cb\x3e$\x26\x3c/b\x3e");$(this).show()})):a(g,c)}).change();d.siblings(".clear").on("click",function(b){d.val("").data("filter-value","").change();b.stopPropagation();a(g,c)});d.on("keydown",function(a){var e=c.find(".dropdown-menu");13===a.keyCode?
(localStorage.setItem("swarm.project.filter",$(this).parent().attr("id")),$(document).trigger("click.dropdown.data-api"),a.preventDefault()):27===a.keyCode?(d.val(""),$(document).trigger("click.dropdown.data-api"),a.preventDefault()):40===a.keyCode&&(a.stopImmediatePropagation(),c.find("ul.dropdown-menu").children().each(function(){$(this).removeClass("active")}),a=b(e.find("li.list-item a:visible").first().closest("li").attr("id")),$("#"+a).find("a").focus().addClass("active"))});c.find("ul.dropdown-menu").on("keydown",
function(a){if(40===a.keyCode){if(a.stopImmediatePropagation(),a.preventDefault(),a=b($(document.activeElement).closest("li").nextAll("li").find("a:visible,input").first().closest("li").attr("id")))$(document.activeElement).removeClass("active"),$("#"+a).find("a,input").focus().addClass("active")}else 38===a.keyCode&&(a.stopImmediatePropagation(),a.preventDefault(),(a=b($(document.activeElement).closest("li").prevAll("li").children("a:visible,input").first().closest("li").attr("id")))||(a=b($(document.activeElement).closest("ul").prevAll("li").children("a:visible,input").first().closest("li").attr("id"))),
$(document.activeElement).removeClass("active"),$("#"+a).find("a,input").focus().addClass("active"))});c.find(".dropdown-menu li:has(\x3e a) a").on("click",function(){localStorage.setItem("swarm.project.filter",$(this).parent().attr("id"))});e.on("dropdown-close",function(){a(g,c);"my-projects"!==localStorage.getItem("swarm.project.filter")?(d.val($("#"+b(localStorage.getItem("swarm.project.filter"))+" a").data("filter-value")).change(),swarm.reviews.toggleFilter(!d.val()?c.find(".default"):$("#"+
b(localStorage.getItem("swarm.project.filter"))+" a"),!1)):swarm.reviews.toggleFilter(c.find("#my-projects a"),!1)})})},load:function(a,b,d){a=$(a);if(a.data("loading")){if(!b)return;a.data("loading").abort();a.data("loading",!1)}var c=$(a).find(".reviews-table");b&&(c.data("last-seen",null),c.data("last-filtered",null),c.data("end-of-data",null),c.data("filtered-total",null),c.data("end-of-filtered-data",null),c.removeData("after-updated"),c.find("tbody").empty(),c.find("tfoot .little-bee").width(14),
$(".closed-counter, .opened-counter").text("0"));if(c.data("end-of-data"))c.data("iterations",0),c.find("tfoot").hide();else{c.find("tfoot:hidden").show();swarm.reviews.reportProgress(a);var e=$.ajax({url:location.pathname,data:$.extend(swarm.reviews.getFilters(a),{format:"json",after:c.data("last-seen"),afterSorted:c.data("last-sorted"),afterUpdated:c.data("after-updated")}),dataType:"json",skipBaseUrl:!0,success:function(b){var h=b.max||50;if(!1===c.is(".updated-order")){if(null===b.lastSeen||b.lastSeen===
c.data("last-seen"))c.data("end-of-data",!0),c.data("end-of-filtered-data",!0)}else(0>=d||b.reviews.length+c.find("tr").length>b.totalCount)&&c.data("end-of-data",!0),(c.data("last-seen")&&null===c.data("end-of-data")&&null===c.data("filtered-total")&&null===c.data("end-of-filtered-data")||0>=b.afterUpdated)&&c.data("end-of-data",!0);c.data("last-seen",b.lastSeen);c.data("after-updated",b.afterUpdated);c.data("last-sorted",b.lastSorted);c.data("iterations",1+(c.data("iterations")||0));$.each(swarm.reviews.sort(b.reviews,
c.is(".updated-order")?"updated":"created"),function(a,b){if(0<d||void 0===d){var e=$.templates('\x3ctr data-id\x3d"{{\x3eid}}" data-pending\x3d"{{\x3epending}}"class\x3d"state-{{\x3estate}}"\x3e \x3ctd class\x3d"id"\x3e\x3ca href\x3d"{{url:"/reviews"}}/{{urlc:id}}"\x3e{{\x3eid}}\x3c/a\x3e\x3c/td\x3e \x3ctd class\x3d"author center"\x3e{{:authorAvatar}}\x3c/td\x3e \x3ctd class\x3d"description"\x3e{{:description}}\x3c/td\x3e \x3ctd class\x3d"project-branch"\x3e{{:projects}}\x3c/td\x3e \x3ctd class\x3d"created"\x3e\x3cspan class\x3d"timeago" title\x3d"{{\x3ecreateDate}}"\x3e\x3c/span\x3e\x3c/td\x3e \x3ctd class\x3d"updated"\x3e\x3cspan class\x3d"timeago" title\x3d"{{\x3eupdateDate}}"\x3e\x3c/span\x3e\x3c/td\x3e \x3ctd class\x3d"state center"\x3e  \x3ca href\x3d"{{url:"/reviews"}}/{{urlc:id}}"\x3e\x3ci class\x3d"swarm-icon icon-review-{{\x3estate}}" title\x3d"{{te:stateLabel}}"\x3e\x3c/i\x3e\x3c/a\x3e \x3c/td\x3e\x3ctd class\x3d"type center"\x3e\x3ci class\x3d"swarm-icon {{if pending}}icon-pre-review" title\x3d"{{te:"Pre-commit"}}"{{else}}icon-post-review" title\x3d"{{te:"Post-commit"}}"{{/if}}\x3e\x3c/i\x3e\x3c/td\x3e \x3ctd class\x3d"test-status center"\x3e  {{if testStatus \x3d\x3d "pass"}}{{if testDetails.url}}\x3ca href\x3d"{{url:testDetails.url}}" target\x3d"_blank"\x3e{{/if}}  \x3ci class\x3d"icon-check" title\x3d"{{te:"Tests Pass"}}"\x3e\x3c/i\x3e{{if testDetails.url}}\x3c/a\x3e{{/if}}  {{else testStatus \x3d\x3d "fail"}}{{if testDetails.url}}\x3ca href\x3d"{{url:testDetails.url}}" target\x3d"_blank"\x3e{{/if}}  \x3ci class\x3d"icon-warning-sign" title\x3d"{{te:"Tests Fail"}}"\x3e\x3c/i\x3e{{if testDetails.url}}\x3c/a\x3e{{/if}}  {{else testStatus \x3d\x3d "running" || testStatus \x3d\x3d "started"}}{{if testDetails.url}}\x3ca href\x3d"{{url:testDetails.url}}" target\x3d"_blank"\x3e{{/if}}  \x3ci class\x3d"icon-svg-refresh animate" title\x3d"{{te:"Tests Running"}}"\x3e\x3c/i\x3e{{if testDetails.url}}\x3c/a\x3e{{/if}}  {{/if}} \x3c/td\x3e \x3ctd class\x3d"comments center"\x3e  \x3ca href\x3d"{{url:"/reviews"}}/{{urlc:id}}#comments" {{if comments[1]}}title\x3d"{{tpe:"%s archived" "" comments[1]}}"{{/if}}\x3e   \x3cspan class\x3d"badge {{if !comments[0]}}muted{{/if}}"\x3e{{\x3ecomments[0]}}\x3c/span\x3e  \x3c/a\x3e \x3c/td\x3e \x3ctd class\x3d"votes center"\x3e  \x3ca href\x3d"{{url:"/reviews"}}/{{urlc:id}}"\x3e   \x3cspan class\x3d"badge {{if !upVotes.length \x26\x26 !downVotes.length}}muted{{/if}}"\x3e    {{\x3eupVotes.length}} / {{\x3edownVotes.length}}   \x3c/span\x3e  \x3c/a\x3e \x3c/td\x3e\x3c/tr\x3e').render(b);
$(e).appendTo(c.find("tbody")).find("td.description").expander({slicePoint:90});c.data("last-filtered",b.id);0===b.id%99&&c.data("progress",b.id)}!c.is(".updated-order")&&b.id<=c.data("last-seen")&&c.data("last-seen",b.id);b.updated>=c.data("after-updated")&&c.data("after-updated",b.updated)});b.postFiltered&&!c.data("end-of-filtered-data")&&c.data("filtered-total",(c.data("filtered-total")||0)+b.reviews.length);$(".reviews ."+a.attr("id")+"-counter").removeClass("animate").text(!b.postFiltered?b.totalCount:
c.data("filtered-total")||0);c.find(".timeago").formatTimestamp();if(!c.find("tbody tr").length&&c.data("end-of-data")){var f=swarm.te($(a).find(".btn-filter.active").not(".default").length?"No "+$(a).attr("id")+" reviews match your filters.":"No "+$(a).attr("id")+" reviews.");!0===c.is(".updated-order")&&(f+=swarm.te(" If you are expecting reviews here maybe they have not been indexed yet!"));$('\x3ctr class\x3d"reviews-info"\x3e \x3ctd colspan\x3d"'+c.find("thead th").length+'"\x3e  \x3cdiv class\x3d"alert border-box pad3"\x3e'+
f+"\x3c/div\x3e \x3c/td\x3e\x3c/tr\x3e").appendTo(c.find("tbody"))}d=(void 0===d?h:d)-b.reviews.length;var j=c.height();if(!j){var k,f={},j={display:"block",visibility:"hidden"};for(k in j)j.hasOwnProperty(k)&&(f[k]=a[0].style[k],a[0].style[k]=j[k]);j=c.height();for(k in f)f.hasOwnProperty(k)&&(a[0].style[k]=f[k])}if(d>Math.round(h/2)||0<d&&j&&j<$(window).height()||b.postFiltered)return a.data("loading",!1),swarm.reviews.load(a,!1,d);c.find("tfoot").hide();setTimeout(function(){a.data("loading")===
e&&a.data("loading",!1)},500)}});a.data("loading",e)}},reportProgress:function(a){var b=$(".active tfoot th .message").width(),d=$("span.little-bee").width(),c=$(".active tfoot th").width(),b=d+0.005*(c-b-d);if($(".active .loading span.little-bee:visible").length&&(void 0===a||a.hasClass("active")))$(".loading span.little-bee").width(b),setTimeout(swarm.reviews.reportProgress,2E3)},escapeID:function(a){return a.replace(/(:|\.|\[|\]|,|=|@)/g,"\\$1")},initProjectList:function(a,b,d){var c=$(".btn-group.btn-project.group-radio"),
e=swarm.te(a?"All":"All Projects"),g=swarm.te("My Projects"),h=$("\x3cul class\x3d'dropdown-menu'\x3e").attr("aria-label",e),f=swarm.te(a?"Branch":"Project");$('\x3cbutton type\x3d"button" class\x3d"btn btn-project dropdown-toggle" data-toggle\x3d"dropdown" aria-haspopup\x3d"true" '+f+"\x3e\x3c/button\x3e").append($("\x3ci class\x3d'"+a?"icon-branch":"icon-project swarm-icon'\x3e\x3c/i\x3e"));h.append("\x3cli id\x3d'all-projects'\x3e\x3ca href\x3d'#' class\x3d'btn-filter default' data-filter-value\x3d''\x3e"+
e+"\x3c/a\x3e\x3c/li\x3e");0<d.length&&(a=String(swarm.user.getAuthenticatedUser()),e=$("\x3cli id\x3d'my-projects'\x3e\x3c/li\x3e"),a?e.append($("\x3ca data-filter-value\x3d'projects-for-user:"+a.id+"'\x3e\x3c/a\x3e").addClass("btn-filter").text(g)):e.append($("\x3ca data-filter-value\x3d'"+JSON.stringify(d)+"'\x3e\x3c/a\x3e").addClass("btn-filter").text(g)),h.append(e));h.append('\x3cli class\x3d"divider"\x3e\x3c/li\x3e');d=$("\x3cli\x3e\x3c/li\x3e").addClass("project-filter");d.append('\x3cinput class\x3d"input-filter" data-filter-key\x3d"project" type\x3d"text" placeholder\x3d'+
f+"\x3e");d.append('\x3cbutton type\x3d"button" class\x3d"clear"\x3e\x3cspan\x3ex\x3c/span\x3e\x3c/button\x3e');h.append(d);h.append('\x3cli class\x3d"divider"\x3e\x3c/li\x3e');var j=$("\x3cul class\x3d'dropdown-menu'\x3e\x3c/ul\x3e");$.each(b,function(a,b){var c=$('\x3cli class\x3d"list-item" id\x3d"'+a+'"\x3e\x3c/li\x3e');c.append($('\x3ca href\x3d"#" class\x3d"btn-filter btn-filter-project" data-filter-key\x3d"project" data-filter-value\x3d"'+a+'" data-short-label\x3d"'+b+'"\x3e'+b+"\x3c/a\x3e"));
j.append(c)});b&&h.append(j);c.append(h);swarm.reviews.addEventsToProjectDropdown()},toggleFilter:function(a,b){$(a).closest(".dropdown-menu").length?$(a).is("input")?($(a).data("filter-value",$(a).val()),$(a).closest(".btn-group").find(".text").text($(a).val())):($(a).addClass("active"),$(a).closest(".btn-group").find(".text").text($(a).data("short-label")||$(a).html()),$(a).closest(".btn-group.group-radio").find(".input-filter").siblings(".clear").trigger("click")):$(a).toggleClass("active");var d=
$(a).closest(".btn-group.group-radio");d.hasClass("multi-select")?0===d.find(".btn-filter").not(".active").length&&d.find(".btn-filter").removeClass("active").blur():d.find(".btn-filter").not(a).removeClass("active");$(a).hasClass("btn-sort")&&$("."+$(a).data("target")).removeClass(function(a,b){return(b.match(/[^\s]+-order/g)||[]).join(" ")}).addClass(($(a).filter(".active").data("filter-value")||"default")+"-order");b&&swarm.reviews.applyFilters($(a).closest(".tab-pane"))},applyFilters:function(a){var b=
swarm.reviews.getFilters(a);b.state&&b.state.length===swarm.reviews.getAllTabStates(a).length&&delete b.state;b.state&&-1!==b.state.indexOf(":")&&(b.state=b.state.split(":")[0]);var d=$.isEmptyObject(b)?"":"?"+$.param(b),c="#"+encodeURIComponent(a[0].id);swarm.history.replaceState(null,null,location.pathname+d+c);swarm.reviews.load(a,!0);$(".reviews .tab-pane").not(a).each(function(){swarm.reviews.setFilters(b,this);swarm.reviews.load(this,!0)})},getFilters:function(a){var b={};$(a).find(".btn-filter.active, .input-filter:not(.input-project-filter)").each(function(){var a=
$(this),c=a.closest(".btn-group"),c=a.data("filter-key")||c.data("filter-key"),a=a.data("filter-value");c&&(""!==a&&void 0!==a)&&(b.hasOwnProperty(c)?($.isArray(b[c])||(b[c]=[b[c]]),b[c].push(a)):b[c]=a)});b.state||(b.state=swarm.reviews.getAllTabStates(a));if(a=$(a).find(".toolbar .search input").val())b.keywords=a;return b},getAllTabStates:function(a){var b=[];$(a).find(".toolbar [data-filter-key\x3dstate] button").each(function(){b.push($(this).data("filter-value"))});return b},setFilters:function(a,
b){var d,c,e;a=$.extend({},a);if($.isArray(a.state)){var g=swarm.reviews.getAllTabStates(b);$.grep(a.state,function(a){return-1!==$.inArray(a,g)}).length===g.length&&delete a.state}$(b).find(".btn-group[data-filter-key]").each(function(){var b=$(this),c=b.data("filter-key");b.find(".btn-filter.active").removeClass("active");if(a.hasOwnProperty(c))var d=String(a[c]),b=b.find(".btn-filter").filter(function(){var a=$.isArray($(this).data("filter-value")),b=String($(this).data("filter-value"));return"state"===
c&&(b=b.split(":")[0],d=d.split(":")[0],$.isArray(d.split(","))&&-1!==$.inArray(b,d.split(",")))?!0:b===d&&(!a&&"state"!==c||a&&"state"===c)});else b=b.find(".btn-filter.default");b.length&&swarm.reviews.toggleFilter(b,!1)});swarm.reviews.toggleFilter($(b).find(".btn-user a.btn-filter.default"),!1);a.author&&(d=$(b).find(".btn-user a[data-filter-key\x3dauthor]"),c=$(b).find(".btn-user.btn-group").find(".input-filter"),d.data("filter-value")===a.author?swarm.reviews.toggleFilter(d,!1):(c.val(a.author).change(),
swarm.reviews.toggleFilter(c,!1)));a.participants&&swarm.reviews.toggleFilter($(b).find(".btn-user a[data-filter-key\x3dparticipants]"),!1);a.authorparticipants&&swarm.reviews.toggleFilter($(b).find(".btn-user a[data-filter-key\x3dauthorparticipants]"),!1);a.project&&(d=!1,swarm.reviews.isMyProjectsFilter(a.project)?(e=$("#my-projects a"),d=!0):localStorage.getItem("swarm.project.filter")===a.project?e=$("#"+this.escapeID(localStorage.getItem("swarm.project.filter"))+" a"):localStorage.setItem("swarm.project.filter",
a.project),c=$(".tab-pane").find(".btn-group.btn-project").find(".input-filter:not(.input-project-filter)"),d?swarm.reviews.toggleFilter(e,!1):e?(c.val(e.data("filter-value")).change(),swarm.reviews.toggleFilter(e,!1)):(c.val(a.project).change(),swarm.reviews.toggleFilter(c,!1)));$(b).find(".toolbar .search input").val(a.keywords||"");$(b).data("last-search",a.keywords||"")},sort:function(a,b){return"updated"===b?$.map(a,function(a){return a}).sort(function(a,b){var e=a.updated,g=b.updated;return e<
g?1:e>g?-1:0}):a},isMyProjectsFilter:function(a){return $.isArray(a)||"projects-for-user:"===a.substring(0,18)?!0:!1}};
swarm.review={voteIcons:{"-1":"icon-chevron-down",1:"icon-chevron-up"},init:function(){swarm.review.initOpenFileState();swarm.review.initVersionChooser();swarm.review.initSlider();swarm.review.buildStateMenu();swarm.review.buildAddChangeMenu();swarm.review.updateTestStatus();swarm.review.updateDeployStatus();swarm.review.initEdit();swarm.review.initAuthor();swarm.review.initReviewers();swarm.review.initReadUnread();swarm.review.setFloat();$(document).on("swarm-login",function(){$.ajax("/reviews/"+
$(".review-wrapper").data("review").id,{data:{format:"json"},dataType:"json",success:function(a){swarm.review.updateReview($(".review-wrapper"),a)}})});var a=function(a){JSON.stringify(a)!==JSON.stringify($(".review-wrapper").data("review"))&&($(".review-wrapper").data("review",a),swarm.review.buildStateMenu());if(a.commitStatus.error){var b=$(".review-transition.modal");b.find(".messages").append('\x3cdiv class\x3d"alert"\x3e'+swarm.te(a.commitStatus.error)+"\x3c/div\x3e");var e=a.commitStatus.error.split("\n");
2<e.length&&b.find(".messages .alert").expander({slicePoint:a.commitStatus.error.indexOf(e[2])});return!1}if($.isEmptyObject(a.commitStatus)&&!a.pending)return window.location.reload(),!1};$(".review-header").on("click",".state-menu a",function(b){b.preventDefault();b=$(this);var c=b.data("state"),e=b.closest(".review-wrapper"),g=b.closest(".btn-group").find(".btn");$(document).trigger("click.dropdown.data-api");if("obliterate-review"===c)return swarm.review.obliterate(e.data()),!1;swarm.review.openTransitionDialog(c,
e.data(),function(b,d){swarm.review.updateReview(e,d);"approved:commit"===c&&d.isValid?swarm.review.pollForUpdate(a):(b.modal("hide"),swarm.overlay.hide(),g.tooltip({title:swarm.t("Review Updated"),trigger:"manual"}).tooltip("show"),setTimeout(function(){g.tooltip("destroy")},3E3),"approved:commit"!==c&&$.trim(b.find("form textarea").val())&&swarm.comments.load("reviews/"+e.data("review").id,"#comments"))});return!1});var b=$(".review-wrapper").data("review");b.commitStatus.start&&!b.commitStatus.error&&
swarm.review.pollForUpdate(a);$(".review-header").on("click",".btn-edit",function(a){a.preventDefault();var b=$(this).closest(".review-wrapper");a=$("body").data("user");swarm.review.openEditDialog(b.data(),a,function(a,d){a.modal("hide");swarm.review.updateReview(b,d)})});$(".review-header").on("click",".add-change a",function(a){a.preventDefault();var b=$(this);a=b.data("state");var b=b.closest(".review-wrapper"),e="";$(document).trigger("click.dropdown.data-api");"change-replace"===a?(e=swarm.te("Select a change to Replace the Review"),
swarm.review.openChangeSelector("/reviews/add",b.data(),swarm.review.openChangeSelectorModelCallback,"all",e,a,"replace")):"change-replace-pending"===a?(e=swarm.te("Select a pending change to Replace the Review"),swarm.review.openChangeSelector("/reviews/add",b.data(),swarm.review.openChangeSelectorModelCallback,"pending",e,a,"replace")):"change-append"===a&&(e=swarm.te("Select a pending change to Append to the Review"),swarm.review.openChangeSelector("/reviews/add",b.data(),swarm.review.openChangeSelectorModelCallback,
"pending",e,a,"append"))});$(".review-header").on("click.refresh-projects",".project-controls a.refresh",function(){var a=$(".review-wrapper").data("review").id;swarm.overlay.show(!0);$.ajax("/api/v10/reviews/"+a+"/refreshProjects",{type:"POST",dataType:"json",data:{},success:function(){window.location.reload()},error:function(){swarm.overlay.hide()}})});$(window).resize(function(){swarm.review.setFloat()});$(document).on("click.edit.author",".review-header .edit-author",function(){var a=$(".review-wrapper");
swarm.review.openEditAuthorDialog(a.data("review"))});$(".send-delayed-notifications").on("click",function(a){a.preventDefault();swarm.review.sendDelayedNotifications(this)});$(".review-wrapper").on("click.sendonpost",".post-and-send-delayed-comments",function(a){a.preventDefault();a=$(a.target).closest("form");a.find(".delay-notifications input").attr("checked",!1).val(!1);a.hasClass("comment-edit")?swarm.comments.edit(a,!0):swarm.comments.add(a,!0)})},initOpenFileState:function(){var a=JSON.parse(swarm.localStorage.get("reviews.openFiles"))||
[];if(0<a.length){var b=$(".diff-wrapper");a.forEach(function(a){var c="";$.each(b,function(b,g){c=$.parseJSON($(g).attr("data-file")).depotFile;c===a&&$(g).find(".diff-details").collapse("show")})});swarm.localStorage.set("reviews.openFiles",JSON.stringify([]))}},initReadUnread:function(){var a=function(a,d,c){var e=a.find(".btn-file-read");e.toggleClass("active btn-inverse",d);e.find("i").toggleClass("icon-white",d);a.toggleClass("file-read",d);a.toggleClass("file-unread",!d);c?(e.attr("data-original-title",
d?swarm.t("Marked file as read"):swarm.t("Marked file as unread")),e.tooltip("show"),setTimeout(function(){e.attr("data-original-title",d?swarm.t("Mark file as unread"):swarm.t("Mark file as read"))},1E3)):e.attr("data-original-title",d?swarm.t("Mark file as unread"):swarm.t("Mark file as read"))};$(document).on("swarm-login",function(b){$(".change-files .diff-wrapper").each(function(){var d=$(this);b.hasOwnProperty("user")&&d.data("readby").hasOwnProperty(b.user.id)&&a(d,!0,!1)})});$(".change-files").on("click",
".btn-file-read",function(){var b=$(this),d=!b.is(".active"),c=b.closest(".review-wrapper").data("review"),e=b.closest(".review-wrapper").data("change"),g=b.closest(".review-wrapper").data("against"),e=(g?g.rev+",":"")+e.rev,h=b.closest(".diff-wrapper"),g=h.data("file"),f=h.find(".diff-details");$.ajax({type:"POST",url:"/reviews/"+c.id+"/v"+e+"/files/"+swarm.encodeURIDepotPath(g.depotFile),data:{read:d?1:0,user:swarm.user.getAuthenticatedUser().id},error:function(){a(h,!d,!0)}});a(h,d,!0);f.is(".in")&&
d&&(f.one("hidden",function(){b.data("tooltip").tip().parent().length&&b.tooltip("show")}),f.collapse("hide"))})},initAuthor:function(){var a=$(".review-wrapper"),b=a.data("review"),d=a.data("author-avatar"),c=a.data("can-edit-author"),a=a.data("avatars")||{};$(".review-header .author-avatar").html(d[0]);c&&$(".review-header .author-change").html($.templates('\x3cdiv class\x3d"text-left pull-left muted"\x3e\x3cdiv\x3e'+swarm.te("Author")+'\x3cbutton type\x3d"button" class\x3d"bare privileged edit-author pad0" title\x3d"" data-original-title\x3d"'+
swarm.te("Edit Author")+'"\x3e\x3ci class\x3d"swarm-icon icon-edit-pencil"\x3e\x3c/i\x3e\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"author-small-avatar pull-left"\x3e{{:avatar}}\x3c/div\x3e').render({avatar:a[b.author]||""}));$(document).on("swarm-login",function(){swarm.review.initAuthor()})},initSlider:function(){var a=[],b=$(".review-wrapper"),d=b.data("review"),c=b.data("change"),b=b.data("against"),e=parseInt(c.id,10),g=parseInt(c.rev,10),h=b?parseInt(b.id,10):null,f=b?parseInt(b.rev,
10):null;$.each(d.versions,function(b){this.rev=b+1;this.change=parseInt(this.change,10);this.selected=this.change===e&&this.rev===g||this.change===h&&this.rev===f;a.push(this)});$(".review-slider").versionSlider({data:a,markerMode:b?2:1});$(".slider-mode-toggle").toggleClass("active",!!b);$(document).off("slider-moved",".review-slider").on("slider-moved",".review-slider",function(a,b){setTimeout(function(){var a=document.location.pathname.replace(/(\/v[0-9,]+)?\/?$/,"/v"+((b.previousRevision?b.previousRevision.rev+
",":"")+b.currentRevision.rev));a!==document.location.pathname&&(b.disable(),swarm.review.setLocalOpenFilesState(),document.location=a+document.location.hash)},0)});$(document).off("click.slider.mode.toggle").on("click.slider.mode.toggle",".slider-mode-toggle",function(){var a=$(".review-slider").data("versionSlider");a.setMarkerMode(1===a.markerMode?2:1);a.$element.trigger("slider-moved",a)})},initVersionChooser:function(){var a=[],b=$(".review-wrapper"),d=b.data("review"),c=d?d.versions.length:
0,e=b.data("change"),g=b.data("against"),h=parseInt(e.id,10),f=parseInt(e.rev,10),j=g?parseInt(g.id,10):null,k=g?parseInt(g.rev,10):0,b=b.data("head"),m="\x3coption value\x3d''"+(b?" selected\x3dselected":"")+"\x3e"+swarm.te("Current version in depot")+"\x3c/option\x3e\x3coption value\x3d'0'"+(0===k&&!b?" selected\x3dselected":"")+"\x3e"+swarm.te("Base version for this review")+"\x3c/option\x3e",n="",b=swarm.timeFormatter.timeValue(d.created),b="\x3coption value\x3d''\x3e"+swarm.te("#1 by %s - %s - shelved in %s",
[d.author,swarm.timeFormatter.convert(b),d.id])+"\x3c/option\x3e";$.each(d.versions,function(b){this.rev=b+1;this.change=parseInt(this.change,10);this.selected=this.change===h&&this.rev===f||this.change===j&&this.rev===k;a.push(this);var d=swarm.timeFormatter.timeValue(this.time);this.rev<c&&(m+='\x3coption value\x3d"'+(b+1)+'"'+(this.change===j&&this.rev===k?'selected\x3d"selected"':this.rev&&f&&this.rev>=f?'disabled\x3d"disabled"':"")+"\x3e"+(this.pending?swarm.te("#%d by %s - %s - shelved in %s",
[this.rev,this.user,swarm.timeFormatter.convert(d),this.change]):swarm.te("#%d by %s - %s - committed in %s",[this.rev,this.user,swarm.timeFormatter.convert(d),this.change]))+"\x3c/option\x3e");n+='\x3coption value\x3d"'+(b+1)+'"'+(this.change===h&&this.rev===f?'selected\x3d"selected"':this.rev&&k&&this.rev<=k?'disabled\x3d"disabled"':"")+"\x3e"+(this.pending?swarm.te("#%d by %s - %s - shelved in %s",[this.rev,this.user,swarm.timeFormatter.convert(d),this.change]):swarm.te("#%d by %s - %s - committed in %s",
[this.rev,this.user,swarm.timeFormatter.convert(d),this.change]))+"\x3c/option\x3e"});$("#revision-select-from").html(m);$("#revision-select-to").html(n||b);d=$("select#revision-select-to").val();b=$("select#revision-select-to option").length;d=swarm.te("(revision %s of %s)",[d,b]);$("#revision-display-pane").html(d);$(".review-version-chooser").off("change.version",".revision-select").on("change.version",".revision-select",function(){setTimeout(function(){var a=$("#revision-select-from").val()+","+
$("#revision-select-to").val(),a=document.location.pathname.replace(/(\/v[0-9,]+)?\/?$/,"/v"+a);a!==document.location.pathname&&($(".revision-select").attr("disabled",!0),swarm.review.setLocalOpenFilesState(),document.location=a+document.location.hash)},0)})},initEdit:function(){$(".review-header .change-description .btn-edit").length||$('\x3ca href\x3d"#" class\x3d"privileged btn-edit" title\x3d"'+swarm.te("Edit Description")+'"\x3e\x3ci class\x3d"swarm-icon icon-review-needsRevision"\x3e\x3c/i\x3e\x3c/a\x3e').insertAfter(".review-header .change-description .first-line")},
setLocalOpenFilesState:function(){var a=$(".diff-wrapper:not('.collapsed')").map(function(){return $.parseJSON($(this).attr("data-file")).depotFile}).get();swarm.localStorage.set("reviews.openFiles",JSON.stringify(a))},initReviewers:function(){$.templates({userMenu:'\x3cul role\x3d"menu" class\x3d"dropdown-menu user minimum-{{:minimumRequired}}" aria-label\x3d"{{te:"User Reviewer Menu"}}"\x3e{{if vote.value \x3c 1 || vote.isStale}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"up"\x3e\x3ci class\x3d"icon-chevron-up"\x3e\x3c/i\x3e {{te:"Vote Up"}}\x3c/a\x3e\x3c/li\x3e{{/if}}{{if vote.value !\x3d\x3d 0}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"clear"\x3e\x3ci class\x3d"icon-minus"\x3e\x3c/i\x3e {{te:"Clear Vote"}}\x3c/a\x3e\x3c/li\x3e{{/if}}{{if vote.value \x3e -1 || vote.isStale}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"down"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e {{te:"Vote Down"}}\x3c/a\x3e\x3c/li\x3e{{/if}}\x3cli role\x3d"presentation" class\x3d"divider"\x3e\x3c/li\x3e{{if addReviewer || !participant}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"join"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e {{te:"Join Review"}}\x3c/a\x3e\x3c/li\x3e{{else}}{{if participant}}{{if isRequired || groupRequired}}{{if !groupRequired}}\x3cli class\x3d"optional-reviewer" role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"optional"\x3e\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e {{te:"Make my Vote Optional"}}\x3c/a\x3e\x3c/li\x3e{{/if}}{{else}}\x3cli class\x3d"required-reviewer" role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"required"\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e {{te:"Make my Vote Required"}}\x3c/a\x3e\x3c/li\x3e{{/if}}{{if notificationsDisabled}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"enableNotifications"\x3e\x3ci class\x3d"icon-envelope"\x3e\x3c/i\x3e {{te:"Enable Notifications"}}\x3c/a\x3e\x3c/li\x3e{{else}}\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"disableNotifications"\x3e\x3ci class\x3d"swarm-icon icon-disable-notifications"\x3e\x3c/i\x3e {{te:"Disable Notifications"}}\x3c/a\x3e\x3c/li\x3e{{/if}}\x3cli class\x3d"withdraw-reviewer" role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"leave"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e {{te:"Leave Review"}}\x3c/a\x3e\x3c/li\x3e{{/if}}{{/if}}\x3c/ul\x3e',
groupMenu:'\x3cul role\x3d"menu" class\x3d"dropdown-menu pull-right type-group item-require minimum-{{:minimumRequired}}" aria-label\x3d"{{te:"Group Reviewer Menu"}}"\x3e\x3cli role\x3d"menuitem"\x3e\x3ca href\x3d"'+$("body").data("base-url")+'/groups/{{:userId}}"\x3e{{:userId}}\x3c/a\x3e\x3c/li\x3e{{if canEdit}}\x3cli role\x3d"presentation" class\x3d"divider"\x3e\x3c/li\x3e\x3cli class\x3d"optional-reviewer" role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"optional"\x3e\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e {{te:"Make Vote Optional"}}\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"one-reviewer" role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"oneRequired"\x3e\x3ci class\x3d"icon-star"\x3e1\x3c/i\x3e {{te:"Make One Vote Required"}}\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"required-reviewer" role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"allRequired"\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e {{te:"Make All Votes Required"}}\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"withdraw-reviewer" role\x3d"menuitem"\x3e\x3ca href\x3d"#" data-action\x3d"leave"\x3e\x3ci class\x3d"icon-share"\x3e\x3c/i\x3e {{te:"Withdraw group from review"}}\x3c/a\x3e\x3c/li\x3e{{/if}}\x3cli role\x3d"presentation" class\x3d"divider"\x3e\x3c/li\x3e\x3cdiv class\x3d"group-members-votes multipicker-item" id\x3d"{{:userId}}-votes"\x3e\x3c/div\x3e\x3c/ul\x3e',
reviewerAvatar:'\x3cdiv {{if groupDisabled}}disabled\x3d"disabled" {{/if}}data-value\x3d"reviewer-avatar-{{:userId}}" class\x3d"reviewer-avatar pull-left {{if isRequired \x3d\x3d\x3d "1"}} requiredOne {{else isRequired}} requiredAll {{/if}}{{if current}}current{{/if}}{{if group}}type-group{{/if}} {{if addReviewer}}add-reviewer{{/if}}" {{if current}}id\x3d"currentUser"{{/if}}\x3e{{if current || group }}{{if groupDisabled}}\x3cdiv class\x3d"disabled"\x3e\x3c/div\x3e{{/if}}\x3cdiv {{if groupDisabled}}disabled\x3d"disabled" {{/if}}class\x3d"btn pad1 dropdown-toggle" tabIndex\x3d"0" data-toggle\x3d"dropdown" role\x3d"button" aria-haspopup\x3d"true"\x3e{{/if}}{{:avatar}}{{if vote.value \x3e 0}}\x3ci class\x3d"swarm-icon {{if vote.isStale}}icon-vote-up-stale{{else}}icon-vote-up{{/if}}"\x3e\x3c/i\x3e{{else vote.value \x3c 0}}\x3ci class\x3d"swarm-icon {{if vote.isStale}}icon-vote-down-stale{{else}}icon-vote-down{{/if}}"\x3e\x3c/i\x3e{{/if}}{{if isRequired || groupRequired}}\x3ci class\x3d"swarm-icon icon-required-reviewer"\x3e{{if isRequired \x3d\x3d\x3d "1"}}{{:isRequired}}{{/if}}\x3c/i\x3e{{/if}}{{if current || group}}\x3ci class\x3d"caret"\x3e\x3c/i\x3e\x3c/div\x3e{{if current tmpl\x3d"userMenu" /}}{{if group tmpl\x3d"groupMenu" /}}{{/if}}\x3c/div\x3e',
voteSummary:'\x3cdiv class\x3d"vote-summary text-left pull-left muted"\x3e\x3cdiv\x3e{{te:"Reviewers"}}{{if canEdit}}\x3cbutton type\x3d"button" class\x3d"bare privileged edit-reviewers pad0 padw1"aria-label\x3d"{{te:"Edit Reviewers"}}" title\x3d"{{te:"Edit Reviewers"}}"\x3e\x3ci class\x3d"swarm-icon icon-edit-pencil"\x3e\x3c/i\x3e\x3c/button\x3e{{/if}}\x3c/div\x3e\x3cspan class\x3d"vote-up {{if upCount}}has-value{{/if}}" title\x3d"{{te:"Up Votes"}}"\x3e\x3ci class\x3d"icon-chevron-up"\x3e\x3c/i\x3e{{\x3eupCount}}\x3c/span\x3e\x3cspan class\x3d"vote-down {{if downCount}}has-value{{/if}}" title\x3d"{{te:"Down Votes"}}"\x3e\x3ci class\x3d"icon-chevron-down"\x3e\x3c/i\x3e{{\x3edownCount}}\x3c/span\x3e\x3c/div\x3e',
editReviewersDialog:'\x3cdiv class\x3d"modal hide fade edit-reviewers" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"reviewers-edit-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"reviewers-edit-title"\x3e{{te:"Reviewers"}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\x3cdiv class\x3d"controls reviewers"\x3e\x3cdiv class\x3d"input-prepend" clear\x3d"both"\x3e\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\x3cinput type\x3d"text" class\x3d"input-xlarge reviewer-multipicker" data-items\x3d"100"placeholder\x3d"{{te:"Reviewer Name"}}"\x3e\x3c/div\x3e\x3cdiv class\x3d"reviewers-list"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e{{te:"Save"}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Close"}}\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e',
requiredReviewerButton:'\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-info item-require minimum-{{:minimumRequired}} {{if isRequired}}active{{/if}}" data-toggle\x3d"{{if isGroup}}dropdown{{else}}button{{/if}}" title\x3d"{{if isRequired}}{{te:"Make Vote Optional"}}{{else}}{{te:"Make Vote Required"}}{{/if}}" aria-label\x3d"{{if isRequired}}{{te:"Make Vote Optional"}}{{else}}{{te:"Make Vote Required"}}{{/if}}"\x3e\x3ci class\x3d"{{if isRequired}}icon-star{{else}}icon-star-empty{{/if}} icon-white{{if isRequired \x3d\x3d\x3d "1"}} requiredOne {{else isRequired}} requiredAll {{/if}}"\x3e{{if isRequired \x3d\x3d\x3d "1"}}{{:isRequired}}{{/if}}\x3c/i\x3e\x3cinput type\x3d"hidden" class\x3d"requirement" name\x3d"requiredReviewers[]" value\x3d"{{\x3evalue}}" {{if !isRequired}}disabled{{/if}}\x3e\x3c/button\x3e{{if isGroup}}\x3cinput type\x3d"hidden" class\x3d"quorum preserve-value" name\x3d"reviewerQuorum[{{\x3evalue}}]" value\x3d"{{\x3eisRequired}}" {{if isRequired !\x3d\x3d "1" }}disabled\x3d"disabled"{{/if}}\x3e\x3cul class\x3d"group-required dropdown-menu"\x3e\x3cli class\x3d"optional"\x3e\x3ca href\x3d"#" data-required\x3d"false"\x3e\x3ci class\x3d"icon-star-empty"\x3e\x3c/i\x3e {{te:"Make Vote Optional"}}\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"one"\x3e\x3ca href\x3d"#" data-required\x3d"1"\x3e\x3ci class\x3d"icon-star"\x3e1\x3c/i\x3e {{te:"Make One Vote Required"}}\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"all"\x3e\x3ca href\x3d"#" data-required\x3d"true"\x3e\x3ci class\x3d"icon-star"\x3e\x3c/i\x3e {{te:"Make All Votes Required"}}\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e{{/if}}'});
swarm.review.buildReviewers();swarm.review.initUserMenu();swarm.review.initGroupMenu();$(document).on("swarm-login",function(){swarm.review.buildReviewers()});$(document).on("click.edit.reviewers",".review-header .edit-reviewers",function(a){var b=$(".review-wrapper"),d=$(a.target).closest("button");d.prop("disabled",!0);swarm.review.openEditReviewersDialog(b.data("review"),function(a,d){a.modal("hide");swarm.review.updateReview(b,d)});$(document).off("shown",".modal.edit-reviewers").on("shown.edit-reviewers",
".modal.edit-reviewers",function(){d.prop("disabled",!1)})});$(document).on("click.dropdown-toggle",".dropdown-toggle",function(){var a=$(this).next();a.addClass("pull-right");a.is(":off-right")&&a.addClass("pull-right");a.is(":off-left")&&a.removeClass("pull-right")})},isCurrentUserMemberOfGroups:function(a){var b=$("body").data("user").groups,d="";for(d in b)if(b.hasOwnProperty(d)&&-1!==a.indexOf(d))return!0;return!1},isCurrentUserInRequiredGroup:function(a,b){var d=$("body").data("user").groups,
c="",e="";for(c in d)if(d.hasOwnProperty(c)&&-1!==a.indexOf("swarm-group-"+c)&&(e="swarm-group-"+c,!0===b[e].required||"true"===b[e].required))return!0;return!1},buildCurrentUserAvatar:function(a){a=$(a.avatar);var b=a.find(".avatar");a.removeClass("fluid");b.attr("width",40).attr("height",40).attr("src",b.attr("src").replace(/s=[0-9]+/,"s\x3d40")).attr("class",b.attr("class").replace(/as-[0-9]+/,"as-40"));return a[0].outerHTML},buildReviewers:function(){var a=$(".review-wrapper"),b=a.data("review"),
d=a.data("can-edit-reviewers"),c=a.data("avatars")||{},e=$.grep(b.participants,function(a){return String(a)!==String(b.author)}).map(String),g=swarm.user.getAuthenticatedUser(),h=g&&String(g.id),f=b.participantsData||{},j={value:0,version:void 0,isStale:void 0},k=a.data("review-groups-members"),a=String(b.author),m=0,n=0;$.each(f,function(a,b){b.vote&&!b.vote.isStale&&(m+=0<b.vote.value?1:0,n+=0>b.vote.value?1:0)});var l="",w=0,x=0,p='\x3cdiv class\x3d"groupReviewers pull-left muted" id\x3d"reviewersGroups"\x3e\x3cdiv class\x3d"span12"\x3e\x3cspan class\x3d"pull-left"\x3e'+
swarm.te("Groups")+":\x3c/span\x3e\x3c/div\x3e\x3cdiv\x3e",q='\x3cdiv class\x3d"individualReviewers pull-left muted" id\x3d"reviewersIndividuals"\x3e\x3cdiv class\x3d"span12"\x3e\x3cspan class\x3d"pull-left span12"\x3e'+swarm.te("Individuals")+":\x3c/span\x3e\x3c/div\x3e\x3cdiv\x3e",u="";if(e.length||d)u+=$.templates.voteSummary.render({upCount:m,downCount:n,reviewers:e,isAuthor:h===a,canEdit:d});var y=[];$.each(e,function(a,b){if(b!==h)if(0===b.indexOf("swarm-group-")){var e=b.replace("swarm-group-",
"");p+=$.templates.reviewerAvatar.render({vote:f[b].vote||j,avatar:c[b]||"",isRequired:f[b].required,minimumRequired:f[b].minimumRequired,notificationsDisabled:!!f[b].notificationsDisabled,userId:e,group:!0,groupDisabled:!0,canEdit:d});w++;y.push(e)}else if("true"===swarm.config.get("reviews.expand_group_reviewers")||f[b].required||-1===$.inArray(b,k))q+=$.templates.reviewerAvatar.render({vote:f[b].vote||j,avatar:c[b]||"",isRequired:f[b].required,minimumRequired:f[b].minimumRequired,notificationsDisabled:!!f[b].notificationsDisabled,
userId:b}),x++});var p=p+"\x3c/div\x3e\x3c/div\x3e",q=q+"\x3c/div\x3e\x3c/div\x3e",s="";0<w&&(l+=p,s='\x3cspan class\x3d"pull-left span12"\x3e\x3c/span\x3e');0<x&&(l+=q,s='\x3cspan class\x3d"pull-left span12"\x3e\x3c/span\x3e');var r=!1;h&&h!==a&&(r=this.isCurrentUserMemberOfGroups(y));var t=-1!==$.inArray(h,e);if(t||r){var r=j,z=0,B=this.isCurrentUserInRequiredGroup(e,f),A=0,g=this.buildCurrentUserAvatar(g),v=!1;t&&(r=f[h].vote||j,v=f[h].minimumRequired,this.isCurrentUserInRequiredGroup(e,f)||(z=
!!f[h].required,v=f[h].minimumRequired),A=!!f[h].notificationsDisabled,g=c[h]||"");l+='\x3cdiv class\x3d"pull-left muted"\x3e'+s+$.templates.reviewerAvatar.render({vote:r,avatar:g,current:!0,isRequired:z,minimumRequired:v,notificationsDisabled:A,userId:h,participant:t,groupRequired:B})+"\x3c/div\x3e"}else h&&h!==a&&(l+='\x3cdiv class\x3d"pull-left muted"\x3e'+s+$.templates.reviewerAvatar.render({vote:j,avatar:this.buildCurrentUserAvatar(g),current:!0,minimumRequired:!1,addReviewer:!0,userId:h,participant:t})+
"\x3c/div\x3e");$("#votes-actions").html(u);e=$(".review-header .reviewers");e.find("[title]").tooltip("destroy");e.html(l);e.find(".current .btn .avatar").unwrap().wrapAll('\x3cdiv class\x3d"avatar-wrapper"\x3e');e.find(".avatar-wrapper").attr("title","").data("customclass","user-vote").tooltip({container:"body",trigger:"manual",isDelegated:!0,html:!0,title:function(){var a=$(this).find("img").attr("alt"),b=$(this).find("img").data("user"),b=f[b]&&f[b].vote?f[b].vote:{};return $.templates('\x3cspan class\x3d"name"\x3e{{\x3ename}}\x3c/span\x3e{{if vote.value}}\x3cbr\x3e\x3cspan class\x3d"muted"\x3e{{if vote.value \x3e 0}}{{te:"voted up"}}{{else}}{{te:"voted down"}}{{/if}}{{if !vote.isStale}} {{te:"latest"}}{{else}} #{{\x3evote.version}}{{/if}}\x3c/span\x3e{{/if}}').render({name:a,
vote:b})}});swarm.review.initGroupUsers(f,a)},initGroupUsers:function(a,b){var d=$("#reviewersGroups .reviewer-avatar");$.templates({groupPills:'\x3cdiv class\x3d"btn-group"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-{{:Colour}} button-name{{if NoVote}} novote{{/if}}" data-original-title\x3d"{{:Id}}" title\x3d"{{:Id}}{{if FullName}} ({{:FullName}}){{/if}}"\x3e{{:Id}}\x3c/button\x3e{{if Vote}}\x3cbutton type\x3d"button" class\x3d"btn btn-mini btn-{{:Colour}}"\x3e\x3ci class\x3d"{{:Vote}} icon-white"\x3e\x3c/i\x3e\x3c/button\x3e{{/if}}\x3c/div\x3e'});
$.each(d,function(c,d){d=$(d);var g=d.data("value"),h="",f="",g=g.replace("reviewer-avatar-","");$.ajax("/api/v9/users",{type:"GET",dataType:"json",data:{fields:["User","FullName"],group:g},success:function(c){var k=d.find("#"+g+"-votes");$.each(c.filter(function(a){if(a.User===b){f=$("\x3cspan\x3e\x3cb\x3e"+swarm.te("Exempt (review owner)")+":\x3c/b\x3e\x3c/span\x3e");var c=b!==a.FullName?a.FullName:"";f.append('\x3cdiv class\x3d"vote-container"\x3e\x3c/div\x3e').append($.templates.groupPills.render({Id:b,
Colour:"info",FullName:c,NoVote:!0}))}return a.User!==b}),function(c,d){var e=b!==d.FullName?d.FullName:"";d=d.User;var f=!1,g=!0;0===c&&(k.append("\x3cspan\x3e\x3cb\x3e"+swarm.te("Members")+":\x3c/b\x3e\x3c/span\x3e"),h=$('\x3cdiv class\x3d"vote-container"\x3e\x3c/div\x3e'));a.hasOwnProperty(d)&&a[d].hasOwnProperty("vote")&&(f=swarm.review.voteIcons[a[d].vote.value],g=!1,a[d].vote.hasOwnProperty("isStale")&&!0===a[d].vote.isStale&&(f+="-stale"));h.append($.templates.groupPills.render({Id:d,Colour:"info",
FullName:e,NoVote:g,Vote:f}))});k.append(h);k.append(f);15<=c.length&&d.find("ul").css({"min-width":"600px"});d.find(".disabled").removeClass("disabled");d.attr("disabled",!1);d.children().attr("disabled",!1)},complete:function(){swarm.review.totalGroupVotes(d)}})})},activeGroupVotes:function(a,b){return 0<a+b?!0:!1},totalGroupVotes:function(a){var b=a.find(".group-members-votes"),d=b.find(".vote-container").first().find("div").length,c=b.find(".icon-chevron-up").length,e=b.find(".icon-chevron-down").length,
g="",g=b.find(".icon-chevron-up-stale").length,b=b.find(".icon-chevron-down-stale").length,g=!0===a.hasClass("requiredAll")?swarm.review.activeGroupVotes(c,e)?d===c?"up":0<e?"down":"":d===g?"up-stale":0<b?"down-stale":"":swarm.review.activeGroupVotes(c,e)?0<e?"down":0<c?"up":"":0<b?"down-stale":0<g?"up-stale":"";""!==g&&a.find(".avatar-wrapper:first-child").after('\x3ci class\x3d"swarm-icon icon-vote-'+g+'"\x3e\x3c/i\x3e')},initUserMenu:function(){$(document).off("click.review.user.menu");$(document).on("click.review.user.menu",
".review-header .reviewers .dropdown-menu.user a",function(a){a.preventDefault();var b=$(this).data("action");a=function(a,c){var e=$(".review-header .reviewers .current");e.removeClass("open");var g=e.find(".avatar-wrapper"),e="",h=g.attr("data-original-title");if("join"===b||"leave"===b)e="join"===b?swarm.t("Joined"):swarm.t("Left");if("disableNotifications"===b||"enableNotifications"===b)e="enableNotifications"===b?swarm.t("Notifications enabled"):swarm.t("Notifications disabled");e&&"success"===
c&&(g.attr("data-original-title",e).tooltip("show"),setTimeout(function(){g.attr("data-original-title",h).tooltip("hide")},3E3))};"join"===b?swarm.review.join(a):"leave"===b?swarm.review.leave(a):"required"===b||"optional"===b?swarm.review.setRequiredReviewer("required"===b,a):"disableNotifications"===b||"enableNotifications"===b?swarm.review.disableNotifications("disableNotifications"===b,a):swarm.review.vote(b,a)})},initGroupMenu:function(){$(document).off("click.review.type-group.menu");$(document).on("click.review.type-group.menu",
".review-header .reviewers .dropdown-menu.type-group a",function(){var a=$(this),b=a.data("action"),d=a.parent().parent().parent(),a=d.data("value").replace("reviewer-avatar-",""),c=function(a,c){d.removeClass("open");var h=d.find(".avatar-wrapper"),f="",j=h.attr("data-original-title");"leave"===b&&(f=swarm.t("Left"));f&&"success"===c&&(h.attr("data-original-title",f).tooltip("show"),setTimeout(function(){h.attr("data-original-title",j).tooltip("hide")},3E3))};"leave"===b?swarm.review.groupLeave(c,
a):"optional"===b?swarm.review.groupSetRequiredReviewer(!1,"swarm-group-"+a,c):"allRequired"===b?swarm.review.groupSetRequiredReviewer(!0,"swarm-group-"+a,c):"oneRequired"===b&&swarm.review.groupSetRequiredReviewer(1,"swarm-group-"+a,c)})},groupLeave:function(a,b){var d=$(".review-wrapper"),c=d.data("review");$.ajax("/reviews/"+c.id+"/reviewers/"+encodeURIComponent("swarm-group-"+b)+"?_method\x3dDELETE",{type:"POST",dataType:"json",success:function(a){swarm.review.updateGroupsMembers(a.groupsMembership);
swarm.review.updateReview(d,a)},complete:a})},updateGroupsMembers:function(a){$(".review-wrapper").data("review-groups-members",a)},groupSetRequiredReviewer:function(a,b,d){var c=$(".review-wrapper"),e=c.data("review");$.ajax("/reviews/"+e.id+"/reviewers/"+encodeURIComponent(b)+"?_method\x3dPATCH",{type:"POST",dataType:"json",data:{required:a},success:function(a){swarm.review.updateReview(c,a)},complete:d})},leave:function(a){var b=$(".review-wrapper"),d=b.data("review"),c=swarm.user.getAuthenticatedUser();
$.ajax("/reviews/"+d.id+"/reviewers/"+encodeURIComponent(c.id)+"?_method\x3dDELETE",{type:"POST",dataType:"json",success:function(a){swarm.review.updateReview(b,a)},complete:a})},join:function(a){var b=$(".review-wrapper"),d=b.data("review"),c=swarm.user.getAuthenticatedUser();$.ajax("/reviews/"+d.id,{type:"POST",dataType:"json",data:{join:c.id},success:function(a){swarm.review.updateReview(b,a)},complete:a})},vote:function(a,b){var d=$(".review-wrapper"),c=d.data("review"),e=swarm.user.getAuthenticatedUser();
$.ajax("/reviews/"+c.id+"/vote/"+a,{type:"POST",dataType:"json",data:{user:String(e.id),version:c.versions.length},success:function(a){swarm.review.updateReview(d,a)},complete:b})},setRequiredReviewer:function(a,b){var d=$(".review-wrapper"),c=d.data("review"),e=swarm.user.getAuthenticatedUser();$.ajax("/reviews/"+c.id+"/reviewers/"+encodeURIComponent(e.id)+"?_method\x3dPATCH",{type:"POST",dataType:"json",data:{required:a},success:function(a){swarm.review.updateReview(d,a)},complete:b})},disableNotifications:function(a,
b){var d=$(".review-wrapper"),c=d.data("review"),e=swarm.user.getAuthenticatedUser();$.ajax("/reviews/"+c.id+"/reviewers/"+encodeURIComponent(e.id)+"?_method\x3dPATCH",{type:"POST",dataType:"json",data:{notificationsDisabled:a},success:function(a){swarm.review.updateReview(d,a)},complete:b})},runTest:function(a,b){var d=$(".review-wrapper").data("review");$.ajax({type:"POST",url:"/api/v10/reviews/"+d.id+"/testruns/"+a+"/run",dataType:"json",complete:b})},editReviewersModal:function(a,b){var d=$.grep(a.participants,
function(b){return b!==a.author}),c=a.participantsData||{},e=$($.templates.editReviewersDialog.render()).appendTo("body"),g=function(a){a.attr("title",swarm.t("Voting requirements cannot be reduced.")).on("click",function(a){a.preventDefault();a.stopPropagation();a.stopImmediatePropagation()})};swarm.modal.show(e);e.on("limit",function(a){a.target===this&&(a=$(this),a.removeClass("freeflow"),400>a.find(".reviewers-list").height()&&a.addClass("freeflow"))});e.find(".reviewer-multipicker").userMultiPicker({itemsContainer:e.find(".reviewers-list"),
selected:d.filter(function(a){return-1===String(a).indexOf("swarm-group-")}),selectedGroups:d.filter(function(a){return-1!==String(a).indexOf("swarm-group-")}),inputName:"reviewers",enableGroups:!0,useGroupKeys:!0,excludeProjects:!0,excludeUsers:[a.author],createItem:function(a){var b="true"===swarm.config.get("users.display_fullname")&&"object"===typeof swarm.users&&"string"===typeof swarm.users[a]?swarm.users[a]:a,b=$($.templates(this.itemTemplate).render({value:b,inputName:this.options.inputName,
id:a}));b.find(".btn-group").addClass("minimum-"+(!!c[a]&&c[a].minimumRequired)).prepend($.templates.requiredReviewerButton.render({isRequired:!!c[a]&&c[a].required,minimumRequired:!!c[a]&&c[a].minimumRequired,value:a,isGroup:-1!==String(a).indexOf("swarm-group-")}));c[a]&&c[a].minimumRequired&&(b.find("button.item-remove").remove(),!0===c[a].minimumRequired&&!0===c[a].required&&g(b.find("button.item-require")));e.trigger("limit");return b}});e.on("click.required",".item-require.btn-info",function(){var a=
$(this);setTimeout(function(){var b=a.hasClass("active");a.find("i").toggleClass("icon-star",b).toggleClass("icon-star-empty",!b);a.find("input").prop("disabled",!b);a.attr("data-original-title",b?swarm.t("Vote Required"):swarm.t("Vote Optional"));a.tooltip("show");setTimeout(function(){a.attr("data-original-title",b?swarm.t("Make Vote Optional"):swarm.t("Make Vote Required"))},1E3)},0)});e.on("click.required",".group-required a",function(a){a.preventDefault();a=$(this);var b=a.closest(".btn-group"),
c=a.data("required");b.find("input.quorum").val(c);setTimeout(function(){var a=b.find(".item-require");a.find("i").removeClass("icon-star icon-star-empty").addClass(c?"icon-star":"icon-star-empty").text(1===c?c:"");b.find("li").show();b.find("li a[data-required\x3d"+c+"]").parent().hide();b.find("input").prop("disabled",!c);b.find(".quorum").prop("disabled",1!==c);a.attr("data-original-title",c?1===c?swarm.t("One Vote Required"):swarm.t("Vote Required"):swarm.t("Vote Optional"));a.tooltip("show");
0<a.length&&!0===c&&g(a);setTimeout(function(){!0===c&&a.hasClass("minimum-true")?a.attr("data-original-title",swarm.t("Voting requirements cannot be reduced.")):a.attr("data-original-title",swarm.t("Change Required Votes"));a.tooltip("hide")},1E3)},0)});e.find("form").submit(function(c){c.preventDefault();swarm.form.post("/reviews/"+a.id+"/reviewers",e.find("form"),function(a){b&&a.isValid&&(swarm.review.updateGroupsMembers(a.groupsMembership),b(e,a))},e.find(".messages")[0])});e.on("shown",function(a){a.target===
this&&(a=$(this),a.find(".reviewers input.multipicker-input").focus(),a.trigger("limit"))});e.on("hidden",function(a){a.target===this&&$(this).remove()})},openEditReviewersDialog:function(a,b){$.ajax("/reviews/"+a.id,{dataType:"json",data:{format:"json"},success:function(a){swarm.review.editReviewersModal(a.review,b)}})},openEditDialog:function(a,b,d){var c=$($.templates('\x3cdiv class\x3d"modal hide fade review-edit" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"edit-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"edit-title"\x3e{{te:"Edit Description"}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3cdiv class\x3d"controls"\x3e\x3ctextarea name\x3d"description" class\x3d"border-box monospace"placeholder\x3d"{{te:"Provide a description"}}" rows\x3d"15" cols\x3d"80" required\x3e{{\x3ereview.description}}\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cdiv class\x3d"control-group buttons form-inline"\x3e\x3cdiv class\x3d"controls pull-right"\x3e{{if review.pending \x26\x26 currentUser.id \x3d\x3d\x3d review.versions[0].user}}\x3clabel class\x3d"update-original-changelist-checkbox" for\x3d"updateOriginalChangelist"\x3e\x3cinput type\x3d"checkbox" id\x3d"updateOriginalChangelist" name\x3d"updateOriginalChangelist"\x3e'+
swarm.te("Update original changelist")+'\x3c/label\x3e{{/if}}\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e{{te:"Update"}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Cancel"}}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e').render({review:a.review,currentUser:b})).appendTo("body");swarm.modal.show(c);c.find("form").submit(function(b){b.preventDefault();swarm.form.post("/reviews/"+a.review.id,c.find("form"),function(a){a.isValid&&
d(c,a)},c.find(".messages")[0])});c.on("shown",function(){$(this).find("textarea").focus()});c.on("hidden",function(a){a.target===this&&$(this).remove()})},openTransitionDialog:function(a,b,d){var c=$("#comments table.opened-comments tr.task-state-open").length,e=$($.templates('\x3cdiv class\x3d"modal hide fade review-transition" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"transition-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form" id\x3d"review-state-change-modal"\x3e\x3cinput type\x3d"hidden" name\x3d"state" value\x3d"{{\x3estate}}"\x3e{{if review.commitStatus.error}}\x3cinput type\x3d"hidden" name\x3d"commitStatus" value\x3d""\x3e{{/if}}\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"transition-title"\x3e{{if state \x3d\x3d "approved:commit"}}'+
swarm.te("Commit")+"{{else}}"+swarm.te("Update")+'{{/if}} {{te:"Review"}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"messages"\x3e{{if (state \x3d\x3d\x3d "approved:commit" || state \x3d\x3d\x3d "approved") \x26\x26 openCount}}\x3cdiv class\x3d"alert open-count"\x3e\x3cstrong\x3e'+swarm.te("Warning")+"!\x3c/strong\x3e "+swarm.tpe("There is an open task on this review","There are %s open tasks on this review",c)+'\x3c/div\x3e{{/if}}\x3c/div\x3e\x3cdiv class\x3d"control-group"\x3e\x3ctextarea name\x3d"description" class\x3d"border-box{{if state \x3d\x3d "approved:commit"}} monospace{{/if}}"{{if state \x3d\x3d "approved:commit"}} required rows\x3d"15" cols\x3d"auto"\x3e{{\x3ereview.description}}{{else}} placeholder\x3d"'+
swarm.te("Optionally, provide a comment")+'" rows\x3d"10" cols\x3d"80"\x3e{{/if}}\x3c/textarea\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cdiv id\x3d"review-transition-control-group" class\x3d"control-group buttons form-inline"\x3e\x3cdiv class\x3d"controls pull-right"\x3e{{if cleanup \x26\x26 "user" \x3d\x3d\x3d cleanup.mode \x26\x26 state \x3d\x3d\x3d "approved:commit"}}\x3clabel class\x3d"checkbox" for\x3d"cleanup-on-commit-{{\x3ereview.id}}"\x3e'+swarm.te("Remove pending changelists")+
' \x3cinput type\x3d"checkbox" id\x3d"cleanup-on-commit-{{\x3ereview.id}}" name\x3d"cleanup"{{if cleanup \x26\x26 true \x3d\x3d\x3d cleanup.default}} checked\x3d"checked"{{/if}}\x3e\x3c/label\x3e\x3ca href\x3d"'+swarm.assetUrl("/docs/Content/Swarm/code_reviews.states.html#code_reviews.states.state_actions")+'" id\x3d"cleanup-on-commit-help-{{\x3ereview.id}}" target\x3d"_swarm_docs" title\x3d"'+swarm.te("Show documentation for this feature")+'"\x3e\x3ci class\x3d"icon-question-sign"\x3e\x3c/i\x3e\x3c/a\x3e{{/if}}\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e{{te:transitions[state]}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Cancel"}}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e').render({state:a,
review:b.review,transitions:b.transitions,openCount:c,cleanup:b.cleanup,baseUrl:$("body").data("base-url")})).appendTo("body");if("approved:commit"===a&&b.jobs.length){var g=$('\x3cdiv class\x3d"control-group jobs-list"\x3e\x3cinput type\x3d"hidden" name\x3d"jobs" value\x3d""\x3e\x3ctable class\x3d"table"\x3e\x3c/table\x3e\x3cinput type\x3d"hidden" name\x3d"fixStatus"\x3e\x3c/div\x3e');$.each(b.jobs,function(){g.find("table").append($.templates('\x3ctr data-job\x3d"{{\x3ejob}}"\x3e\x3ctd\x3e\x3cinput type\x3d"checkbox" name\x3d"jobs[]" value\x3d"{{\x3ejob}}" checked\x3d"checked"\x3e\x3c/td\x3e\x3ctd class\x3d"job-id"\x3e\x3ca href\x3d"{{:link}}" target\x3d"_blank"\x3e{{\x3ejob}}\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d"job-status"\x3e{{te:status}}\x3c/td\x3e\x3ctd class\x3d"job-description force-wrap" width\x3d"90%"\x3e{{:description}}\x3c/td\x3e\x3c/tr\x3e').render(this))});
g.find(".job-description").expander({slicePoint:70});e.find("form .modal-body").append(g);if(b.jobStatus){a=b.jobStatus["default"];var c=a.split(",fix/").pop(),h=c!==a?c:"closed",f='\x3cli data-status\x3d"same"\x3e\x3ca href\x3d"#"\x3e'+swarm.te("Same")+'\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"divider"\x3e\x3c/li\x3e';$.each(b.jobStatus.options,function(){var a=this.valueOf(),b=a===h?"selected":"";f+=$.templates('\x3cli data-status\x3d"{{\x3estatus}}" class\x3d"{{:selected}}"\x3e\x3ca href\x3d"#"\x3e{{:label}}\x3c/a\x3e\x3c/li\x3e').render({status:a,
label:swarm.jobs.getFriendlyLabel(a),selected:b})});e.find("#review-transition-control-group").prepend($.templates('\x3cdiv class\x3d"pull-left"\x3e\x3cspan class\x3d"status-label"\x3e'+swarm.te("Job Status on Commit")+'\x3c/span\x3e\x3cdiv class\x3d"btn-group status-dropdown"\x3e\x3cbutton type\x3d"button" class\x3d"btn dropdown-toggle" data-toggle\x3d"dropdown" aria-haspopup\x3d"true"\x3e\x3cspan class\x3d"text"\x3e\x3c/span\x3e \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\x3c/button\x3e\x3cul class\x3d"dropdown-menu" role\x3d"menu" aria-label\x3d"'+
swarm.te("Job Status on Commit")+'"\x3e{{:options}}\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e').render({options:f}));var j=function(){var a=e.find(".status-dropdown .dropdown-menu"),b=a.find(".selected").length?a.find(".selected"):a.find("li:first"),a=b.data("status"),b=b.find("a").html();e.find(".status-dropdown .text").text(b);g.find('[name\x3d"fixStatus"]').val(a)};j();e.on("click.job.status",".modal-footer .dropdown-menu a",function(a){a.preventDefault();$(this).closest(".dropdown-menu").find("li").removeClass("selected");
$(this).closest("li").addClass("selected");j()})}}swarm.modal.show(e);e.find("form").submit(function(a){a.preventDefault();swarm.overlay.show();swarm.form.post("/reviews/"+b.review.id+"/transition",e.find("form"),function(a){a.isValid&&d(e,a)},e.find(".messages")[0])});e.on("shown",function(){$(this).find("textarea").focus()});e.on("hidden",function(a){a.target===this&&$(this).remove()})},openEditAuthorDialog:function(a){var b=$(".review-wrapper"),d=$($.templates('\x3cdiv class\x3d"modal hide fade author-edit" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"edit-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"edit-title"\x3e{{te:"Edit Author"}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\x3cdiv class\x3d"input-prepend" clear\x3d"both"\x3e\x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\x3cinput type\x3d"text" name\x3d"user" class\x3d"input-xlarge multipicker-input" placeholder\x3d"'+
swarm.te("Author Name")+'"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e{{te:"Save"}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Cancel"}}\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e').render()).appendTo("body");d.find(".multipicker-input").userMultiPicker({onSelect:function(){var a=this.typeahead.$menu.find(".active");a.length&&this.$element.val(a.data("value").id)},excludeUsers:[String(a.author)]});
swarm.modal.show(d);d.find("form").submit(function(c){c.preventDefault();swarm.form.post("/reviews/"+a.id+"/author",d.find("form"),function(a){if(a.isValid)return swarm.review.updateReview(b,a),d.modal("hide"),!1},d.find(".messages")[0])});d.on("shown",function(){$(this).find("input[type\x3dtext]").focus()});d.on("hidden",function(a){a.target===this&&$(this).remove()})},_polling:null,pollForUpdate:function(a){window.clearTimeout(swarm.review._polling);swarm.review._polling=setTimeout(function(){var b=
$(".review-wrapper").data("review");$.ajax("/reviews/"+b.id,{dataType:"json",data:{format:"json"},success:function(b){a&&!1!==a(b.review)?swarm.review.pollForUpdate(a):swarm.overlay.hide()},error:function(){swarm.overlay.hide()}})},1E3)},updateReview:function(a,b){a.data("review",b.review);a.data("avatars",b.avatars);a.data("author-avatar",b.authorAvatar);a.data("transitions",b.transitions);a.data("can-edit-reviewers",b.canEditReviewers);a.data("can-edit-author",b.canEditAuthor);a.data("change-modify",
b.changeModify);swarm.review.initAuthor();swarm.review.initVersionChooser();swarm.review.initSlider();a.find(".change-description").html(b.description);swarm.review.initEdit();swarm.review.buildStateMenu();swarm.review.updateTestStatus();swarm.review.updateDeployStatus();swarm.review.buildReviewers();swarm.review.buildAddChangeMenu()},updateTestStatus:function(a){var b=$(".review-wrapper"),d=b.find(".review-header"),c=b.data("review"),b=$("select#revision-select-to").val(),e;$.ajax({url:"/api/v10/reviews/"+
c.id+"/testruns?version\x3d"+b,dataType:"json",success:function(b){d.find(".test-status").remove();void 0!==b.data.testruns&&0<b.data.testruns.toString().length?(e=swarm.review.getTestIconValues(b.data.status),d.find(".review-status").prepend(swarm.review.buildTestRunMenu(b.data.testruns,e))):(e=swarm.review.getTestIconValues(c.testStatus),d.find(".review-status").prepend(swarm.review.buildTestStatusButton(c,e)));a&&a()}})},getTestIconValues:function(a){var b,d;switch(a){case "running":case "started":a=
"clear";b="svg-refresh animate";d=swarm.t("Tests Started");break;case "fail":a="danger";b="warning-sign icon-white";d=swarm.t("Tests Failed");break;case "pass":d=swarm.t("Tests Pass");a="success";b="check icon-white";break;default:d=swarm.t("Tests Not Started"),b=a=""}return{color:a,icon:b,statusText:d}},buildTestRunMenu:function(a,b){var d="",c=$($.templates('\x3cspan class\x3d"pull-left test-status"\x3e\x3ca class\x3d"dropdown-toggle btn btn-small btn-{{:color}}" data-toggle\x3d"dropdown"\x3e\x3ci class\x3d"icon-{{:icon}}"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/span\x3e').render({icon:b.icon,
color:b.color})),e=parseInt($("select#revision-select-to option").length,10),g=parseInt($("select#revision-select-to").val(),10),h=e===g,f=swarm.t("Run test"),j=swarm.t("Rerun test"),k=swarm.user.getAuthenticatedUser();$(document).on("click",".button-tests-rerun",function(a){var b=a.currentTarget;!$(b).hasClass("disabled")&&k&&($(".button-tests-rerun").addClass("disabled"),$(".button-tests-rerun").children("i").attr("class","icon-tests-rerun-disabled"),$(b).children("i").html('\x3cspan class\x3d"swarm-icon icon-tests-waiting animate"\x3e\x3c/span\x3e'),
b=parseInt(b.id,10),swarm.review.runTest(b,function(){swarm.review.updateTestStatus(function(){$(".tooltip").remove();$(".test-status").addClass("open");$(".dropdown-menu").addClass("pull-right")})}));a.stopPropagation()});$.each(a,function(){var a=this.test.startsWith("project:"),b=swarm.review.getTestIconValues(this.status);d+=$.templates('\x3cli class\x3d"dropdown-row"\x3e\x3ca class\x3d"testrun" href\x3d"{{:url}}" target\x3d"{{\x3etarget}}" id\x3d"testrun-{{\x3eid}}" data-name\x3d"{{\x3etest}}" data-state\x3d"testrun-{{\x3eid}}"\x3e\x3cp title\x3d"{{\x3etext}}"\x3e\x3ci class\x3d"icon-{{:icon}} btn-{{:color}}"\x3e\x3c/i\x3e{{\x3etext}}\x3c/p\x3e\x3c/a\x3e'+
(!k||!h||"running"===this.status||a?"":'\x3cbutton type\x3d"button" title\x3d"{{\x3ererun}}" class\x3d"button-tests-rerun" id\x3d"{{\x3eid}}"\x3e\x3ci class\x3d"icon-tests-rerun"\x3e\x3csvg class\x3d"svgIcon"\x3e\x3cuse href\x3d"/swarm/img/icons/line/triangle-circle.svg#Combined-Shape_1_"\x3e\x3c/use\x3e\x3c/svg\x3e\x3c/i\x3e\x3c/button\x3e')+"\x3c/li\x3e").render({text:(this.title||this.test)+(this.messages?": "+this.messages:""),id:this.id,url:this.url||"javascript".concat(":void(0)"),icon:b.icon,
color:b.color,test:this.test,target:this.url?"_blank":"",rerun:"notstarted"===this.status?f:j})});0!==d.length&&(e=c.append('\x3cul class\x3d"dropdown-menu"\x3e\x3c/ul\x3e').find("ul"),e.children().remove(),e.append(d));return c},buildTestStatusButton:function(a,b){if(a.testStatus){var d=a.testDetails,c=d.url?encodeURI(d.url):"",d=d.endTimes&&d.endTimes.length?Math.max.apply(null,d.endTimes):null,e=$(c?"\x3ca\x3e":"\x3cspan\x3e");e.addClass("test-status pull-left btn btn-small btn-"+b.color).attr("href",
c).attr("target","_blank").attr("disabled",!c).append($("\x3ci\x3e").addClass("icon-"+b.icon));c=$("\x3cspan\x3e");c.text(b.statusText);d&&c.append("\x3cbr\x3e").append('\x3cspan class\x3d"timeago muted" title\x3d"'+(new Date(1E3*d)).toISOString()+'"\x3e\x3c/span\x3e').find(".timeago").formatTimestamp();e.tooltip({title:c});return e}},updateDeployStatus:function(){var a=$(".review-wrapper"),b=a.find(".review-header"),a=a.data("review"),d="success"===a.deployStatus,c="deploying"===a.deployStatus,e=
d?swarm.te("Try it out!"):c?swarm.te("Deploying..."):swarm.te("Deploy Failed"+(a.deployStatus?a.deployStatus.replace("failed:","\n"):"")),g=d||c?"":"warning",h=a.deployDetails.url?encodeURI(a.deployDetails.url):"",f=h?"a":"span";if(a.deployStatus&&(!d||h))b.find(".deploy-status").remove(),b.find(".review-status").prepend("\x3c"+f+' class\x3d"deploy-status pull-left btn btn-small btn-'+g+'" title\x3d"'+e+'" '+(h&&!c?'href\x3d"'+h+'" target\x3d"_blank"':'disabled\x3d"disabled"')+'\x3e\x3ci class\x3d"'+
(c?"icon-svg-refresh animate":"icon-plane")+(d?"":" icon-white")+'"\x3e\x3c/i\x3e\x3c/'+f+"\x3e")},buildAddChangeMenu:function(){var a=$(".review-wrapper"),b=a.find(".add-change"),d=a.data("review"),c=a.data("change-modify"),a="";b.toggleClass("add-change-hide",!c);c&&(c="",d.pending&&(a=swarm.te("Append Pending Changelist"),c+=$.templates('\x3cli\x3e\x3ca href\x3d"#" id\x3d"change-append" data-state\x3d"change-append"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e{{\x3etext}}\x3c/a\x3e\x3c/li\x3e').render({text:a})),
a=swarm.te("Replace with Pending Changelist"),c+=$.templates('\x3cli\x3e\x3ca href\x3d"#" id\x3d"change-replace-pending" data-state\x3d"change-replace-pending"\x3e\x3ci class\x3d"icon-share-alt"\x3e\x3c/i\x3e{{\x3etext}}\x3c/a\x3e\x3c/li\x3e').render({text:a}),a=swarm.te("Replace with Committed Changelist"),c+=$.templates('\x3cli\x3e\x3ca href\x3d"#" id\x3d"change-replace-committed" data-state\x3d"change-replace"\x3e\x3ci class\x3d"icon-share-alt"\x3e\x3c/i\x3e{{\x3etext}}\x3c/a\x3e\x3c/li\x3e').render({text:a}),
0!==c.length&&(b=b.append('\x3cul class\x3d"dropdown-menu"\x3e\x3c/ul\x3e').find("ul"),b.children().remove(),b.append(c)))},buildStateMenu:function(){var a=$(".review-wrapper"),b=a.find(".review-header"),d=a.data("review"),a=a.data("transitions");b.find(".state-menu").remove();var c="";$.each(a,function(a,b){c+=$.templates('\x3cli\x3e\x3ca href\x3d"#" data-state\x3d"{{\x3estate}}"\x3e \x3ci class\x3d"swarm-icon icon-review-{{class:state}}"\x3e\x3c/i\x3e {{te:label}}\x3c/a\x3e\x3c/li\x3e').render({state:a,
label:b})});var e=$("body"),g=swarm.config.get("reviews.allow_author_obliterate"),h=swarm.te("Obliterate Review");if("true"===g&&e.data("user")&&d.author===e.data("user").id||e.hasClass("admin"))c+=$.templates('\x3cli class\x3d"divider"\x3e\x3c/li\x3e\x3cli\x3e\x3ca href\x3d"#" data-state\x3d"{{\x3estate}}"\x3e \x3ci class\x3d"icon-remove-sign"\x3e\x3c/i\x3e {{\x3elabel}}\x3c/a\x3e\x3c/li\x3e').render({state:"obliterate-review",label:h});e=d.commitStatus.error?d.commitStatus.error.split("\n")[0]:
"";b.find(".review-status").append($.templates('\x3cdiv class\x3d"state-menu btn-group pull-right"\x3e \x3cbutton type\x3d"button"  class\x3d"btn btn-small btn-primary btn-branch dropdown-toggle          {{if review.commitStatus.error}}btn-danger{{/if}}"  {{if !authenticated || transitions \x3d\x3d\x3d false}}disabled{{else}}aria-haspopup\x3d"true"{{/if}}  {{if review.commitStatus.error}}    title\x3d"{{te:"Error committing"}} {{te:tooltip}}"  {{/if}}  data-toggle\x3d"dropdown"\x3e{{if review.commitStatus.error}}  \x3ci class\x3d"icon-white icon-warning-sign"\x3e\x3c/i\x3e    {{te:"Error"}}{{else review.commitStatus.start}}  \x3ci class\x3d"swarm-icon icon-white icon-committed"\x3e\x3c/i\x3e    {{if review.commitStatus.status}}{{te:review.commitStatus.status}}{{else}}{{te:"Committing"}}{{/if}}...{{else !review.pending \x26\x26 review.state\x3d\x3d"approved"}}  \x3ci class\x3d"swarm-icon icon-white icon-committed"\x3e\x3c/i\x3e    {{te:review.stateLabel}}{{else}}  \x3ci class\x3d"swarm-icon icon-white icon-review-{{\x3ereview.state}}"\x3e\x3c/i\x3e    {{te:review.stateLabel}}{{/if}} \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\x3c/button\x3e \x3cul class\x3d"dropdown-menu" role\x3d"menu" aria-label\x3d"{{te:"Transition Review"}}"\x3e{{:items}}\x3c/ul\x3e\x3c/div\x3e').render({review:d,
items:c,transitions:a,authenticated:$("body").is(".authenticated"),tooltip:e}))},add:function(a,b){var d=$(a);if(!d.data("executing"))return d.data("executing",!0),b=b||d.closest(".change-wrapper").data("change").id,$("div.alert").remove(),swarm.form.disableButton(d),$.post("/reviews/add",{change:b},function(a){a.id?(swarm.form.enableButton(d),d.prop("onclick",null).off("click").attr("href",swarm.url("/reviews/"+a.id)).toggleClass("btn-primary btn-success").find(".text").text(swarm.t("View Review")),
d.closest("tr").find("td.review-status").append($("\x3ci\x3e").addClass("swarm-icon icon-review-needsReview").attr("title",swarm.te("Needs Review"))),d.tooltip({title:swarm.t("Review Requested"),trigger:"manual"}).tooltip("show"),setTimeout(function(){d.tooltip("destroy")},3E3)):a.isValid||(swarm.form.enableButton(d),a.error&&swarm.alert.popup(a.error,"error"));d.removeData("executing")}),!1},sendDelayedNotifications:function(a){a=$(a);a=a.data("topic");$.post("/api/v9/comments/notify",{topic:a},
function(a){200===a.code?(swarm.alert.popup(a.message,"success"),$(".post-and-send-delayed-comments .post-count").text(" "+swarm.t("Post and Notify (0)"))):swarm.alert.popup(a.error,"error")})},setFloat:function(){var a=$("#review-actionable-items").position().top,b=$("#reviewers-summary").position().top;50<Math.abs(a-b)?($("#review-actionable-items").css("float","left"),$("#reviewers-summary").css("float","none").css("display","inline-table").css("padding-left","12px")):($("#review-actionable-items").css("float",
"right"),$("#reviewers-summary").css("float","right").css("display","block").css("padding-left","inherit"))},openChangeSelectorModelCallback:function(a){var b=$(a).find(".change-input input").val();$(a).find(".changes-list, input").addClass("disabled").prop("disabled",!0);swarm.form.disableButton($(a).find("[type\x3dsubmit]"));$(a).on("hide",function(a){a.preventDefault()});swarm.review.pollForUpdate(function(a){if(a.commits){var c;for(c=0;c<a.commits.length;c++)if(parseInt(a.commits[c],10)===parseInt(b,
10))return window.location.reload(),!1;var e;for(e=0;c<a.changes.length;e++)if(parseInt(a.changes[e],10)===parseInt(b,10))return window.location.reload(),!1}})},openChangeSelector:function(a,b,d,c,e,g,h){b.review.path=b.change.basePath||"";b=b.review;b.dialogTitle=e;b.dialogState=g;b.dialogMode=h;b.dialogSubTitle="pending"===c?swarm.te("Pending Changes"):swarm.te("Commits");var f=$($.templates('\x3cdiv class\x3d"modal hide fade select-change-modal" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"select-change-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"select-change-title"\x3e{{\x3edialogTitle}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cinput type\x3d"hidden" name\x3d"id" value\x3d"{{\x3eid}}"\x3e\x3cinput type\x3d"hidden" name\x3d"state" value\x3d"{{\x3edialogState}}"\x3e\x3cinput type\x3d"hidden" name\x3d"mode" value\x3d"{{\x3edialogMode}}"\x3e\x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\x3cdiv class\x3d"change-input control-group pad2 padw0"\x3e\x3cdiv class\x3d"input-prepend"\x3e\x3cspan class\x3d"add-on"\x3e@\x3c/span\x3e\x3cinput class\x3d"input-small" type\x3d"text" pattern\x3d"[0-9]*" name\x3d"change" id\x3d"change" required placeholder\x3d"'+
swarm.te("Change")+'"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"clearfix"\x3e\x3ch4 class\x3d"muted"\x3e{{\x3edialogSubTitle}}\x3c/h4\x3e\x3cinput class\x3d"path pull-left border-box" type\x3d"text" name\x3d"path" placeholder\x3d"'+swarm.te("Path")+'" value\x3d"{{\x3epath}}"\x3e\x3cinput class\x3d"user pull-right border-box" type\x3d"text" name\x3d"user" placeholder\x3d"'+swarm.te("User")+'" value\x3d"{{\x3eauthor}}"\x3e\x3c/div\x3e\x3cdiv class\x3d"changes-list"\x3e\x3cdiv class\x3d"loading animate muted pad3"\x3e'+
swarm.te("Loading...")+'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"submit" class\x3d"btn btn-primary"\x3e'+swarm.te("Select")+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e").render(b)).appendTo("body");swarm.modal.show(f);swarm.form.checkInvalid($(f).find("form"));f.find("form").submit(function(b){b.preventDefault();swarm.form.post(a,f.find("form"),
function(a){a.isValid&&d(f,a)},f.find(".messages")[0])});f.find(".changes-list").on("click","tr",function(a){0===a.button&&(a.preventDefault(),$(this).closest(".changes-list").is(".disabled")||(f.find("#change").val(parseInt($(this).find("td.change a").text(),10)).trigger("change"),f.find(".changes-list tr").removeClass("active"),$(this).addClass("active")))});f.find("#change").on("input keyup blur",function(){f.find(".changes-list tr").removeClass("active")});f.on("hidden",function(a){a.target===
this&&$(this).remove()});f.find(".changes-list").on("changes-loaded",function(){$(this).find(".loading").remove();$(this).find("thead, td.time").remove();$(this).find(".description").expander("destroy").expander({slicePoint:70})});swarm.changes.load(f.find("input.path").val(),f.find(".changes-list"),{user:f.find("input.user").val(),status:c});f.find(".changes-list").scroll(function(){var a=f.find(".changes-list");$.isScrolledToBottom(a,a.find("\x3etable"))&&swarm.changes.load(f.find("input.path").val(),
f.find(".changes-list"),{user:f.find("input.user").val(),status:c})});f.find("input.path, input.user").on("input keyup blur",function(){clearTimeout(swarm.changes.filterTimeout);swarm.changes.filterTimeout=setTimeout(function(){swarm.changes.load(f.find("input.path").val(),f.find(".changes-list"),{user:f.find("input.user").val(),reset:!0,status:c})},500)})},obliterate:function(a){var b=swarm.te("Are you sure you want to Obliterate this Review?"),d=swarm.te("Obliterate Review"),c=$($.templates('\x3cdiv class\x3d"modal hide fade review-obliterate" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"edit-title" aria-hidden\x3d"true"\x3e\x3cform method\x3d"post" class\x3d"form-horizontal modal-form force-wrap"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"edit-title"\x3e{{\x3etitle}}\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body obliterate"\x3e\x3cdiv class\x3d"messages error"\x3e{{\x3emessage}}\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"submit" class\x3d"btn btn-primary" data-review\x3d"{{\x3eid}}"\x3e{{te:"OK"}}\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e{{te:"Cancel"}}\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e').render({id:a.review.id,
message:b,title:d})).appendTo("body");swarm.modal.show(c);c.find("form").submit(function(b){b.preventDefault();swarm.overlay.show(!0);swarm.form.post("/api/v9/reviews/"+a.review.id+"/obliterate",c.find("form"),function(a){a.isValid?200===a.code?(c.modal("hide"),window.location=swarm.url("/reviews")):swarm.overlay.hide():swarm.overlay.hide()},c.find(".messages")[0],function(a){return{review:$(a.find('button[type\x3d"submit"]')[0]).data("review")}})});c.on("hidden",function(a){a.target===this&&$(this).remove()})}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.jobs={_loading:!1,msgIds:function(){swarm.te("Job");swarm.te("Date")},init:function(a){var b=$(".jobs-toolbar input[name\x3dquery]");$("table.jobs").data("query",b.val());swarm.jobs.load();var f=function(){$("table.jobs").data("query")!==b.val()&&(swarm.jobs._loading&&(swarm.jobs._loading.abort(),swarm.jobs._loading=!1),$("table.jobs").data("query",b.val()),swarm.jobs.load(!0))},e=function(){f();var g="?q\x3d"+encodeURIComponent(b.val());a&&g!==location.search&&swarm.history.pushState(null,
null,g)};$(".jobs-toolbar .btn-search").on("click",e);b.on("keypress",function(a){var h=a.keyCode||a.which;"keypress"===a.type&&13!==h||e()});if(a){$("table.jobs").on("loaded",function(){$(".jobs-toolbar .btn-select-columns").prop("disabled",!1)});$("table.jobs.sortable thead tr").sortable({containerSelector:"tr",itemSelector:"th",placeholder:'\x3cth class\x3d"placeholder"\x3e\x3c/th\x3e',vertical:!1,onDrop:function(a,h,b){b(a);h=a.closest("table");a=a.parent().find("th").map(function(){return $(this).data("field")}).get();
swarm.localStorage.set("jobs.fields",a);swarm.jobs.refresh(h);h.find("tbody").removeClass("sorting")},onDragStart:function(a,b,c){a.appendTo(a.parent());c(a);a.closest("table").find("tbody").addClass("sorting")},onDrag:function(a,b){a.css({left:b.left+"px",top:a.closest("tr").top+"px"})}});var c=$(".jobs-toolbar .btn-select-columns"),d=function(a){0===$(".jobs-toolbar .btn-select-columns").length&&$(".popover-job-fields").remove();c.toggleClass("active",a?!1:null);c.data("popover")&&c.data("popover").destroy();
c.is(".active")&&swarm.jobs.openSelectColumns(c)};c.on("click",function(){d()});$(document).on("click",function(){d(!0)});$(document).on("click.job-fields",".jobs-toolbar .btn-select-columns, .popover-job-fields",function(a){a.stopPropagation()});$(window).scroll(function(){$.isScrolledToBottom()&&swarm.jobs.load()});swarm.history.onPopState(function(){var a=$.deparam(location.search.replace(/^\?/,""),!1,!0);b.val(a.q||"");f()})}},load:function(a){if(!swarm.jobs._loading){var b=$("table.jobs"),f=
b.find("thead"),e=b.find("tbody"),c=b.data("query");a&&(b.data("page",0),e.empty());e.append('\x3ctr class\x3d"loading"\x3e\x3ctd colspan\x3d"5"\x3e\x3cspan class\x3d"loading animate muted"\x3e'+swarm.te("Loading...")+"\x3c/span\x3e\x3c/td\x3e\x3c/tr\x3e");a=b.data("page")||0;b.data("page",++a);var d=b.find("tr").not(".loading").last().attr("id"),g=b.data("project");swarm.jobs._loading=$.ajax({url:(g?"/projects/"+g:"")+"/jobs",data:{q:c,after:d,max:50*a,format:"json"},dataType:"json",success:function(a){var c=
a.spec;e.find(".loading").remove();f.data("spec",c);swarm.jobs.refresh(b,a.jobs);a.errors.length&&e.find(".no-jobs .alert").text(a.errors.join(", "));b.trigger("loaded");setTimeout(function(){swarm.jobs._loading=!1},500)}})}},getFields:function(a){var b=swarm.localStorage.get("jobs.fields");return b&&b.length?$.grep(b.split(","),function(b){return void 0!==a[b]}):[a.__id,a.__status,a.__createdBy||a.__modifiedBy,a.__description,a.__modifiedDate||a.__createdDate]},openSelectColumns:function(a){a=$(a);
var b=$("table.jobs"),f=b.find("thead").data("spec"),e=swarm.jobs.getFields(f),c="";$.each(e,function(a,b){c+=$.templates('\x3cli\x3e\x3clabel class\x3d"checkbox"\x3e\x3cinput type\x3d"checkbox" data-value\x3d"{{\x3efield}}" checked\x3d"checked"\x3e{{\x3elabel}}\x3c/label\x3e\x3c/li\x3e').render({field:b,label:swarm.te(swarm.jobs.getFriendlyLabel(b))})});$.each(f,function(a){if(0===a.indexOf("__")||-1!==e.indexOf(a))return!0;c+=$.templates('\x3cli\x3e\x3clabel class\x3d"checkbox"\x3e\x3cinput type\x3d"checkbox" data-value\x3d"{{\x3efield}}"\x3e{{\x3elabel}}\x3c/label\x3e\x3c/li\x3e').render({field:a,
label:swarm.te(swarm.jobs.getFriendlyLabel(a))})});a.popover({trigger:"manual",html:!0,content:'\x3cul class\x3d"unstyled pad1 padw0 fields-list"\x3e'+c+"\x3c/ul\x3e",placement:"bottom",container:"body",customClass:"popover-job-fields"}).popover("show");var d=$(a.data("popover").tip()),g=function(){var a=[];d.find(".fields-list").find(":checked").each(function(){a.push($(this).data("value"))});swarm.localStorage.set("jobs.fields",a);swarm.jobs.refresh(b)};d.find(".fields-list").sortable({nested:!1,
onDrop:function(a,b,c){c(a);b=a.clone();a.replaceWith(b);b.find(":checkbox").is(":checked")&&g()},onDragStart:function(a,b,c){c(a);b.group.placeholder.width(a.width()).height(a.height())},onDrag:function(a,b){var c=a.closest(".fields-list"),g=parseInt(0.5*a.height(),10),d=2*g,c=c.height()+g,g={left:"15px",top:Math.min(c,Math.max(d,b.top))-g+"px"};a.css(g)}});d.on("click",":checkbox",g)},refresh:function(a,b){var f=$(a).find("thead"),e=$(a).find("tbody"),c=f.data("spec"),d=swarm.jobs.getFields(c);
if(b)1===a.data("page")&&e.data("jobs",b);else if(b=e.data("jobs"))e.empty();else{swarm.jobs.load(!0);return}f.find("tr").empty();$.each(d,function(){var a=c[this],b=swarm.jobs.getFriendlyLabel(this);f.find("tr").append($.templates('\x3cth class\x3d"field-{{\x3einfo.code}} type-{{\x3einfo.dataType}}" data-field\x3d"{{\x3efield}}"\x3e\x3cspan class\x3d"field-label"\x3e{{\x3elabel}}\x3c/span\x3e\x3c/th\x3e').render({field:this,info:a,label:swarm.te(b)}))});b&&$.each(b,function(){var a=this,b="";$.each(d,
function(){var g=c[this],d=a[this];b+=$.templates('\x3ctd class\x3d"field-{{\x3einfo.code}} type-{{\x3einfo.dataType}}"\x3e{{:value}}\x3c/td\x3e').render({value:d,info:g})});e.append($.templates('\x3ctr id\x3d"{{\x3ejob.__id}}"\x3e{{:columns}}\x3c/tr\x3e').render({job:this,columns:b}))});if(!e.find("tr").length){var g=swarm.te("No jobs."),h=swarm.te("No matching jobs.");e.append($.templates('\x3ctr class\x3d"no-jobs"\x3e\x3ctd colspan\x3d"{{\x3efields.length}}"\x3e\x3cdiv class\x3d"alert border-box pad3"\x3e{{if query}}{{:noMatchingJobs}}{{else}}{{:noJobs}}{{/if}}\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e').render({noJobs:g,
noMatchingJobs:h,fields:d,query:$(a).data("query")}))}e.find(".timeago").formatTimestamp();e.find(".type-text, .type-bulk").expander({slicePoint:100});e.find(".type-word, .type-select, .type-line").expander({slicePoint:20})},getFriendlyLabel:function(a){a=a.replace(/[_\-]/g," ");a=a.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z][a-z])/g," $1");a=a.replace(/^\s+|\s+$/,"");a=a.replace(/\s{2,}/g," ");return a=a.replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})},renderFixes:function(a){a=
$(a);var b=a.find(".change-info"),f=a.data("review")||a.data("change"),e=a.data("jobs");b.find(".change-fixes").remove();b.parent().css("overflow","hidden").delay(10).queue(function(){b.parent().css("overflow","").dequeue()});var c=$("\x3ctable\x3e\x3c/table\x3e");$.each(e,function(){c.append($.templates('\x3ctr data-job\x3d"{{\x3ejob}}"\x3e\x3ctd class\x3d"job-unlink privileged"\x3e\x3ca href\x3d"" title\x3d"'+swarm.te("Unlink Job")+'"\x3e\x3ci class\x3d"icon-remove"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d"job-id"\x3e\x3ca href\x3d"{{:link}}"\x3e{{\x3ejob}}\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d"description force-wrap"\x3e{{:description}}\x3c/td\x3e\x3c/tr\x3e').render(this))});
c.append($.templates('\x3ctr class\x3d"privileged"\x3e\x3ctd\x3e\x3ca href\x3d"#" class\x3d"job-add"\x3e\x3ci class\x3d"icon-plus"\x3e\x3c/i\x3e\x3c/a\x3e\x3c/td\x3e\x3ctd colspan\x3d"2"\x3e\x3ca href\x3d"#" class\x3d"job-add"\x3e'+swarm.te("Add Job")+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e").render(this));var d=$('\x3cdiv class\x3d"change-fixes popover-footer"\x3e\x3c/div\x3e');d.append(c).appendTo(b);c.find("td.job-id").length||d.addClass("no-jobs");d.find(".description").expander({slicePoint:80});d.on("click.job.add",
"a.job-add",function(b){b.preventDefault();swarm.jobs.openSelectDialog(function(b,c){swarm.form.disableButton(c.find(".modal-footer .btn-select"));c.find(".modal-footer .btn-cancel").prop("disabled",!0);$.ajax("/changes/"+f.id+"/fixes/add",{type:"POST",data:{jobs:b},dataType:"json",success:function(b){a.data("jobs",b.jobs);swarm.jobs.renderFixes(a);c.modal("hide")}})},a.data())});d.on("click.job.unlink",".job-unlink a",function(b){b.preventDefault();$(".job-unlink a").each(function(){$(this).data("popover")&&
$(this).data("popover").destroy()});$(this).tooltip("hide");b=$(this);var c=b.closest("tr").data("job"),e=$(a).is(".review-wrapper")?swarm.te("review"):swarm.te("change"),j=swarm.tooltip.showConfirm(b,{placement:"top",content:swarm.te("Unlink job from %s?",[e]),buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-unlink"\x3e'+swarm.te("Unlink")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e"]});j.tip().on("click",".btn-cancel",
function(){j.destroy()});j.tip().on("click",".btn-unlink",function(){d.find(".job-unlink").each(function(){$(this).html($(this).find("a").html()).css("opacity",0.5)});swarm.form.disableButton(j.tip().find(".btn-unlink"));j.tip().find(".btn").prop("disabled",!0);$.ajax("/changes/"+f.id+"/fixes/delete",{type:"POST",data:{jobs:c},dataType:"json",success:function(b){j.destroy();$(a).data("jobs",b.jobs);swarm.jobs.renderFixes(a)},error:function(){j.destroy()}})})})},openSelectDialog:function(a,b){$(".modal.job-select").remove();
var f=$('\x3cdiv class\x3d"modal hide fade job-select" tabindex\x3d"-1" role\x3d"dialog" aria-labelledby\x3d"edit-title" aria-hidden\x3d"true"\x3e\x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e\x3ch3 id\x3d"edit-title"\x3e'+swarm.te("Select Job")+'\x3c/h3\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-body"\x3e\x3cdiv class\x3d"jobs-browser"\x3e\x3cdiv class\x3d"loading animate muted pad3"\x3e'+swarm.te("Loading...")+
'\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"modal-footer"\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-select" disabled\x3e'+swarm.te("Select")+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"btn" data-dismiss\x3d"modal"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e").appendTo("body");swarm.modal.show(f);var e=function(){f.find(".btn.btn-select").prop("disabled",!f.find(".jobs-browser tr.selected").length)};$.ajax(b.jobsUrl||swarm.url("/jobs"),{dataType:"html",
data:{format:"partial"},skipBaseUrl:!0,success:function(b){var d=f.find(".jobs-browser");d.html(b);d.find(".jobs-toolbar").insertBefore(d);f.find(".jobs-toolbar input[name\x3dquery]").removeClass("input-xxlarge").addClass("input-block-level");d.on("click.job.select","tr",function(a){!$(a.target).is("a")&&!$(this).closest("thead").length&&(a=$(this),d.find("tr.selected").not(a).removeClass("selected"),a.toggleClass("selected"),e())});d.dblclick(function(b){b=$(b.target).closest("tr");b.length&&!b.closest("thead").length&&
"function"===typeof a&&a([b.attr("id")],f)});d.on("loaded","table.jobs",function(){e();$(this).find("td a").replaceWith(function(){return $(this).html()});$(this).find("tbody .type-text").expander("destroy").expander({slicePoint:70})})}});f.find(".jobs-browser").scroll(function(){$.isScrolledToBottom($(this),$(this).find("table.jobs"))&&swarm.jobs.load()});f.find(".btn.btn-select").on("click",function(b){b.preventDefault();b=f.find(".jobs-browser tr.selected").map(function(){return $(this).attr("id")}).get();
"function"===typeof a&&a(b,f)})}};(function(d,c){var m={load:function(a,b,g,f){var e=a.substr(a.lastIndexOf("?")),d=a.substr(0,a.lastIndexOf("/")+1),j=new c.OBJLoader,l=new c.MTLLoader;l.setPath(d);j.load(a,function(a){var c=a.materialLibraries,g=c.length,d=function(e){a.traverse(function(a){a&&(a.material&&a.material.name&&e.materialsInfo[a.material.name])&&(a.material=e.create(a.material.name))});g--;0===g&&b(a)},f;for(f=0;f<c.length;f++)l.load(c[f]+e,d)},g,f)}},p=swarm,q=!(!window.CanvasRenderingContext2D||!window.Float32Array),
k;try{var n=document.createElement("canvas");k=!!window.WebGLRenderingContext&&(n.getContext("webgl")||n.getContext("experimental-webgl"))}catch(r){k=!1}p.threejs={dependencies:["/vendor/threejs/three.min.js","/vendor/threejs/EditorControls.js"],supported:q,webgl:k,start:function(){d(".view.threejs").each(function(){var a=swarm.threejs.loaders[d(this).data("ext")];a.dependencies&&(swarm.threejs.dependencies.push.apply(swarm.threejs.dependencies,a.dependencies),a.dependencies=[])}).each(function(){if(swarm.threejs.supported){if(swarm.threejs.loading||
swarm.threejs.dependencies.length)return swarm.threejs.showProgress(this),swarm.threejs.loading||swarm.threejs.load();d.data(this,"started")||(d(this).find("canvas").length&&d(this).empty(),swarm.threejs.init(this))}else d(this).text(swarm.t("Model Viewer isn't supported in your browser."))})},load:function(){swarm.threejs.loading=!0;if(swarm.threejs.dependencies.length){swarm.threejs._firstScript=swarm.threejs._firstScript||document.getElementsByTagName("script")[0];var a=document.createElement("script");
a.type="text/javascript";a.src=swarm.threejs.dependencies.shift();d(a).one("load",function(){swarm.threejs.load()});swarm.threejs._firstScript.parentNode.insertBefore(a,swarm.threejs._firstScript)}else swarm.threejs._firstScript=null,swarm.threejs.loading=!1,c=window.THREE,swarm.threejs.start()},showProgress:function(a,b){a=d(a);b=b||0;var c=a.data("percent-loaded")||-1;parseInt(c,10)!==parseInt(b,10)&&(a.data("percent-loaded",b),!a.find(".progress-container .bar").css("width",b+"%").length&&100!==
parseInt(b,10)&&a.append('\x3cdiv class\x3d"progress-container"\x3e\x3cdiv class\x3d"progress"\x3e\x3cdiv class\x3d"bar" style\x3d"width: '+b+'%;"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'))},showError:function(a,b){d(a).find(".viewer-error").remove();d('\x3cdiv class\x3d"viewer-error" /\x3e').appendTo(a).text(b)},init:function(a){a=d(a);a.data("started",!0);var b=swarm.threejs.loaders[a.data("ext")],c={container:a[0],camera:null,light:null,scene:null,renderer:null,controls:null,model:null,options:{wireframeControl:!1}};
b.load(a,function(b,e){c.model=b;d.extend(c.options,e);swarm.threejs.buildScene(c);a.find(".progress-container").remove();swarm.threejs.animate(c)})},buildScene:function(a){var b=d(a.container),g=b.width(),f=b.height();a.scene=new c.Scene;a.camera=new c.PerspectiveCamera(45,g/f,0.1,2E3);a.camera.position.set(0,7,14);var e,h=new c.Geometry,j=new c.LineBasicMaterial({color:5592405});for(e=-14;14>=e;e+=1)h.vertices.push(new c.Vector3(-14,-0.04,e)),h.vertices.push(new c.Vector3(14,-0.04,e)),h.vertices.push(new c.Vector3(e,
-0.04,-14)),h.vertices.push(new c.Vector3(e,-0.04,14));e=new c.LineSegments(h,j);a.scene.add(e);a.scene.add(a.model);e=new c.Box3;e.setFromObject(a.model);a.camera.lookAt(e.getCenter());a.controls=new c.EditorControls(a.camera,a.container);a.controls.center.copy(e.getCenter());a.controls.enabled=!1;a.scene.add(new c.AmbientLight(10461087));a.light=new c.PointLight(15658734,1);a.light.position=a.camera.position;a.light.scale=a.camera.scale;a.scene.add(a.light);a.renderer=swarm.threejs.webgl?new c.WebGLRenderer:
new c.CanvasRenderer;a.renderer.setSize(g,f);a.renderer.setClearColor(7829367,1);b.append(a.renderer.domElement);swarm.threejs.webgl||b.append('\x3cdiv class\x3d"viewer-notice"\x3e'+swarm.te("WebGL was not available, so rendering may be slow.")+"\x3c/div\x3e");b.append(swarm.threejs.getControls(a));d(window).on("resize",function(){var c=b.width(),e=b.height();a.camera.aspect=c/e;a.camera.updateProjectionMatrix();a.light.scale=a.camera.scale;a.renderer.setSize(c,e)})},animate:function(a){window.requestAnimationFrame(d.proxy(swarm.threejs.animate,
swarm.threejs,a));if(!a.controls.enabled&&swarm.threejs.webgl){var b=5E-4*Date.now();a.camera.position.set(-14*Math.cos(b),7,-14*Math.sin(b));a.light.position=a.camera.position;b=new c.Box3;b.setFromObject(a.model);a.camera.lookAt(b.getCenter())}a.renderer.render(a.scene,a.camera)},getControls:function(a){var b=d.templates('\x3cdiv class\x3d"viewer-control {{:cls}} pad1" title\x3d"{{:title}}"\x3e\x3ci class\x3d"icon icon-white {{:icon}}" /\x3e\x3c/div\x3e'),g=d('\x3cdiv class\x3d"viewer-controls" /\x3e'),
f=swarm.t("Reset Camera"),e=swarm.t("Control Camera");d(b.render({cls:"track",icon:"icon-camera",title:a.controls.enabled?f:e})).on("click",function(){a.controls.enabled=!a.controls.enabled;if(a.controls.enabled){var b=new c.Box3;b.setFromObject(a.model);a.controls.center.copy(b.getCenter())}d(this).toggleClass("active",a.controls.enabled).tooltip("destroy").attr("title",a.controls.enabled?f:e).trigger("mouseenter")}).appendTo(g);if(a.options.wireframeControl){var h=swarm.t("Show Material"),j=swarm.t("Show Wireframe");
d(b.render({cls:"wireframe",icon:"icon-th",title:j})).on("click",function(){var b=d(this).hasClass("active");d(this).toggleClass("active",!b).tooltip("destroy").attr("title",b?j:h).trigger("mouseenter");a.model.traverse(function(a){a instanceof c.Mesh&&(a.material.wireframe=!b)});a.model.updateMatrix()}).appendTo(g)}return g},loaders:{_handleProgress:function(a,b){var c=100*parseInt(b.loaded,10),d=parseInt(b.total,10);swarm.threejs.showProgress(a,Math.round(c/(d||100)))},_LoadMultiMesh:function(a,
b,d){var f=0.9*a.height(),e=0.9*a.width();a=new c.Box3;a.setFromObject(b);var h=b.worldToLocal(a.max),j=b.worldToLocal(a.min),f=Math.min(f/(h.y-j.y)/100,e/(h.x-j.x)/100);b.scale.set(f,f,f);b.updateMatrix();a.setFromObject(b);b.position=a.getCenter().negate();b.updateMatrix();d(b)},dae:{dependencies:["/vendor/threejs/ColladaLoader.js"],load:function(a,b){var d=new c.ColladaLoader;d.options.convertUpAxis=!0;try{d.load(a.data("url"),function(c){swarm.threejs.loaders._LoadMultiMesh(a,c.scene,b)},function(b){swarm.threejs.loaders._handleProgress(a,
b)})}catch(f){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))}return d}},stl:{dependencies:["/vendor/threejs/STLLoader.js"],load:function(a,b){var d=new c.STLLoader;try{d.load(a.data("url"),function(e){e.computeBoundingBox();var d=0.9*a.height(),f=0.9*a.width(),d=Math.min(d/(e.boundingBox.max.y-e.boundingBox.min.y)/100,f/(e.boundingBox.max.x-e.boundingBox.min.x)/100),f=new c.Object3D;f.add(new c.Mesh(e,new c.MeshPhongMaterial({wireframe:!1,color:3223857})));f.position=
new c.Vector3(0,0,0);f.scale=new c.Vector3(d,d,d);f.updateMatrix();b(f,{wireframeControl:!0})},function(b){swarm.threejs.loaders._handleProgress(a,b)},function(){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))})}catch(f){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))}return d}},obj:{dependencies:["/vendor/threejs/MTLLoader.js","/vendor/threejs/OBJLoader.js"],load:function(a,b){try{m.load(a.data("url"),function(c){swarm.threejs.loaders._LoadMultiMesh(a,
c,b)},function(b){swarm.threejs.loaders._handleProgress(a,b)},function(){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))})}catch(c){swarm.threejs.showError(a,swarm.t("Encountered an error while loading the model."))}return m}}}}})(window.jQuery,window.THREE);/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.translator={locales:{},jed:null,fallbackJed:null,init:function(a,e){a=swarm.translator.locales[a]||{};e=swarm.translator.locales[e]||{};a.timeago&&($.timeago.settings.strings=a.timeago);var b={missing_key_callback:function(f){throw Error("Missing message key: "+f);}};a.messages&&(b.domain="default",b.locale_data=a.messages);swarm.translator.jed=new Jed(b);b={};e.messages&&(b.domain="default",b.locale_data=e.messages);swarm.translator.fallbackJed=new Jed(b);var g=$.views.converters.html;swarm.t=
function(f,c,h,d){c=$.map($.isArray(c)?c:[],g);return swarm.translator.translate(f,c,h,d)};swarm.tp=function(f,c,h,d,a,b){d=$.map($.isArray(d)?d:[],g);return swarm.translator.translatePlural(f,c,h,d,a,b)};swarm.te=function(f,c,h,d){return g(swarm.translator.translate(f,c,h,d))};swarm.tpe=function(f,c,h,d,a,b){return g(swarm.translator.translatePlural(f,c,h,d,a,b))};$.views.converters({t:function(f,c,a,d){return swarm.t(f,c,a,d)},te:function(a,c,b,d){return swarm.te(a,c,b,d)},tp:function(a,c,b,d,e,
g){return swarm.tp(a,c,b,d,e,g)},tpe:function(a,b,e,d,g,j){return swarm.tpe(a,b,e,d,g,j)}})},translate:function(a,e,b,g){try{a=swarm.translator.jed.dpgettext(g,b,a)}catch(f){try{a=swarm.translator.fallbackJed.dpgettext(g,b,a)}catch(c){}}return $.isArray(e)&&e.length?Jed.sprintf(a,e):a},translatePlural:function(a,e,b,g,f,c){var h;try{h=swarm.translator.jed.dnpgettext(c,f,a,e,b)}catch(d){try{h=swarm.translator.fallbackJed.dnpgettext(c,f,a,e,b)}catch(k){}}return Jed.sprintf(h,$.isArray(g)&&g.length?
g:[b])}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
$(function(){$("body").on("click.swarm.dropdown touchstart.swarm.dropdown",".dropdown-subform",function(a){a.stopPropagation()});$(document).on("swarm-login",function(a){$("body").removeClass("anonymous").addClass("authenticated");if(void 0!==a.user&&(a.user.isAdmin&&$("body").removeClass("non-admin").addClass("admin"),a.user.isSuper&&$("body").removeClass("non-super").addClass("super"),a.user.addProjectAllowed&&$("body").removeClass("cannot-add-project").addClass("can-add-project"),$("body").data("user",
a.user),$("body").data("csrf",a.csrf),$(".session-menu .user").replaceWith($(a.toolbar).find(".user")),a.user.mfa&&($("body").removeClass("mfa-required"),"required"===a.user.mfa))){$("body").addClass("mfa-required");return}0<$("#dashboard-tab").length&&swarm.dashboard.init();swarm.timeFormatter.init()});$(document).on("keydown","textarea",function(a){27===a.which&&$(this).blur()});$(document).on("input.swarm.form change.swarm.form keyup.swarm.form blur.swarm.form","form",function(){swarm.form.checkInvalid(this)});
$.extend($.expander.defaults,{slicePoint:150,expandPrefix:"",expandText:"...",userCollapseText:"\x26laquo;",widow:0,preserveWords:!1,expandSpeed:0,collapseSpeed:0,onSlice:function(){var a=$(this).addClass("expandable");a.on("click",function(b){$(b.target).is("a")||a.find(".read-more:visible a, .read-less:visible a").trigger("click")})},afterExpand:function(){$(this).find(".details").css({display:"inline"});$(this).addClass("expanded")},onCollapse:function(){$(this).removeClass("expanded")}});$.views.converters({url:function(a){return encodeURI(swarm.url(a))},
urlc:function(a){return encodeURIComponent(a)},empty:function(a){return $.isEmptyObject(a)},"class":function(a){return a=a.replace(/[^_\-a-zA-Z0-9]/,"-")},join:function(a){return $.map(a,function(a){return $.views.converters.html(a)}).join(", ")}});swarm.history.init();swarm.timeFormatter.init();document.cookie.split("; ").find(function(a){return a.startsWith("review_ui")})||swarm.setCookie("review_ui",swarm.config.globalConfig["reviews.default_ui"]||"classic",(new Date("January 1, 2025")).toUTCString())});
swarm.has.partialHistorySupport()&&swarm.history.patchPartialSuppport();$(document).on("img-error","img.avatar",function(){var a=$(this);a.hasClass("default")||(a.addClass("default"),a.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"))});$(document).on("img-load","img.avatar",function(){$(this).addClass("loaded")});$.ajaxSettings.cache=!1;
$.ajaxSettings.xhrFields={onerror:function(a){a=a.target;var b=swarm.ignoredAjaxError;b&&(!a.status&&!swarm.has.xhrUserAbortAsError())&&(b.request.isNetworkError=!0,$(document).trigger("ajaxError",[b.request,b.settings,b.message]))},ontimeout:function(a){this.onerror(a)}};
$(document).on("ajaxError",function(a,b,d,c){swarm.ignoredAjaxError=null;d.errorHandled||!b.status&&!b.isNetworkError?swarm.ignoredAjaxError={request:b,settings:d,message:c}:$("body").hasClass("mfa")||(401===b.status?swarm.user.login(swarm.t("Your session has expired.")):($(".global-notification .alert").filter(".s"+b.status).alert("close"),a=b.status,b.isNetworkError&&(c="There was an issue with the Network",a="Error"),b=$.templates('\x3cdiv class\x3d"alert border-box alert-error s{{:status}}"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"alert"\x3e\x26times;\x3c/button\x3e\x3ch4\x3e{{te:status}}\x3c/h4\x3e{{te:message}}\x3cdiv\x3e').render({message:c,
status:a}),$("\x3cdiv /\x3e",{id:"message","class":"global-notification border-box"}).append(b).prependTo("#swarm-body-container").on("closed",function(){$(this).remove()})))});
$.ajaxPrefilter("*",function(a){var b=a.data||"";if(!("GET"===a.type||!a.processData||"string"!==typeof b||a.contentType!==$.ajaxSettings.contentType||!$("body").data("csrf"))){var d=/(&?)_csrf=[^&]*/,c=$("body").data("csrf");a.data=d.test(b)?b.replace(d,"$1_csrf\x3d"+encodeURIComponent(c)):b+(b.length?"\x26":"")+"_csrf\x3d"+encodeURIComponent(c)}});$.ajaxPrefilter(function(a){a.url=a.skipBaseUrl?a.url:swarm.url(a.url)});/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.mentions={additionalClass:"",mode:"",mentionsArray:[],enableGroups:!0,init:function(b,e){this.mode=swarm.comments.mentionsMode;this.mentionsArray=swarm.comments.mentionsArray;this.additionalClass=b||"no-class";e?($("#react-swarm-app-container").off("keyup.mentionable").on("keyup.mentionable",".mentionable textarea, .mentionable",function(){swarm.mentions.addUsersAndGroups(this);this.focus()}),this.addUsersAndGroups()):"global"===this.mode?this.getAllUsersAndGroups():"projects"===this.mode&&
(0===this.mentionsArray.length?this.getAllUsersAndGroups():this.addUsersAndGroups())},addUsersAndGroups:function(b){$(b||".comment-form textarea").userMultiPicker({inputName:"Users",groupInputName:"Groups",selectedGroups:[],excludeProjects:!0,enableGroups:this.enableGroups,triggerChar:"@",groupTriggerChar:"@@",triggerModifiers:"[!*]",minLength:1,onCaret:!0,clearInput:!1,disabled:!0,items:5,source:this.mentionsArray,additionalClass:this.additionalClass,consumeEnterKeyPress:!1,onSelect:function(){var e=
this.typeahead.$element.val(),a=this.typeahead.$menu.find(".active").data("value");if(a){var c=RegExp("("+this.options.triggerChar+"+[^\\s]{"+this.options.minLength+",})$"),b=this.typeahead.$element.get(0).selectionStart,d=e.substring(0,b),a="group"===a.type?d.replace(c,this.options.triggerChar+this.options.triggerChar+a.id):d.replace(c,this.options.triggerChar+a.id),c=a.length,a=a+e.substring(b);this.typeahead.$element.val(a);this.typeahead.$element.setCursorPosition(c)}}})},getAllUsersAndGroups:function(b){$(b||
".comment-form textarea").userMultiPicker({inputName:"Users",groupInputName:"Groups",selectedGroups:[],excludeProjects:!0,enableGroups:this.enableGroups,triggerChar:"@",groupTriggerChar:"@@",triggerModifiers:"[!*]",minLength:1,onCaret:!0,clearInput:!1,ignoreBlacklist:!1,items:5,additionalClass:this.additionalClass,consumeEnterKeyPress:!1,onSelect:function(){var b=this.typeahead.$element.val(),a=this.typeahead.$menu.find(".active").data("value");if(a){var c=RegExp("("+this.options.triggerChar+"+[^\\s]{"+
this.options.minLength+",})$"),f=this.typeahead.$element.get(0).selectionStart,d=b.substring(0,f),a="group"===a.type?d.replace(c,this.options.triggerChar+this.options.triggerChar+a.id):d.replace(c,this.options.triggerChar+a.id),c=a.length,a=a+b.substring(f);this.typeahead.$element.val(a).trigger("click");this.typeahead.$element.setCursorPosition(c)}}})}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.notifications={user:{init:function(){swarm.notifications.common.setCheckAll();var a=$("#notificationForm");a.hasClass("readOnly")&&(a.find(":checkbox").attr("disabled",!0),a.find(".notificationSave").attr("disabled",!0),a.find("#notificationReset").attr("disabled",!0),a.find("#notificationCancel").attr("disabled",!0));swarm.notifications.common.configureReset();swarm.notifications.common.enableInputEvents();$("#token").attr("value",$("body").data("csrf"));swarm.notifications.common.preventButtonDoubleClick()}},
group:{init:function(){swarm.notifications.group.configureSettingsFields();swarm.notifications.common.configureReset();swarm.notifications.common.enableInputEvents();swarm.notifications.common.setCheckAll();swarm.notifications.common.preventButtonDoubleClick()},configureSettingsFields:function(){$("#groupNotificationSettingsPanel .modal-backdrop").show();$("#notificationForm table input").prop("disabled",!0);return!$("#emailAddress").prop("disabled")&&$("#emailValidIndicator.valid").length?($("#groupNotificationSettingsPanel .modal-backdrop").hide(),
$("#notificationForm table input").not(".notificationDisabled").prop("disabled",!1),!0):!1}},common:{configureReset:function(){$("#notificationReset").click(function(){$("#notifications tbody input[type\x3dcheckbox]").each(function(a,b){b.disabled||(b.checked=$(this).data("default"))});swarm.notifications.common.setCheckAll()})},enableInputEvents:function(){$("#checkAllNotifications").change(function(){$("#notificationTable input").each(function(a){$("#notificationTable input")[a].disabled||($("#notificationTable input")[a].checked=
$("#checkAllNotifications")[0].checked)})});$("#notificationForm tbody input").change(function(){swarm.notifications.common.setCheckAll()})},setCheckAll:function(){$("#checkAllNotifications")[0].checked=$("#notificationForm tbody input:enabled:checked").length===$("#notificationForm tbody input").length-$("#notificationForm tbody td.notificationDisabled").length},preventButtonDoubleClick:function(){$("#notificationForm").submit(function(){$(this).find("button").prop("disabled",!0)})}}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
$.fn.extend({formatTimestamp:function(){return this.each(function(){$(this).text(swarm.timeFormatter.format(this))})}});
swarm.timeFormatter={init:function(){var a=$("body").data("timePreferences");"undefined"!==a&&(a.display&&"timestamp"===a.display.toLowerCase())&&(this.format=function(a){a=$(a).attr("title");return(new Date(a)).toLocaleString()},this.convert=function(a){return(new Date(a)).toLocaleString()},this.timeValue=function(a){return 1E3*a})},format:function(a){return $(a).timeago().text()},convert:function(a){return $.timeago.inWords(a)},timeValue:function(a){return Date.now()-1E3*a}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.workflow={supportedEvents:[],supportedBlocks:[],testDefinitions:[],testDefinitionsObject:[],testDefinitionsLoaded:!1,workFlowDisabledDeleteButton:!1,init:function(){$(document).on("click.disabled",".disabled",function(b){b.preventDefault();b.stopPropagation()});swarm.workflow.supportedEvents=[{value:"onUpdate",text:swarm.te("On Update")},{value:"onSubmit",text:swarm.te("On Submit")},{value:"onDemand",text:swarm.te("On Demand")}];swarm.workflow.supportedBlocks=[{value:"nothing",text:swarm.te("Nothing")},
{value:"approved",text:swarm.te("Approve")}];swarm.workflow.defineTemplates({});swarm.workflow.load();$(document).on("swarm-login",function(){swarm.workflow.load()});$("a").tooltip();$("#add-workflow-button").on("click",function(){swarm.workflow.showWorkflowModal({title:swarm.te("Add Workflow"),mutable:!0})});$("#workflow-modal-content").on("click.save",".btn-save",function(b){b.preventDefault();b=$(this).closest("form");var a=b.data("workflow-id");swarm.form.rest(""!==a?"PUT":"POST","/api/v10/workflows"+
(""!==a?"/"+a:""),b,function(a,b){if(a.data){var c=$.templates('\x3cdiv class\x3d"swarm-alert alert alert-success" id\x3d"inner-message"\x3e{{\x3emessage}}\x3c/div\x3e').render({message:swarm.te("Workflow Saved")});$(".modal-body .messages").append(c);swarm.workflow.load();setTimeout(function(){b.find("button.close").click()},500)}},$("#workflow-modal-content .modal-body"))});$("#workflow-modal-content").on("click.rule",".control-group-workflow-rules .btn-group li a",function(b){b.preventDefault();
b=$(this);var a=b.closest(".btn-group");a.find("span.current").text(b.text());a.find("input").val(b.data("value"))});$("#workflow-modal-content").on("click.tests",".control-group-workflow-tests .btn-group li a",function(b){b.preventDefault();b=$(this);var a=b.closest(".btn-group");a.find("span.current").text(b.text());a.find("input").val(b.data("value"))});$(".workflow-cells").on("click.workflow",".link.workflow-name a",function(b){var a=$(this),c=$(this).closest(".workflow-cell");b.preventDefault();
swarm.workflow.showWorkflowModal($.extend({title:a.text()},c.data()))});$(".btn-search").on("click",function(){$("div.filter-all").remove();$(".workflow-cell").toggleClass("filtered",!0).each(function(){var b=$(".search .input-large").val().toLowerCase(),a=$(this);(-1!==a.find("a.name").text().toLowerCase().indexOf(b)||-1!==a.find(".description").text().toLowerCase().indexOf(b))&&$(this).toggleClass("filtered",!1)});0===$(".workflow-cell:visible").length&&$(".workflow-cells").prepend($("\x3cdiv\x3e").addClass("filter-all").text(swarm.te("No matching workflows")))});
$(".workflows .search input").on("keyup",function(b){var a=b.keyCode||b.which;"keyup"===b.type&&13!==a||$(".btn-search").trigger("click")});$("#workflow-modal-content").on("click.delete","#btn-delete",function(b){b.preventDefault();var a=$(this),c=a.closest("form"),d="/api/v10/workflows/"+c.data("workflow-id");setTimeout(function(){var b=swarm.tooltip.showConfirm(a,{placement:"top",content:swarm.te("Delete this workflow?"),classes:"popover-workflow",buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-confirm"\x3e'+
swarm.te("Delete")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e"]});b.tip().on("click",".btn-cancel",function(){b.destroy()});b.tip().on("click",".btn-confirm",function(){swarm.form.disableButton(b.tip().find(".btn-confirm"));b.tip().find(".buttons .btn").prop("disabled",!0);swarm.form.restDelete(d,c,function(c,d){b.destroy();if(c.error){var e=swarm.tooltip.showConfirm(a,{placement:"top",content:c.error,buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary"\x3e'+
swarm.te("Ok")+"\x3c/button\x3e"]});e.tip().on("click",".btn",function(){e.destroy()})}else{var h=$.templates('\x3cdiv class\x3d"swarm-alert alert alert-success" id\x3d"inner-message"\x3e{{\x3emessage}}\x3c/div\x3e').render({message:swarm.te("Workflow Deleted")});$(".modal-body .messages").append(h);swarm.workflow.load();setTimeout(function(){d.find("button.close").click()},500)}},$("#workflow-modal-content .modal-body"))})},5)});$(".workflows").addClass("loading-test-definitions").find("input, button").prop("disabled",
!0);$.ajax({url:"/api/v10/testdefinitions",errorHandled:!0,errorNode:$(".messages"),success:function(b){if(0<b.data.testdefinitions.length){var a=[];swarm.workflow.testDefinitionsObject=b.data.testdefinitions;$.each(b.data.testdefinitions,function(b,c){a["test-"+c.id.toString()]=c});swarm.workflow.testDefinitions=a}$(".workflows").removeClass("loading-test-definitions").not(".loading-workflows").find("input, button").prop("disabled",!1)},error:function(b){swarm.workflow.showErrors(b.responseJSON&&
b.responseJSON.messages||[{text:swarm.te("Failed to load test definitions. Please contact your Swarm administrator.")}])}});var c=function(b,a){b.toggleClass("test-edit");b.find(".btn-group").toggleClass("view-mode");$.merge(b.find(".test-definition, .event-view, .blocks-view"),a.find("button.edit, button.delete")).toggleClass("hidden");$(".control-group-workflow-tests .controls-row.footer").removeClass("hidden")};$("#workflow-modal-content").on("click.editTest",".edit",function(){var b=$(".control-group-workflow-tests .panel"),
a=swarm.workflow.getTestRow($(this).data("row-id"),this);c(a,b);$("#add-tests").prop("disabled",!0);a.find(".test-definition-selection input").first().addClass("invalid");b=a.find(".test-definition-selection div").first().text();a.find(".test-definition-selection span").first().text(b);$(".control-group-workflow-tests .controls-row.footer").addClass("hidden");a="workflow-"+$(this).data("row-id");swarm.testdefinition.testDefinitionDropdown({parent:$(".test-definition-selection"),prefix:a,testdefinitions:swarm.workflow.testDefinitionsObject,
currentTestDefinitionId:$(this).data("test-id"),noneSelected:!1,localStorageKey:"swarm.workflow.testdefinition."+$(this).data("row-id")});$(".test-definition-dropdown ul li.divider").first().hide();$("[id*\x3d-no-testdefinition]").hide();$("#workflow-modal-content .btn-save").prop("disabled",!0);$("#btn-delete").prop("disabled",!0)});$("#workflow-modal-content").on("click.deleteTest",".delete",function(){swarm.workflow.getTestRow($(this).data("row-id"),this).remove();$("body .tooltip").remove()});
$("#workflow-modal-content").on("click.acceptTest",".accept",function(){var b=$(".control-group-workflow-tests .panel");$(".control-group-workflow-tests .controls-row.test-add").removeClass().addClass("controls-row controls test-"+$(this).data("row-id")+" test-edit");var a=swarm.workflow.getTestRow($(this).data("row-id"),this);c(a,b);$("#add-tests").prop("disabled","");a.find(".test-definition-selection input").first().removeClass("invalid");var b=a.find(".test-definition-selection input").first().val(),
e=a.find(".test-definition-dropdown .text").text();a.find(".test-definition").text(e).attr("data-test-definition",b);b=a.find(".test-event-dropdown input").data("value");e=a.find(".test-event-dropdown .current").text();a.find(".event-view").text(e).attr("data-event",b);b=a.find(".test-blocks-dropdown input").data("value");e=a.find(".test-blocks-dropdown .current").text();a.find(".blocks-view").text(e).attr("data-blocks",b);$("#workflow-modal-content .btn-save").prop("disabled","");swarm.workflow.workFlowDisabledDeleteButton?
$("#btn-delete").prop("disabled",!0):$("#btn-delete").removeAttr("disabled")});$("#workflow-modal-content").on("click.cancel",".cancel",function(){var b=$(".control-group-workflow-tests .panel"),a="";if(b.find(".test-add").length)a=$(".modal-form"),a.data("workflowTests",a.data("workflowTests")-1),a=b.find(".test-add"),a.remove(),$("body .tooltip").remove();else{var a=$(swarm.workflow.getTestRow($(this).data("row-id"),this)),e=a.find(".test-definition").text(),d=a.find(".test-definition").data("test-definition");
a.find(".test-definition-selection input").attr("value",d);a.find(".test-definition-dropdown .text").text(e);e=a.find(".event-view").data("event");d=a.find(".event-view").text();a.find(".test-event-dropdown .current").text(d);a.find(".test-event-dropdown input").data("value",e);e=a.find(".blocks-view").data("blocks");d=a.find(".blocks-view").text();a.find(".test-blocks-dropdown .current").text(d);a.find(".test-blocks-dropdown input").data("value",e)}c(a,b);a.find(".test-definition-selection input").first().removeClass("invalid");
$("#add-tests").prop("disabled","");$("#workflow-modal-content .btn-save").prop("disabled","");swarm.workflow.workFlowDisabledDeleteButton?$("#btn-delete").prop("disabled",!0):$("#btn-delete").removeAttr("disabled")});$("#workflow-modal-content").on("click.addTests","#add-tests",function(b){b.preventDefault();var a=$(".control-group-workflow-tests .panel");a.find("button.edit").addClass("hidden");a.find("button.delete").addClass("hidden");$(this).prop("disabled",!0);$("#workflow-modal-content .btn-save").prop("disabled",
!0);$(".control-group-workflow-tests .controls-row.footer").toggleClass("hidden");$(".control-group-workflow-tests").find(".no-tests").remove();var c=swarm.user.getAuthenticatedUser(),d=$("body").hasClass("super"),f=$(".modal-form");b=f.data("workflowTests");f.data("workflowTests",b+1);f=$($.render.swarmWorkflowTestsAdd({tests:Object.keys(swarm.workflow.testDefinitions).filter(function(a){a=swarm.workflow.testDefinitions[a];return swarm.workflow.canSee(a.shared,a.owners,d,c,!0)}).map(function(a){a=
swarm.workflow.testDefinitions[a];return{id:a.id,name:a.name}}),name:swarm.t("Please choose an option"),event:swarm.workflow.supportedEvents[0].value,blocks:swarm.workflow.supportedBlocks[0].value,eventName:swarm.workflow.supportedEvents[0].text,blocksName:swarm.workflow.supportedBlocks[0].text,nextIndex:b,supportedEvents:swarm.workflow.supportedEvents,supportedBlocks:swarm.workflow.supportedBlocks,add:!0}));a.append(f);a="workflow-"+b;swarm.testdefinition.testDefinitionDropdown({parent:$(".test-definition-selection"),
prefix:a,testdefinitions:swarm.workflow.testDefinitionsObject,currentTestDefinitionId:null,noneSelected:!1,localStorageKey:"swarm.workflow.testdefinition."+b});$("[id*\x3d-no-testdefinition]").hide();$("[id*\x3d-no-testdefinition]").next().hide();f.find(".swarm-icon.icon-task-addressed").tooltip("toggleEnabled");$("#btn-delete").prop("disabled",!0)});$("#workflow-modal-content").on("click.test-definition-dropdown",".test-definition-dropdown ul li",function(){$("button.accept").prop("disabled","").removeClass("disabled");
var b=$(".control-group-workflow-tests .controls-row.test-add"),a=b.find("input").first().val(),c=b.find(".text").text();b.find(".test-definition").text(c).attr("data-test-definition",a);b.find(".swarm-icon.icon-task-addressed").tooltip("toggleEnabled");$(".test-definition-dropdown input").removeClass("invalid")});$("#workflow-modal-content").on("click.test-event-dropdown",".test-event-dropdown ul li   ",function(){var b=$(this).find("a").text(),a=$(this).find("a").data("value");$(".control-group-workflow-tests .controls-row.test-add .event-view").text(b).attr("data-event",
a)});$("#workflow-modal-content").on("click.test-blocks-dropdown",".test-blocks-dropdown ul li   ",function(){var b=$(this).find("a").text(),a=$(this).find("a").data("value");$(".control-group-workflow-tests .controls-row.test-add .blocks-view").text(b).attr("data-blocks",a)})},showErrors:function(c){var b=$(".messages").addClass("alert-error").toggleClass("hidden",!1);$.each(c,function(){b.append($("\x3cdiv\x3e").text(this.text))})},load:function(){var c=$(".workflows").addClass("loading-workflows");
c.find("input, button").not(".close").prop("disabled",!0);c.find(".workflow-cells").html(swarm.t("Loading..."));$.ajax({url:"/api/v10/workflows",dataType:"json",errorHandled:!0,success:function(b){var a=swarm.user.getAuthenticatedUser(),c=$("div#my-workflows .workflow-cells").html(null!==a?"":'\x3cdiv class\x3d"muted"\x3e'+swarm.te("My workflows will only be populated once you have logged in.")+'\x3ca href\x3d"/login/" onclick\x3d"swarm.user.login(); return false;"\x3e '+swarm.te("Log in")+"\x3c/a\x3e "+
swarm.te("now.")),d=$("div#all-workflows .workflow-cells").html(""),f=swarm.t("You are an owner"),g;$.each(b.data.workflows.sort(function(a,b){var c=(a.id===swarm.workflow.defaults.id?0:1)+a.name.toLowerCase(),d=(b.id===swarm.workflow.defaults.id?0:1)+b.name.toLowerCase();return c<d?-1:c>d?1:0}),function(){g=$($.templates(swarm.workflow.summary).render({workflow:this,ownerIconTitle:f,isGlobal:swarm.workflow.defaults.id===this.id}));var b=$("body").hasClass("super");$(g).data({workflow:this,mutable:!1});
null!==a&&swarm.workflow.isOwnerByGroup(this.owners,a)?g.addClass("owner").data("mutable",!0).appendTo(d).clone().appendTo(c).data({workflow:this,mutable:!0}):(this.shared||b||swarm.workflow.defaults.id===this.id)&&g.appendTo(d).data({mutable:b});this.id===swarm.workflow.defaults.id&&(swarm.workflow.defaults=this)});$(".workflow-cells").each(function(){this.hasChildNodes()||$(this).html(swarm.te("No Workflows to show."))});$(".workflows").removeClass("loading-workflows").not(".loading-test-definitions").find("input, button").prop("disabled",
!1);$(".workflow-cell .description").expander({slicePoint:100})},error:function(b){$(".workflow-cells").empty();var a=$(".messages").addClass("alert-error").toggleClass("hidden",!1);b.responseJSON&&b.responseJSON.messages?$.each(b.responseJSON.messages,function(){a.append($("\x3cdiv\x3e").text(this.text))}):a.append($("\x3cdiv\x3e").text(swarm.te("Failed to load workflow definitions. Please contact your Swarm administrator.")))}})},showWorkflowModal:function(c){var b=$("#workflow-modal-content"),
a=c.workflow||{owners:[swarm.user.getAuthenticatedUser().id]},e=c.mutable||!1,d=a.on_submit||null,f=a.end_rules||null,g=swarm.workflow.defaults,d=[{description:swarm.te("On commit without a review"),target:"submit_without_review_action",name:"on_submit[without_review]",rule:d&&d.without_review?d.without_review.rule:g.on_submit.without_review.rule,mode:d&&d.without_review?d.without_review.mode:"inherit",defaultErr:g.on_submit.without_review.rule,options:[{value:"no_checking",text:swarm.te("Allow")},
{value:"auto_create",text:swarm.te("Create a review")},{value:"reject",text:swarm.te("Reject")}]},{description:swarm.te("On commit with a review"),target:"submit_with_review_action",name:"on_submit[with_review]",rule:d&&d.with_review?d.with_review.rule:g.on_submit.with_review.rule,mode:d&&d.with_review?d.with_review.mode:"inherit",defaultErr:g.on_submit.with_review.rule,options:[{value:"no_checking",text:swarm.te("Allow")},{value:"approved",text:swarm.te("Reject unless approved")}]},{description:swarm.te("On update of a review in an end state"),
target:"submit_end_rule_action",name:"end_rules[update]",rule:f&&f.update?f.update.rule:g.end_rules.update.rule,mode:f&&f.update?f.update.mode:"inherit",defaultErr:g.end_rules.update.rule,options:[{value:"no_checking",text:swarm.te("Allow")},{value:"no_revision",text:swarm.te("Reject")}]},{description:swarm.te("Count votes up from"),target:"counted_votes_action",name:"counted_votes",rule:a.counted_votes?a.counted_votes.rule:g.counted_votes.rule,mode:a.counted_votes?a.counted_votes.mode:"inherit",
defaultErr:g.counted_votes.rule,options:[{value:"anyone",text:swarm.te("Anyone")},{value:"members",text:swarm.te("Members")}]},{description:swarm.te("Automatically approve reviews"),target:"submit_auto_approve_action",name:"auto_approve",rule:a.auto_approve?a.auto_approve.rule:g.auto_approve.rule,mode:a.auto_approve?a.auto_approve.mode:"inherit",defaultErr:g.auto_approve.rule,options:[{value:"never",text:swarm.te("Never")},{value:"votes",text:swarm.te("Based on vote count")}]}],k=$("body").hasClass("super"),
l=swarm.user.getAuthenticatedUser(),h=Object.keys(swarm.workflow.testDefinitions).filter(function(a){a=swarm.workflow.testDefinitions[a];return swarm.workflow.canSee(a.shared,a.owners,k,l,!0)});a.tests&&$.each(Object.keys(a.tests),function(b,c){var d=a.tests[c];d.name=swarm.workflow.testDefinitions["test-"+d.id].name;h["test-"+d.id]=swarm.workflow.testDefinitions["test-"+d.id]});b.html($.templates(swarm.workflow.formTemplate).render({title:c.title||swarm.t("Workflow"),isGlobal:swarm.workflow.defaults.id===
a.id,mutable:e,workflow:a,rules:d,supportedEvents:swarm.workflow.supportedEvents,supportedBlocks:swarm.workflow.supportedBlocks,haveTestDefinitions:h.length,tests:h.map(function(a){a=swarm.workflow.testDefinitions[a];return{id:a.id,name:a.name}}),testsCount:a.tests?a.tests.length:0}));b.find("#owners").userMultiPicker({itemsContainer:b.find(".owners-list"),selected:a.owners.filter(function(a){return-1===a.indexOf("swarm-group-")}),inputName:"owners",enableGroups:!0,required:!0,groupInputName:"owners",
useGroupKeys:!0,excludeProjects:!0,disabled:b.find("#owners").hasClass("disabled"),selectedGroups:a.owners.filter(function(a){return-1!==a.indexOf("swarm-group-")})});$.each(b.find(".control-group-workflow-rules .rule .btn-group"),function(){var a=$(this);a.find("span.current").text(a.find('li a[data-value\x3d"'+a.find("input").val()+'"]').text()||swarm.t("Please choose an option"))});$.each(b.find(".control-group-workflow-tests .btn-group"),function(){var a=$(this);a.find("span.current").text(a.find('li a[data-value\x3d"'+
a.find("input").val()+'"]').text()||swarm.t("Please choose an option"))});$.each(b.find(".control-group-workflow-tests .event-view"),function(){var a=$(this);a.text(swarm.workflow.getTestEvent(a.data("event")).text)});$.each(b.find(".control-group-workflow-tests .blocks-view"),function(){var a=$(this);a.text(swarm.workflow.getTestBlock(a.data("blocks")).text)});b.find(".control-group-workflow-rules .mode .rounded-switch").not(".disabled").on("click",function(){var a=$(this).toggleClass("policy").find("input");
a.val("policy"===a.val()?"default":"policy")});b.find("#workflow-exclusions").userMultiPicker({itemsContainer:b.find(".exclusions-list"),selected:(a.user_exclusions||{rule:[]}).rule,inputName:"user_exclusions[rule]",enableGroups:!0,required:!1,groupInputName:"group_exclusions[rule]",useGroupKeys:!0,excludeProjects:!0,disabled:b.find("#workflow-exclusions").hasClass("disabled"),selectedGroups:(a.group_exclusions||{rule:[]}).rule});var j=a.id;$.ajax({url:"/api/v9/projects?workflow\x3d"+j,errorHandled:!0,
success:function(a){0<a.projects.length?(swarm.workflow.workFlowDisabledDeleteButton=!0,$("#affected-projects").empty().append($('\x3ca href\x3d"#project-list" onclick\x3d"event.preventDefault();" data-toggle\x3d"collapse" data-target\x3d"#project-list"\x3e').addClass("project-count collapsed").append($("\x3ci\x3e").addClass("icon icon-chevron-down")).append($("\x3cspan\x3e").addClass("collapse-title").text(swarm.tpe("%d project uses this workflow","%d projects use this workflow",a.totalCount)))).append($("\x3cdiv\x3e").attr("id",
"project-list").addClass("collapse").append($.templates(swarm.workflow.affectedProjectsTemplate).render({projects:a.projects,workflowId:j})))):a.totalCount?$("#affected-projects p").removeAttr("class").text(swarm.tpe("%d project uses this workflow","%d projects use this workflow",a.totalCount)):($("#btn-delete").prop("disabled",!e),$(".tool-tip").removeAttr("title"),$("#affected-projects p").removeAttr("class").text(swarm.t("No projects use this workflow")))},error:function(){$("#affected-projects").html($("\x3cp\x3e").addClass("messages").append($("\x3cspan\x3e").addClass("text-error").text(swarm.te("Failed to check the project associations for this workflow, please contact your Swarm administrator."))))}})},
workflowDropdown:function(c){var b=c.parent,a=c.prefix,e=c.workflows,d=c.currentWorkflowId||-1,f=c.localStorageKey;c=c.noneSelected||swarm.te("No workflow");swarm.workflow.dropdown='\x3cdiv id\x3d"{{:prefix}}-workflow-control" class\x3d"" data-filter-key\x3d"workflow"\x3e\n    \x3cbutton id\x3d"{{:prefix}}-btn-project-workflow" type\x3d"button" class\x3d"btn btn-workflow dropdown-toggle" data-toggle\x3d"dropdown" aria-haspopup\x3d"true" title\x3d""\x3e\n        \x3cspan class\x3d"text workflow-label"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\n    \x3c/button\x3e\n    \x3cul class\x3d"dropdown-menu workflow-filter" aria-label\x3d"'+
swarm.te("Workflows")+'"\x3e\n        \x3cli id\x3d"{{:prefix}}-no-workflow"\x3e\n            \x3ca href\x3d"javascript:void(0);" class\x3d"btn-filter default" data-filter-value\x3d"{{:noneSelected}}"\x3e{{:noneSelected}}\x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"divider"\x3e\x3c/li\x3e\n        \x3cli class\x3d"{{:prefix}}-workflow-filter"\x3e\n            \x3cinput class\x3d"input-filter" data-filter-key\x3d"workflow" type\x3d"text" placeholder\x3d"'+swarm.te("Workflows")+'"\x3e\n            \x3cbutton type\x3d"button" class\x3d"clear" style\x3d""\x3e\x3cspan\x3ex\x3c/span\x3e\x3c/button\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"divider"\x3e\x3c/li\x3e\n    \x3c/ul\x3e\n\x3c/div\x3e';
swarm.workflow.dropdownmenuitem='\x3cli class\x3d"list-item" id\x3d"{{:prefix}}-{{:workflow.id}}"\x3e\n    \x3ca href\x3d"javascript:void(0);" class\x3d"btn-filter btn-filter-workflow" data-filter-key\x3d"workflow" data-filter-value\x3d"{{:prefix}}-{{:workflow.id}}" data-short-label\x3d"{{:workflow.name}}"\x3e{{:workflow.name}}\x3c/a\x3e\n\x3c/li\x3e';c=$($.templates(swarm.workflow.dropdown).render({prefix:a,noneSelected:c}));var g=swarm.user.getAuthenticatedUser(),k=$("body").hasClass("super"),l=
c.find(".dropdown-menu"),h=b.find("#"+a+"-workflow-control").attr("class");b.find("#"+a+"-workflow-control").replaceWith(c);c.addClass(h);$.each(e.sort(function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();return c<d?-1:c>d?1:0}),function(b,c){if(c.id!==swarm.workflow.defaults.id&&(k||c.shared||parseInt(d,10)===c.id||null!==g&&0<$([g.id].concat(Object.keys(g.groups||{}))).filter(this.owners.map(function(a){return a.replace(/^swarm-group-/,"")})).length)){var f=$($.templates(swarm.workflow.dropdownmenuitem).render({prefix:a,
workflow:c}));l.append(f)}});b=$("#"+a+"-no-workflow a");b=-1!==d?$("#"+a+"-"+d+" a"):b;c.find(".text").text($(b).data("short-label")||$(b).html());var j=function(a){a.find("a.btn-filter").each(function(){this.innerHTML=$(this).data("short-label");$(this).show()})};$("."+a+"-workflow-filter").on("click",".input-filter",function(a){a.stopPropagation()});$("."+a+"-workflow-filter .input-filter").each(function(){var b=$(this),c=$("#"+a+"-workflow-control"),d=c.find(".dropdown-menu li.list-item");b.on("input change",
function(){b.siblings(".clear").hide();b.val()?(b.siblings(".clear").show(),d.find("a.btn-filter").each(function(){$(this).hide()}),d.find("a.btn-filter:dataLabelContains('"+b.val()+"')").each(function(){var a=$(this).data("short-label"),c=RegExp(b.val(),"gi");this.innerHTML=a.replace(c,"\x3cb\x3e$\x26\x3c/b\x3e");$(this).show()})):j(d,c)}).change();b.siblings(".clear").on("click",function(a){b.val("").data("filter-value","").change();a.stopPropagation();j(d,c)});b.on("keydown",function(a){var d=
c.find(".dropdown-menu");13===a.keyCode?($(document).trigger("click.dropdown.data-api"),a.preventDefault()):27===a.keyCode?(b.val(""),$(document).trigger("click.dropdown.data-api"),a.preventDefault()):40===a.keyCode&&(a.stopImmediatePropagation(),c.find("ul.dropdown-menu").children().each(function(){$(this).removeClass("active")}),a=d.find("li.list-item a:visible").first().closest("li").attr("id"),$("#"+a).find("a").focus().addClass("active"))});c.find("ul.dropdown-menu").on("keydown",function(b){if(40===
b.keyCode){if(b.stopImmediatePropagation(),b.preventDefault(),b=$(document.activeElement).closest("li").nextAll("li").find("a:visible,input").first().closest("li").attr("id"))$(document.activeElement).removeClass("active"),$("#"+a+"-"+b).find("a,input").focus().addClass("active")}else 38===b.keyCode&&(b.stopImmediatePropagation(),b.preventDefault(),(b=$(document.activeElement).closest("li").prevAll("li").children("a:visible,input").first().closest("li").attr("id"))||(b=$(document.activeElement).closest("ul").prevAll("li").children("a:visible,input").first().closest("li").attr("id")),
$(document.activeElement).removeClass("active"),$("#"+a+"-"+b).find("a,input").focus().addClass("active"))});c.find(".dropdown-menu li:has(\x3e a) a").on("click",function(){localStorage.setItem(f,$(this).parent().attr("id"));j(d,c);var e=$("#"+localStorage.getItem(f)+" a");b.val(e.data("filter-value")).change();$("#"+a+"-workflow").val(localStorage.getItem(f).replace(a+"-",""));e=!b.val()?c.find(".default"):e;$(e).closest(".dropdown-menu").length?$(e).is("input")?($(e).data("filter-value",$(e).val()),
c.find(".text").text($(e).val())):($(e).addClass("active"),c.find(".text").text($(e).data("short-label")||$(e).html()),c.find(".input-filter").siblings(".clear").trigger("click")):$(e).toggleClass("active")})});c.find("button").prop("disabled",!1);return c},getTestRow:function(c,b){return $(b).closest(".controls-row.test-"+c)},getTestEvent:function(c){switch(c){case "onUpdate":return swarm.workflow.supportedEvents[0];case "onSubmit":return swarm.workflow.supportedEvents[1];case "onDemand":return swarm.workflow.supportedEvents[2];
default:return swarm.workflow.supportedEvents[1]}},getTestBlock:function(c){switch(c){case "nothing":return swarm.workflow.supportedBlocks[0];case "approved":return swarm.workflow.supportedBlocks[1];default:return swarm.workflow.supportedBlocks[1]}},isOwnerByGroup:function(c,b){return null!==b&&0<$([b.id].concat(Object.keys(b.groups||{}))).filter(c.map(function(a){return a.replace(/^swarm-group-/,"")})).length},canSee:function(c,b,a,e,d){var f=!1;if(d&&swarm.workflow.isOwnerByGroup(b,e))f=!0;else if(a||
!0===c)f=!0;return f},defineTemplates:function(){$.templates({"swarm-workflow-summary":'\x3cdiv class\x3d"workflow-cell pad1 workflow-cell-{{:workflow.id}}{{:isGlobal?" workflow-cell-global":""}}"\x3e\n  \x3cdiv class\x3d"content pad2"\x3e\x3cspan class\x3d"workflow-name link"\x3e\x3ci class\x3d"swarm-icon icon-workflow-owner mutable-only" title\x3d"{{\x3eownerIconTitle}}"\x3e\x3c/i\x3e\x3ca data-toggle\x3d"modal" data-target\x3d"#workflow-modal-content" href\x3d"#" class\x3d"force-wrap name" data-original-title\x3d"" title\x3d""\x3e{{\x3eworkflow.name}}\x3c/a\x3e\x3c/span\x3e\n    \x3cp class\x3d"force-wrap description muted"\x3e\x3csmall\x3e{{\x3eworkflow.description}}\x3c/small\x3e\x3c/p\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"swarm-workflow-rules":"\x3ch4\x3e"+swarm.t("Rules")+'  \x3ca class\x3d"help" href\x3d"'+swarm.assetUrl("/docs/Content/Swarm/workflow.overview.html#Workflow_rules")+'" target\x3d"_swarm_docs"\x3e\x3cspan\x3e?\x3c/span\x3e\x3c/a\x3e\x3c/h4\x3e\n\x3cdiv class\x3d"panel"\x3e\n  {{for rules ~mutable\x3dmutable tmpl\x3d"swarm-workflow-rule" /}}\x3c/div\x3e\n',"swarm-workflow-rule":'\x3cdiv class\x3d"control-group"\x3e\n  {{include tmpl\x3d"swarm-workflow-rule-input"/}}\n  \x3cdiv class\x3d"controls mode"\x3e\n    \x3cinput name\x3d"{{:name}}[mode]" type\x3d"hidden" value\x3d"inherit" /\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
"swarm-workflow-rule-input":'\x3cdiv class\x3d"controls rule"\x3e\n  \x3clabel for\x3d"{{:name}}[rule]" class\x3d"rule-description"\x3e{{:description}}\x3c/label\x3e\n  \x3cdiv class\x3d"btn-group"\x3e\n    \x3cbutton class\x3d"btn dropdown-toggle dropdown-value{{:~mutable ?"" : " disabled"}}" data-toggle\x3d"dropdown" data-target\x3d"{{:target}}"\x3e      \x3cspan class\x3d"current"\x3e\x3c/span\x3e      \x3cspan class\x3d"vertical-bar"\x3e\x3c/span\x3e      \x3cspan class\x3d"caret"\x3e\x3c/span\x3e    \x3c/button\x3e\n    \x3cinput name\x3d"{{:name}}[rule]" type\x3d"hidden" value\x3d{{:rule}} onError\x3d{{:defaultErr}} /\x3e\n    \x3cul class\x3d"dropdown-menu" role\x3d"menu" aria-label\x3d"{{:target}}"\x3e\n    {{for options}}      \x3cli\x3e\x3ca href\x3d"#" data-value\x3d"{{:value}}"\x3e{{:text}}\x3c/a\x3e\x3c/li\x3e\n    {{/for}}    \x3c/ul\x3e\n  \x3c/div\x3e\n\x3c/div\x3e',
"swarm-global-rules":'\x3ch4\x3e\x3cdiv class\x3d"rule-description-title"\x3e'+swarm.t("Global Rules")+'      \x3ca class\x3d"help" href\x3d"'+swarm.assetUrl("/docs/Content/Swarm/admin.workflow_configurables.html")+'" target\x3d"_swarm_docs"\x3e\x3cspan\x3e?\x3c/span\x3e\x3c/a\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"mode-setting-title"\x3e'+swarm.t("Enforce")+'      \x3ca class\x3d"help" href\x3d"'+swarm.assetUrl("/docs/Content/Swarm/admin.workflow_configurables.html#Global_workflow")+'" target\x3d"_swarm_docs"\x3e\x3cspan\x3e?\x3c/span\x3e\x3c/a\x3e\n    \x3c/div\x3e\n\x3c/h4\x3e\n\x3cdiv class\x3d"panel"\x3e\n  {{for rules ~mutable\x3dmutable tmpl\x3d"swarm-global-rule" /}}\x3c/div\x3e\n\x3cdiv class\x3d"control-group control-group-exclusions"\x3e\n  \x3clabel for\x3d"workflow-exclusions" class\x3d"control-label"\x3e'+
swarm.t("Members or groups who can ignore ALL workflow rules")+'  \x3c/label\x3e\n  \x3cdiv class\x3d"controls exclusions"\x3e\n    \x3cdiv class\x3d"body in collapse""\x3e\n      \x3cdiv class\x3d"input-prepend" clear\x3d"both"\x3e\n        \x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\n        \x3cinput type\x3d"text" class\x3d"input-xlarge multipicker-input{{:mutable ? "" :" disabled"}}" id\x3d"workflow-exclusions" data-items\x3d"100" data-selected\x3d"[]" placeholder\x3d"'+
swarm.t("Member or group")+'"\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"exclusions-list multipicker-items-container clearfix"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cinput name\x3d"group_exclusions[mode]" type\x3d"hidden" value\x3d"policy" /\x3e\n    \x3cinput name\x3d"user_exclusions[mode]" type\x3d"hidden" value\x3d"policy" /\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',"swarm-global-rule":'\x3cdiv class\x3d"control-group"\x3e\n  {{include tmpl\x3d"swarm-workflow-rule-input"/}}\n  \x3cdiv class\x3d"controls mode"\x3e\n    \x3cdiv class\x3d"rounded-switch {{:mode}}{{:~mutable ?"" : " disabled"}}"\x3e\n      \x3cdiv class\x3d"switch-button"\x3e\x3c/div\x3e\n      \x3cinput name\x3d"{{:name}}[mode]" type\x3d"hidden" value\x3d"{{:mode}}" /\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
swarmWorkflowTests:'\x3cdiv class\x3d"controls-row tests-title"\x3e  {{include tmpl\x3d"swarmWorkflowTestsTitle"/}}\n\x3c/div\x3e\x3cdiv class\x3d"panel"\x3e\n  {{for workflow.tests ~tests\x3dtests ~mutable\x3dmutable ~supportedEvents\x3dsupportedEvents ~supportedBlocks\x3dsupportedBlocks tmpl\x3d"swarmWorkflowTestsTest"/}}\x3c/div\x3e\n\x3cdiv class\x3d"controls-row footer"\x3e\n     \x3cdiv class\x3d"add-test-btn"\x3e       {{if mutable }}       \x3cbutton id\x3d"add-tests" type\x3d"button"  {{:haveTestDefinitions ? "" : " disabled\x3ddisabled"}} aria-hidden\x3d"true"\x3e        \x3cspan{{:haveTestDefinitions ? "" : " title\x3d\''+
swarm.t("There are no test definitions available for you to add to workflows")+"'\"}}\x3e"+swarm.t("+Add Test")+'\x3c/span\x3e       \x3c/button\x3e        {{/if}}     \x3c/div\x3e     {{if workflow.tests \x26\x26 workflow.tests.length \x3d\x3d\x3d 0 || !workflow.tests}}     \x3cspan class\x3d"no-tests muted"\x3e'+swarm.t("There are no tests associated with this workflow")+"     \x3c/span\x3e  {{/if}}\x3c/div\x3e\n",swarmWorkflowTestsAdd:'\x3cdiv class\x3d"controls-row controls test-edit test-add"\x3e\n  \x3cdiv class\x3d"test-definition-selection"\x3e\n    {{include ~add\x3dadd ~tests\x3dtests tmpl\x3d"swarmWorkflowTestsDefinitionDropdown" /}}\n  \x3c/div\x3e\n  \x3cdiv class\x3d"test-definition-event-selection"\x3e\n    {{include ~add\x3dadd ~eventName\x3deventName ~supportedEvents\x3dsupportedEvents tmpl\x3d"swarmWorkflowTestsEvents" /}}\n  \x3c/div\x3e  \x3cdiv class\x3d"test-definition-blocks-selection"\x3e\n    {{include ~add\x3dadd ~blocksName\x3dblocksName ~supportedBlocks\x3dsupportedBlocks tmpl\x3d"swarmWorkflowTestsBlocks" /}}\n  \x3c/div\x3e  \x3cdiv class\x3d"test-definition-options"\x3e\n   \x3cspan class\x3d"test-options link"\x3e    \x3cbutton type\x3d"button" class\x3d"btn edit hidden" aria-hidden\x3d"true"\x3e      \x3ci class\x3d"swarm-icon icon-edit-pencil" title\x3d"'+
swarm.t("Edit")+'"\x3e\x3c/i\x3e    \x3c/button\x3e    \x3cbutton type\x3d"button" class\x3d"btn delete hidden" aria-hidden\x3d"true"\x3e      \x3ci class\x3d"icon-trash" title\x3d"'+swarm.t("Delete")+'"\x3e\x3c/i\x3e    \x3c/button\x3e    \x3cbutton type\x3d"button" class\x3d"accept disabled" aria-hidden\x3d"true" disabled\x3e      \x3ci class\x3d"swarm-icon icon-task-addressed" title\x3d"'+swarm.t("Accept")+'"\x3e\x3c/i\x3e    \x3c/button\x3e    \x3cbutton type\x3d"button" class\x3d"cancel" aria-hidden\x3d"true"\x3e      \x3ci class\x3d"swarm-icon icon-cross" title\x3d"'+
swarm.t("Cancel")+'"\x3e\x3c/i\x3e    \x3c/button\x3e   \x3c/span\x3e  \x3c/div\x3e\n\x3c/div\x3e\n',swarmWorkflowTestsTitle:'\x3cdiv class\x3d"test-definition-title"\x3e\n  \x3ch4\x3e'+swarm.t("Tests")+'    \x3ca class\x3d"help" href\x3d"'+swarm.assetUrl("/docs/Content/Swarm/workflow.add.html")+'" target\x3d"_swarm_docs"\x3e\x3cspan\x3e?\x3c/span\x3e\x3c/a\x3e  \x3c/h4\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"test-definition-event-title"\x3e\n\x3ch4\x3e\x3cdiv\x3e'+swarm.t("When")+'\x3c/div\x3e\x3c/h4\x3e\x3c/div\x3e\n\x3cdiv class\x3d"test-definition-blocks"\x3e\n\x3ch4\x3e\x3cdiv\x3e'+
swarm.t("Blocks")+"\x3c/div\x3e\x3c/h4\x3e\x3c/div\x3e\n",swarmWorkflowTestsTest:'\x3cdiv class\x3d"controls-row controls test-{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}"\x3e\n  \x3cdiv class\x3d"test-definition-selection"\x3e\n   {{include tmpl\x3d"swarmWorkflowTestsDefinitionDropdown"/}}\n  \x3c/div\x3e\n  \x3cdiv class\x3d"test-definition-event-selection"\x3e\n    {{include tmpl\x3d"swarmWorkflowTestsEvents" /}}\n  \x3c/div\x3e  \x3cdiv class\x3d"test-definition-blocks-selection"\x3e\n    {{include tmpl\x3d"swarmWorkflowTestsBlocks" /}}\n  \x3c/div\x3e  \x3cdiv class\x3d"test-definition-options"\x3e\n   \x3cspan class\x3d"test-options link"\x3e   {{if ~mutable }}    \x3cbutton type\x3d"button" class\x3d"btn edit" data-row-id\x3d"{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}" data-test-id\x3d"{{:id}}" aria-hidden\x3d"true"\x3e      \x3ci class\x3d"swarm-icon icon-edit-pencil" title\x3d"'+
swarm.t("Edit")+'"\x3e\x3c/i\x3e    \x3c/button\x3e    \x3cbutton type\x3d"button" class\x3d"btn delete" data-row-id\x3d"{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}" data-test-id\x3d"{{:id}}" aria-hidden\x3d"true"\x3e      \x3ci class\x3d"icon-trash" title\x3d"'+swarm.t("Delete")+'"\x3e\x3c/i\x3e    \x3c/button\x3e    \x3cbutton type\x3d"button" class\x3d"accept hidden" data-row-id\x3d"{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}" data-test-id\x3d"{{:id}}" aria-hidden\x3d"true"\x3e      \x3ci class\x3d"swarm-icon icon-task-addressed" title\x3d"'+
swarm.t("Accept")+'"\x3e\x3c/i\x3e    \x3c/button\x3e    \x3cbutton type\x3d"button" class\x3d"cancel hidden" data-row-id\x3d"{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}" data-test-id\x3d"{{:id}}" aria-hidden\x3d"true"\x3e      \x3ci class\x3d"swarm-icon icon-cross" title\x3d"'+swarm.t("Cancel")+'"\x3e\x3c/i\x3e    \x3c/button\x3e    {{/if}}   \x3c/span\x3e  \x3c/div\x3e\n\x3c/div\x3e\n',swarmWorkflowTestsEvents:'  \x3cdiv class\x3d"event-view{{:~add ? " hidden" : ""}}" data-event\x3d"{{:event}}"\x3e{{if ~add }}{{:~eventName}}{{/if}}  \x3c/div\x3e\n  \x3cdiv class\x3d"btn-group test-event-dropdown{{:~add ? "" : " view-mode"}}"\x3e\n    \x3cbutton class\x3d"btn dropdown-toggle dropdown-value" data-toggle\x3d"dropdown" data-target\x3d"tests[{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}][event]"\x3e      \x3cspan class\x3d"current"\x3e{{if ~add }}{{:~eventName}}{{/if}}\x3c/span\x3e      \x3cspan class\x3d"vertical-bar"\x3e\x3c/span\x3e      \x3cspan class\x3d"caret"\x3e\x3c/span\x3e    \x3c/button\x3e\n    \x3cinput name\x3d"tests[{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}][event]" type\x3d"hidden" value\x3d{{:event}} /\x3e\n    \x3cul class\x3d"dropdown-menu" role\x3d"menu" aria-label\x3d"tests[{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}][event]"\x3e\n    {{for ~supportedEvents }}      \x3cli\x3e\x3ca href\x3d"#" data-value\x3d"{{:value}}"\x3e{{:text}}\x3c/a\x3e\x3c/li\x3e\n    {{/for}}    \x3c/ul\x3e\n  \x3c/div\x3e\n',
swarmWorkflowTestsBlocks:'  \x3cdiv class\x3d"blocks-view{{:~add ? " hidden" : ""}}" data-blocks\x3d"{{:blocks}}"\x3e{{if ~add }}{{:~blocksName}}{{/if}}  \x3c/div\x3e\n  \x3cdiv class\x3d"btn-group test-blocks-dropdown{{:~add ? "" : " view-mode"}}"\x3e\n    \x3cbutton class\x3d"btn dropdown-toggle dropdown-value" data-toggle\x3d"dropdown" data-target\x3d"tests[{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}][blocks]"\x3e      \x3cspan class\x3d"current"\x3e{{if ~add }}{{:~blocksName}}{{/if}}\x3c/span\x3e      \x3cspan class\x3d"vertical-bar"\x3e\x3c/span\x3e      \x3cspan class\x3d"caret"\x3e\x3c/span\x3e    \x3c/button\x3e\n    \x3cinput name\x3d"tests[{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}][blocks]" type\x3d"hidden" value\x3d{{:blocks}} /\x3e\n    \x3cul class\x3d"dropdown-menu" role\x3d"menu" aria-label\x3d"tests[{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}][blocks]"\x3e\n    {{for ~supportedBlocks }}      \x3cli\x3e\x3ca href\x3d"#" data-value\x3d"{{:value}}"\x3e{{:text}}\x3c/a\x3e\x3c/li\x3e\n    {{/for}}    \x3c/ul\x3e\n  \x3c/div\x3e\n',
swarmWorkflowTestsDefinitionDropdown:'\x3cdiv class\x3d"test-definition{{:~add ? " hidden" : ""}}" data-test-definition\x3d"{{:id}}"\x3e{{:name}}\x3c/div\x3e\n\x3cinput id \x3d "workflow-{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}-testdefinition"  name\x3d"tests[{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}][id]" type\x3d"hidden" class\x3d"{{:~add ? "invalid" : ""}}" value\x3d"{{:id}}"/\x3e\n\x3cdiv id\x3d"workflow-{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}-testdefinition-control" class\x3d"btn-group test-definition-dropdown{{:~add ? "" : " view-mode"}}" data-filter-key\x3d"testdefinition"\x3e\n    \x3cbutton id\x3d"btn-testdefinition-{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}" type\x3d"button" class\x3d"btn btn-testdefinition dropdown-toggle" data-toggle\x3d"dropdown" aria-haspopup\x3d"true" title\x3d""\x3e\n        \x3cspan class\x3d"text testdefinition-label"\x3e{{:name}}\x3c/span\x3e\n        \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\n    \x3c/button\x3e\n    \x3cul class\x3d"dropdown-menu testdefinition-filter" aria-label\x3d"'+
swarm.te("Test definitions")+'"\x3e\n        \x3cli id\x3d"{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}-no-testdefinition"\x3e\n            \x3ca href\x3d"#" class\x3d"btn-filter default" data-filter-value\x3d"{{:noneSelected}}"\x3e{{:noneSelected}}\x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"divider"\x3e\x3c/li\x3e\n        \x3cli class\x3d"{{if #getIndex() \x3e\x3d 0}}{{:#getIndex()}}{{else}}{{:nextIndex}}{{/if}}-testdefinition-filter"\x3e\n            \x3cinput class\x3d"input-filter" data-filter-key\x3d"testdefinition" type\x3d"text" placeholder\x3d"'+
swarm.te("Test Definition")+'"\x3e\n            \x3cbutton type\x3d"button" class\x3d"clear" style\x3d""\x3e\x3cspan\x3ex\x3c/span\x3e\x3c/button\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"divider"\x3e\x3c/li\x3e\n        {{for ~tests }}           \x3cli class\x3d"list-item" id\x3d"testdefinition-{{:id}}"\x3e\n             \x3ca href\x3d"#" class\x3d"btn-filter btn-filter-workflow" data-filter-key\x3d"workflow" data-filter-value\x3d"testdefinition-{{:id}}" data-short-label\x3d"{{:name}}"\x3e{{:name}}\x3c/a\x3e\n           \x3c/li\x3e       {{/for}}    \x3c/ul\x3e\n\x3c/div\x3e'});
swarm.workflow.summary='\x3cdiv class\x3d"workflow-cell pad1 workflow-cell-{{:workflow.id}}{{:isGlobal?" workflow-cell-global":""}}"\x3e\n  \x3cdiv class\x3d"content pad2"\x3e\x3cspan class\x3d"workflow-name link"\x3e\x3ci class\x3d"swarm-icon icon-workflow-owner mutable-only" title\x3d"{{\x3eownerIconTitle}}"\x3e\x3c/i\x3e\x3ca data-toggle\x3d"modal" data-target\x3d"#workflow-modal-content" href\x3d"#" class\x3d"force-wrap name" data-original-title\x3d"" title\x3d""\x3e{{\x3eworkflow.name}}\x3c/a\x3e\x3c/span\x3e\n    \x3cp class\x3d"force-wrap description muted"\x3e\x3csmall\x3e{{\x3eworkflow.description}}\x3c/small\x3e\x3c/p\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n';
swarm.workflow.formTemplate='\x3cform method\x3d"post" class\x3d"modal-form{{:isGlobal?" global-workflow":""}}"{{if "" !\x3d\x3d workflow.id}} data-workflow-id\x3d"{{:workflow.id}}" data-workflow-tests\x3d"{{:testsCount}}"{{/if}}\x3e\n  \x3cdiv class\x3d"container-fluid"\x3e\n    \x3cdiv class\x3d"row-fluid"\x3e\n      \x3cdiv class\x3d"modal-header"\x3e\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e\x3cspan\x3ex\x3c/span\x3e\x3c/button\x3e\x3ch3 id\x3d"workflow-content-title" class\x3d"force-wrap"\x3e{{\x3etitle}}\x3c/h3\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row-fluid"\x3e\n      \x3cdiv class\x3d"modal-body"\x3e\n        \x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"workflow"\x3e\n          \x3cdiv class\x3d"column span4"\x3e            \x3cdiv class\x3d"control-group"\x3e\n              \x3clabel class\x3d"control-label" for\x3d"name"\x3e'+
swarm.t("Name")+'\x3c/label\x3e\n              \x3cdiv class\x3d"controls"\x3e\n                \x3cinput class\x3d"span12" autocomplete\x3d"off" type\x3d"text" name\x3d"name" id\x3d"name" {{:mutable ? "" :"disabled\x3ddisabled"}} value\x3d"{{\x3eworkflow.name}}" placeholder\x3d"'+swarm.t("Name")+'" required\x3d"required"\x3e\n              \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"control-group"\x3e\n              \x3clabel class\x3d"control-label" for\x3d"description"\x3e'+
swarm.t("Description")+'\x3c/label\x3e\n              \x3cdiv class\x3d"controls"\x3e\n                \x3ctextarea class\x3d"span12" rows\x3d"10" name\x3d"description" {{:mutable ? "" :"disabled\x3ddisabled"}} id\x3d"description" placeholder\x3d"'+swarm.t("Description")+'"\x3e{{\x3eworkflow.description}}\x3c/textarea\x3e\n              \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"control-group control-group-owners"\x3e\n              \x3clabel for\x3d"owners" class\x3d"control-label"\x3e'+
swarm.t("Owners")+'\x3c/label\x3e\n              \x3cdiv class\x3d"controls"\x3e\n                \x3cdiv class\x3d"body in collapse""\x3e\n                  \x3cdiv class\x3d"input-prepend" clear\x3d"both"\x3e\n                    \x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\n                    \x3cinput type\x3d"text" class\x3d"span12 multipicker-input{{:mutable ? "" :" disabled"}}" id\x3d"owners" data-items\x3d"100" data-selected\x3d"[]" placeholder\x3d"'+
swarm.t("Add an Owner")+'"\x3e\n                  \x3c/div\x3e\n                  \x3cdiv class\x3d"owners-list multipicker-items-container clearfix"\x3e\x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n            \x3c/div\x3e\n            {{if !isGlobal }}              \x3cdiv class\x3d"control-group control-group-shared"\x3e\n                \x3cdiv class\x3d"controls"\x3e\n                  \x3cdiv class\x3d"body in collapse"\x3e\n                    \x3cinput type\x3d"hidden" value\x3d"0" name\x3d"shared"\x3e\n                    \x3clabel class\x3d"control-label{{:mutable ? "" :" disabled"}}"\x3e\x3cinput {{:mutable ? "" :"disabled\x3ddisabled"}} type\x3d"checkbox" name\x3d"shared" id\x3d"shared-workflow" {{:workflow.shared ? "checked\x3dchecked" : ""}} value\x3d"1" /\x3e'+
swarm.t("Shared with others")+'\x3c/label\x3e                  \x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n            {{/if}}          \x3c/div\x3e\n          \x3cdiv class\x3d"column span8"\x3e\n            \x3cdiv class\x3d"control-group control-group-workflow-rules"\x3e\n              {{include tmpl\x3disGlobal ? "swarm-global-rules" : "swarm-workflow-rules" /}}            \x3c/div\x3e\n            \x3cdiv class\x3d"control-group control-group-workflow-tests"\x3e\n              {{include tmpl\x3d"swarmWorkflowTests" /}}            \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n    {{if !isGlobal }}      \x3cdiv class\x3d"row-fluid"\x3e        \x3cdiv id\x3d"affected-projects"\x3e\x3cp class\x3d"loading animate"\x3e'+
swarm.t("Loading...")+'\x3c/p\x3e\x3c/div\x3e      \x3c/div\x3e\n    {{/if}}    \x3cdiv class\x3d"row-fluid"\x3e\n      \x3cdiv class\x3d"modal-footer"\x3e\n        \x3cdiv class\x3d"control-group group-buttons text-left"\x3e\n          \x3cdiv class\x3d"controls"\x3e\n           {{if mutable }}             \x3cbutton type\x3d"submit" class\x3d"btn btn-mlarge btn-primary btn-save"\x3e'+swarm.t("Save")+'\x3c/button\x3e\n             \x3cbutton type\x3d"button" class\x3d"btn btn-mlarge btn-cancel" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e'+
swarm.t("Cancel")+'\x3c/button\x3e\n             {{if !isGlobal \x26\x26 workflow.id }}               \x3cdiv class\x3d"tool-tip" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"'+swarm.t("Owners can delete a workflow when not in use")+'"\x3e                 \x3cbutton disabled\x3d"disabled" id\x3d"btn-delete" type\x3d"button" class\x3d"btn btn-mlarge btn-danger" aria-hidden\x3d"true"\x3e'+swarm.t("Delete")+'\x3c/button\x3e\n               \x3c/div\x3e             {{/if}}           {{else}}             \x3cbutton type\x3d"button" class\x3d"btn btn-mlarge btn-cancel btn-primary" data-dismiss\x3d"modal" aria-hidden\x3d"true"\x3e'+
swarm.t("Close")+"\x3c/button\x3e\n           {{/if}}          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/form\x3e\n";swarm.workflow.affectedProjectsTemplate='\x3cul\x3e  {{for projects itemVar\x3d"~project"}}  \x3cli class\x3d"project"\x3e    \x3cp class\x3d"project-name"\x3e      \x3ca class\x3d"collapsed" onclick\x3d"event.preventDefault();" href\x3d"#open-project-{{:#index}}" data-toggle\x3d"collapse" data-target\x3d"#collapse-project-{{:#index}}"\x3e        \x3ci class\x3d"icon icon-chevron-down"\x3e\x3c/i\x3e\x3cspan\x3e{{:name}}\x3c/span\x3e      \x3c/a\x3e    \x3c/p\x3e    \x3cdiv id\x3d"collapse-project-{{:#index}}" class\x3d"collapse"\x3e      \x3cp class\x3d"branch-heading"\x3e'+
swarm.t("Branches")+'\x3c/p\x3e      \x3col class\x3d"branch"\x3e        {{for branches}}          {{if (~root.workflowId \x3d\x3d workflow || (!workflow \x26\x26 ~root.workflowId \x3d\x3d ~project.workflow))}}        \x3cli class\x3d"branch"\x3e\x3cspan\x3e{{:name}}\x3c/span\x3e\x3c/li\x3e          {{/if}}        {{/for}}      \x3c/ol\x3e    \x3c/div\x3e  \x3c/li\x3e  {{/for}}\x3c/ul\x3e\n'}};/*
     Please see LICENSE.txt in top-level folder of this distribution.
 @version     <release>/<patch>
*/
swarm.testdefinition={supportedEncodings:[],supportedArguments:[],init:function(){$(document).on("click.disabled",".disabled",function(a){a.preventDefault();a.stopPropagation()});swarm.testdefinition.supportedEncodings=[{label:swarm.t("URL Encoded"),value:"url"},{label:swarm.t("JSON Encoded"),value:"json"},{label:swarm.t("XML Encoded"),value:"xml"}];swarm.testdefinition.supportedArguments=[{id:"change",description:swarm.t("the change number")},{id:"status",description:swarm.t("the status of the shelved change, shelved or committed")},
{id:"review",description:swarm.t("the review identifier")},{id:"version",description:swarm.t("the version of the review")},{id:"reviewStatus",description:swarm.t("the Swarm status of the review: needsReview, needsRevision, archived, rejected, approved, approved:commit")},{id:"description",description:swarm.t("the change description of the change (request body only)")},{id:"test",description:swarm.t("the name of the test")},{id:"testRunId",description:swarm.t("the test run id")},{id:"projects",description:swarm.t("the project identifiers of projects that are part of the review")},
{id:"branches",description:swarm.t("combined project and branch identifiers of branches that are part of the review")},{id:"branch",description:swarm.t("the branch identifiers of branches that are part of the review")},{id:"update",description:swarm.t("the update callback URL")},{id:"pass",description:swarm.t("the tests pass callback URL")},{id:"fail",description:swarm.t("the tests fail callback URL")}];swarm.testdefinition.defineTemplates({});swarm.testdefinition.load();$(document).on("swarm-login",
function(){swarm.testdefinition.load()});$("a").tooltip();$("#add-test-definition-button").on("click",function(){swarm.testdefinition.showTestDefinitionModal({title:swarm.te("Add Test Definition"),testdefinition:{encoding:"url",owners:[swarm.user.getAuthenticatedUser().id]},mutable:!0})});$("#test-definition-modal-content").on("click.save",".btn-save",function(a){a.preventDefault();a=$(this).closest("form");var b=a.data("testdefinition-id");swarm.form.rest(""!==b?"PUT":"POST","/api/v10/testdefinitions"+
(""!==b?"/"+b:""),a,function(a,b){if(a.data){var d=$.templates('\x3cdiv class\x3d"swarm-alert alert alert-success" id\x3d"inner-message"\x3e{{\x3emessage}}\x3c/div\x3e').render({message:swarm.te("Test Definition Saved")});$(".modal-body .messages").append(d);swarm.testdefinition.load();setTimeout(function(){b.find("button.close").click()},500)}},$("#test-definition-modal-content .modal-body"))});$(".test-definition-cells").on("click.test-definition",".link.test-definition-name a",function(a){var b=
$(this),c=$(this).closest(".test-definition-cell");a.preventDefault();swarm.testdefinition.showTestDefinitionModal($.extend({title:b.text()},c.data()))});$(".btn-search").on("click",function(){$("div.filter-all").remove();$(".test-definition-cell").toggleClass("filtered",!0).each(function(){var a=$(".search .input-large").val().toLowerCase(),b=$(this);(-1!==b.find("a.name").text().toLowerCase().indexOf(a)||-1!==b.find(".description").text().toLowerCase().indexOf(a))&&$(this).toggleClass("filtered",
!1)});0===$(".test-definition-cell:visible").length&&$(".test-definition-cells").prepend($("\x3cdiv\x3e").addClass("filter-all").text(swarm.te("No matching test definitions")))});$(".testdefinitions .search input").on("keyup",function(a){var b=a.keyCode||a.which;"keyup"===a.type&&13!==b||$(".btn-search").trigger("click")});$("#test-definition-modal-content").on("keyup.headers",".control-group-request-header input",function(a){a=$(a.target);var b=a.val().trim(),c=a.closest(".control-group"),e=c.find(a.hasClass("header-name")?
"input.header-value":"input.header-name").val().trim(),d=c.find(".request-header-pair");a.hasClass("header-name")?(b?d.length?d.attr("name","headers["+b+"]"):c.find(".input-group-request-header").append($("\x3cinput\x3e").prop("type","hidden").addClass("request-header-pair").attr("name","headers["+b+"]").val(e)):d.remove(),a.prop("required",""!==e),c.find("input.header-value").prop("required",""!==b),c.find("button.add-request-header").prop("disabled",""===b)):(d.val(b),a.prop("required",""!==e),
c.find("input.header-name").prop("required",""!==b));$("#test-definition-modal-content .control-group-add-header a").toggleClass("disabled",0!==$("#test-definition-modal-content .control-group-request-headers").find("input.header-name, input.header-value").filter(function(){return!this.value}).length)});$("#test-definition-modal-content").on("click.add-header",".control-group-add-header a",function(a){a.preventDefault();a=$(a.target).not(".disabled");a.length&&(a=a.closest(".control-group-request-headers"),
a.find(".request-header-heading").show(),a.find(".control-group-add-header").replaceWith($.render.swarmTestDefinitionRequestHeader({key:"",prop:""})+$.render.swarmTestDefinitionAddHeader({},{disabled:!0})),a.find(".header-name").last().focus())});$("#test-definition-modal-content").on("click.delete","button.remove-request-header",function(){$(this).tooltip("hide");var a=$("#test-definition-modal-content .control-group-request-headers"),b=a.find(".control-group-request-header").length;$(this).closest(".control-group-request-header").remove();
0===b&&a.find(".request-header-heading").hide();a.find(".control-group-add-header").replaceWith($.render.swarmTestDefinitionAddHeader({},{disabled:0!==a.find("input.header-name, input.header-value").filter(function(){return!this.value}).length,noHeaders:0===b}))});$("#test-definition-modal-content").on("click.delete","#btn-delete",function(a){a.preventDefault();var b=$(this),c=b.closest("form"),e="/api/v10/testdefinitions/"+c.data("testdefinition-id");setTimeout(function(){var a=swarm.tooltip.showConfirm(b,
{placement:"top",content:swarm.te("Delete this test definition?"),classes:"popover-test-definition",buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary btn-confirm"\x3e'+swarm.te("Delete")+"\x3c/button\x3e",'\x3cbutton type\x3d"button" class\x3d"btn btn-cancel"\x3e'+swarm.te("Cancel")+"\x3c/button\x3e"]});a.tip().on("click",".btn-cancel",function(){a.destroy()});a.tip().on("click",".btn-confirm",function(){swarm.form.disableButton(a.tip().find(".btn-confirm"));a.tip().find(".buttons .btn").prop("disabled",
!0);swarm.form.restDelete(e,c,function(c,g){a.destroy();if(c.error){var e=swarm.tooltip.showConfirm(b,{placement:"top",content:c.error,buttons:['\x3cbutton type\x3d"button" class\x3d"btn btn-primary"\x3e'+swarm.te("Ok")+"\x3c/button\x3e"]});e.tip().on("click",".btn",function(){e.destroy()})}else{var h=$.templates('\x3cdiv class\x3d"swarm-alert alert alert-success" id\x3d"inner-message"\x3e{{\x3emessage}}\x3c/div\x3e').render({message:swarm.te("Test definition Deleted")});$(".modal-body .messages").append(h);
swarm.testdefinition.load();setTimeout(function(){g.find("button.close").click()},500)}},$("#test-definition-modal-content .modal-body"))})},5)})},load:function(){$(".test-definitions .toolbar button").prop("disabled",!0);$(".test-definition-cells").html(swarm.t("Loading..."));$.ajax({url:"/api/v10/testdefinitions",dataType:"json",success:function(a){var b=swarm.user.getAuthenticatedUser(),c=$("div#my-test-definitions .test-definition-cells").html(null!==b?"":'\x3cdiv class\x3d"muted"\x3e'+swarm.te("My test definitions will only be populated once you have logged in.")+
'\x3ca href\x3d"/login/" onclick\x3d"swarm.user.login(); return false;"\x3e '+swarm.te("Log in")+"\x3c/a\x3e "+swarm.te("now.")),e=$("div#all-test-definitions .test-definition-cells").html(""),d=swarm.t("You are an owner"),f;$.each(a.data.testdefinitions.sort(function(a,b){var c=a.name.toLowerCase(),f=b.name.toLowerCase();return c<f?-1:c>f?1:0}),function(){f=$($.render.swarmTestDefinitionSummary({testdefinition:this,ownerIconTitle:d}));var a=$("body").hasClass("super");$(f).data({testdefinition:this,
mutable:!1});null!==b&&0<$([b.id].concat(Object.keys(b.groups||{}))).filter(this.owners.map(function(a){return a.replace(/^swarm-group-/,"")})).length?f.addClass("owner").data("mutable",!0).appendTo(e).clone().appendTo(c).data({testdefinition:this,mutable:!0}):(this.shared||a)&&f.appendTo(e).data({mutable:a})});$(".test-definition-cells").each(function(){this.hasChildNodes()||$(this).html(swarm.te("No test definitions to show."))});$(".test-definition-cell .description").expander({slicePoint:100});
$(".test-definitions .toolbar button").prop("disabled",!1)},errorHandled:!0,error:function(a){var b=$("\x3cdiv\x3e").addClass("messages");a.responseJSON&&a.responseJSON.messages?$.each(a.responseJSON.messages,function(){b.append($("\x3cp\x3e").addClass("lead muted text-error").text(this.text))}):b.append($("\x3cp\x3e").addClass("lead muted text-error").text(a.statusText));$(".test-definitions").html(b)}})},showTestDefinitionModal:function(a){var b=$("#test-definition-modal-content"),c=a.testdefinition,
e=a.mutable||!1;b.html($.templates(swarm.testdefinition.formTemplate).render({title:a.title||swarm.t("Test definition"),mutable:e,testdefinition:c,supportedEncodings:swarm.testdefinition.supportedEncodings,supportedArguments:swarm.testdefinition.supportedArguments}));b.find("#owners").userMultiPicker({itemsContainer:b.find(".owners-list"),selected:c.owners.filter(function(a){return-1===a.indexOf("swarm-group-")}),inputName:"owners",enableGroups:!0,required:!0,groupInputName:"owners",useGroupKeys:!0,
excludeProjects:!0,disabled:b.find("#owners").hasClass("disabled"),selectedGroups:c.owners.filter(function(a){return-1!==a.indexOf("swarm-group-")})});var d=c.id;d||$("#iterate").prop("checked",!0);$.ajax({url:"/api/v10/workflows?testdefinitions\x3d"+d,success:function(a){0<a.data.workflows.length?$("#affected-workflows").empty().append($('\x3ca href\x3d"#workflow-list" data-toggle\x3d"collapse" data-target\x3d"#workflow-list"\x3e').addClass("workflow-count collapsed").append($("\x3ci\x3e").addClass("icon icon-chevron-down")).append($("\x3cspan\x3e").addClass("collapse-title").text(swarm.tpe("%d workflow uses this test definition",
"%d workflows use this test definition",a.data.workflows.length)))).append($("\x3cdiv\x3e").attr("id","workflow-list").addClass("collapse").append($.render.swarmTestDefinitionAffectedWorkflows({workflows:a.data.workflows}))):($("#btn-delete").prop("disabled",!e||!d),$(".tool-tip").removeAttr("title"),$("#affected-workflows p").removeAttr("class").text(swarm.t("No workflows use this test definition")))},errorHandled:!0,error:function(a){var b=$("\x3cdiv\x3e").addClass("messages");a.responseJSON&&a.responseJSON.messages?
$.each(a.responseJSON.messages,function(){b.append($("\x3cp\x3e").addClass("lead muted text-error").text(this.text))}):b.append($("\x3cp\x3e").addClass("lead muted text-error").text(a.statusText));$("#affected-workflows").html(b)}})},testDefinitionDropdown:function(a){var b=a.parent,c=a.prefix,e=a.testdefinitions,d=a.currentTestDefinitionId||-1,f=a.localStorageKey;a=a.noneSelected||swarm.te("No test definition");swarm.testdefinition.dropdown='\x3cdiv id\x3d"{{:prefix}}-testdefinition-control" class\x3d"" data-filter-key\x3d"testdefinition"\x3e\n    \x3cbutton id\x3d"{{:prefix}}-btn-testdefinition" type\x3d"button" class\x3d"btn btn-testdefinition dropdown-toggle" data-toggle\x3d"dropdown" aria-haspopup\x3d"true" title\x3d""\x3e\n        \x3cspan class\x3d"text testdefinition-label"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"caret"\x3e\x3c/span\x3e\n    \x3c/button\x3e\n    \x3cul class\x3d"dropdown-menu testdefinition-filter" aria-label\x3d"'+
swarm.te("Test definitions")+'"\x3e\n        \x3cli id\x3d"{{:prefix}}-no-testdefinition"\x3e\n            \x3ca href\x3d"#" class\x3d"btn-filter default" data-filter-value\x3d"{{:noneSelected}}"\x3e{{:noneSelected}}\x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"divider"\x3e\x3c/li\x3e\n        \x3cli class\x3d"{{:prefix}}-testdefinition-filter"\x3e\n            \x3cinput class\x3d"input-filter" data-filter-key\x3d"testdefinition" type\x3d"text" placeholder\x3d"'+swarm.te("Test definition")+
'"\x3e\n            \x3cbutton type\x3d"button" class\x3d"clear" style\x3d""\x3e\x3cspan\x3ex\x3c/span\x3e\x3c/button\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"divider"\x3e\x3c/li\x3e\n    \x3c/ul\x3e\n\x3c/div\x3e';swarm.testdefinition.dropdownmenuitem='\x3cli class\x3d"list-item" id\x3d"{{:prefix}}-{{:testdefinition.id}}"\x3e\n    \x3ca href\x3d"#" class\x3d"btn-filter btn-filter-testdefinition" data-filter-key\x3d"testdefinition" data-filter-value\x3d"{{:prefix}}-{{:testdefinition.id}}" data-short-label\x3d"{{:testdefinition.name}}"\x3e{{:testdefinition.name}}\x3c/a\x3e\n\x3c/li\x3e';
a=$($.templates(swarm.testdefinition.dropdown).render({prefix:c,noneSelected:a}));var g=swarm.user.getAuthenticatedUser(),l=$("body").hasClass("super"),h=a.find(".dropdown-menu"),m=b.find("#"+c+"-testdefinition-control").attr("class");b.find("#"+c+"-testdefinition-control").replaceWith(a);a.addClass(m);$.each(e.sort(function(a,b){var c=a.name.toLowerCase(),k=b.name.toLowerCase();return c<k?-1:c>k?1:0}),function(a,b){if(l||b.shared||parseInt(d,10)===b.id||null!==g&&0<$([g.id].concat(Object.keys(g.groups||
{}))).filter(this.owners.map(function(a){return a.replace(/^swarm-group-/,"")})).length){var e=$($.templates(swarm.testdefinition.dropdownmenuitem).render({prefix:c,testdefinition:b}));h.append(e)}});b=$("#"+c+"-no-testdefinition a");b=-1!==d?$("#"+c+"-"+d+" a"):b;a.find(".text").text($(b).data("short-label")||$(b).html());var j=function(a){a.find("a.btn-filter").each(function(){this.innerHTML=$(this).data("short-label");$(this).show()})};$("."+c+"-testdefinition-filter").on("click",".input-filter",
function(a){a.stopPropagation()});$("."+c+"-testdefinition-filter .input-filter").each(function(){var a=$(this),b=$("#"+c+"-testdefinition-control"),e=b.find(".dropdown-menu li.list-item");a.on("input change",function(){a.siblings(".clear").hide();a.val()?(a.siblings(".clear").show(),e.find("a.btn-filter").each(function(){$(this).hide()}),e.find("a.btn-filter:dataLabelContains('"+a.val()+"')").each(function(){var b=$(this).data("short-label"),c=RegExp(a.val(),"gi");this.innerHTML=b.replace(c,"\x3cb\x3e$\x26\x3c/b\x3e");
$(this).show()})):j(e,b)}).change();a.siblings(".clear").on("click",function(c){a.val("").data("filter-value","").change();c.stopPropagation();j(e,b)});a.on("keydown",function(c){var e=b.find(".dropdown-menu");13===c.keyCode?($(document).trigger("click.dropdown.data-api"),c.preventDefault()):27===c.keyCode?(a.val(""),$(document).trigger("click.dropdown.data-api"),c.preventDefault()):40===c.keyCode&&(c.stopImmediatePropagation(),b.find("ul.dropdown-menu").children().each(function(){$(this).removeClass("active")}),
c=e.find("li.list-item a:visible").first().closest("li").attr("id"),$("#"+c).find("a").focus().addClass("active"))});b.find("ul.dropdown-menu").on("keydown",function(a){if(40===a.keyCode){if(a.stopImmediatePropagation(),a.preventDefault(),a=$(document.activeElement).closest("li").nextAll("li").find("a:visible,input").first().closest("li").attr("id"))$(document.activeElement).removeClass("active"),$("#"+c+"-"+a).find("a,input").focus().addClass("active")}else 38===a.keyCode&&(a.stopImmediatePropagation(),
a.preventDefault(),(a=$(document.activeElement).closest("li").prevAll("li").children("a:visible,input").first().closest("li").attr("id"))||(a=$(document.activeElement).closest("ul").prevAll("li").children("a:visible,input").first().closest("li").attr("id")),$(document.activeElement).removeClass("active"),$("#"+c+"-"+a).find("a,input").focus().addClass("active"))});b.find(".dropdown-menu li:has(\x3e a) a").on("click",function(){localStorage.setItem(f,$(this).parent().attr("id"));j(e,b);var d=$("#"+
localStorage.getItem(f)+" a");a.val(d.data("filter-value")).change();$("#"+c+"-testdefinition").val(localStorage.getItem(f).replace(c+"-",""));d=!a.val()?b.find(".default"):d;$(d).closest(".dropdown-menu").length?$(d).is("input")?($(d).data("filter-value",$(d).val()),b.find(".text").text($(d).val())):($(d).addClass("active"),b.find(".text").text($(d).data("short-label")||$(d).html()),b.find(".input-filter").siblings(".clear").trigger("click")):$(d).toggleClass("active")})});a.find("button").prop("disabled",
!1);return a},defineTemplates:function(){$.templates({swarmTestDefinitionSummary:'\x3cdiv class\x3d"test-definition-cell pad1 test-definition-cell-{{:testdefinition.id}}"\x3e\n  \x3cdiv class\x3d"content pad2"\x3e\n    \x3cspan class\x3d"test-definition-name link"\x3e\n      \x3ci class\x3d"swarm-icon icon-test-definition-owner mutable-only" title\x3d"{{\x3eownerIconTitle}}"\x3e\x3c/i\x3e\n      \x3ca data-toggle\x3d"modal" data-target\x3d"#test-definition-modal-content" href\x3d"#" class\x3d"force-wrap name" data-original-title\x3d"" title\x3d""\x3e\n        {{\x3etestdefinition.name}}      \x3c/a\x3e\n    \x3c/span\x3e\n    \x3cp class\x3d"force-wrap description muted"\x3e\x3csmall\x3e{{\x3etestdefinition.description}}\x3c/small\x3e\x3c/p\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',
swarmTestDefinitionBodyEncoding:'\x3cdiv class\x3d"test-definition-body-encoding"\x3e\n  \x3clabel class\x3d"control-label radio span12"\x3e\n    \x3cdiv class\x3d"controls"\x3e\n        \x3cinput type\x3d"radio" name\x3d"encoding" value\x3d"{{\x3evalue}}" {{:value\x3d\x3d\x3d~current ? "checked\x3dchecked" : ""}} tabindex\x3d"8"/\x3e\n    \x3c/div\x3e\n    {{\x3elabel}}  \x3c/label\x3e\n\x3c/div\x3e\n',swarmTestDefinitionRequestHeader:'\x3cdiv class\x3d"control-group control-group-request-header"\x3e\n  \x3cdiv class\x3d"controls controls-row"\x3e\n    \x3cdiv class\x3d"span11 input-group-request-header"\x3e\n      \x3cdiv class\x3d"controls controls-row"\x3e\n        \x3cinput class\x3d"span6 header-name" type\x3d"text" value\x3d"{{\x3ekey}}" placeholder\x3d"'+
swarm.te("Name")+'" tabindex\x3d"9"/\x3e\n        \x3cinput class\x3d"span6 header-value" type\x3d"text" value\x3d"{{\x3eprop}}" placeholder\x3d"'+swarm.te("Value")+'"  tabindex\x3d"9"/\x3e\n        {{if key !\x3d\x3d "" }}        \x3cinput class\x3d"request-header-pair" name\x3d"headers[{{\x3ekey}}]" type\x3d"hidden" value\x3d"{{\x3eprop}}"/\x3e\n        {{/if}}      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"span1"\x3e\n      \x3cbutton class\x3d"btn remove-request-header" title\x3d"'+
swarm.te("Delete")+'" tabindex\x3d"10"\x3e\n        \x3ci class\x3d"icon icon-trash" /\x3e\n      \x3c/button\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n',swarmTestDefinitionAddHeader:'\x3cdiv class\x3d"control-group control-group-add-header"\x3e\n  \x3cdiv class\x3d"controls controls-row"\x3e\n    \x3ca class\x3d"span3{{if ~disabled}} disabled{{/if}}" href\x3d"#"\x3e'+swarm.te("+Add header")+'\x3c/a\x3e    {{if ~noHeaders}}\x3cp class\x3d"span9 muted"\x3e'+swarm.te("There are no custom headers for this request")+
"\x3c/p\x3e{{/if}}  \x3c/div\x3e\n\x3c/div\x3e\n",swarmTestDefinitionArgument:'\x3cdiv class\x3d"test-definition-argument"\x3e\n  \x3cspan class\x3d"id"\x3e{{\x3eid}}\x3c/span\x3e\n  \x3cspan class\x3d"description"\x3e{{\x3edescription}}\x3c/span\x3e\n\x3c/div\x3e\n',swarmTestDefinitionAffectedWorkflows:'\x3cul\x3e\n {{for workflows itemVar\x3d"~workflow"}}   \x3cli class\x3d"workflow"\x3e\x3cp class\x3d"workflow-name"\x3e\x3cspan\x3e{{:name}}\x3c/span\x3e\x3c/p\x3e\x3c/li\x3e\n {{/for}}\x3c/ul\x3e\n'});
swarm.testdefinition.formTemplate='\x3cform method\x3d"post" class\x3d"modal-form" {{if "" !\x3d\x3d testdefinition.id}} data-testdefinition-id\x3d"{{:testdefinition.id}}"{{/if}}\x3e\n  \x3cdiv class\x3d"container-fluid"\x3e\n    \x3cdiv class\x3d"row-fluid"\x3e\n      \x3cdiv class\x3d"modal-header"\x3e\n        \x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"modal" aria-hidden\x3d"true" tabindex\x3d"-1"\x3e\x3cspan\x3ex\x3c/span\x3e\x3c/button\x3e\n        \x3ch3 id\x3d"testdefinition-content-title" class\x3d"force-wrap"\x3e{{\x3etitle}}\x3c/h3\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row-fluid"\x3e\n      \x3cdiv class\x3d"modal-body"\x3e\n        \x3cdiv class\x3d"messages"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"test-definition"\x3e\n          \x3cdiv class\x3d"column span4"\x3e\n            \x3cdiv class\x3d"control-group"\x3e\n              \x3clabel class\x3d"control-label" for\x3d"name"\x3e'+
swarm.t("Name")+'\x3c/label\x3e\n              \x3cdiv class\x3d"controls"\x3e\n                \x3cinput class\x3d"span12" autocomplete\x3d"off" type\x3d"text" name\x3d"name" id\x3d"name" {{:mutable ? "" :"disabled\x3ddisabled"}} value\x3d"{{\x3etestdefinition.name}}" placeholder\x3d"'+swarm.t("Name")+'" required\x3d"required" tabindex\x3d"1"/\x3e\n              \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"control-group"\x3e\n              \x3clabel class\x3d"control-label" for\x3d"description"\x3e'+
swarm.t("Description")+'\x3c/label\x3e\n              \x3cdiv class\x3d"controls"\x3e\n                \x3ctextarea class\x3d"span12" rows\x3d"10" name\x3d"description" {{:mutable ? "" :"disabled\x3ddisabled"}} id\x3d"description" placeholder\x3d"'+swarm.t("Description")+'" tabindex\x3d"2"\x3e{{\x3etestdefinition.description}}\x3c/textarea\x3e\n              \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"control-group control-group-owners"\x3e\n              \x3clabel for\x3d"owners" class\x3d"control-label"\x3e'+
swarm.t("Owners")+'\x3c/label\x3e\n              \x3cdiv class\x3d"controls"\x3e\n                \x3cdiv class\x3d"body in collapse""\x3e\n                  \x3cdiv class\x3d"input-prepend" clear\x3d"both"\x3e\n                    \x3cspan class\x3d"add-on"\x3e\x3ci class\x3d"icon-user"\x3e\x3c/i\x3e\x3c/span\x3e\n                    \x3cinput type\x3d"text" class\x3d"span12 multipicker-input{{:mutable ? "" :" disabled"}}" id\x3d"owners" data-items\x3d"100" data-selected\x3d"[]" placeholder\x3d"'+
swarm.t("Add an Owner")+'" tabindex\x3d"3"/\x3e\n                  \x3c/div\x3e\n                  \x3cdiv class\x3d"owners-list multipicker-items-container clearfix"\x3e\x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"control-group control-group-shared"\x3e\n              \x3cdiv class\x3d"controls"\x3e\n                \x3cdiv class\x3d"body in collapse"\x3e\n                  \x3cinput type\x3d"hidden" value\x3d"0" name\x3d"shared"\x3e\n                  \x3clabel class\x3d"control-label{{:mutable ? "" :" disabled"}}"\x3e\n                    \x3cinput {{:mutable ? "" :"disabled\x3ddisabled"}} type\x3d"checkbox" name\x3d"shared" id\x3d"shared-test-definition" {{:testdefinition.shared ? "checked\x3dchecked" : ""}} value\x3d"1"  tabindex\x3d"4"/\x3e\n                    '+
swarm.t("Shared with others")+'                  \x3c/label\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n            \x3c/div\x3e\n          \x3c/div\x3e\n          \x3cdiv class\x3d"column span8"\x3e\n            \x3cdiv class\x3d"control-group control-group-test-definition-values"\x3e\n              {{if mutable }}              \x3cdiv class\x3d"row-fluid"\x3e\n                \x3cdiv class\x3d"column span8"\x3e\n                  \x3cdiv class\x3d"control-group control-group-request-url"\x3e\n                    \x3clabel class\x3d"control-label" for\x3d"url"\x3e'+
swarm.te("URL")+'\x3c/label\x3e\n                    \x3cdiv class\x3d"controls"\x3e\n                      \x3cinput class\x3d"span12" type\x3d"text" name\x3d"url" value\x3d"{{\x3etestdefinition.url}}" required\x3d"required" placeholder\x3d"'+swarm.t("Request URL")+'" tabindex\x3d"5"/\x3e\n                    \x3c/div\x3e\n                  \x3c/div\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"column span4"\x3e\n                  \x3cdiv class\x3d"control-group control-group-request-timeout"\x3e\n                    \x3clabel for\x3d"timeout"\x3e'+
swarm.te("Timeout(seconds)")+'\x3c/label\x3e\n                    \x3cdiv class\x3d"controls"\x3e\n                      \x3cinput class\x3d"input-small" type\x3d"text" name\x3d"timeout" value\x3d"{{\x3etestdefinition.timeout}}" placeholder\x3d"'+swarm.t("Timeout")+'" tabindex\x3d"6"/\x3e\n                    \x3c/div\x3e\n                  \x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n              \x3cdiv class\x3d"row-fluid"\x3e\n                \x3cdiv class\x3d"column span8"\x3e\n                  \x3cdiv class\x3d"control-group control-group-request-body"\x3e\n                    \x3clabel class\x3d"control-label" for\x3d"body"\x3e'+
swarm.te("Body")+'\x3c/label\x3e\n                    \x3cdiv class\x3d"controls"\x3e\n                      \x3ctextarea class\x3d"span12" rows\x3d"10" name\x3d"body" placeholder\x3d"'+swarm.t("Request Body")+'" tabindex\x3d"7"\x3e{{\x3etestdefinition.body}}\x3c/textarea\x3e\n                    \x3c/div\x3e\n                  \x3c/div\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"column span4"\x3e\n                  \x3cdiv class\x3d"control-group control-group-body-encoding"\x3e\n                    \x3clabel class\x3d"control-group-heading"\x3e'+
swarm.te("Body encoding")+'\x3c/label\x3e\n                    {{for supportedEncodings ~current\x3dtestdefinition.encoding||"json" tmpl\x3d"swarmTestDefinitionBodyEncoding" /}}                  \x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n              \x3cdiv class\x3d"row-fluid"\x3e\n                \x3cdiv class\x3d"column span8"\x3e\n                  \x3cdiv class\x3d"control-group control-group-iterate"\x3e\n                    \x3cdiv class\x3d"controls"\x3e\n                      \x3cinput type\x3d"hidden" value\x3d"0" name\x3d"iterate"\x3e\n                      \x3clabel class\x3d"control-label"\x3e\n                        \x3cinput type\x3d"checkbox" name\x3d"iterate" id\x3d"iterate" {{:testdefinition.iterate ? "checked\x3dchecked" : ""}} value\x3d"1"  tabindex\x3d"4"/\x3e\n                        '+
swarm.t("Iterate tests for affected projects and branches\n")+'                        \x3ca class\x3d"help" href\x3d"'+swarm.assetUrl("/docs/Content/Swarm/test-add.html#test-add_iterate-tests")+'" target\x3d"_swarm_docs"\x3e\x3cspan\x3e?\x3c/span\x3e\x3c/a\x3e                      \x3c/label\x3e\n                    \x3c/div\x3e\n                  \x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n              \x3cdiv class\x3d"row-fluid"\x3e\n                \x3cdiv class\x3d"column span8"\x3e\n                  \x3cdiv class\x3d"control-group control-group-request-headers"\x3e\n                    \x3cdiv class\x3d"span11 request-header-heading{{if !testdefinition.headers}} no-headers{{/if}}"\x3e\n                      \x3cdiv class\x3d"controls controls-row"\x3e\n                        \x3clabel class\x3d"control-label span6"\x3e'+
swarm.te("Header")+'\x3c/label\x3e                        \x3clabel class\x3d"control-label span6"\x3e'+swarm.te("Value")+'\x3c/label\x3e                      \x3c/div\x3e\n                    \x3c/div\x3e\n                    {{props testdefinition.headers tmpl\x3d"swarmTestDefinitionRequestHeader" /}}                    {{include ~noHeaders\x3d!testdefinition.headers tmpl\x3d"swarmTestDefinitionAddHeader" /}}                  \x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n              \x3cdiv class\x3d"row-fluid"\x3e\n                \x3cdiv class\x3d"column span12"\x3e\n                  \x3ch4\x3e'+
swarm.t("Standard arguments (URL and Body fields only)")+'                    \x3ca class\x3d"help" href\x3d"'+swarm.assetUrl("/docs/Content/Swarm/test-add.html#Pass_special_arguments_to_your_test_suite")+'" target\x3d"_swarm_docs"\x3e\x3cspan\x3e?\x3c/span\x3e\x3c/a\x3e                  \x3c/h4\x3e\n                  {{for supportedArguments tmpl\x3d"swarmTestDefinitionArgument" /}}                \x3c/div\x3e\n              \x3c/div\x3e\n            {{else}}              \x3cp class\x3d"private-message"\x3e'+
swarm.t("Some details of this test definition are private and cannot be displayed. Only the test definition owners have access to these details.")+'\x3c/p\x3e\n            {{/if}}            \x3c/div\x3e\n          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row-fluid"\x3e\n      \x3cdiv id\x3d"affected-workflows"\x3e\x3cp class\x3d"loading animate"\x3e'+swarm.t("Loading...")+'\x3c/p\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"row-fluid"\x3e\n      \x3cdiv class\x3d"modal-footer"\x3e\n        \x3cdiv class\x3d"control-group group-buttons text-left"\x3e\n          \x3cdiv class\x3d"controls"\x3e\n           {{if mutable }}             \x3cbutton type\x3d"submit" class\x3d"btn btn-mlarge btn-primary btn-save" tabindex\x3d"11"\x3e'+
swarm.t("Save")+'\x3c/button\x3e\n             \x3cbutton type\x3d"button" class\x3d"btn btn-mlarge" data-dismiss\x3d"modal" aria-hidden\x3d"true" tabindex\x3d"11"\x3e'+swarm.t("Cancel")+'\x3c/button\x3e\n             {{if testdefinition.id }}             \x3cdiv class\x3d"tool-tip" data-toggle\x3d"tooltip" data-placement\x3d"top" title\x3d"'+swarm.t("Owners can delete a test definition when not in use")+'"\x3e\n               \x3cbutton disabled\x3d"disabled" id\x3d"btn-delete" type\x3d"button" class\x3d"btn btn-mlarge btn-danger" aria-hidden\x3d"true" tabindex\x3d"11"\x3e'+
swarm.t("Delete")+'\x3c/button\x3e\n             \x3c/div\x3e\n             {{/if}}           {{else}}             \x3cbutton type\x3d"button" class\x3d"btn btn-mlarge btn-primary" data-dismiss\x3d"modal" aria-hidden\x3d"true" tabindex\x3d"11"\x3e'+swarm.t("Close")+"\x3c/button\x3e\n           {{/if}}          \x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/form\x3e\n"}};